var lI=Object.defineProperty;var uI=(e,t,n)=>t in e?lI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wa=(e,t,n)=>(uI(e,typeof t!="symbol"?t+"":t,n),n);import{aK as _v,aL as ys,aM as Ir,aN as xS,aO as Dd,aP as Vy,aQ as Sf,aR as zp,aS as TM,aT as Iu,aU as Uu,ah as ci,aV as sI,aW as pc,aX as Lw,aY as cI,aZ as Wy,a_ as Lu,a$ as zy,b0 as fI,b1 as Mv,b2 as a_,aF as Gu,b3 as dI,b4 as Hp,b5 as MM,b6 as Xp,b7 as Id,z as Fw,b8 as Zr,b9 as l_,ba as Hy,bb as ms,bc as No,bd as Of,be as hc,bf as Pv,bg as Xy,bh as bs,bi as Sa,bj as qr,bk as u_,bl as pI,bm as PM,bn as Af,bo as kM,bp as NM,bq as Q1,br as Zi,ai as Fu,bs as hI,bt as vI,bu as s_,bv as RM,bw as Yp,bx as jM,ac as $w,by as kv,A as Nv,bz as Cy,bA as Yy,af as CM,bB as DM,bC as yI,bD as bv,bE as mI,bF as IM,bG as LM,bH as gI,bI as FM,bJ as _I,bK as bI,bL as wI,bM as EI,bN as OI,bO as Mg,bP as xI,bQ as SI,bR as AI,bS as $M,bT as BM,bU as UM,bV as GM,bW as Bw,bX as TI,bY as qy,bZ as VM,b_ as MI,b$ as WM,c0 as zM,c1 as PI,c2 as kI,c3 as NI,c4 as $p,ae as RI,c5 as jI,c6 as CI,aH as DI,c7 as II,ag as LI,c8 as FI,c9 as $I,ca as BI,cb as UI,ab as GI,aj as VI,cc as WI,aG as zI,cd as HI,ce as XI,cf as YI,cg as qI,ch as KI,ci as ZI,aa as JI,cj as QI,ck as eL,ak as tL,cl as nL,p as rL,cm as oL,cn as iL,co as aL,cp as Lr,cq as bt,cr as go,cs as lL,ct as Uo,cu as le,cv as Pl,cw as wv,cx as Xe,cy as Rn,cz as F,cA as U,cB as he,cC as Bo,cD as zi,cE as En,cF as Bt,cG as iv,cH as yr,cI as av,cJ as $e,cK as Tt,cL as rg,cM as SS,cN as nr,cO as AS,cP as vg,cQ as Aa,cR as Rv,cS as Vu,cT as Qe,cU as Ev,cV as sc,cW as uL,cX as HM,cY as xa,cZ as Qt,c_ as Uw,c$ as si,d0 as c_,d1 as Pf,d2 as qp,T as sL,d3 as f_,d4 as Bp,d5 as cL,d6 as fL,d7 as XM,d8 as dL,d9 as YM,da as pL,db as hL,dc as vL,dd as yL,de as mL,df as gL,dg as _L,dh as Ov,di as bL,dj as Up,dk as wL,dl as Gw,dm as EL,dn as b1,dp as Oy,dq as OL,dr as qM,ds as xL,dt as TS,du as og,dv as SL,dw as AL,dx as TL,Q as gy,dy as ML,dz as KM,dA as ew,dB as PL,dC as w1,dD as kL,dE as NL}from"./index-5edadd4e.js";import{_ as d_,a as RL,b as ZM,c as jL,d as CL}from"./ReasoningParamSettingDialog.vue_vue_type_script_setup_true_lang-5fb16517.js";import{b as JM,c as Kp,v as jv,d as DL,e as IL,g as QM,f as MS,a as LL,r as FL,h as $L}from"./reduce-df9b4396.js";import{h as BL,i as e2,j as UL,k as GL,l as VL,n as WL,o as zL,p as HL,q as XL,z as YL,f as qL,s as KL,a as ZL,m as JL,b as QL,d as e3,e as t3,g as n3,c as r3,r as o3,u as i3}from"./zipObject-519653b1.js";import{S as Vw,_ as a3,a as l3}from"./sortable.esm-54ee3424.js";var u3=0/0;function PS(e){return typeof e=="number"?e:_v(e)?u3:+e}function p_(e,t){return function(n,o){var r;if(n===void 0&&o===void 0)return t;if(n!==void 0&&(r=n),o!==void 0){if(r===void 0)return o;typeof n=="string"||typeof o=="string"?(n=ys(n),o=ys(o)):(n=PS(n),o=PS(o)),r=e(n,o)}return r}}var s3=p_(function(e,t){return e+t},0);const c3=s3;var f3="Expected a function";function d3(e,t){if(typeof t!="function")throw new TypeError(f3);return e=Ir(e),function(){if(--e<1)return t.apply(this,arguments)}}var p3=xS&&new xS;const Pg=p3;var h3=Pg?function(e,t){return Pg.set(e,t),e}:Dd;const t2=h3;function Dy(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Vy(e.prototype),o=e.apply(n,t);return Sf(o)?o:n}}var v3=1;function y3(e,t,n){var o=t&v3,r=Dy(e);function s(){var c=this&&this!==zp&&this instanceof s?r:e;return c.apply(o?n:this,arguments)}return s}var m3=Math.max;function n2(e,t,n,o){for(var r=-1,s=e.length,c=n.length,v=-1,h=t.length,g=m3(s-c,0),_=Array(h+g),w=!o;++v<h;)_[v]=t[v];for(;++r<c;)(w||r<s)&&(_[n[r]]=e[r]);for(;g--;)_[v++]=e[r++];return _}var g3=Math.max;function r2(e,t,n,o){for(var r=-1,s=e.length,c=-1,v=n.length,h=-1,g=t.length,_=g3(s-v,0),w=Array(_+g),O=!o;++r<_;)w[r]=e[r];for(var S=r;++h<g;)w[S+h]=t[h];for(;++c<v;)(O||r<s)&&(w[S+n[c]]=e[r++]);return w}function _3(e,t){for(var n=e.length,o=0;n--;)e[n]===t&&++o;return o}function h_(){}var b3=4294967295;function Yr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=b3,this.__views__=[]}Yr.prototype=Vy(h_.prototype);Yr.prototype.constructor=Yr;var w3=Pg?function(e){return Pg.get(e)}:TM;const Ww=w3;var E3={};const fv=E3;var O3=Object.prototype,x3=O3.hasOwnProperty;function yg(e){for(var t=e.name+"",n=fv[t],o=x3.call(fv,t)?n.length:0;o--;){var r=n[o],s=r.func;if(s==null||s==e)return r.name}return t}function $u(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}$u.prototype=Vy(h_.prototype);$u.prototype.constructor=$u;function o2(e){if(e instanceof Yr)return e.clone();var t=new $u(e.__wrapped__,e.__chain__);return t.__actions__=Iu(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var S3=Object.prototype,A3=S3.hasOwnProperty;function ae(e){if(Uu(e)&&!ci(e)&&!(e instanceof Yr)){if(e instanceof $u)return e;if(A3.call(e,"__wrapped__"))return o2(e)}return new $u(e)}ae.prototype=h_.prototype;ae.prototype.constructor=ae;function tw(e){var t=yg(e),n=ae[t];if(typeof n!="function"||!(t in Yr.prototype))return!1;if(e===n)return!0;var o=Ww(n);return!!o&&e===o[0]}var T3=sI(t2);const i2=T3;var M3=/\{\n\/\* \[wrapped with (.+)\] \*/,P3=/,? & /;function k3(e){var t=e.match(M3);return t?t[1].split(P3):[]}var N3=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function R3(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(N3,`{
/* [wrapped with `+t+`] */
`)}var j3=1,C3=2,D3=8,I3=16,L3=32,F3=64,$3=128,B3=256,U3=512,G3=[["ary",$3],["bind",j3],["bindKey",C3],["curry",D3],["curryRight",I3],["flip",U3],["partial",L3],["partialRight",F3],["rearg",B3]];function V3(e,t){return pc(G3,function(n){var o="_."+n[0];t&n[1]&&!Lw(e,o)&&e.push(o)}),e.sort()}function a2(e,t,n){var o=t+"";return cI(e,R3(o,V3(k3(o),n)))}var W3=1,z3=2,H3=4,X3=8,kS=32,NS=64;function l2(e,t,n,o,r,s,c,v,h,g){var _=t&X3,w=_?c:void 0,O=_?void 0:c,S=_?s:void 0,P=_?void 0:s;t|=_?kS:NS,t&=~(_?NS:kS),t&H3||(t&=~(W3|z3));var A=[e,t,r,S,w,P,O,v,h,g],R=n.apply(void 0,A);return tw(e)&&i2(R,A),R.placeholder=o,a2(R,e,t)}function Cv(e){var t=e;return t.placeholder}var Y3=Math.min;function q3(e,t){for(var n=e.length,o=Y3(t.length,n),r=Iu(e);o--;){var s=t[o];e[o]=Wy(s,n)?r[s]:void 0}return e}var RS="__lodash_placeholder__";function jd(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n];(c===t||c===RS)&&(e[n]=RS,s[r++]=n)}return s}var K3=1,Z3=2,J3=8,Q3=16,e8=128,t8=512;function v_(e,t,n,o,r,s,c,v,h,g){var _=t&e8,w=t&K3,O=t&Z3,S=t&(J3|Q3),P=t&t8,A=O?void 0:Dy(e);function R(){for(var D=arguments.length,N=Array(D),$=D;$--;)N[$]=arguments[$];if(S)var Y=Cv(R),K=_3(N,Y);if(o&&(N=n2(N,o,r,S)),s&&(N=r2(N,s,c,S)),D-=K,S&&D<g){var X=jd(N,Y);return l2(e,t,v_,R.placeholder,n,N,X,v,h,g-D)}var te=w?n:this,W=O?te[e]:e;return D=N.length,v?N=q3(N,v):P&&D>1&&N.reverse(),_&&h<D&&(N.length=h),this&&this!==zp&&this instanceof R&&(W=A||Dy(W)),W.apply(te,N)}return R}function n8(e,t,n){var o=Dy(e);function r(){for(var s=arguments.length,c=Array(s),v=s,h=Cv(r);v--;)c[v]=arguments[v];var g=s<3&&c[0]!==h&&c[s-1]!==h?[]:jd(c,h);if(s-=g.length,s<n)return l2(e,t,v_,r.placeholder,void 0,c,g,void 0,void 0,n-s);var _=this&&this!==zp&&this instanceof r?o:e;return Lu(_,this,c)}return r}var r8=1;function o8(e,t,n,o){var r=t&r8,s=Dy(e);function c(){for(var v=-1,h=arguments.length,g=-1,_=o.length,w=Array(_+h),O=this&&this!==zp&&this instanceof c?s:e;++g<_;)w[g]=o[g];for(;h--;)w[g++]=arguments[++v];return Lu(O,r?n:this,w)}return c}var jS="__lodash_placeholder__",E1=1,i8=2,a8=4,CS=8,py=128,DS=256,l8=Math.min;function u8(e,t){var n=e[1],o=t[1],r=n|o,s=r<(E1|i8|py),c=o==py&&n==CS||o==py&&n==DS&&e[7].length<=t[8]||o==(py|DS)&&t[7].length<=t[8]&&n==CS;if(!(s||c))return e;o&E1&&(e[2]=t[2],r|=n&E1?0:a8);var v=t[3];if(v){var h=e[3];e[3]=h?n2(h,v,t[4]):v,e[4]=h?jd(e[3],jS):t[4]}return v=t[5],v&&(h=e[5],e[5]=h?r2(h,v,t[6]):v,e[6]=h?jd(e[5],jS):t[6]),v=t[7],v&&(e[7]=v),o&py&&(e[8]=e[8]==null?t[8]:l8(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=r,e}var s8="Expected a function",IS=1,c8=2,O1=8,x1=16,S1=32,LS=64,FS=Math.max;function kf(e,t,n,o,r,s,c,v){var h=t&c8;if(!h&&typeof e!="function")throw new TypeError(s8);var g=o?o.length:0;if(g||(t&=~(S1|LS),o=r=void 0),c=c===void 0?c:FS(Ir(c),0),v=v===void 0?v:Ir(v),g-=r?r.length:0,t&LS){var _=o,w=r;o=r=void 0}var O=h?void 0:Ww(e),S=[e,t,n,o,r,_,w,s,c,v];if(O&&u8(S,O),e=S[0],t=S[1],n=S[2],o=S[3],r=S[4],v=S[9]=S[9]===void 0?h?0:e.length:FS(S[9]-g,0),!v&&t&(O1|x1)&&(t&=~(O1|x1)),!t||t==IS)var P=y3(e,t,n);else t==O1||t==x1?P=n8(e,t,v):(t==S1||t==(IS|S1))&&!r.length?P=o8(e,t,n,o):P=v_.apply(void 0,S);var A=O?t2:i2;return a2(A(P,S),e,t)}var f8=128;function u2(e,t,n){return t=n?void 0:t,t=e&&t==null?e.length:t,kf(e,f8,void 0,void 0,void 0,void 0,t)}var d8=Object.prototype,p8=d8.hasOwnProperty,h8=zy(function(e,t){if(fI(t)||Mv(t)){a_(t,Gu(t),e);return}for(var n in t)p8.call(t,n)&&dI(e,n,t[n])});const v8=h8;var y8=zy(function(e,t){a_(t,Hp(t),e)});const $S=y8;var m8=zy(function(e,t,n,o){a_(t,Hp(t),e,o)});const kg=m8;var g8=zy(function(e,t,n,o){a_(t,Gu(t),e,o)});const _8=g8;function zw(e,t){for(var n=-1,o=t.length,r=Array(o),s=e==null;++n<o;)r[n]=s?void 0:MM(e,t[n]);return r}var b8=Xp(zw);const w8=b8;var E8="[object DOMException]",O8="[object Error]";function Hw(e){if(!Uu(e))return!1;var t=Id(e);return t==O8||t==E8||typeof e.message=="string"&&typeof e.name=="string"&&!Fw(e)}var x8=Zr(function(e,t){try{return Lu(e,void 0,t)}catch(n){return Hw(n)?n:new Error(n)}});const s2=x8;var S8="Expected a function";function c2(e,t){var n;if(typeof t!="function")throw new TypeError(S8);return e=Ir(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}}var A8=1,T8=32,Xw=Zr(function(e,t,n){var o=A8;if(n.length){var r=jd(n,Cv(Xw));o|=T8}return kf(e,o,t,n,r)});Xw.placeholder={};const f2=Xw;var M8=Xp(function(e,t){return pc(t,function(n){n=l_(n),Hy(e,n,f2(e[n],e))}),e});const P8=M8;var k8=1,N8=2,R8=32,Yw=Zr(function(e,t,n){var o=k8|N8;if(n.length){var r=jd(n,Cv(Yw));o|=R8}return kf(t,o,e,n,r)});Yw.placeholder={};const j8=Yw;function Ld(e,t,n){var o=e.length;return n=n===void 0?o:n,!t&&n>=o?e:ms(e,t,n)}var C8="\\ud800-\\udfff",D8="\\u0300-\\u036f",I8="\\ufe20-\\ufe2f",L8="\\u20d0-\\u20ff",F8=D8+I8+L8,$8="\\ufe0e\\ufe0f",B8="\\u200d",U8=RegExp("["+B8+C8+F8+$8+"]");function Dv(e){return U8.test(e)}function G8(e){return e.split("")}var d2="\\ud800-\\udfff",V8="\\u0300-\\u036f",W8="\\ufe20-\\ufe2f",z8="\\u20d0-\\u20ff",H8=V8+W8+z8,X8="\\ufe0e\\ufe0f",Y8="["+d2+"]",nw="["+H8+"]",rw="\\ud83c[\\udffb-\\udfff]",q8="(?:"+nw+"|"+rw+")",p2="[^"+d2+"]",h2="(?:\\ud83c[\\udde6-\\uddff]){2}",v2="[\\ud800-\\udbff][\\udc00-\\udfff]",K8="\\u200d",y2=q8+"?",m2="["+X8+"]?",Z8="(?:"+K8+"(?:"+[p2,h2,v2].join("|")+")"+m2+y2+")*",J8=m2+y2+Z8,Q8="(?:"+[p2+nw+"?",nw,h2,v2,Y8].join("|")+")",eF=RegExp(rw+"(?="+rw+")|"+Q8+J8,"g");function tF(e){return e.match(eF)||[]}function gs(e){return Dv(e)?tF(e):G8(e)}function g2(e){return function(t){t=No(t);var n=Dv(t)?gs(t):void 0,o=n?n[0]:t.charAt(0),r=n?Ld(n,1).join(""):t.slice(1);return o[e]()+r}}var nF=g2("toUpperCase");const qw=nF;function _2(e){return qw(No(e).toLowerCase())}function Kw(e){return function(t){return e==null?void 0:e[t]}}var rF={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},oF=Kw(rF);const iF=oF;var aF=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,lF="\\u0300-\\u036f",uF="\\ufe20-\\ufe2f",sF="\\u20d0-\\u20ff",cF=lF+uF+sF,fF="["+cF+"]",dF=RegExp(fF,"g");function b2(e){return e=No(e),e&&e.replace(aF,iF).replace(dF,"")}var pF=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function hF(e){return e.match(pF)||[]}var vF=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function yF(e){return vF.test(e)}var w2="\\ud800-\\udfff",mF="\\u0300-\\u036f",gF="\\ufe20-\\ufe2f",_F="\\u20d0-\\u20ff",bF=mF+gF+_F,E2="\\u2700-\\u27bf",O2="a-z\\xdf-\\xf6\\xf8-\\xff",wF="\\xac\\xb1\\xd7\\xf7",EF="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",OF="\\u2000-\\u206f",xF=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",x2="A-Z\\xc0-\\xd6\\xd8-\\xde",SF="\\ufe0e\\ufe0f",S2=wF+EF+OF+xF,A2="['’]",BS="["+S2+"]",AF="["+bF+"]",T2="\\d+",TF="["+E2+"]",M2="["+O2+"]",P2="[^"+w2+S2+T2+E2+O2+x2+"]",MF="\\ud83c[\\udffb-\\udfff]",PF="(?:"+AF+"|"+MF+")",kF="[^"+w2+"]",k2="(?:\\ud83c[\\udde6-\\uddff]){2}",N2="[\\ud800-\\udbff][\\udc00-\\udfff]",Qh="["+x2+"]",NF="\\u200d",US="(?:"+M2+"|"+P2+")",RF="(?:"+Qh+"|"+P2+")",GS="(?:"+A2+"(?:d|ll|m|re|s|t|ve))?",VS="(?:"+A2+"(?:D|LL|M|RE|S|T|VE))?",R2=PF+"?",j2="["+SF+"]?",jF="(?:"+NF+"(?:"+[kF,k2,N2].join("|")+")"+j2+R2+")*",CF="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",DF="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",IF=j2+R2+jF,LF="(?:"+[TF,k2,N2].join("|")+")"+IF,FF=RegExp([Qh+"?"+M2+"+"+GS+"(?="+[BS,Qh,"$"].join("|")+")",RF+"+"+VS+"(?="+[BS,Qh+US,"$"].join("|")+")",Qh+"?"+US+"+"+GS,Qh+"+"+VS,DF,CF,T2,LF].join("|"),"g");function $F(e){return e.match(FF)||[]}function C2(e,t,n){return e=No(e),t=n?void 0:t,t===void 0?yF(e)?$F(e):hF(e):e.match(t)||[]}var BF="['’]",UF=RegExp(BF,"g");function Iv(e){return function(t){return JM(C2(b2(t).replace(UF,"")),e,"")}}var GF=Iv(function(e,t,n){return t=t.toLowerCase(),e+(n?_2(t):t)});const VF=GF;var WF=zp.isFinite,zF=Math.min;function Zw(e){var t=Math[e];return function(n,o){if(n=Of(n),o=o==null?0:zF(Ir(o),292),o&&WF(n)){var r=(No(n)+"e").split("e"),s=t(r[0]+"e"+(+r[1]+o));return r=(No(s)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return t(n)}}var HF=Zw("ceil");const XF=HF;function D2(e){var t=ae(e);return t.__chain__=!0,t}var YF=Math.ceil,qF=Math.max;function KF(e,t,n){(n?hc(e,t,n):t===void 0)?t=1:t=qF(Ir(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var r=0,s=0,c=Array(YF(o/t));r<o;)c[s++]=ms(e,r,r+=t);return c}function Zp(e,t,n){return e===e&&(n!==void 0&&(e=e<=n?e:n),t!==void 0&&(e=e>=t?e:t)),e}function ZF(e,t,n){return n===void 0&&(n=t,t=void 0),n!==void 0&&(n=Of(n),n=n===n?n:0),t!==void 0&&(t=Of(t),t=t===t?t:0),Zp(Of(e),t,n)}var JF=1,QF=4;function e4(e,t){return t=typeof t=="function"?t:void 0,Pv(e,JF|QF,t)}var t4=4;function n4(e,t){return t=typeof t=="function"?t:void 0,Pv(e,t4,t)}function r4(){return new $u(this.value(),this.__chain__)}function o4(e){for(var t=-1,n=e==null?0:e.length,o=0,r=[];++t<n;){var s=e[t];s&&(r[o++]=s)}return r}function i4(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return Xy(ci(n)?Iu(n):[n],bs(t,1))}var a4="Expected a function";function l4(e){var t=e==null?0:e.length,n=qr;return e=t?Sa(e,function(o){if(typeof o[1]!="function")throw new TypeError(a4);return[n(o[0]),o[1]]}):[],Zr(function(o){for(var r=-1;++r<t;){var s=e[r];if(Lu(s[0],this,o))return Lu(s[1],this,o)}})}function I2(e,t,n){var o=n.length;if(e==null)return!o;for(e=Object(e);o--;){var r=n[o],s=t[r],c=e[r];if(c===void 0&&!(r in e)||!s(c))return!1}return!0}function u4(e){var t=Gu(e);return function(n){return I2(n,e,t)}}var s4=1;function c4(e){return u4(Pv(e,s4))}function f4(e,t){return t==null||I2(e,t,Gu(t))}function d4(e,t,n,o){for(var r=-1,s=e==null?0:e.length;++r<s;){var c=e[r];t(o,c,n(c),e)}return o}function p4(e,t,n,o){return u_(e,function(r,s,c){t(o,r,n(r),c)}),o}function y_(e,t){return function(n,o){var r=ci(n)?d4:p4,s=t?t():{};return r(n,e,qr(o),s)}}var h4=Object.prototype,v4=h4.hasOwnProperty,y4=y_(function(e,t,n){v4.call(e,n)?++e[n]:Hy(e,n,1)});const m4=y4;function g4(e,t){var n=Vy(e);return t==null?n:pI(n,t)}var _4=8;function Jw(e,t,n){t=n?void 0:t;var o=kf(e,_4,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Jw.placeholder,o}Jw.placeholder={};var b4=16;function Qw(e,t,n){t=n?void 0:t;var o=kf(e,b4,void 0,void 0,void 0,void 0,void 0,t);return o.placeholder=Qw.placeholder,o}Qw.placeholder={};function w4(e,t){return e==null||e!==e?t:e}function L2(e,t,n,o,r,s){return Sf(e)&&Sf(t)&&(s.set(t,e),PM(e,t,void 0,L2,s),s.delete(t)),e}var E4=zy(function(e,t,n,o){PM(e,t,n,o)});const F2=E4;var O4=Zr(function(e){return e.push(void 0,L2),Lu(F2,void 0,e)});const x4=O4;var S4="Expected a function";function $2(e,t,n){if(typeof e!="function")throw new TypeError(S4);return setTimeout(function(){e.apply(void 0,n)},t)}var A4=Zr(function(e,t){return $2(e,1,t)});const T4=A4;var M4=Zr(function(e,t,n){return $2(e,Of(t)||0,n)});const P4=M4;var k4=200;function Ky(e,t,n,o){var r=-1,s=Lw,c=!0,v=e.length,h=[],g=t.length;if(!v)return h;n&&(t=Sa(t,Af(n))),o?(s=NM,c=!1):t.length>=k4&&(s=Q1,c=!1,t=new kM(t));e:for(;++r<v;){var _=e[r],w=n==null?_:n(_);if(_=o||_!==0?_:0,c&&w===w){for(var O=g;O--;)if(t[O]===w)continue e;h.push(_)}else s(t,w,o)||h.push(_)}return h}var N4=Zr(function(e,t){return Zi(e)?Ky(e,bs(t,1,Zi,!0)):[]});const R4=N4;var j4=Zr(function(e,t){var n=Fu(t);return Zi(n)&&(n=void 0),Zi(e)?Ky(e,bs(t,1,Zi,!0),qr(n)):[]});const C4=j4;var D4=Zr(function(e,t){var n=Fu(t);return Zi(n)&&(n=void 0),Zi(e)?Ky(e,bs(t,1,Zi,!0),void 0,n):[]});const I4=D4;var L4=p_(function(e,t){return e/t},1);const F4=L4;function $4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),ms(e,t<0?0:t,o)):[]}function B4(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,ms(e,0,t<0?0:t)):[]}function m_(e,t,n,o){for(var r=e.length,s=o?r:-1;(o?s--:++s<r)&&t(e[s],s,e););return n?ms(e,o?0:s,o?s+1:r):ms(e,o?s+1:0,o?r:s)}function U4(e,t){return e&&e.length?m_(e,qr(t),!0,!0):[]}function G4(e,t){return e&&e.length?m_(e,qr(t),!0):[]}function V4(e,t){for(var n=e==null?0:e.length;n--&&t(e[n],n,e)!==!1;);return e}var W4=hI(!0);const B2=W4;function eE(e,t){return e&&B2(e,t,Gu)}var z4=vI(eE,!0);const U2=z4;function WS(e,t){var n=ci(e)?V4:U2;return n(e,Kp(t))}function H4(e,t,n){e=No(e),t=ys(t);var o=e.length;n=n===void 0?o:Zp(Ir(n),0,o);var r=n;return n-=t.length,n>=0&&e.slice(n,r)==t}function X4(e,t){return Sa(t,function(n){return[n,e[n]]})}function Y4(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=[o,o]}),n}var q4="[object Map]",K4="[object Set]";function G2(e){return function(t){var n=s_(t);return n==q4?RM(t):n==K4?Y4(t):X4(t,e(t))}}var Z4=G2(Gu);const zS=Z4;var J4=G2(Hp);const HS=J4;var Q4={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},e$=Kw(Q4);const t$=e$;var V2=/[&<>"']/g,n$=RegExp(V2.source);function W2(e){return e=No(e),e&&n$.test(e)?e.replace(V2,t$):e}var z2=/[\\^$.*+?()[\]{}|]/g,r$=RegExp(z2.source);function o$(e){return e=No(e),e&&r$.test(e)?e.replace(z2,"\\$&"):e}function H2(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(!t(e[n],n,e))return!1;return!0}function i$(e,t){var n=!0;return u_(e,function(o,r,s){return n=!!t(o,r,s),n}),n}function a$(e,t,n){var o=ci(e)?H2:i$;return n&&hc(e,t,n)&&(t=void 0),o(e,qr(t))}var l$=4294967295;function X2(e){return e?Zp(Ir(e),0,l$):0}function u$(e,t,n,o){var r=e.length;for(n=Ir(n),n<0&&(n=-n>r?0:r+n),o=o===void 0||o>r?r:Ir(o),o<0&&(o+=r),o=n>o?0:X2(o);n<o;)e[n++]=t;return e}function s$(e,t,n,o){var r=e==null?0:e.length;return r?(n&&typeof n!="number"&&hc(e,t,n)&&(n=0,o=r),u$(e,t,n,o)):[]}function Y2(e,t,n){var o;return n(e,function(r,s,c){if(t(r,s,c))return o=s,!1}),o}function c$(e,t){return Y2(e,qr(t),Yp)}var f$=BL(jM);const d$=f$;function p$(e,t){return Y2(e,qr(t),eE)}function XS(e){return e&&e.length?e[0]:void 0}var h$=1/0;function v$(e,t){return bs($w(e,t),h$)}function y$(e,t,n){return n=n===void 0?1:Ir(n),bs($w(e,t),n)}function m$(e,t){var n=e==null?0:e.length;return n?(t=t===void 0?1:Ir(t),bs(e,t)):[]}var g$=512;function _$(e){return kf(e,g$)}var b$=Zw("floor");const w$=b$;var E$="Expected a function",O$=8,x$=32,S$=128,A$=256;function q2(e){return Xp(function(t){var n=t.length,o=n,r=$u.prototype.thru;for(e&&t.reverse();o--;){var s=t[o];if(typeof s!="function")throw new TypeError(E$);if(r&&!c&&yg(s)=="wrapper")var c=new $u([],!0)}for(o=c?o:n;++o<n;){s=t[o];var v=yg(s),h=v=="wrapper"?Ww(s):void 0;h&&tw(h[0])&&h[1]==(S$|O$|x$|A$)&&!h[4].length&&h[9]==1?c=c[yg(h[0])].apply(c,h[3]):c=s.length==1&&tw(s)?c[v]():c.thru(s)}return function(){var g=arguments,_=g[0];if(c&&g.length==1&&ci(_))return c.plant(_).value();for(var w=0,O=n?t[w].apply(this,g):_;++w<n;)O=t[w].call(this,O);return O}})}var T$=q2();const M$=T$;var P$=q2(!0);const k$=P$;function N$(e,t){return e==null?e:B2(e,Kp(t),Hp)}function R$(e,t){return e&&eE(e,Kp(t))}function g_(e,t){return kv(t,function(n){return Nv(e[n])})}function j$(e){return e==null?[]:g_(e,Gu(e))}function C$(e){return e==null?[]:g_(e,Hp(e))}var D$=Object.prototype,I$=D$.hasOwnProperty,L$=y_(function(e,t,n){I$.call(e,n)?e[n].push(t):Hy(e,n,[t])});const F$=L$;function __(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Of(t),n=Of(n)),e(t,n)}}var $$=__(e2);const B$=$$;var U$=__(function(e,t){return e>=t});const G$=U$;var V$=Math.max,W$=Math.min;function z$(e,t,n){return e>=W$(t,n)&&e<V$(t,n)}function H$(e,t,n){return t=Cy(t),n===void 0?(n=t,t=0):n=Cy(n),e=Of(e),z$(e,t,n)}var X$="[object String]";function b_(e){return typeof e=="string"||!ci(e)&&Uu(e)&&Id(e)==X$}var Y$=Math.max;function q$(e,t,n,o){e=Mv(e)?e:jv(e),n=n&&!o?Ir(n):0;var r=e.length;return n<0&&(n=Y$(r+n,0)),b_(e)?n<=r&&e.indexOf(t,n)>-1:!!r&&Yy(e,t,n)>-1}var K$=Math.max;function Z$(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:Ir(n);return r<0&&(r=K$(o+r,0)),Yy(e,t,r)}function J$(e){var t=e==null?0:e.length;return t?ms(e,0,-1):[]}var Q$=Math.min;function tE(e,t,n){for(var o=n?NM:Lw,r=e[0].length,s=e.length,c=s,v=Array(s),h=1/0,g=[];c--;){var _=e[c];c&&t&&(_=Sa(_,Af(t))),h=Q$(_.length,h),v[c]=!n&&(t||r>=120&&_.length>=120)?new kM(c&&_):void 0}_=e[0];var w=-1,O=v[0];e:for(;++w<r&&g.length<h;){var S=_[w],P=t?t(S):S;if(S=n||S!==0?S:0,!(O?Q1(O,P):o(g,P,n))){for(c=s;--c;){var A=v[c];if(!(A?Q1(A,P):o(e[c],P,n)))continue e}O&&O.push(P),g.push(S)}}return g}function nE(e){return Zi(e)?e:[]}var e5=Zr(function(e){var t=Sa(e,nE);return t.length&&t[0]===e[0]?tE(t):[]});const t5=e5;var n5=Zr(function(e){var t=Fu(e),n=Sa(e,nE);return t===Fu(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?tE(n,qr(t)):[]});const r5=n5;var o5=Zr(function(e){var t=Fu(e),n=Sa(e,nE);return t=typeof t=="function"?t:void 0,t&&n.pop(),n.length&&n[0]===e[0]?tE(n,void 0,t):[]});const i5=o5;function a5(e,t,n,o){return Yp(e,function(r,s,c){t(o,n(r),s,c)}),o}function K2(e,t){return function(n,o){return a5(n,e,t(o),{})}}var l5=Object.prototype,u5=l5.toString,s5=K2(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=u5.call(t)),e[t]=n},CM(Dd));const c5=s5;var Z2=Object.prototype,f5=Z2.hasOwnProperty,d5=Z2.toString,p5=K2(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=d5.call(t)),f5.call(e,t)?e[t].push(n):e[t]=[n]},qr);const h5=p5;function Zy(e,t,n){t=DM(t,e),e=yI(e,t);var o=e==null?e:e[l_(Fu(t))];return o==null?void 0:Lu(o,e,n)}var v5=Zr(Zy);const y5=v5;var m5=Zr(function(e,t,n){var o=-1,r=typeof t=="function",s=Mv(e)?Array(e.length):[];return u_(e,function(c){s[++o]=r?Lu(t,c,n):Zy(c,t,n)}),s});const g5=m5;var _5="[object ArrayBuffer]";function b5(e){return Uu(e)&&Id(e)==_5}var YS=bv&&bv.isArrayBuffer,w5=YS?Af(YS):b5;const E5=w5;var O5="[object Boolean]";function x5(e){return e===!0||e===!1||Uu(e)&&Id(e)==O5}var S5="[object Date]";function A5(e){return Uu(e)&&Id(e)==S5}var qS=bv&&bv.isDate,T5=qS?Af(qS):A5;const M5=T5;function P5(e){return Uu(e)&&e.nodeType===1&&!Fw(e)}function k5(e,t,n){n=typeof n=="function"?n:void 0;var o=n?n(e,t):void 0;return o===void 0?mI(e,t,void 0,n):!!o}var N5=zp.isFinite;function R5(e){return typeof e=="number"&&N5(e)}function J2(e){return typeof e=="number"&&e==Ir(e)}function j5(e,t){return e===t||IM(e,t,LM(t))}function C5(e,t,n){return n=typeof n=="function"?n:void 0,IM(e,t,LM(t),n)}var D5="[object Number]";function Q2(e){return typeof e=="number"||Uu(e)&&Id(e)==D5}function I5(e){return Q2(e)&&e!=+e}var L5=gI?Nv:FM;const F5=L5;var $5="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.";function B5(e){if(F5(e))throw new Error($5);return _I(e)}var U5="[object RegExp]";function G5(e){return Uu(e)&&Id(e)==U5}var KS=bv&&bv.isRegExp,V5=KS?Af(KS):G5;const rE=V5;var ZS=9007199254740991;function W5(e){return J2(e)&&e>=-ZS&&e<=ZS}var z5="[object WeakMap]";function H5(e){return Uu(e)&&s_(e)==z5}var X5="[object WeakSet]";function Y5(e){return Uu(e)&&Id(e)==X5}var q5=1;function K5(e){return qr(typeof e=="function"?e:Pv(e,q5))}var Z5=Array.prototype,J5=Z5.join;function Q5(e,t){return e==null?"":J5.call(e,t)}var eB=Iv(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});const tB=eB;var nB=y_(function(e,t,n){Hy(e,n,t)});const rB=nB;function oB(e,t,n){for(var o=n+1;o--;)if(e[o]===t)return o;return o}var iB=Math.max,aB=Math.min;function lB(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=o;return n!==void 0&&(r=Ir(n),r=r<0?iB(o+r,0):aB(r,o-1)),t===t?oB(e,t,r):bI(e,wI,r,!0)}var uB=Iv(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()});const sB=uB;var cB=g2("toLowerCase");const fB=cB;var dB=__(UL);const pB=dB;var hB=__(function(e,t){return e<=t});const vB=hB;function yB(e,t){var n={};return t=qr(t),Yp(e,function(o,r,s){Hy(n,t(o,r,s),o)}),n}var mB=1;function gB(e){return EI(Pv(e,mB))}var _B=1;function bB(e,t){return OI(e,Pv(t,_B))}function wB(e,t){return e&&e.length?GL(e,qr(t),e2):void 0}function oE(e,t){for(var n,o=-1,r=e.length;++o<r;){var s=t(e[o]);s!==void 0&&(n=n===void 0?s:n+s)}return n}var EB=0/0;function eP(e,t){var n=e==null?0:e.length;return n?oE(e,t)/n:EB}function OB(e){return eP(e,Dd)}function xB(e,t){return eP(e,qr(t))}var SB=Zr(function(e,t){return function(n){return Zy(n,e,t)}});const AB=SB;var TB=Zr(function(e,t){return function(n){return Zy(e,n,t)}});const MB=TB;function tP(e,t,n){var o=Gu(t),r=g_(t,o),s=!(Sf(n)&&"chain"in n)||!!n.chain,c=Nv(e);return pc(r,function(v){var h=t[v];e[v]=h,c&&(e.prototype[v]=function(){var g=this.__chain__;if(s||g){var _=e(this.__wrapped__),w=_.__actions__=Iu(this.__actions__);return w.push({func:h,args:arguments,thisArg:e}),_.__chain__=g,_}return h.apply(e,Xy([this.value()],arguments))})}),e}var PB=p_(function(e,t){return e*t},1);const kB=PB;var NB="Expected a function";function Jy(e){if(typeof e!="function")throw new TypeError(NB);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function RB(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}var jB="[object Map]",CB="[object Set]",A1=Mg?Mg.iterator:void 0;function nP(e){if(!e)return[];if(Mv(e))return b_(e)?gs(e):Iu(e);if(A1&&e[A1])return RB(e[A1]());var t=s_(e),n=t==jB?RM:t==CB?xI:jv;return n(e)}function DB(){this.__values__===void 0&&(this.__values__=nP(this.value()));var e=this.__index__>=this.__values__.length,t=e?void 0:this.__values__[this.__index__++];return{done:e,value:t}}function rP(e,t){var n=e.length;if(n)return t+=t<0?n:0,Wy(t,n)?e[t]:void 0}function IB(e,t){return e&&e.length?rP(e,Ir(t)):void 0}function LB(e){return e=Ir(e),Zr(function(t){return rP(t,e)})}function oP(e,t){if(e==null)return{};var n=Sa(SI(e),function(o){return[o]});return t=qr(t),AI(e,n,function(o,r){return t(o,r[0])})}function FB(e,t){return oP(e,Jy(qr(t)))}function $B(e){return c2(2,e)}function BB(e,t,n,o){return e==null?[]:(ci(t)||(t=t==null?[]:[t]),n=o?void 0:n,ci(n)||(n=n==null?[]:[n]),VL(e,t,n))}function iE(e){return Xp(function(t){return t=Sa(t,Af(qr)),Zr(function(n){var o=this;return e(t,function(r){return Lu(r,o,n)})})})}var UB=iE(Sa);const GB=UB;var VB=Zr;const WB=VB;var zB=Math.min,HB=WB(function(e,t){t=t.length==1&&ci(t[0])?Sa(t[0],Af(qr)):Sa(bs(t,1),Af(qr));var n=t.length;return Zr(function(o){for(var r=-1,s=zB(o.length,n);++r<s;)o[r]=t[r].call(this,o[r]);return Lu(e,this,o)})});const XB=HB;var YB=iE(H2);const qB=YB;var KB=iE($M);const ZB=KB;var JB=9007199254740991,QB=Math.floor;function ow(e,t){var n="";if(!e||t<1||t>JB)return n;do t%2&&(n+=e),t=QB(t/2),t&&(e+=e);while(t);return n}var e6=BM("length");const t6=e6;var iP="\\ud800-\\udfff",n6="\\u0300-\\u036f",r6="\\ufe20-\\ufe2f",o6="\\u20d0-\\u20ff",i6=n6+r6+o6,a6="\\ufe0e\\ufe0f",l6="["+iP+"]",iw="["+i6+"]",aw="\\ud83c[\\udffb-\\udfff]",u6="(?:"+iw+"|"+aw+")",aP="[^"+iP+"]",lP="(?:\\ud83c[\\udde6-\\uddff]){2}",uP="[\\ud800-\\udbff][\\udc00-\\udfff]",s6="\\u200d",sP=u6+"?",cP="["+a6+"]?",c6="(?:"+s6+"(?:"+[aP,lP,uP].join("|")+")"+cP+sP+")*",f6=cP+sP+c6,d6="(?:"+[aP+iw+"?",iw,lP,uP,l6].join("|")+")",JS=RegExp(aw+"(?="+aw+")|"+d6+f6,"g");function p6(e){for(var t=JS.lastIndex=0;JS.test(e);)++t;return t}function Lv(e){return Dv(e)?p6(e):t6(e)}var h6=Math.ceil;function Ng(e,t){t=t===void 0?" ":ys(t);var n=t.length;if(n<2)return n?ow(t,e):t;var o=ow(t,h6(e/Lv(t)));return Dv(t)?Ld(gs(o),0,e).join(""):o.slice(0,e)}var v6=Math.ceil,y6=Math.floor;function m6(e,t,n){e=No(e),t=Ir(t);var o=t?Lv(e):0;if(!t||o>=t)return e;var r=(t-o)/2;return Ng(y6(r),n)+e+Ng(v6(r),n)}function g6(e,t,n){e=No(e),t=Ir(t);var o=t?Lv(e):0;return t&&o<t?e+Ng(t-o,n):e}function _6(e,t,n){e=No(e),t=Ir(t);var o=t?Lv(e):0;return t&&o<t?Ng(t-o,n)+e:e}var b6=/^\s+/,w6=zp.parseInt;function E6(e,t,n){return n||t==null?t=0:t&&(t=+t),w6(No(e).replace(b6,""),t||0)}var O6=32,aE=Zr(function(e,t){var n=jd(t,Cv(aE));return kf(e,O6,void 0,t,n)});aE.placeholder={};const fP=aE;var x6=64,lE=Zr(function(e,t){var n=jd(t,Cv(lE));return kf(e,x6,void 0,t,n)});lE.placeholder={};const S6=lE;var A6=y_(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});const T6=A6;function M6(e){for(var t,n=this;n instanceof h_;){var o=o2(n);o.__index__=0,o.__values__=void 0,t?r.__wrapped__=o:t=o;var r=o;n=n.__wrapped__}return r.__wrapped__=e,t}function P6(e){return function(t){return e==null?void 0:UM(e,t)}}function k6(e,t,n,o){for(var r=n-1,s=e.length;++r<s;)if(o(e[r],t))return r;return-1}var N6=Array.prototype,QS=N6.splice;function uE(e,t,n,o){var r=o?k6:Yy,s=-1,c=t.length,v=e;for(e===t&&(t=Iu(t)),n&&(v=Sa(e,Af(n)));++s<c;)for(var h=0,g=t[s],_=n?n(g):g;(h=r(v,_,h,o))>-1;)v!==e&&QS.call(v,h,1),QS.call(e,h,1);return e}function dP(e,t){return e&&e.length&&t&&t.length?uE(e,t):e}var R6=Zr(dP);const j6=R6;function C6(e,t,n){return e&&e.length&&t&&t.length?uE(e,t,qr(n)):e}function D6(e,t,n){return e&&e.length&&t&&t.length?uE(e,t,void 0,n):e}var I6=Array.prototype,L6=I6.splice;function pP(e,t){for(var n=e?t.length:0,o=n-1;n--;){var r=t[n];if(n==o||r!==s){var s=r;Wy(r)?L6.call(e,r,1):GM(e,r)}}return e}var F6=Xp(function(e,t){var n=e==null?0:e.length,o=zw(e,t);return pP(e,Sa(t,function(r){return Wy(r,n)?+r:r}).sort(WL)),o});const $6=F6;var B6=Math.floor,U6=Math.random;function sE(e,t){return e+B6(U6()*(t-e+1))}var G6=parseFloat,V6=Math.min,W6=Math.random;function z6(e,t,n){if(n&&typeof n!="boolean"&&hc(e,t,n)&&(t=n=void 0),n===void 0&&(typeof t=="boolean"?(n=t,t=void 0):typeof e=="boolean"&&(n=e,e=void 0)),e===void 0&&t===void 0?(e=0,t=1):(e=Cy(e),t===void 0?(t=e,e=0):t=Cy(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var r=W6();return V6(e+r*(t-e+G6("1e-"+((r+"").length-1))),t)}return sE(e,t)}var H6=zL(!0);const X6=H6;var Y6=256,q6=Xp(function(e,t){return kf(e,Y6,void 0,void 0,void 0,t)});const K6=q6;function Z6(e,t,n,o){var r=e==null?0:e.length;for(o&&r&&(n=e[--r]);r--;)n=t(n,e[r],r,e);return n}function J6(e,t,n){var o=ci(e)?Z6:DL,r=arguments.length<3;return o(e,qr(t),n,r,U2)}function Q6(e,t){var n=ci(e)?kv:IL;return n(e,Jy(qr(t)))}function eU(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,r=[],s=e.length;for(t=qr(t);++o<s;){var c=e[o];t(c,o,e)&&(n.push(c),r.push(o))}return pP(e,r),n}function tU(e,t,n){return(n?hc(e,t,n):t===void 0)?t=1:t=Ir(t),ow(No(e),t)}function nU(){var e=arguments,t=No(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var rU="Expected a function";function oU(e,t){if(typeof e!="function")throw new TypeError(rU);return t=t===void 0?t:Ir(t),Zr(e,t)}function iU(e,t,n){t=DM(t,e);var o=-1,r=t.length;for(r||(r=1,e=void 0);++o<r;){var s=e==null?void 0:e[l_(t[o])];s===void 0&&(o=r,s=n),e=Nv(s)?s.call(e):s}return e}var aU=Array.prototype,lU=aU.reverse;function lw(e){return e==null?e:lU.call(e)}var uU=Zw("round");const sU=uU;function hP(e){var t=e.length;return t?e[sE(0,t-1)]:void 0}function cU(e){return hP(jv(e))}function fU(e){var t=ci(e)?hP:cU;return t(e)}function w_(e,t){var n=-1,o=e.length,r=o-1;for(t=t===void 0?o:t;++n<t;){var s=sE(n,r),c=e[s];e[s]=e[n],e[n]=c}return e.length=t,e}function dU(e,t){return w_(Iu(e),Zp(t,0,e.length))}function pU(e,t){var n=jv(e);return w_(n,Zp(t,0,n.length))}function hU(e,t,n){(n?hc(e,t,n):t===void 0)?t=1:t=Ir(t);var o=ci(e)?dU:pU;return o(e,t)}function vU(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:Bw(e,t,n,o)}function yU(e){return w_(Iu(e))}function mU(e){return w_(jv(e))}function gU(e){var t=ci(e)?yU:mU;return t(e)}var _U="[object Map]",bU="[object Set]";function wU(e){if(e==null)return 0;if(Mv(e))return b_(e)?Lv(e):e.length;var t=s_(e);return t==_U||t==bU?e.size:TI(e).length}function EU(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&hc(e,t,n)?(t=0,n=o):(t=t==null?0:Ir(t),n=n===void 0?o:Ir(n)),ms(e,t,n)):[]}var OU=Iv(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});const xU=OU;function SU(e,t){var n;return u_(e,function(o,r,s){return n=t(o,r,s),!n}),!!n}function AU(e,t,n){var o=ci(e)?$M:SU;return n&&hc(e,t,n)&&(t=void 0),o(e,qr(t))}var TU=4294967295,MU=TU-1,PU=Math.floor,kU=Math.min;function cE(e,t,n,o){var r=0,s=e==null?0:e.length;if(s===0)return 0;t=n(t);for(var c=t!==t,v=t===null,h=_v(t),g=t===void 0;r<s;){var _=PU((r+s)/2),w=n(e[_]),O=w!==void 0,S=w===null,P=w===w,A=_v(w);if(c)var R=o||P;else g?R=P&&(o||O):v?R=P&&O&&(o||!S):h?R=P&&O&&!S&&(o||!A):S||A?R=!1:R=o?w<=t:w<t;R?r=_+1:s=_}return kU(s,MU)}var NU=4294967295,RU=NU>>>1;function E_(e,t,n){var o=0,r=e==null?o:e.length;if(typeof t=="number"&&t===t&&r<=RU){for(;o<r;){var s=o+r>>>1,c=e[s];c!==null&&!_v(c)&&(n?c<=t:c<t)?o=s+1:r=s}return r}return cE(e,t,Dd,n)}function jU(e,t){return E_(e,t)}function CU(e,t,n){return cE(e,t,qr(n))}function DU(e,t){var n=e==null?0:e.length;if(n){var o=E_(e,t);if(o<n&&qy(e[o],t))return o}return-1}function IU(e,t){return E_(e,t,!0)}function LU(e,t,n){return cE(e,t,qr(n),!0)}function FU(e,t){var n=e==null?0:e.length;if(n){var o=E_(e,t,!0)-1;if(qy(e[o],t))return o}return-1}function vP(e,t){for(var n=-1,o=e.length,r=0,s=[];++n<o;){var c=e[n],v=t?t(c):c;if(!n||!qy(v,h)){var h=v;s[r++]=c===0?0:c}}return s}function $U(e){return e&&e.length?vP(e):[]}function BU(e,t){return e&&e.length?vP(e,qr(t)):[]}var UU=4294967295;function GU(e,t,n){return n&&typeof n!="number"&&hc(e,t,n)&&(t=n=void 0),n=n===void 0?UU:n>>>0,n?(e=No(e),e&&(typeof t=="string"||t!=null&&!rE(t))&&(t=ys(t),!t&&Dv(e))?Ld(gs(e),0,n):e.split(t,n)):[]}var VU="Expected a function",WU=Math.max;function zU(e,t){if(typeof e!="function")throw new TypeError(VU);return t=t==null?0:WU(Ir(t),0),Zr(function(n){var o=n[t],r=Ld(n,0,t);return o&&Xy(r,o),Lu(e,this,r)})}var HU=Iv(function(e,t,n){return e+(n?" ":"")+qw(t)});const XU=HU;function YU(e,t,n){return e=No(e),n=n==null?0:Zp(Ir(n),0,e.length),t=ys(t),e.slice(n,n+t.length)==t}function qU(){return{}}function KU(){return""}function ZU(){return!0}var JU=p_(function(e,t){return e-t},0);const QU=JU;function eG(e){return e&&e.length?oE(e,Dd):0}function tG(e,t){return e&&e.length?oE(e,qr(t)):0}function nG(e){var t=e==null?0:e.length;return t?ms(e,1,t):[]}function rG(e,t,n){return e&&e.length?(t=n||t===void 0?1:Ir(t),ms(e,0,t<0?0:t)):[]}function oG(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===void 0?1:Ir(t),t=o-t,ms(e,t<0?0:t,o)):[]}function iG(e,t){return e&&e.length?m_(e,qr(t),!1,!0):[]}function aG(e,t){return e&&e.length?m_(e,qr(t)):[]}function lG(e,t){return t(e),e}var yP=Object.prototype,uG=yP.hasOwnProperty;function eA(e,t,n,o){return e===void 0||qy(e,yP[n])&&!uG.call(o,n)?t:e}var sG={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function cG(e){return"\\"+sG[e]}var fG=/<%=([\s\S]+?)%>/g;const mP=fG;var dG=/<%-([\s\S]+?)%>/g;const pG=dG;var hG=/<%([\s\S]+?)%>/g;const vG=hG;var yG={escape:pG,evaluate:vG,interpolate:mP,variable:"",imports:{_:{escape:W2}}};const uw=yG;var mG="Invalid `variable` option passed into `_.template`",gG=/\b__p \+= '';/g,_G=/\b(__p \+=) '' \+/g,bG=/(__e\(.*?\)|\b__t\)) \+\n'';/g,wG=/[()=,{}\[\]\/\s]/,EG=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ig=/($^)/,OG=/['\n\r\u2028\u2029\\]/g,xG=Object.prototype,tA=xG.hasOwnProperty;function SG(e,t,n){var o=uw.imports._.templateSettings||uw;n&&hc(e,t,n)&&(t=void 0),e=No(e),t=kg({},t,o,eA);var r=kg({},t.imports,o.imports,eA),s=Gu(r),c=QM(r,s),v,h,g=0,_=t.interpolate||ig,w="__p += '",O=RegExp((t.escape||ig).source+"|"+_.source+"|"+(_===mP?EG:ig).source+"|"+(t.evaluate||ig).source+"|$","g"),S=tA.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+`
`:"";e.replace(O,function(R,D,N,$,Y,K){return N||(N=$),w+=e.slice(g,K).replace(OG,cG),D&&(v=!0,w+=`' +
__e(`+D+`) +
'`),Y&&(h=!0,w+=`';
`+Y+`;
__p += '`),N&&(w+=`' +
((__t = (`+N+`)) == null ? '' : __t) +
'`),g=K+R.length,R}),w+=`';
`;var P=tA.call(t,"variable")&&t.variable;if(!P)w=`with (obj) {
`+w+`
}
`;else if(wG.test(P))throw new Error(mG);w=(h?w.replace(gG,""):w).replace(_G,"$1").replace(bG,"$1;"),w="function("+(P||"obj")+`) {
`+(P?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(v?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+w+`return __p
}`;var A=s2(function(){return Function(s,S+"return "+w).apply(void 0,c)});if(A.source=w,Hw(A))throw A;return A}function Qy(e,t){return t(e)}var AG=9007199254740991,T1=4294967295,TG=Math.min;function MG(e,t){if(e=Ir(e),e<1||e>AG)return[];var n=T1,o=TG(e,T1);t=Kp(t),e-=T1;for(var r=VM(o,t);++n<e;)t(n);return r}function PG(){return this}function gP(e,t){var n=e;return n instanceof Yr&&(n=n.value()),JM(t,function(o,r){return r.func.apply(r.thisArg,Xy([o],r.args))},n)}function M1(){return gP(this.__wrapped__,this.__actions__)}function kG(e){return No(e).toLowerCase()}function NG(e){return ci(e)?Sa(e,l_):_v(e)?[e]:Iu(MI(No(e)))}var nA=9007199254740991;function RG(e){return e?Zp(Ir(e),-nA,nA):e===0?e:0}function jG(e){return No(e).toUpperCase()}function CG(e,t,n){var o=ci(e),r=o||WM(e)||zM(e);if(t=qr(t),n==null){var s=e&&e.constructor;r?n=o?new s:[]:Sf(e)?n=Nv(s)?Vy(PI(e)):{}:n={}}return(r?pc:Yp)(e,function(c,v,h){return t(n,c,v,h)}),n}function _P(e,t){for(var n=e.length;n--&&Yy(t,e[n],0)>-1;);return n}function bP(e,t){for(var n=-1,o=e.length;++n<o&&Yy(t,e[n],0)>-1;);return n}function DG(e,t,n){if(e=No(e),e&&(n||t===void 0))return kI(e);if(!e||!(t=ys(t)))return e;var o=gs(e),r=gs(t),s=bP(o,r),c=_P(o,r)+1;return Ld(o,s,c).join("")}function IG(e,t,n){if(e=No(e),e&&(n||t===void 0))return e.slice(0,NI(e)+1);if(!e||!(t=ys(t)))return e;var o=gs(e),r=_P(o,gs(t))+1;return Ld(o,0,r).join("")}var LG=/^\s+/;function FG(e,t,n){if(e=No(e),e&&(n||t===void 0))return e.replace(LG,"");if(!e||!(t=ys(t)))return e;var o=gs(e),r=bP(o,gs(t));return Ld(o,r).join("")}var $G=30,BG="...",UG=/\w*$/;function GG(e,t){var n=$G,o=BG;if(Sf(t)){var r="separator"in t?t.separator:r;n="length"in t?Ir(t.length):n,o="omission"in t?ys(t.omission):o}e=No(e);var s=e.length;if(Dv(e)){var c=gs(e);s=c.length}if(n>=s)return e;var v=n-Lv(o);if(v<1)return o;var h=c?Ld(c,0,v).join(""):e.slice(0,v);if(r===void 0)return h+o;if(c&&(v+=h.length-v),rE(r)){if(e.slice(v).search(r)){var g,_=h;for(r.global||(r=RegExp(r.source,No(UG.exec(r))+"g")),r.lastIndex=0;g=r.exec(_);)var w=g.index;h=h.slice(0,w===void 0?v:w)}}else if(e.indexOf(ys(r),v)!=v){var O=h.lastIndexOf(r);O>-1&&(h=h.slice(0,O))}return h+o}function VG(e){return u2(e,1)}var WG={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},zG=Kw(WG);const HG=zG;var wP=/&(?:amp|lt|gt|quot|#39);/g,XG=RegExp(wP.source);function YG(e){return e=No(e),e&&XG.test(e)?e.replace(wP,HG):e}var qG=Zr(function(e){var t=Fu(e);return Zi(t)&&(t=void 0),$p(bs(e,1,Zi,!0),qr(t))});const KG=qG;var ZG=Zr(function(e){var t=Fu(e);return t=typeof t=="function"?t:void 0,$p(bs(e,1,Zi,!0),void 0,t)});const JG=ZG;function QG(e){return e&&e.length?$p(e):[]}function e7(e,t){return e&&e.length?$p(e,qr(t)):[]}function t7(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?$p(e,void 0,t):[]}function n7(e,t){return e==null?!0:GM(e,t)}var r7=Math.max;function fE(e){if(!(e&&e.length))return[];var t=0;return e=kv(e,function(n){if(Zi(n))return t=r7(n.length,t),!0}),VM(t,function(n){return Sa(e,BM(n))})}function EP(e,t){if(!(e&&e.length))return[];var n=fE(e);return t==null?n:Sa(n,function(o){return Lu(t,void 0,o)})}function OP(e,t,n,o){return Bw(e,t,n(UM(e,t)),o)}function o7(e,t,n){return e==null?e:OP(e,t,Kp(n))}function i7(e,t,n,o){return o=typeof o=="function"?o:void 0,e==null?e:OP(e,t,Kp(n),o)}var a7=Iv(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()});const l7=a7;function u7(e){return e==null?[]:QM(e,Hp(e))}var s7=Zr(function(e,t){return Zi(e)?Ky(e,t):[]});const c7=s7;function f7(e,t){return fP(Kp(t),e)}var d7=Xp(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,r=function(s){return zw(s,e)};return t>1||this.__actions__.length||!(o instanceof Yr)||!Wy(n)?this.thru(r):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Qy,args:[r],thisArg:void 0}),new $u(o,this.__chain__).thru(function(s){return t&&!s.length&&s.push(void 0),s}))});const p7=d7;function h7(){return D2(this)}function v7(){var e=this.__wrapped__;if(e instanceof Yr){var t=e;return this.__actions__.length&&(t=new Yr(this)),t=t.reverse(),t.__actions__.push({func:Qy,args:[lw],thisArg:void 0}),new $u(t,this.__chain__)}return this.thru(lw)}function dE(e,t,n){var o=e.length;if(o<2)return o?$p(e[0]):[];for(var r=-1,s=Array(o);++r<o;)for(var c=e[r],v=-1;++v<o;)v!=r&&(s[r]=Ky(s[r]||c,e[v],t,n));return $p(bs(s,1),t,n)}var y7=Zr(function(e){return dE(kv(e,Zi))});const m7=y7;var g7=Zr(function(e){var t=Fu(e);return Zi(t)&&(t=void 0),dE(kv(e,Zi),qr(t))});const _7=g7;var b7=Zr(function(e){var t=Fu(e);return t=typeof t=="function"?t:void 0,dE(kv(e,Zi),void 0,t)});const w7=b7;var E7=Zr(fE);const O7=E7;function x7(e,t){return HL(e||[],t||[],Bw)}var S7=Zr(function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n=typeof n=="function"?(e.pop(),n):void 0,EP(e,n)});const A7=S7,In={chunk:KF,compact:o4,concat:i4,difference:R4,differenceBy:C4,differenceWith:I4,drop:$4,dropRight:B4,dropRightWhile:U4,dropWhile:G4,fill:s$,findIndex:XL,findLastIndex:jM,first:XS,flatten:RI,flattenDeep:jI,flattenDepth:m$,fromPairs:CI,head:XS,indexOf:Z$,initial:J$,intersection:t5,intersectionBy:r5,intersectionWith:i5,join:Q5,last:Fu,lastIndexOf:lB,nth:IB,pull:j6,pullAll:dP,pullAllBy:C6,pullAllWith:D6,pullAt:$6,remove:eU,reverse:lw,slice:EU,sortedIndex:jU,sortedIndexBy:CU,sortedIndexOf:DU,sortedLastIndex:IU,sortedLastIndexBy:LU,sortedLastIndexOf:FU,sortedUniq:$U,sortedUniqBy:BU,tail:nG,take:rG,takeRight:oG,takeRightWhile:iG,takeWhile:aG,union:DI,unionBy:KG,unionWith:JG,uniq:QG,uniqBy:e7,uniqWith:t7,unzip:fE,unzipWith:EP,without:c7,xor:m7,xorBy:_7,xorWith:w7,zip:O7,zipObject:YL,zipObjectDeep:x7,zipWith:A7},Ro={countBy:m4,each:MS,eachRight:WS,every:a$,filter:LL,find:qL,findLast:d$,flatMap:II,flatMapDeep:v$,flatMapDepth:y$,forEach:MS,forEachRight:WS,groupBy:F$,includes:q$,invokeMap:g5,keyBy:rB,map:$w,orderBy:BB,partition:T6,reduce:FL,reduceRight:J6,reject:Q6,sample:fU,sampleSize:hU,shuffle:gU,size:wU,some:AU,sortBy:KL},T7={now:LI},Si={after:d3,ary:u2,before:c2,bind:f2,bindKey:j8,curry:Jw,curryRight:Qw,debounce:FI,defer:T4,delay:P4,flip:_$,memoize:$I,negate:Jy,once:$B,overArgs:XB,partial:fP,partialRight:S6,rearg:K6,rest:oU,spread:zU,throttle:BI,unary:VG,wrap:f7},lr={castArray:UI,clone:GI,cloneDeep:VI,cloneDeepWith:e4,cloneWith:n4,conformsTo:f4,eq:qy,gt:B$,gte:G$,isArguments:WI,isArray:ci,isArrayBuffer:E5,isArrayLike:Mv,isArrayLikeObject:Zi,isBoolean:x5,isBuffer:WM,isDate:M5,isElement:P5,isEmpty:zI,isEqual:HI,isEqualWith:k5,isError:Hw,isFinite:R5,isFunction:Nv,isInteger:J2,isLength:XI,isMap:YI,isMatch:j5,isMatchWith:C5,isNaN:I5,isNative:B5,isNil:qI,isNull:KI,isNumber:Q2,isObject:Sf,isObjectLike:Uu,isPlainObject:Fw,isRegExp:rE,isSafeInteger:W5,isSet:ZI,isString:b_,isSymbol:_v,isTypedArray:zM,isUndefined:JI,isWeakMap:H5,isWeakSet:Y5,lt:pB,lte:vB,toArray:nP,toFinite:Cy,toInteger:Ir,toLength:X2,toNumber:Of,toPlainObject:QI,toSafeInteger:RG,toString:No},ll={add:c3,ceil:XF,divide:F4,floor:w$,max:ZL,maxBy:wB,mean:OB,meanBy:xB,min:JL,minBy:QL,multiply:kB,round:sU,subtract:QU,sum:eG,sumBy:tG},pE={clamp:ZF,inRange:H$,random:z6},Or={assign:v8,assignIn:$S,assignInWith:kg,assignWith:_8,at:w8,create:g4,defaults:e3,defaultsDeep:x4,entries:zS,entriesIn:HS,extend:$S,extendWith:kg,findKey:c$,findLastKey:p$,forIn:t3,forInRight:N$,forOwn:n3,forOwnRight:R$,functions:j$,functionsIn:C$,get:MM,has:$L,hasIn:eL,invert:c5,invertBy:h5,invoke:y5,keys:Gu,keysIn:Hp,mapKeys:yB,mapValues:r3,merge:tL,mergeWith:F2,omit:nL,omitBy:FB,pick:rL,pickBy:oP,result:iU,set:oL,setWith:vU,toPairs:zS,toPairsIn:HS,transform:CG,unset:n7,update:o7,updateWith:i7,values:jv,valuesIn:u7},vc={at:p7,chain:D2,commit:r4,lodash:ae,next:DB,plant:M6,reverse:v7,tap:lG,thru:Qy,toIterator:PG,toJSON:M1,value:M1,valueOf:M1,wrapperChain:h7},po={camelCase:VF,capitalize:_2,deburr:b2,endsWith:H4,escape:W2,escapeRegExp:o$,kebabCase:tB,lowerCase:sB,lowerFirst:fB,pad:m6,padEnd:g6,padStart:_6,parseInt:E6,repeat:tU,replace:nU,snakeCase:xU,split:GU,startCase:XU,startsWith:YU,template:SG,templateSettings:uw,toLower:kG,toUpper:jG,trim:DG,trimEnd:IG,trimStart:FG,truncate:GG,unescape:YG,upperCase:l7,upperFirst:qw,words:C2},_o={attempt:s2,bindAll:P8,cond:l4,conforms:c4,constant:CM,defaultTo:w4,flow:M$,flowRight:k$,identity:Dd,iteratee:K5,matches:gB,matchesProperty:bB,method:AB,methodOf:MB,mixin:tP,noop:TM,nthArg:LB,over:GB,overEvery:qB,overSome:ZB,property:iL,propertyOf:P6,range:o3,rangeRight:X6,stubArray:aL,stubFalse:FM,stubObject:qU,stubString:KU,stubTrue:ZU,times:MG,toPath:NG,uniqueId:i3};function M7(){var e=new Yr(this.__wrapped__);return e.__actions__=Iu(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Iu(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Iu(this.__views__),e}function P7(){if(this.__filtered__){var e=new Yr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}var k7=Math.max,N7=Math.min;function R7(e,t,n){for(var o=-1,r=n.length;++o<r;){var s=n[o],c=s.size;switch(s.type){case"drop":e+=c;break;case"dropRight":t-=c;break;case"take":t=N7(t,e+c);break;case"takeRight":e=k7(e,t-c);break}}return{start:e,end:t}}var j7=1,C7=2,D7=Math.min;function I7(){var e=this.__wrapped__.value(),t=this.__dir__,n=ci(e),o=t<0,r=n?e.length:0,s=R7(0,r,this.__views__),c=s.start,v=s.end,h=v-c,g=o?v:c-1,_=this.__iteratees__,w=_.length,O=0,S=D7(h,this.__takeCount__);if(!n||!o&&r==h&&S==h)return gP(e,this.__actions__);var P=[];e:for(;h--&&O<S;){g+=t;for(var A=-1,R=e[g];++A<w;){var D=_[A],N=D.iteratee,$=D.type,Y=N(R);if($==C7)R=Y;else if(!Y){if($==j7)continue e;break e}}P[O++]=R}return P}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */var L7="4.17.21",F7=2,$7=1,B7=3,xP=4294967295,U7=Array.prototype,G7=Object.prototype,SP=G7.hasOwnProperty,rA=Mg?Mg.iterator:void 0,V7=Math.max,oA=Math.min,hE=function(e){return function(t,n,o){if(o==null){var r=Sf(n),s=r&&Gu(n),c=s&&s.length&&g_(n,s);(c?c.length:r)||(o=n,n=t,t=this)}return e(t,n,o)}}(tP);ae.after=Si.after;ae.ary=Si.ary;ae.assign=Or.assign;ae.assignIn=Or.assignIn;ae.assignInWith=Or.assignInWith;ae.assignWith=Or.assignWith;ae.at=Or.at;ae.before=Si.before;ae.bind=Si.bind;ae.bindAll=_o.bindAll;ae.bindKey=Si.bindKey;ae.castArray=lr.castArray;ae.chain=vc.chain;ae.chunk=In.chunk;ae.compact=In.compact;ae.concat=In.concat;ae.cond=_o.cond;ae.conforms=_o.conforms;ae.constant=_o.constant;ae.countBy=Ro.countBy;ae.create=Or.create;ae.curry=Si.curry;ae.curryRight=Si.curryRight;ae.debounce=Si.debounce;ae.defaults=Or.defaults;ae.defaultsDeep=Or.defaultsDeep;ae.defer=Si.defer;ae.delay=Si.delay;ae.difference=In.difference;ae.differenceBy=In.differenceBy;ae.differenceWith=In.differenceWith;ae.drop=In.drop;ae.dropRight=In.dropRight;ae.dropRightWhile=In.dropRightWhile;ae.dropWhile=In.dropWhile;ae.fill=In.fill;ae.filter=Ro.filter;ae.flatMap=Ro.flatMap;ae.flatMapDeep=Ro.flatMapDeep;ae.flatMapDepth=Ro.flatMapDepth;ae.flatten=In.flatten;ae.flattenDeep=In.flattenDeep;ae.flattenDepth=In.flattenDepth;ae.flip=Si.flip;ae.flow=_o.flow;ae.flowRight=_o.flowRight;ae.fromPairs=In.fromPairs;ae.functions=Or.functions;ae.functionsIn=Or.functionsIn;ae.groupBy=Ro.groupBy;ae.initial=In.initial;ae.intersection=In.intersection;ae.intersectionBy=In.intersectionBy;ae.intersectionWith=In.intersectionWith;ae.invert=Or.invert;ae.invertBy=Or.invertBy;ae.invokeMap=Ro.invokeMap;ae.iteratee=_o.iteratee;ae.keyBy=Ro.keyBy;ae.keys=Gu;ae.keysIn=Or.keysIn;ae.map=Ro.map;ae.mapKeys=Or.mapKeys;ae.mapValues=Or.mapValues;ae.matches=_o.matches;ae.matchesProperty=_o.matchesProperty;ae.memoize=Si.memoize;ae.merge=Or.merge;ae.mergeWith=Or.mergeWith;ae.method=_o.method;ae.methodOf=_o.methodOf;ae.mixin=hE;ae.negate=Jy;ae.nthArg=_o.nthArg;ae.omit=Or.omit;ae.omitBy=Or.omitBy;ae.once=Si.once;ae.orderBy=Ro.orderBy;ae.over=_o.over;ae.overArgs=Si.overArgs;ae.overEvery=_o.overEvery;ae.overSome=_o.overSome;ae.partial=Si.partial;ae.partialRight=Si.partialRight;ae.partition=Ro.partition;ae.pick=Or.pick;ae.pickBy=Or.pickBy;ae.property=_o.property;ae.propertyOf=_o.propertyOf;ae.pull=In.pull;ae.pullAll=In.pullAll;ae.pullAllBy=In.pullAllBy;ae.pullAllWith=In.pullAllWith;ae.pullAt=In.pullAt;ae.range=_o.range;ae.rangeRight=_o.rangeRight;ae.rearg=Si.rearg;ae.reject=Ro.reject;ae.remove=In.remove;ae.rest=Si.rest;ae.reverse=In.reverse;ae.sampleSize=Ro.sampleSize;ae.set=Or.set;ae.setWith=Or.setWith;ae.shuffle=Ro.shuffle;ae.slice=In.slice;ae.sortBy=Ro.sortBy;ae.sortedUniq=In.sortedUniq;ae.sortedUniqBy=In.sortedUniqBy;ae.split=po.split;ae.spread=Si.spread;ae.tail=In.tail;ae.take=In.take;ae.takeRight=In.takeRight;ae.takeRightWhile=In.takeRightWhile;ae.takeWhile=In.takeWhile;ae.tap=vc.tap;ae.throttle=Si.throttle;ae.thru=Qy;ae.toArray=lr.toArray;ae.toPairs=Or.toPairs;ae.toPairsIn=Or.toPairsIn;ae.toPath=_o.toPath;ae.toPlainObject=lr.toPlainObject;ae.transform=Or.transform;ae.unary=Si.unary;ae.union=In.union;ae.unionBy=In.unionBy;ae.unionWith=In.unionWith;ae.uniq=In.uniq;ae.uniqBy=In.uniqBy;ae.uniqWith=In.uniqWith;ae.unset=Or.unset;ae.unzip=In.unzip;ae.unzipWith=In.unzipWith;ae.update=Or.update;ae.updateWith=Or.updateWith;ae.values=Or.values;ae.valuesIn=Or.valuesIn;ae.without=In.without;ae.words=po.words;ae.wrap=Si.wrap;ae.xor=In.xor;ae.xorBy=In.xorBy;ae.xorWith=In.xorWith;ae.zip=In.zip;ae.zipObject=In.zipObject;ae.zipObjectDeep=In.zipObjectDeep;ae.zipWith=In.zipWith;ae.entries=Or.toPairs;ae.entriesIn=Or.toPairsIn;ae.extend=Or.assignIn;ae.extendWith=Or.assignInWith;hE(ae,ae);ae.add=ll.add;ae.attempt=_o.attempt;ae.camelCase=po.camelCase;ae.capitalize=po.capitalize;ae.ceil=ll.ceil;ae.clamp=pE.clamp;ae.clone=lr.clone;ae.cloneDeep=lr.cloneDeep;ae.cloneDeepWith=lr.cloneDeepWith;ae.cloneWith=lr.cloneWith;ae.conformsTo=lr.conformsTo;ae.deburr=po.deburr;ae.defaultTo=_o.defaultTo;ae.divide=ll.divide;ae.endsWith=po.endsWith;ae.eq=lr.eq;ae.escape=po.escape;ae.escapeRegExp=po.escapeRegExp;ae.every=Ro.every;ae.find=Ro.find;ae.findIndex=In.findIndex;ae.findKey=Or.findKey;ae.findLast=Ro.findLast;ae.findLastIndex=In.findLastIndex;ae.findLastKey=Or.findLastKey;ae.floor=ll.floor;ae.forEach=Ro.forEach;ae.forEachRight=Ro.forEachRight;ae.forIn=Or.forIn;ae.forInRight=Or.forInRight;ae.forOwn=Or.forOwn;ae.forOwnRight=Or.forOwnRight;ae.get=Or.get;ae.gt=lr.gt;ae.gte=lr.gte;ae.has=Or.has;ae.hasIn=Or.hasIn;ae.head=In.head;ae.identity=Dd;ae.includes=Ro.includes;ae.indexOf=In.indexOf;ae.inRange=pE.inRange;ae.invoke=Or.invoke;ae.isArguments=lr.isArguments;ae.isArray=ci;ae.isArrayBuffer=lr.isArrayBuffer;ae.isArrayLike=lr.isArrayLike;ae.isArrayLikeObject=lr.isArrayLikeObject;ae.isBoolean=lr.isBoolean;ae.isBuffer=lr.isBuffer;ae.isDate=lr.isDate;ae.isElement=lr.isElement;ae.isEmpty=lr.isEmpty;ae.isEqual=lr.isEqual;ae.isEqualWith=lr.isEqualWith;ae.isError=lr.isError;ae.isFinite=lr.isFinite;ae.isFunction=lr.isFunction;ae.isInteger=lr.isInteger;ae.isLength=lr.isLength;ae.isMap=lr.isMap;ae.isMatch=lr.isMatch;ae.isMatchWith=lr.isMatchWith;ae.isNaN=lr.isNaN;ae.isNative=lr.isNative;ae.isNil=lr.isNil;ae.isNull=lr.isNull;ae.isNumber=lr.isNumber;ae.isObject=Sf;ae.isObjectLike=lr.isObjectLike;ae.isPlainObject=lr.isPlainObject;ae.isRegExp=lr.isRegExp;ae.isSafeInteger=lr.isSafeInteger;ae.isSet=lr.isSet;ae.isString=lr.isString;ae.isSymbol=lr.isSymbol;ae.isTypedArray=lr.isTypedArray;ae.isUndefined=lr.isUndefined;ae.isWeakMap=lr.isWeakMap;ae.isWeakSet=lr.isWeakSet;ae.join=In.join;ae.kebabCase=po.kebabCase;ae.last=Fu;ae.lastIndexOf=In.lastIndexOf;ae.lowerCase=po.lowerCase;ae.lowerFirst=po.lowerFirst;ae.lt=lr.lt;ae.lte=lr.lte;ae.max=ll.max;ae.maxBy=ll.maxBy;ae.mean=ll.mean;ae.meanBy=ll.meanBy;ae.min=ll.min;ae.minBy=ll.minBy;ae.stubArray=_o.stubArray;ae.stubFalse=_o.stubFalse;ae.stubObject=_o.stubObject;ae.stubString=_o.stubString;ae.stubTrue=_o.stubTrue;ae.multiply=ll.multiply;ae.nth=In.nth;ae.noop=_o.noop;ae.now=T7.now;ae.pad=po.pad;ae.padEnd=po.padEnd;ae.padStart=po.padStart;ae.parseInt=po.parseInt;ae.random=pE.random;ae.reduce=Ro.reduce;ae.reduceRight=Ro.reduceRight;ae.repeat=po.repeat;ae.replace=po.replace;ae.result=Or.result;ae.round=ll.round;ae.sample=Ro.sample;ae.size=Ro.size;ae.snakeCase=po.snakeCase;ae.some=Ro.some;ae.sortedIndex=In.sortedIndex;ae.sortedIndexBy=In.sortedIndexBy;ae.sortedIndexOf=In.sortedIndexOf;ae.sortedLastIndex=In.sortedLastIndex;ae.sortedLastIndexBy=In.sortedLastIndexBy;ae.sortedLastIndexOf=In.sortedLastIndexOf;ae.startCase=po.startCase;ae.startsWith=po.startsWith;ae.subtract=ll.subtract;ae.sum=ll.sum;ae.sumBy=ll.sumBy;ae.template=po.template;ae.times=_o.times;ae.toFinite=lr.toFinite;ae.toInteger=Ir;ae.toLength=lr.toLength;ae.toLower=po.toLower;ae.toNumber=lr.toNumber;ae.toSafeInteger=lr.toSafeInteger;ae.toString=lr.toString;ae.toUpper=po.toUpper;ae.trim=po.trim;ae.trimEnd=po.trimEnd;ae.trimStart=po.trimStart;ae.truncate=po.truncate;ae.unescape=po.unescape;ae.uniqueId=_o.uniqueId;ae.upperCase=po.upperCase;ae.upperFirst=po.upperFirst;ae.each=Ro.forEach;ae.eachRight=Ro.forEachRight;ae.first=In.head;hE(ae,function(){var e={};return Yp(ae,function(t,n){SP.call(ae.prototype,n)||(e[n]=t)}),e}(),{chain:!1});ae.VERSION=L7;(ae.templateSettings=po.templateSettings).imports._=ae;pc(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){ae[e].placeholder=ae});pc(["drop","take"],function(e,t){Yr.prototype[e]=function(n){n=n===void 0?1:V7(Ir(n),0);var o=this.__filtered__&&!t?new Yr(this):this.clone();return o.__filtered__?o.__takeCount__=oA(n,o.__takeCount__):o.__views__.push({size:oA(n,xP),type:e+(o.__dir__<0?"Right":"")}),o},Yr.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}});pc(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==$7||n==B7;Yr.prototype[e]=function(r){var s=this.clone();return s.__iteratees__.push({iteratee:qr(r),type:n}),s.__filtered__=s.__filtered__||o,s}});pc(["head","last"],function(e,t){var n="take"+(t?"Right":"");Yr.prototype[e]=function(){return this[n](1).value()[0]}});pc(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Yr.prototype[e]=function(){return this.__filtered__?new Yr(this):this[n](1)}});Yr.prototype.compact=function(){return this.filter(Dd)};Yr.prototype.find=function(e){return this.filter(e).head()};Yr.prototype.findLast=function(e){return this.reverse().find(e)};Yr.prototype.invokeMap=Zr(function(e,t){return typeof e=="function"?new Yr(this):this.map(function(n){return Zy(n,e,t)})});Yr.prototype.reject=function(e){return this.filter(Jy(qr(e)))};Yr.prototype.slice=function(e,t){e=Ir(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Yr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==void 0&&(t=Ir(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)};Yr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()};Yr.prototype.toArray=function(){return this.take(xP)};Yp(Yr.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),r=ae[o?"take"+(t=="last"?"Right":""):t],s=o||/^find/.test(t);r&&(ae.prototype[t]=function(){var c=this.__wrapped__,v=o?[1]:arguments,h=c instanceof Yr,g=v[0],_=h||ci(c),w=function(D){var N=r.apply(ae,Xy([D],v));return o&&O?N[0]:N};_&&n&&typeof g=="function"&&g.length!=1&&(h=_=!1);var O=this.__chain__,S=!!this.__actions__.length,P=s&&!O,A=h&&!S;if(!s&&_){c=A?c:new Yr(this);var R=e.apply(c,v);return R.__actions__.push({func:Qy,args:[w],thisArg:void 0}),new $u(R,O)}return P&&A?e.apply(this,v):(R=this.thru(w),P?o?R.value()[0]:R.value():R)})});pc(["pop","push","shift","sort","splice","unshift"],function(e){var t=U7[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);ae.prototype[e]=function(){var r=arguments;if(o&&!this.__chain__){var s=this.value();return t.apply(ci(s)?s:[],r)}return this[n](function(c){return t.apply(ci(c)?c:[],r)})}});Yp(Yr.prototype,function(e,t){var n=ae[t];if(n){var o=n.name+"";SP.call(fv,o)||(fv[o]=[]),fv[o].push({name:t,func:n})}});fv[v_(void 0,F7).name]=[{name:"wrapper",func:void 0}];Yr.prototype.clone=M7;Yr.prototype.reverse=P7;Yr.prototype.value=I7;ae.prototype.at=vc.at;ae.prototype.chain=vc.wrapperChain;ae.prototype.commit=vc.commit;ae.prototype.next=vc.next;ae.prototype.plant=vc.plant;ae.prototype.reverse=vc.reverse;ae.prototype.toJSON=ae.prototype.valueOf=ae.prototype.value=vc.value;ae.prototype.first=ae.prototype.head;rA&&(ae.prototype[rA]=vc.toIterator);const W7="/ui/assets/icon_or-51e130f2.svg",z7="/ui/assets/icon_and-7100a354.svg",H7={class:"workflow-dropdown-menu border border-r-4"},X7={style:{display:"flex",width:"100%","justify-content":"center"},class:"mb-4"},Y7={key:0},q7=["onClick","onMousedown"],K7={class:"pre-wrap"},Z7={class:"lighter"},J7={key:1,class:"ml-16 mt-8"},Q7={class:"pre-wrap"},e9={class:"lighter"},t9=["onClick","onMousedown"],n9={class:"pre-wrap"},r9=["title"],o9={key:0},i9=["onClick","onMousedown"],a9={class:"pre-wrap",style:{width:"60%"}},l9=["title"],u9={class:"status-tag",style:{"margin-left":"auto"}},s9={key:1,class:"ml-16 mt-8"},c9=Lr({__name:"DropdownMenu",props:{show:{type:Boolean,default:!1},id:{type:String,default:""},workflowRef:Object},emits:["clickNodes","onmousedown"],setup(e,{emit:t}){const n=bt(""),o=e,r=t,s=bt(!1),c=bt("base"),v=bt([]),h=go(()=>v.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),g=bt([]),_=go(()=>g.value.filter(A=>A.name.toLocaleLowerCase().includes(n.value.toLocaleLowerCase()))),w=go(()=>lL.filter(A=>A.label.toLocaleLowerCase().includes(n.value.toLocaleLowerCase())));function O(A,R,D){var N;if(R&&(A.properties.stepName=R.name,D=="function"&&(A.properties.node_data={...R,function_lib_id:R.id,input_field_list:R.input_field_list.map($=>({...$,value:$.source=="reference"?[]:""}))}),D=="application"))if(vg(R.type)){const Y=R.work_flow.nodes[0].properties.node_data.file_upload_setting;A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id,api_input_field_list:R.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:R.work_flow.nodes[0].properties.user_input_field_list,...Y?{...Y.document?{document_list:[]}:{},...Y.image?{image_list:[]}:{},...Y.audio?{audio_list:[]}:{}}:{}}}else A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id};(N=o.workflowRef)==null||N.addNode(A),r("clickNodes",A)}function S(A,R,D){var N;if(R&&(A.properties.stepName=R.name,D=="function"&&(A.properties.node_data={...R,function_lib_id:R.id,input_field_list:R.input_field_list.map($=>({...$,value:$.source=="reference"?[]:""}))}),D=="application"))if(vg(R.type)){const Y=R.work_flow.nodes[0].properties.node_data.file_upload_setting;A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id,api_input_field_list:R.work_flow.nodes[0].properties.api_input_field_list,user_input_field_list:R.work_flow.nodes[0].properties.user_input_field_list,...Y?{...Y.document?{document_list:[]}:{},...Y.image?{image_list:[]}:{},...Y.audio?{audio_list:[]}:{}}:{}}}else A.properties.node_data={name:R.name,icon:R.icon,application_id:R.id};(N=o.workflowRef)==null||N.onmousedown(A),r("onmousedown",A)}function P(){Aa.listFunctionLib(o.id,s).then(A=>{v.value=A.data}),Aa.getApplicationList(o.id,s).then(A=>{g.value=A.data})}return Uo(()=>{P()}),(A,R)=>{const D=le("search"),N=le("el-icon"),$=le("el-input"),Y=le("el-text"),K=le("el-scrollbar"),X=le("el-tab-pane"),te=le("el-tag"),W=le("el-tabs");return Pl((Xe(),Rn("div",H7,[F(W,{modelValue:c.value,"onUpdate:modelValue":R[3]||(R[3]=C=>c.value=C),class:"workflow-dropdown-tabs"},{default:U(()=>[he("div",X7,[F($,{modelValue:n.value,"onUpdate:modelValue":R[0]||(R[0]=C=>n.value=C),style:{width:"240px"},placeholder:A.$t("views.applicationWorkflow.searchBar.placeholder")},{suffix:U(()=>[F(N,{class:"el-input__icon"},{default:U(()=>[F(D)]),_:1})]),_:1},8,["modelValue","placeholder"])]),F(X,{label:A.$t("views.applicationWorkflow.baseComponent"),name:"base"},{default:U(()=>[F(K,{height:"400"},{default:U(()=>[w.value.length>0?(Xe(),Rn("div",Y7,[(Xe(!0),Rn(Bo,null,zi(w.value,(C,G)=>(Xe(),Rn("div",{key:G,class:"workflow-dropdown-item cursor flex p-8-12",onClick:En(q=>O(C),["stop"]),onMousedown:En(q=>S(C),["stop"])},[(Xe(),Bt(iv(yr(av)(`${C.type}-icon`)),{class:"mr-8 mt-4",size:32})),he("div",K7,[he("div",Z7,$e(C.label),1),F(Y,{type:"info",size:"small"},{default:U(()=>[Tt($e(C.text),1)]),_:2},1024)])],40,q7))),128))])):(Xe(),Rn("div",J7,[F(Y,{type:"info"},{default:U(()=>[Tt($e(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"]),F(X,{label:A.$t("views.functionLib.title"),name:"function"},{default:U(()=>[F(K,{height:"400"},{default:U(()=>[he("div",{class:"workflow-dropdown-item cursor flex p-8-12",onClick:R[1]||(R[1]=En(C=>O(yr(rg)),["stop"])),onMousedown:R[2]||(R[2]=En(C=>S(yr(rg)),["stop"]))},[(Xe(),Bt(iv(yr(av)("function-lib-node-icon")),{class:"mr-8 mt-4",size:32})),he("div",Q7,[he("div",e9,$e(yr(rg).label),1),F(Y,{type:"info",size:"small"},{default:U(()=>[Tt($e(yr(rg).text),1)]),_:1})])],32),(Xe(!0),Rn(Bo,null,zi(h.value,(C,G)=>(Xe(),Rn("div",{key:G,class:"workflow-dropdown-item cursor flex p-8-12 align-center",onClick:En(q=>O(yr(SS),C,"function"),["stop"]),onMousedown:En(q=>S(yr(SS),C,"function"),["stop"])},[(Xe(),Bt(iv(yr(av)("function-lib-node-icon")),{class:"mr-8",size:32,item:C},null,8,["item"])),he("div",n9,[he("div",{class:"lighter ellipsis-1",title:C.name},$e(C.name),9,r9),he("p",null,[C.desc?(Xe(),Bt(Y,{key:0,class:"ellipsis-1",type:"info",size:"small",title:C.desc},{default:U(()=>[Tt($e(C.desc),1)]),_:2},1032,["title"])):nr("",!0)])])],40,t9))),128))]),_:1})]),_:1},8,["label"]),F(X,{label:A.$t("views.application.title"),name:"application"},{default:U(()=>[F(K,{height:"400"},{default:U(()=>[_.value.length>0?(Xe(),Rn("div",o9,[(Xe(!0),Rn(Bo,null,zi(_.value,(C,G)=>(Xe(),Rn("div",{key:G,class:"workflow-dropdown-item cursor flex align-center p-8-12",onClick:En(q=>O(yr(AS),C,"application"),["stop"]),onMousedown:En(q=>S(yr(AS),C,"application"),["stop"])},[(Xe(),Bt(iv(yr(av)("application-node-icon")),{class:"mr-8",size:32,item:C},null,8,["item"])),he("div",a9,[he("div",{class:"lighter ellipsis",title:C.name},$e(C.name),9,l9),he("p",null,[C.desc?(Xe(),Bt(Y,{key:0,class:"ellipsis",type:"info",size:"small",title:C.desc},{default:U(()=>[Tt($e(C.desc),1)]),_:2},1032,["title"])):nr("",!0)])]),he("div",u9,[yr(vg)(C.type)?(Xe(),Bt(te,{key:0,type:"warning",style:{height:"22px"}},{default:U(()=>[Tt($e(A.$t("views.application.workflow")),1)]),_:1})):(Xe(),Bt(te,{key:1,class:"blue-tag",style:{height:"22px"}},{default:U(()=>[Tt($e(A.$t("views.application.simple")),1)]),_:1}))])],40,i9))),128))])):(Xe(),Rn("div",s9,[F(Y,{type:"info"},{default:U(()=>[Tt($e(A.$t("views.applicationWorkflow.tip.noData")),1)]),_:1})]))]),_:1})]),_:1},8,["label"])]),_:1},8,["modelValue"])],512)),[[wv,e.show]])}}});const AP=Rv(c9,[["__scopeId","data-v-70745e24"]]),f9={class:"flex-between"},d9={class:"flex align-center",style:{width:"70%"}},p9={class:"ellipsis-1 break-all"},h9={key:0,src:W7,alt:""},v9={key:1,src:z7,alt:""},y9={style:{width:"280px"},class:"p-12-16"},m9={class:"mt-8 lighter"},g9={class:"title-decoration-1 mb-8 mt-8"},_9=["onMouseenter"],b9={style:{"max-width":"92%"}},w9={class:"dialog-footer"},E9=Lr({__name:"NodeContainer",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Vu.config.globalProperties.$route,n=bt({stepContainerHeight:0,inputContainerHeight:0,outputContainerHeight:0}),o=bt(!1),r=bt(),s=bt(),c=bt(!1),v=bt({title:""}),h=go({set:C=>{Qe.set(Y.nodeModel.properties,"condition",C)},get:()=>Y.nodeModel.properties.condition?Y.nodeModel.properties.condition:(Qe.set(Y.nodeModel.properties,"condition","AND"),!0)}),g=go({set:C=>{Qe.set(Y.nodeModel.properties,"showNode",C)},get:()=>Y.nodeModel.properties.showNode!==void 0?Y.nodeModel.properties.showNode:(Qe.set(Y.nodeModel.properties,"showNode",!0),!0)}),_=C=>{C.ctrlKey||C.metaKey||C.stopPropagation()},w=go(()=>Y.nodeModel.properties.status?Y.nodeModel.properties.status:200);function O(){v.value.title=Y.nodeModel.properties.stepName,c.value=!0}const S=async C=>{C&&await C.validate(G=>{var q;G&&((q=Y.nodeModel.graphModel.nodes)!=null&&q.some(z=>z.properties.stepName===v.value.title)?xa(Qt("views.applicationWorkflow.tip.repeatedNodeError")):(Qe.set(Y.nodeModel.properties,"stepName",v.value.title),c.value=!1,C.resetFields()))})},P=()=>{Y.nodeModel.graphModel.clearSelectElements(),Qe.set(Y.nodeModel,"isSelected",!0),Qe.set(Y.nodeModel,"isHovered",!0),Y.nodeModel.graphModel.toFront(Y.nodeModel.id)},A=bt(null),R=()=>{Y.nodeModel.graphModel.clearSelectElements();const C=Y.nodeModel.graphModel.cloneNode(Y.nodeModel.id);Qe.set(C,"isSelected",!0),Qe.set(C,"isHovered",!0),Y.nodeModel.graphModel.toFront(C.id)},D=()=>{Uw(Qt("common.tip"),Qt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Qt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{Y.nodeModel.graphModel.deleteNode(Y.nodeModel.id)}),Y.nodeModel.graphModel.eventCenter.emit("delete_node")},N=C=>{C.height&&(Y.nodeModel.virtual||(n.value.stepContainerHeight=C.height,Y.nodeModel.setHeight(n.value.stepContainerHeight)))};function $(C){var z,Z,me;const G=C.properties.width?C.properties.width:214,q=Y.nodeModel.graphModel.addNode({type:C.type,properties:C.properties,x:((z=r.value)==null?void 0:z.x)+G/2+200,y:((Z=r.value)==null?void 0:Z.y)-C.height});Y.nodeModel.graphModel.addEdge({type:"app-edge",sourceNodeId:Y.nodeModel.id,sourceAnchorId:(me=r.value)==null?void 0:me.id,targetNodeId:q.id,targetAnchorId:q.id+"_left"}),W()}const Y=e,K=go(()=>{var C;return Y.nodeModel.properties.config.fields?(C=Y.nodeModel.properties.config.fields)==null?void 0:C.map(q=>({label:q.label,value:q.value,globeLabel:`{{${Y.nodeModel.properties.stepName}.${q.value}}}`,globeValue:`{{context['${Y.nodeModel.id}'].${q.value}}}`})):[]});function X(C){return C!==si.Base&&C!==si.Start}const te=C=>{o.value=!0,r.value=C},W=()=>{o.value=!1,r.value=void 0};return Uo(()=>{Qe.set(Y.nodeModel,"openNodeMenu",C=>{o.value?W():te(C)})}),(C,G)=>{var we;const q=le("ArrowDownBold"),z=le("el-icon"),Z=le("el-button"),me=le("el-option"),ge=le("el-select"),Re=le("el-dropdown"),Be=le("MoreFilled"),ve=le("el-dropdown-item"),_e=le("el-dropdown-menu"),Ce=le("el-alert"),tt=le("AppIcon"),gt=le("el-tooltip"),st=le("el-collapse-transition"),At=le("el-input"),jt=le("el-form-item"),yt=le("el-form"),Kt=le("el-dialog"),je=Ev("resize");return Xe(),Rn("div",{onMousedown:P,class:"workflow-node-container p-16",style:{overflow:"visible"}},[he("div",{class:sc(["step-container app-card p-16",{isSelected:Y.nodeModel.isSelected,error:w.value!==200}]),style:{overflow:"visible"}},[Pl((Xe(),Rn("div",null,[he("div",f9,[he("div",d9,[(Xe(),Bt(iv(yr(av)(`${C.nodeModel.type}-icon`)),{class:"mr-8",size:24,item:(we=C.nodeModel)==null?void 0:we.properties.node_data},null,8,["item"])),he("h4",p9,$e(C.nodeModel.properties.stepName),1)]),he("div",{onMousemove:G[2]||(G[2]=En(()=>{},["stop"])),onMousedown:G[3]||(G[3]=En(()=>{},["stop"])),onKeydown:G[4]||(G[4]=En(()=>{},["stop"])),onClick:G[5]||(G[5]=En(()=>{},["stop"]))},[F(Z,{text:"",onClick:G[0]||(G[0]=Me=>g.value=!g.value)},{default:U(()=>[F(z,{class:sc(["arrow-icon color-secondary",g.value?"rotate-180":""])},{default:U(()=>[F(q)]),_:1},8,["class"])]),_:1}),X(C.nodeModel.type)?(Xe(),Bt(Re,{key:0,teleported:!1,trigger:"click",placement:"bottom-start"},{dropdown:U(()=>[he("div",y9,[he("h5",null,$e(C.$t("views.applicationWorkflow.condition.title")),1),he("p",m9,[he("span",null,$e(C.$t("views.applicationWorkflow.condition.front")),1),F(ge,{modelValue:h.value,"onUpdate:modelValue":G[1]||(G[1]=Me=>h.value=Me),size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[F(me,{label:C.$t("views.applicationWorkflow.condition.AND"),value:"AND"},null,8,["label"]),F(me,{label:C.$t("views.applicationWorkflow.condition.OR"),value:"OR"},null,8,["label"])]),_:1},8,["modelValue"]),he("span",null,$e(C.$t("views.applicationWorkflow.condition.text")),1)])])]),default:U(()=>[F(Z,{text:""},{default:U(()=>[h.value==="OR"?(Xe(),Rn("img",h9)):nr("",!0),h.value==="AND"?(Xe(),Rn("img",v9)):nr("",!0)]),_:1})]),_:1})):nr("",!0),X(C.nodeModel.type)?(Xe(),Bt(Re,{key:1,teleported:!1,trigger:"click"},{dropdown:U(()=>[F(_e,{style:{"min-width":"80px"}},{default:U(()=>[F(ve,{onClick:O,class:"p-8"},{default:U(()=>[Tt($e(C.$t("common.rename")),1)]),_:1}),F(ve,{onClick:R,class:"p-8"},{default:U(()=>[Tt($e(C.$t("common.copy")),1)]),_:1}),F(ve,{onClick:D,class:"border-t p-8"},{default:U(()=>[Tt($e(C.$t("common.delete")),1)]),_:1})]),_:1})]),default:U(()=>[F(Z,{text:""},{default:U(()=>[F(z,{class:"color-secondary"},{default:U(()=>[F(Be)]),_:1})]),_:1})]),_:1})):nr("",!0)],32)]),F(st,null,{default:U(()=>[Pl(he("div",{onMousedown:G[7]||(G[7]=En(()=>{},["stop"])),onKeydown:G[8]||(G[8]=En(()=>{},["stop"])),onClick:G[9]||(G[9]=En(()=>{},["stop"])),class:"mt-16"},[w.value!=200?(Xe(),Bt(Ce,{key:0,class:"mb-16",title:Y.nodeModel.type==="application-node"?C.$t("views.applicationWorkflow.tip.applicationNodeError"):C.$t("views.applicationWorkflow.tip.functionNodeError"),type:"error","show-icon":"",closable:!1},null,8,["title"])):nr("",!0),uL(C.$slots,"default",{},void 0,!0),K.value.length>0?(Xe(),Rn(Bo,{key:1},[he("h5",g9,$e(C.$t("common.param.outputParam")),1),(Xe(!0),Rn(Bo,null,zi(K.value,(Me,dt)=>(Xe(),Rn("div",{key:dt,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:zt=>A.value=dt,onMouseleave:G[6]||(G[6]=zt=>A.value=null)},[he("span",b9,$e(Me.label)+" "+$e("{"+Me.value+"}"),1),A.value===dt?(Xe(),Bt(gt,{key:0,effect:"dark",content:C.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[F(Z,{link:"",onClick:zt=>yr(HM)(Me.globeLabel),style:{padding:"0"}},{default:U(()=>[F(tt,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):nr("",!0)],40,_9))),128))],64)):nr("",!0)],544),[[wv,g.value]])]),_:3})])),[[je,N]])],2),F(st,null,{default:U(()=>[o.value?(Xe(),Bt(AP,{key:0,onMousemove:G[10]||(G[10]=En(()=>{},["stop"])),onMousedown:G[11]||(G[11]=En(()=>{},["stop"])),onClick:G[12]||(G[12]=En(()=>{},["stop"])),onWheel:_,show:o.value,id:yr(t),style:{left:"100%",top:"50%",transform:"translate(0, -50%)"},onClickNodes:$},null,8,["show","id"])):nr("",!0)]),_:1}),F(Kt,{title:C.$t("views.applicationWorkflow.nodeName"),modelValue:c.value,"onUpdate:modelValue":G[17]||(G[17]=Me=>c.value=Me),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"append-to-body":"",onSubmit:G[18]||(G[18]=En(()=>{},["prevent"]))},{footer:U(()=>[he("span",w9,[F(Z,{onClick:G[15]||(G[15]=En(Me=>c.value=!1,["prevent"]))},{default:U(()=>[Tt($e(C.$t("common.cancel")),1)]),_:1}),F(Z,{type:"primary",onClick:G[16]||(G[16]=Me=>S(s.value))},{default:U(()=>[Tt($e(C.$t("common.save")),1)]),_:1})])]),default:U(()=>[F(yt,{"label-position":"top",ref_key:"titleFormRef",ref:s,model:v.value},{default:U(()=>[F(jt,{prop:"title",rules:[{required:!0,message:C.$t("common.inputPlaceholder"),trigger:"blur"}]},{default:U(()=>[F(At,{modelValue:v.value.title,"onUpdate:modelValue":G[13]||(G[13]=Me=>v.value.title=Me),onBlur:G[14]||(G[14]=Me=>v.value.title=v.value.title.trim())},null,8,["modelValue"])]),_:1},8,["rules"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])],32)}}});const Ji=Rv(E9,[["__scopeId","data-v-c2041aed"]]),O9={class:"dialog-footer"},x9=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,S9=Lr({__name:"McpServersDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=bt(),s=bt({mcp_servers:"",mcp_enable:!1}),c=bt(!1),v=bt(!1);c_(c,_=>{_||(s.value={mcp_servers:"",mcp_enable:!1})});const h=_=>{s.value={...s.value,..._},c.value=!0},g=()=>{r.value.validate().then(_=>{_&&(o("refresh",s.value),c.value=!1)})};return t({open:h}),(_,w)=>{const O=le("el-switch"),S=le("el-form-item"),P=le("el-input"),A=le("el-form"),R=le("el-button"),D=le("el-dialog");return Xe(),Bt(D,{"align-center":"",title:_.$t("common.setting"),modelValue:c.value,"onUpdate:modelValue":w[4]||(w[4]=N=>c.value=N),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[he("span",O9,[F(R,{onClick:w[2]||(w[2]=En(N=>c.value=!1,["prevent"]))},{default:U(()=>[Tt($e(_.$t("common.cancel")),1)]),_:1}),F(R,{type:"primary",onClick:w[3]||(w[3]=N=>g()),loading:v.value},{default:U(()=>[Tt($e(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(A,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value,"require-asterisk-position":"right"},{default:U(()=>[F(S,{label:"MCP",prop:"mcp_enable"},{default:U(()=>[F(O,{modelValue:s.value.mcp_enable,"onUpdate:modelValue":w[0]||(w[0]=N=>s.value.mcp_enable=N)},null,8,["modelValue"])]),_:1}),s.value.mcp_enable?(Xe(),Bt(S,{key:0,label:_.$t("views.applicationWorkflow.nodes.mcpNode.configLabel"),prop:"mcp_servers",rules:[{required:!0,message:_.$t("common.required")}]},{default:U(()=>[F(P,{modelValue:s.value.mcp_servers,"onUpdate:modelValue":w[1]||(w[1]=N=>s.value.mcp_servers=N),rows:6,type:"textarea",placeholder:x9},null,8,["modelValue"])]),_:1},8,["label","rules"])):nr("",!0)]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),A9={class:"title-decoration-1 mb-8"},T9={class:"flex-between w-full"},M9={class:"flex align-center"},P9={class:"mr-4"},k9={class:"flex-between"},N9={class:"flex-between mb-16"},R9={class:"lighter"},j9={class:"flex-between w-full"},C9={class:"flex align-center"},D9={class:"mr-4"},I9=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),n=W=>W.ctrlKey===!0?(W.preventDefault(),!0):(W.stopPropagation(),!0);function o(W){Qe.set(_.nodeModel.properties.node_data,"system",W)}function r(W){Qe.set(_.nodeModel.properties.node_data,"prompt",W)}const s=W=>{var C;W?(C=S.value)==null||C.reset_default(W,c):$({})},{params:{id:c}}=Vu.config.globalProperties.$route,h={model_id:"",system:"",prompt:`${Qt("views.applicationWorkflow.nodes.aiChatNode.defaultPrompt")}：
{{${Qt("views.applicationWorkflow.nodes.searchDatasetNode.label")}.data}}
${Qt("views.problem.title")}：
{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:1,is_result:!1,temperature:null,max_tokens:null,dialogue_type:"WORKFLOW",model_setting:{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}},g=go({get:()=>_.nodeModel.properties.node_data?(_.nodeModel.properties.node_data.model_setting||Qe.set(_.nodeModel.properties.node_data,"model_setting",{reasoning_content_start:"<think>",reasoning_content_end:"</think>",reasoning_content_enable:!1}),_.nodeModel.properties.node_data):(Qe.set(_.nodeModel.properties,"node_data",h),_.nodeModel.properties.node_data),set:W=>{Qe.set(_.nodeModel.properties,"node_data",W)}}),_=e,w=bt(),O=bt(null),S=bt(),P=bt(),A=()=>{var W;return(W=w.value)==null?void 0:W.validate().catch(C=>Promise.reject({node:_.nodeModel,errMessage:C}))};function R(){c?Aa.getApplicationModel(c).then(W=>{O.value=Qe.groupBy(W==null?void 0:W.data,"provider")}):t.asyncGetModel().then(W=>{O.value=Qe.groupBy(W==null?void 0:W.data,"provider")})}const D=W=>{var C;W&&((C=S.value)==null||C.open(W,c,g.value.model_params_setting))},N=()=>{var W;(W=P.value)==null||W.open(g.value.model_setting)};function $(W){Qe.set(_.nodeModel.properties.node_data,"model_params_setting",W)}function Y(W){let C=Qe.cloneDeep(_.nodeModel.properties.node_data.model_setting);C={...C,...W},Qe.set(_.nodeModel.properties.node_data,"model_setting",C)}const K=bt();function X(){const W={mcp_servers:g.value.mcp_servers,mcp_enable:g.value.mcp_enable};K.value.open(W)}function te(W){Qe.set(_.nodeModel.properties.node_data,"mcp_servers",W.mcp_servers),Qe.set(_.nodeModel.properties.node_data,"mcp_enable",W.mcp_enable)}return Uo(()=>{var W;R(),typeof((W=_.nodeModel.properties.node_data)==null?void 0:W.is_result)>"u"&&qp(_.nodeModel)&&Qe.set(_.nodeModel.properties.node_data,"is_result",!0),Qe.set(_.nodeModel,"validate",A),g.value.dialogue_type||(g.value.dialogue_type="WORKFLOW")}),(W,C)=>{const G=le("Setting"),q=le("el-icon"),z=le("el-button"),Z=le("ModelSelect"),me=le("el-form-item"),ge=le("MdEditorMagnify"),Re=le("AppIcon"),Be=le("el-tooltip"),ve=le("el-option"),_e=le("el-select"),Ce=le("el-input-number"),tt=le("el-switch"),gt=le("el-form"),st=le("el-card");return Xe(),Bt(Ji,{nodeModel:W.nodeModel},{default:U(()=>[he("h5",A9,$e(W.$t("views.applicationWorkflow.nodeSetting")),1),F(st,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(gt,{onSubmit:C[10]||(C[10]=En(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:w,"hide-required-asterisk":""},{default:U(()=>[F(me,{label:W.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:W.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[he("div",T9,[he("div",null,[he("span",null,[Tt($e(W.$t("views.application.applicationForm.form.aiModel.label")),1),C[11]||(C[11]=he("span",{class:"danger"},"*",-1))])]),F(z,{disabled:!g.value.model_id,type:"primary",link:"",onClick:C[0]||(C[0]=At=>D(g.value.model_id)),onRefreshForm:$},{default:U(()=>[F(q,null,{default:U(()=>[F(G)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(Z,{onChange:s,onWheel:n,teleported:!1,modelValue:g.value.model_id,"onUpdate:modelValue":C[1]||(C[1]=At=>g.value.model_id=At),placeholder:W.$t("views.application.applicationForm.form.aiModel.placeholder"),options:O.value,onSubmitModel:R,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(me,{label:W.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(ge,{title:W.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:g.value.system,"onUpdate:modelValue":C[2]||(C[2]=At=>g.value.system=At),style:{height:"100px"},onSubmitDialog:o,placeholder:W.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(me,{label:W.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:W.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[he("div",M9,[he("div",P9,[he("span",null,[Tt($e(W.$t("views.application.applicationForm.form.prompt.label")),1),C[12]||(C[12]=he("span",{class:"danger"},"*",-1))])]),F(Be,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(W.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(Re,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(ge,{onWheel:n,title:W.$t("views.application.applicationForm.form.prompt.label"),modelValue:g.value.prompt,"onUpdate:modelValue":C[3]||(C[3]=At=>g.value.prompt=At),style:{height:"150px"},onSubmitDialog:r},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(me,{label:W.$t("views.application.applicationForm.form.historyRecord.label")},{label:U(()=>[he("div",k9,[he("div",null,$e(W.$t("views.application.applicationForm.form.historyRecord.label")),1),F(_e,{modelValue:g.value.dialogue_type,"onUpdate:modelValue":C[4]||(C[4]=At=>g.value.dialogue_type=At),type:"small",style:{width:"100px"}},{default:U(()=>[F(ve,{label:W.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),F(ve,{label:W.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[F(Ce,{modelValue:g.value.dialogue_number,"onUpdate:modelValue":C[5]||(C[5]=At=>g.value.dialogue_number=At),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),he("div",N9,[he("div",R9,$e(W.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),F(z,{type:"primary",link:"",onClick:X,onRefreshForm:$},{default:U(()=>[F(q,null,{default:U(()=>[F(G)]),_:1})]),_:1})]),F(me,{onClick:C[7]||(C[7]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",j9,[he("div",null,[he("span",null,$e(W.$t("views.application.applicationForm.form.reasoningContent.label")),1)]),F(z,{type:"primary",link:"",onClick:N,onRefreshForm:$},{default:U(()=>[F(q,null,{default:U(()=>[F(G)]),_:1})]),_:1})])]),default:U(()=>[F(tt,{size:"small",modelValue:g.value.model_setting.reasoning_content_enable,"onUpdate:modelValue":C[6]||(C[6]=At=>g.value.model_setting.reasoning_content_enable=At)},null,8,["modelValue"])]),_:1}),F(me,{onClick:C[9]||(C[9]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",C9,[he("div",D9,[he("span",null,$e(W.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(Be,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(W.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(Re,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(tt,{size:"small",modelValue:g.value.is_result,"onUpdate:modelValue":C[8]||(C[8]=At=>g.value.is_result=At)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),F(d_,{ref_key:"AIModeParamSettingDialogRef",ref:S,onRefresh:$},null,512),F(RL,{ref_key:"ReasoningParamSettingDialogRef",ref:P,onRefresh:Y},null,512),F(S9,{ref_key:"mcpServersDialogRef",ref:K,onRefresh:te},null,512)]),_:1},8,["nodeModel"])}}});var sw={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(window,function(){return function(n){var o={};function r(s){if(o[s])return o[s].exports;var c=o[s]={i:s,l:!1,exports:{}};return n[s].call(c.exports,c,c.exports,r),c.l=!0,c.exports}return r.m=n,r.c=o,r.d=function(s,c,v){r.o(s,c)||Object.defineProperty(s,c,{enumerable:!0,get:v})},r.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},r.t=function(s,c){if(1&c&&(s=r(s)),8&c||4&c&&typeof s=="object"&&s&&s.__esModule)return s;var v=Object.create(null);if(r.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:s}),2&c&&typeof s!="string")for(var h in s)r.d(v,h,(function(g){return s[g]}).bind(null,h));return v},r.n=function(s){var c=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(c,"a",c),c},r.o=function(s,c){return Object.prototype.hasOwnProperty.call(s,c)},r.p="",r(r.s=222)}([function(n,o,r){r.d(o,"a",function(){return K}),r.d(o,"b",function(){return Y}),r.d(o,"c",function(){return yt}),r.d(o,"d",function(){return Kt}),r.d(o,"e",function(){return D}),r.d(o,"f",function(){return $}),r.d(o,"g",function(){return D}),r.d(o,"h",function(){return jt}),r.d(o,"i",function(){return c}),r.d(o,"j",function(){return At}),r.d(o,"k",function(){return z});var s,c,v,h,g,_,w,O={},S=[],P=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function A(je,we){for(var Me in we)je[Me]=we[Me];return je}function R(je){var we=je.parentNode;we&&we.removeChild(je)}function D(je,we,Me){var dt,zt,Et,rn={};for(Et in we)Et=="key"?dt=we[Et]:Et=="ref"?zt=we[Et]:rn[Et]=we[Et];if(arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Me),typeof je=="function"&&je.defaultProps!=null)for(Et in je.defaultProps)rn[Et]===void 0&&(rn[Et]=je.defaultProps[Et]);return N(je,rn,dt,zt,null)}function N(je,we,Me,dt,zt){var Et={type:je,props:we,key:Me,ref:dt,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:zt??++v};return zt==null&&c.vnode!=null&&c.vnode(Et),Et}function $(){return{current:null}}function Y(je){return je.children}function K(je,we){this.props=je,this.context=we}function X(je,we){if(we==null)return je.__?X(je.__,je.__.__k.indexOf(je)+1):null;for(var Me;we<je.__k.length;we++)if((Me=je.__k[we])!=null&&Me.__e!=null)return Me.__e;return typeof je.type=="function"?X(je):null}function te(je){var we,Me;if((je=je.__)!=null&&je.__c!=null){for(je.__e=je.__c.base=null,we=0;we<je.__k.length;we++)if((Me=je.__k[we])!=null&&Me.__e!=null){je.__e=je.__c.base=Me.__e;break}return te(je)}}function W(je){(!je.__d&&(je.__d=!0)&&h.push(je)&&!C.__r++||_!==c.debounceRendering)&&((_=c.debounceRendering)||g)(C)}function C(){for(var je;C.__r=h.length;)je=h.sort(function(we,Me){return we.__v.__b-Me.__v.__b}),h=[],je.some(function(we){var Me,dt,zt,Et,rn,yn;we.__d&&(rn=(Et=(Me=we).__v).__e,(yn=Me.__P)&&(dt=[],(zt=A({},Et)).__v=Et.__v+1,ve(yn,Et,zt,Me.__n,yn.ownerSVGElement!==void 0,Et.__h!=null?[rn]:null,dt,rn??X(Et),Et.__h),_e(dt,Et),Et.__e!=rn&&te(Et)))})}function G(je,we,Me,dt,zt,Et,rn,yn,Tn,pn){var ut,xn,Le,mn,qn,re,Kn,vr=dt&&dt.__k||S,Gr=vr.length;for(Me.__k=[],ut=0;ut<we.length;ut++)if((mn=Me.__k[ut]=(mn=we[ut])==null||typeof mn=="boolean"?null:typeof mn=="string"||typeof mn=="number"||typeof mn=="bigint"?N(null,mn,null,null,mn):Array.isArray(mn)?N(Y,{children:mn},null,null,null):mn.__b>0?N(mn.type,mn.props,mn.key,null,mn.__v):mn)!=null){if(mn.__=Me,mn.__b=Me.__b+1,(Le=vr[ut])===null||Le&&mn.key==Le.key&&mn.type===Le.type)vr[ut]=void 0;else for(xn=0;xn<Gr;xn++){if((Le=vr[xn])&&mn.key==Le.key&&mn.type===Le.type){vr[xn]=void 0;break}Le=null}ve(je,mn,Le=Le||O,zt,Et,rn,yn,Tn,pn),qn=mn.__e,(xn=mn.ref)&&Le.ref!=xn&&(Kn||(Kn=[]),Le.ref&&Kn.push(Le.ref,null,mn),Kn.push(xn,mn.__c||qn,mn)),qn!=null?(re==null&&(re=qn),typeof mn.type=="function"&&mn.__k===Le.__k?mn.__d=Tn=q(mn,Tn,je):Tn=Z(je,mn,Le,vr,qn,Tn),typeof Me.type=="function"&&(Me.__d=Tn)):Tn&&Le.__e==Tn&&Tn.parentNode!=je&&(Tn=X(Le))}for(Me.__e=re,ut=Gr;ut--;)vr[ut]!=null&&(typeof Me.type=="function"&&vr[ut].__e!=null&&vr[ut].__e==Me.__d&&(Me.__d=X(dt,ut+1)),gt(vr[ut],vr[ut]));if(Kn)for(ut=0;ut<Kn.length;ut++)tt(Kn[ut],Kn[++ut],Kn[++ut])}function q(je,we,Me){for(var dt,zt=je.__k,Et=0;zt&&Et<zt.length;Et++)(dt=zt[Et])&&(dt.__=je,we=typeof dt.type=="function"?q(dt,we,Me):Z(Me,dt,dt,zt,dt.__e,we));return we}function z(je,we){return we=we||[],je==null||typeof je=="boolean"||(Array.isArray(je)?je.some(function(Me){z(Me,we)}):we.push(je)),we}function Z(je,we,Me,dt,zt,Et){var rn,yn,Tn;if(we.__d!==void 0)rn=we.__d,we.__d=void 0;else if(Me==null||zt!=Et||zt.parentNode==null)e:if(Et==null||Et.parentNode!==je)je.appendChild(zt),rn=null;else{for(yn=Et,Tn=0;(yn=yn.nextSibling)&&Tn<dt.length;Tn+=2)if(yn==zt)break e;je.insertBefore(zt,Et),rn=Et}return rn!==void 0?rn:zt.nextSibling}function me(je,we,Me){we[0]==="-"?je.setProperty(we,Me):je[we]=Me==null?"":typeof Me!="number"||P.test(we)?Me:Me+"px"}function ge(je,we,Me,dt,zt){var Et;e:if(we==="style")if(typeof Me=="string")je.style.cssText=Me;else{if(typeof dt=="string"&&(je.style.cssText=dt=""),dt)for(we in dt)Me&&we in Me||me(je.style,we,"");if(Me)for(we in Me)dt&&Me[we]===dt[we]||me(je.style,we,Me[we])}else if(we[0]==="o"&&we[1]==="n")Et=we!==(we=we.replace(/Capture$/,"")),we=we.toLowerCase()in je?we.toLowerCase().slice(2):we.slice(2),je.l||(je.l={}),je.l[we+Et]=Me,Me?dt||je.addEventListener(we,Et?Be:Re,Et):je.removeEventListener(we,Et?Be:Re,Et);else if(we!=="dangerouslySetInnerHTML"){if(zt)we=we.replace(/xlink[H:h]/,"h").replace(/sName$/,"s");else if(we!=="href"&&we!=="list"&&we!=="form"&&we!=="tabIndex"&&we!=="download"&&we in je)try{je[we]=Me??"";break e}catch{}typeof Me=="function"||(Me!=null&&(Me!==!1||we[0]==="a"&&we[1]==="r")?je.setAttribute(we,Me):je.removeAttribute(we))}}function Re(je){this.l[je.type+!1](c.event?c.event(je):je)}function Be(je){this.l[je.type+!0](c.event?c.event(je):je)}function ve(je,we,Me,dt,zt,Et,rn,yn,Tn){var pn,ut,xn,Le,mn,qn,re,Kn,vr,Gr,eo,Fn=we.type;if(we.constructor!==void 0)return null;Me.__h!=null&&(Tn=Me.__h,yn=we.__e=Me.__e,we.__h=null,Et=[yn]),(pn=c.__b)&&pn(we);try{e:if(typeof Fn=="function"){if(Kn=we.props,vr=(pn=Fn.contextType)&&dt[pn.__c],Gr=pn?vr?vr.props.value:pn.__:dt,Me.__c?re=(ut=we.__c=Me.__c).__=ut.__E:("prototype"in Fn&&Fn.prototype.render?we.__c=ut=new Fn(Kn,Gr):(we.__c=ut=new K(Kn,Gr),ut.constructor=Fn,ut.render=st),vr&&vr.sub(ut),ut.props=Kn,ut.state||(ut.state={}),ut.context=Gr,ut.__n=dt,xn=ut.__d=!0,ut.__h=[]),ut.__s==null&&(ut.__s=ut.state),Fn.getDerivedStateFromProps!=null&&(ut.__s==ut.state&&(ut.__s=A({},ut.__s)),A(ut.__s,Fn.getDerivedStateFromProps(Kn,ut.__s))),Le=ut.props,mn=ut.state,xn)Fn.getDerivedStateFromProps==null&&ut.componentWillMount!=null&&ut.componentWillMount(),ut.componentDidMount!=null&&ut.__h.push(ut.componentDidMount);else{if(Fn.getDerivedStateFromProps==null&&Kn!==Le&&ut.componentWillReceiveProps!=null&&ut.componentWillReceiveProps(Kn,Gr),!ut.__e&&ut.shouldComponentUpdate!=null&&ut.shouldComponentUpdate(Kn,ut.__s,Gr)===!1||we.__v===Me.__v){ut.props=Kn,ut.state=ut.__s,we.__v!==Me.__v&&(ut.__d=!1),ut.__v=we,we.__e=Me.__e,we.__k=Me.__k,we.__k.forEach(function(ho){ho&&(ho.__=we)}),ut.__h.length&&rn.push(ut);break e}ut.componentWillUpdate!=null&&ut.componentWillUpdate(Kn,ut.__s,Gr),ut.componentDidUpdate!=null&&ut.__h.push(function(){ut.componentDidUpdate(Le,mn,qn)})}ut.context=Gr,ut.props=Kn,ut.state=ut.__s,(pn=c.__r)&&pn(we),ut.__d=!1,ut.__v=we,ut.__P=je,pn=ut.render(ut.props,ut.state,ut.context),ut.state=ut.__s,ut.getChildContext!=null&&(dt=A(A({},dt),ut.getChildContext())),xn||ut.getSnapshotBeforeUpdate==null||(qn=ut.getSnapshotBeforeUpdate(Le,mn)),eo=pn!=null&&pn.type===Y&&pn.key==null?pn.props.children:pn,G(je,Array.isArray(eo)?eo:[eo],we,Me,dt,zt,Et,rn,yn,Tn),ut.base=we.__e,we.__h=null,ut.__h.length&&rn.push(ut),re&&(ut.__E=ut.__=null),ut.__e=!1}else Et==null&&we.__v===Me.__v?(we.__k=Me.__k,we.__e=Me.__e):we.__e=Ce(Me.__e,we,Me,dt,zt,Et,rn,Tn);(pn=c.diffed)&&pn(we)}catch(ho){we.__v=null,(Tn||Et!=null)&&(we.__e=yn,we.__h=!!Tn,Et[Et.indexOf(yn)]=null),c.__e(ho,we,Me)}}function _e(je,we){c.__c&&c.__c(we,je),je.some(function(Me){try{je=Me.__h,Me.__h=[],je.some(function(dt){dt.call(Me)})}catch(dt){c.__e(dt,Me.__v)}})}function Ce(je,we,Me,dt,zt,Et,rn,yn){var Tn,pn,ut,xn=Me.props,Le=we.props,mn=we.type,qn=0;if(mn==="svg"&&(zt=!0),Et!=null){for(;qn<Et.length;qn++)if((Tn=Et[qn])&&"setAttribute"in Tn==!!mn&&(mn?Tn.localName===mn:Tn.nodeType===3)){je=Tn,Et[qn]=null;break}}if(je==null){if(mn===null)return document.createTextNode(Le);je=zt?document.createElementNS("http://www.w3.org/2000/svg",mn):document.createElement(mn,Le.is&&Le),Et=null,yn=!1}if(mn===null)xn===Le||yn&&je.data===Le||(je.data=Le);else{if(Et=Et&&s.call(je.childNodes),pn=(xn=Me.props||O).dangerouslySetInnerHTML,ut=Le.dangerouslySetInnerHTML,!yn){if(Et!=null)for(xn={},qn=0;qn<je.attributes.length;qn++)xn[je.attributes[qn].name]=je.attributes[qn].value;(ut||pn)&&(ut&&(pn&&ut.__html==pn.__html||ut.__html===je.innerHTML)||(je.innerHTML=ut&&ut.__html||""))}if(function(re,Kn,vr,Gr,eo){var Fn;for(Fn in vr)Fn==="children"||Fn==="key"||Fn in Kn||ge(re,Fn,null,vr[Fn],Gr);for(Fn in Kn)eo&&typeof Kn[Fn]!="function"||Fn==="children"||Fn==="key"||Fn==="value"||Fn==="checked"||vr[Fn]===Kn[Fn]||ge(re,Fn,Kn[Fn],vr[Fn],Gr)}(je,Le,xn,zt,yn),ut)we.__k=[];else if(qn=we.props.children,G(je,Array.isArray(qn)?qn:[qn],we,Me,dt,zt&&mn!=="foreignObject",Et,rn,Et?Et[0]:Me.__k&&X(Me,0),yn),Et!=null)for(qn=Et.length;qn--;)Et[qn]!=null&&R(Et[qn]);yn||("value"in Le&&(qn=Le.value)!==void 0&&(qn!==xn.value||qn!==je.value||mn==="progress"&&!qn)&&ge(je,"value",qn,xn.value,!1),"checked"in Le&&(qn=Le.checked)!==void 0&&qn!==je.checked&&ge(je,"checked",qn,xn.checked,!1))}return je}function tt(je,we,Me){try{typeof je=="function"?je(we):je.current=we}catch(dt){c.__e(dt,Me)}}function gt(je,we,Me){var dt,zt;if(c.unmount&&c.unmount(je),(dt=je.ref)&&(dt.current&&dt.current!==je.__e||tt(dt,null,we)),(dt=je.__c)!=null){if(dt.componentWillUnmount)try{dt.componentWillUnmount()}catch(Et){c.__e(Et,we)}dt.base=dt.__P=null}if(dt=je.__k)for(zt=0;zt<dt.length;zt++)dt[zt]&&gt(dt[zt],we,typeof je.type!="function");Me||je.__e==null||R(je.__e),je.__e=je.__d=void 0}function st(je,we,Me){return this.constructor(je,Me)}function At(je,we,Me){var dt,zt,Et;c.__&&c.__(je,we),zt=(dt=typeof Me=="function")?null:Me&&Me.__k||we.__k,Et=[],ve(we,je=(!dt&&Me||we).__k=D(Y,null,[je]),zt||O,O,we.ownerSVGElement!==void 0,!dt&&Me?[Me]:zt?null:we.firstChild?s.call(we.childNodes):null,Et,!dt&&Me?Me:zt?zt.__e:we.firstChild,dt),_e(Et,je)}function jt(je,we){At(je,we,jt)}function yt(je,we,Me){var dt,zt,Et,rn=A({},je.props);for(Et in we)Et=="key"?dt=we[Et]:Et=="ref"?zt=we[Et]:rn[Et]=we[Et];return arguments.length>2&&(rn.children=arguments.length>3?s.call(arguments,2):Me),N(je.type,rn,dt||je.key,zt||je.ref,null)}function Kt(je,we){var Me={__c:we="__cC"+w++,__:je,Consumer:function(dt,zt){return dt.children(zt)},Provider:function(dt){var zt,Et;return this.getChildContext||(zt=[],(Et={})[we]=this,this.getChildContext=function(){return Et},this.shouldComponentUpdate=function(rn){this.props.value!==rn.value&&zt.some(W)},this.sub=function(rn){zt.push(rn);var yn=rn.componentWillUnmount;rn.componentWillUnmount=function(){zt.splice(zt.indexOf(rn),1),yn&&yn.call(rn)}}),dt.children}};return Me.Provider.__=Me.Consumer.contextType=Me}s=S.slice,c={__e:function(je,we){for(var Me,dt,zt;we=we.__;)if((Me=we.__c)&&!Me.__)try{if((dt=Me.constructor)&&dt.getDerivedStateFromError!=null&&(Me.setState(dt.getDerivedStateFromError(je)),zt=Me.__d),Me.componentDidCatch!=null&&(Me.componentDidCatch(je),zt=Me.__d),zt)return Me.__E=Me}catch(Et){je=Et}throw je}},v=0,K.prototype.setState=function(je,we){var Me;Me=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=A({},this.state),typeof je=="function"&&(je=je(A({},Me),this.props)),je&&A(Me,je),je!=null&&this.__v&&(we&&this.__h.push(we),W(this))},K.prototype.forceUpdate=function(je){this.__v&&(this.__e=!0,je&&this.__h.push(je),W(this))},K.prototype.render=Y,h=[],g=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,C.__r=0,w=0},function(n,o,r){(function(s,c){r.d(o,"a",function(){return W}),r.d(o,"b",function(){return Nc}),r.d(o,"c",function(){return Ma}),r.d(o,"d",function(){return Hn}),r.d(o,"e",function(){return Yt}),r.d(o,"f",function(){return en}),r.d(o,"g",function(){return $n}),r.d(o,"h",function(){return Ti}),r.d(o,"i",function(){return eo}),r.d(o,"j",function(){return Sn}),r.d(o,"k",function(){return dl}),r.d(o,"l",function(){return xc}),r.d(o,"m",function(){return re}),r.d(o,"n",function(){return lu}),r.d(o,"o",function(){return q}),r.d(o,"p",function(){return Gf}),r.d(o,"q",function(){return pa}),r.d(o,"r",function(){return uu}),r.d(o,"s",function(){return oa}),r.d(o,"t",function(){return jo}),r.d(o,"u",function(){return Os}),r.d(o,"v",function(){return Uf}),r.d(o,"w",function(){return Ac}),r.d(o,"x",function(){return ri}),r.d(o,"y",function(){return va}),r.d(o,"z",function(){return Vo}),r.d(o,"A",function(){return ii}),r.d(o,"B",function(){return na}),r.d(o,"C",function(){return pn}),r.d(o,"D",function(){return Tc}),r.d(o,"E",function(){return Vr}),r.d(o,"F",function(){return zr}),r.d(o,"G",function(){return Ec}),r.d(o,"H",function(){return wc}),r.d(o,"I",function(){return Mc}),r.d(o,"J",function(){return oi}),r.d(o,"K",function(){return ze}),r.d(o,"L",function(){return to}),r.d(o,"M",function(){return As});var v=[];Object.freeze(v);var h={};function g(){return++Pn.mobxGuid}function _(T){throw w(!1,T),"X"}function w(T,M){if(!T)throw new Error("[mobx] "+(M||"An invariant failed, however the error is obfuscated because this is a production build."))}Object.freeze(h);function O(T){var M=!1;return function(){if(!M)return M=!0,T.apply(this,arguments)}}var S=function(){};function P(T){return T!==null&&typeof T=="object"}function A(T){if(T===null||typeof T!="object")return!1;var M=Object.getPrototypeOf(T);return M===Object.prototype||M===null}function R(T,M,B){Object.defineProperty(T,M,{enumerable:!1,writable:!0,configurable:!0,value:B})}function D(T,M){var B="isMobX"+T;return M.prototype[B]=!0,function(ne){return P(ne)&&ne[B]===!0}}function N(T){return T instanceof Map}function $(T){return T instanceof Set}function Y(T){var M=new Set;for(var B in T)M.add(B);return Object.getOwnPropertySymbols(T).forEach(function(ne){Object.getOwnPropertyDescriptor(T,ne).enumerable&&M.add(ne)}),Array.from(M)}function K(T){return T&&T.toString?T.toString():new String(T).toString()}function X(T){return T===null?null:typeof T=="object"?""+T:T}var te=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols?function(T){return Object.getOwnPropertyNames(T).concat(Object.getOwnPropertySymbols(T))}:Object.getOwnPropertyNames,W=Symbol("mobx administration"),C=function(){function T(M){M===void 0&&(M="Atom@"+g()),this.name=M,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=xn.NOT_TRACKING}return T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.reportObserved=function(){return Es(this)},T.prototype.reportChanged=function(){Hi(),function(M){M.lowestObserverState!==xn.STALE&&(M.lowestObserverState=xn.STALE,M.observers.forEach(function(B){B.dependenciesState===xn.UP_TO_DATE&&(B.isTracing!==Le.NONE&&Ta(B,M),B.onBecomeStale()),B.dependenciesState=xn.STALE}))}(this),ta()},T.prototype.toString=function(){return this.name},T}(),G=D("Atom",C);function q(T,M,B){M===void 0&&(M=S),B===void 0&&(B=S);var ne,ye=new C(T);return M!==S&&$f("onBecomeObserved",ye,M,ne),B!==S&&Vr(ye,B),ye}var z={identity:function(T,M){return T===M},structural:function(T,M){return Ct(T,M)},default:function(T,M){return Object.is(T,M)},shallow:function(T,M){return Ct(T,M,1)}},Z=function(T,M){return Z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,ne){B.__proto__=ne}||function(B,ne){for(var ye in ne)ne.hasOwnProperty(ye)&&(B[ye]=ne[ye])},Z(T,M)};/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */var me=function(){return me=Object.assign||function(T){for(var M,B=1,ne=arguments.length;B<ne;B++)for(var ye in M=arguments[B])Object.prototype.hasOwnProperty.call(M,ye)&&(T[ye]=M[ye]);return T},me.apply(this,arguments)};function ge(T){var M=typeof Symbol=="function"&&T[Symbol.iterator],B=0;return M?M.call(T):{next:function(){return T&&B>=T.length&&(T=void 0),{value:T&&T[B++],done:!T}}}}function Re(T,M){var B=typeof Symbol=="function"&&T[Symbol.iterator];if(!B)return T;var ne,ye,Ge=B.call(T),pt=[];try{for(;(M===void 0||M-- >0)&&!(ne=Ge.next()).done;)pt.push(ne.value)}catch(Ht){ye={error:Ht}}finally{try{ne&&!ne.done&&(B=Ge.return)&&B.call(Ge)}finally{if(ye)throw ye.error}}return pt}function Be(){for(var T=[],M=0;M<arguments.length;M++)T=T.concat(Re(arguments[M]));return T}var ve=Symbol("mobx did run lazy initializers"),_e=Symbol("mobx pending decorators"),Ce={},tt={};function gt(T,M){var B=M?Ce:tt;return B[T]||(B[T]={configurable:!0,enumerable:M,get:function(){return st(this),this[T]},set:function(ne){st(this),this[T]=ne}})}function st(T){var M,B;if(T[ve]!==!0){var ne=T[_e];if(ne){R(T,ve,!0);var ye=Be(Object.getOwnPropertySymbols(ne),Object.keys(ne));try{for(var Ge=ge(ye),pt=Ge.next();!pt.done;pt=Ge.next()){var Ht=ne[pt.value];Ht.propertyCreator(T,Ht.prop,Ht.descriptor,Ht.decoratorTarget,Ht.decoratorArguments)}}catch(_n){M={error:_n}}finally{try{pt&&!pt.done&&(B=Ge.return)&&B.call(Ge)}finally{if(M)throw M.error}}}}}function At(T,M){return function(){var B,ne=function(ye,Ge,pt,Ht){if(Ht===!0)return M(ye,Ge,pt,ye,B),null;if(!Object.prototype.hasOwnProperty.call(ye,_e)){var _n=ye[_e];R(ye,_e,me({},_n))}return ye[_e][Ge]={prop:Ge,propertyCreator:M,descriptor:pt,decoratorTarget:ye,decoratorArguments:B},gt(Ge,T)};return jt(arguments)?(B=v,ne.apply(null,arguments)):(B=Array.prototype.slice.call(arguments),ne)}}function jt(T){return(T.length===2||T.length===3)&&(typeof T[1]=="string"||typeof T[1]=="symbol")||T.length===4&&T[3]===!0}function yt(T,M,B){return ri(T)?T:Array.isArray(T)?pn.array(T,{name:B}):A(T)?pn.object(T,void 0,{name:B}):N(T)?pn.map(T,{name:B}):$(T)?pn.set(T,{name:B}):T}function Kt(T){return T}function je(T){w(T);var M=At(!0,function(ne,ye,Ge,pt,Ht){var _n=Ge?Ge.initializer?Ge.initializer.call(ne):Ge.value:void 0;ra(ne).addObservableProp(ye,_n,T)}),B=(s!==void 0&&s.env,M);return B.enhancer=T,B}var we={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function Me(T){return T==null?we:typeof T=="string"?{name:T,deep:!0,proxy:!0}:T}Object.freeze(we);var dt=je(yt),zt=je(function(T,M,B){return T==null||ii(T)||va(T)||Vo(T)||Yo(T)?T:Array.isArray(T)?pn.array(T,{name:B,deep:!1}):A(T)?pn.object(T,void 0,{name:B,deep:!1}):N(T)?pn.map(T,{name:B,deep:!1}):$(T)?pn.set(T,{name:B,deep:!1}):_(!1)}),Et=je(Kt),rn=je(function(T,M,B){return Ct(T,M)?M:T});function yn(T){return T.defaultDecorator?T.defaultDecorator.enhancer:T.deep===!1?Kt:yt}var Tn={box:function(T,M){arguments.length>2&&ut("box");var B=Me(M);return new Rr(T,yn(B),B.name,!0,B.equals)},array:function(T,M){arguments.length>2&&ut("array");var B=Me(M);return Dl(T,yn(B),B.name)},map:function(T,M){arguments.length>2&&ut("map");var B=Me(M);return new Nc(T,yn(B),B.name)},set:function(T,M){arguments.length>2&&ut("set");var B=Me(M);return new Wa(T,yn(B),B.name)},object:function(T,M,B){typeof arguments[1]=="string"&&ut("object");var ne=Me(B);if(ne.proxy===!1)return pa({},T,M,ne);var ye=xs(ne),Ge=pa({},void 0,void 0,ne),pt=su(Ge);return Bf(pt,T,M,ye),pt},ref:Et,shallow:zt,deep:dt,struct:rn},pn=function(T,M,B){if(typeof arguments[1]=="string"||typeof arguments[1]=="symbol")return dt.apply(null,arguments);if(ri(T))return T;var ne=A(T)?pn.object(T,M,B):Array.isArray(T)?pn.array(T,M):N(T)?pn.map(T,M):$(T)?pn.set(T,M):T;if(ne!==T)return ne;_(!1)};function ut(T){_("Expected one or two arguments to observable."+T+". Did you accidentally try to use observable."+T+" as decorator?")}Object.keys(Tn).forEach(function(T){return pn[T]=Tn[T]});var xn,Le,mn=At(!1,function(T,M,B,ne,ye){var Ge=B.get,pt=B.set,Ht=ye[0]||{};ra(T).addComputedProp(T,M,me({get:Ge,set:pt,context:T},Ht))}),qn=mn({equals:z.structural}),re=function(T,M,B){if(typeof M=="string"||T!==null&&typeof T=="object"&&arguments.length===1)return mn.apply(null,arguments);var ne=typeof M=="object"?M:{};return ne.get=T,ne.set=typeof M=="function"?M:ne.set,ne.name=ne.name||T.name||"",new Ua(ne)};re.struct=qn,function(T){T[T.NOT_TRACKING=-1]="NOT_TRACKING",T[T.UP_TO_DATE=0]="UP_TO_DATE",T[T.POSSIBLY_STALE=1]="POSSIBLY_STALE",T[T.STALE=2]="STALE"}(xn||(xn={})),function(T){T[T.NONE=0]="NONE",T[T.LOG=1]="LOG",T[T.BREAK=2]="BREAK"}(Le||(Le={}));var Kn=function(T){this.cause=T};function vr(T){return T instanceof Kn}function Gr(T){switch(T.dependenciesState){case xn.UP_TO_DATE:return!1;case xn.NOT_TRACKING:case xn.STALE:return!0;case xn.POSSIBLY_STALE:for(var M=en(!0),B=Ne(),ne=T.observing,ye=ne.length,Ge=0;Ge<ye;Ge++){var pt=ne[Ge];if(fl(pt)){if(Pn.disableErrorBoundaries)pt.get();else try{pt.get()}catch{return rt(B),Yt(M),!0}if(T.dependenciesState===xn.STALE)return rt(B),Yt(M),!0}}return kn(T),rt(B),Yt(M),!1}}function eo(){return Pn.trackingDerivation!==null}function Fn(T){var M=T.observers.size>0;Pn.computationDepth>0&&M&&_(!1),Pn.allowStateChanges||!M&&Pn.enforceActions!=="strict"||_(!1)}function ho(T,M,B){var ne=en(!0);kn(T),T.newObserving=new Array(T.observing.length+100),T.unboundDepsCount=0,T.runId=++Pn.runId;var ye,Ge=Pn.trackingDerivation;if(Pn.trackingDerivation=T,Pn.disableErrorBoundaries===!0)ye=M.call(B);else try{ye=M.call(B)}catch(pt){ye=new Kn(pt)}return Pn.trackingDerivation=Ge,function(pt){for(var Ht=pt.observing,_n=pt.observing=pt.newObserving,mr=xn.UP_TO_DATE,ln=0,Wr=pt.unboundDepsCount,pr=0;pr<Wr;pr++)(Cr=_n[pr]).diffValue===0&&(Cr.diffValue=1,ln!==pr&&(_n[ln]=Cr),ln++),Cr.dependenciesState>mr&&(mr=Cr.dependenciesState);for(_n.length=ln,pt.newObserving=null,Wr=Ht.length;Wr--;)(Cr=Ht[Wr]).diffValue===0&&vo(Cr,pt),Cr.diffValue=0;for(;ln--;){var Cr;(Cr=_n[ln]).diffValue===1&&(Cr.diffValue=0,Cf(Cr,pt))}mr!==xn.UP_TO_DATE&&(pt.dependenciesState=mr,pt.onBecomeStale())}(T),Yt(ne),ye}function Oe(T){var M=T.observing;T.observing=[];for(var B=M.length;B--;)vo(M[B],T);T.dependenciesState=xn.NOT_TRACKING}function ze(T){var M=Ne();try{return T()}finally{rt(M)}}function Ne(){var T=Pn.trackingDerivation;return Pn.trackingDerivation=null,T}function rt(T){Pn.trackingDerivation=T}function en(T){var M=Pn.allowStateReads;return Pn.allowStateReads=T,M}function Yt(T){Pn.allowStateReads=T}function kn(T){if(T.dependenciesState!==xn.UP_TO_DATE){T.dependenciesState=xn.UP_TO_DATE;for(var M=T.observing,B=M.length;B--;)M[B].lowestObserverState=xn.UP_TO_DATE}}var Er=0,ni=1,yi=Object.getOwnPropertyDescriptor(function(){},"name");yi&&yi.configurable;function Go(T,M,B){var ne=function(){return Xo(T,M,B||this,arguments)};return ne.isMobxAction=!0,ne}function Xo(T,M,B,ne){var ye=Sn();try{return M.apply(B,ne)}catch(Ge){throw ye.error=Ge,Ge}finally{$n(ye)}}function Sn(T,M,B){var ne=0,ye=Ne();Hi();var Ge={prevDerivation:ye,prevAllowStateChanges:ir(!0),prevAllowStateReads:en(!0),notifySpy:!1,startTime:ne,actionId:ni++,parentActionId:Er};return Er=Ge.actionId,Ge}function $n(T){Er!==T.actionId&&_("invalid action stack. did you forget to finish an action?"),Er=T.parentActionId,T.error!==void 0&&(Pn.suppressReactionErrors=!0),Kr(T.prevAllowStateChanges),Yt(T.prevAllowStateReads),ta(),rt(T.prevDerivation),T.notifySpy,Pn.suppressReactionErrors=!1}function Hn(T,M){var B,ne=ir(T);try{B=M()}finally{Kr(ne)}return B}function ir(T){var M=Pn.allowStateChanges;return Pn.allowStateChanges=T,M}function Kr(T){Pn.allowStateChanges=T}var Rr=function(T){function M(B,ne,ye,Ge,pt){ye===void 0&&(ye="ObservableValue@"+g()),pt===void 0&&(pt=z.default);var Ht=T.call(this,ye)||this;return Ht.enhancer=ne,Ht.name=ye,Ht.equals=pt,Ht.hasUnreportedChange=!1,Ht.value=ne(B,void 0,ye),Ht}return function(B,ne){function ye(){this.constructor=B}Z(B,ne),B.prototype=ne===null?Object.create(ne):(ye.prototype=ne.prototype,new ye)}(M,T),M.prototype.dehanceValue=function(B){return this.dehancer!==void 0?this.dehancer(B):B},M.prototype.set=function(B){this.value,(B=this.prepareNewValue(B))!==Pn.UNCHANGED&&this.setNewValue(B)},M.prototype.prepareNewValue=function(B){if(Fn(this),Xi(this)){var ne=Mr(this,{object:this,type:"update",newValue:B});if(!ne)return Pn.UNCHANGED;B=ne.newValue}return B=this.enhancer(B,this.value,this.name),this.equals(this.value,B)?Pn.UNCHANGED:B},M.prototype.setNewValue=function(B){var ne=this.value;this.value=B,this.reportChanged(),Di(this)&&fi(this,{type:"update",object:this,newValue:B,oldValue:ne})},M.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},M.prototype.intercept=function(B){return ha(this,B)},M.prototype.observe=function(B,ne){return ne&&B({object:this,type:"update",newValue:this.value,oldValue:void 0}),Pa(this,B)},M.prototype.toJSON=function(){return this.get()},M.prototype.toString=function(){return this.name+"["+this.value+"]"},M.prototype.valueOf=function(){return X(this.get())},M.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},M}(C),cl=D("ObservableValue",Rr),Ua=function(){function T(M){this.dependenciesState=xn.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=xn.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+g(),this.value=new Kn(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=Le.NONE,w(M.get,"missing option for computed: get"),this.derivation=M.get,this.name=M.name||"ComputedValue@"+g(),M.set&&(this.setter=Go(this.name+"-setter",M.set)),this.equals=M.equals||(M.compareStructural||M.struct?z.structural:z.default),this.scope=M.context,this.requiresReaction=!!M.requiresReaction,this.keepAlive=!!M.keepAlive}return T.prototype.onBecomeStale=function(){(function(M){M.lowestObserverState===xn.UP_TO_DATE&&(M.lowestObserverState=xn.POSSIBLY_STALE,M.observers.forEach(function(B){B.dependenciesState===xn.UP_TO_DATE&&(B.dependenciesState=xn.POSSIBLY_STALE,B.isTracing!==Le.NONE&&Ta(B,M),B.onBecomeStale())}))})(this)},T.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach(function(M){return M()})},T.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach(function(M){return M()})},T.prototype.get=function(){this.isComputing&&_("Cycle detected in computation "+this.name+": "+this.derivation),Pn.inBatch!==0||this.observers.size!==0||this.keepAlive?(Es(this),Gr(this)&&this.trackAndCompute()&&function(B){B.lowestObserverState!==xn.STALE&&(B.lowestObserverState=xn.STALE,B.observers.forEach(function(ne){ne.dependenciesState===xn.POSSIBLY_STALE?ne.dependenciesState=xn.STALE:ne.dependenciesState===xn.UP_TO_DATE&&(B.lowestObserverState=xn.UP_TO_DATE)}))}(this)):Gr(this)&&(this.warnAboutUntrackedRead(),Hi(),this.value=this.computeValue(!1),ta());var M=this.value;if(vr(M))throw M.cause;return M},T.prototype.peek=function(){var M=this.computeValue(!1);if(vr(M))throw M.cause;return M},T.prototype.set=function(M){if(this.setter){w(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,M)}finally{this.isRunningSetter=!1}}else w(!1,!1)},T.prototype.trackAndCompute=function(){var M=this.value,B=this.dependenciesState===xn.NOT_TRACKING,ne=this.computeValue(!0),ye=B||vr(M)||vr(ne)||!this.equals(M,ne);return ye&&(this.value=ne),ye},T.prototype.computeValue=function(M){var B;if(this.isComputing=!0,Pn.computationDepth++,M)B=ho(this,this.derivation,this.scope);else if(Pn.disableErrorBoundaries===!0)B=this.derivation.call(this.scope);else try{B=this.derivation.call(this.scope)}catch(ne){B=new Kn(ne)}return Pn.computationDepth--,this.isComputing=!1,B},T.prototype.suspend=function(){this.keepAlive||(Oe(this),this.value=void 0)},T.prototype.observe=function(M,B){var ne=this,ye=!0,Ge=void 0;return xc(function(){var pt=ne.get();if(!ye||B){var Ht=Ne();M({type:"update",object:ne,newValue:pt,oldValue:Ge}),rt(Ht)}ye=!1,Ge=pt})},T.prototype.warnAboutUntrackedRead=function(){},T.prototype.toJSON=function(){return this.get()},T.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},T.prototype.valueOf=function(){return X(this.get())},T.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},T}(),fl=D("ComputedValue",Ua),au=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ud={};function mc(){return typeof window<"u"?window:c!==void 0?c:typeof self<"u"?self:Ud}var fa=!0,Wu=!1,Pn=function(){var T=mc();return T.__mobxInstanceCount>0&&!T.__mobxGlobals&&(fa=!1),T.__mobxGlobals&&T.__mobxGlobals.version!==new au().version&&(fa=!1),fa?T.__mobxGlobals?(T.__mobxInstanceCount+=1,T.__mobxGlobals.UNCHANGED||(T.__mobxGlobals.UNCHANGED={}),T.__mobxGlobals):(T.__mobxInstanceCount=1,T.__mobxGlobals=new au):(setTimeout(function(){Wu||_("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")},1),new au)}();function Cf(T,M){T.observers.add(M),T.lowestObserverState>M.dependenciesState&&(T.lowestObserverState=M.dependenciesState)}function vo(T,M){T.observers.delete(M),T.observers.size===0&&gc(T)}function gc(T){T.isPendingUnobservation===!1&&(T.isPendingUnobservation=!0,Pn.pendingUnobservations.push(T))}function Hi(){Pn.inBatch++}function ta(){if(--Pn.inBatch==0){bc();for(var T=Pn.pendingUnobservations,M=0;M<T.length;M++){var B=T[M];B.isPendingUnobservation=!1,B.observers.size===0&&(B.isBeingObserved&&(B.isBeingObserved=!1,B.onBecomeUnobserved()),B instanceof Ua&&B.suspend())}Pn.pendingUnobservations=[]}}function Es(T){var M=Pn.trackingDerivation;return M!==null?(M.runId!==T.lastAccessedBy&&(T.lastAccessedBy=M.runId,M.newObserving[M.unboundDepsCount++]=T,T.isBeingObserved||(T.isBeingObserved=!0,T.onBecomeObserved())),!0):(T.observers.size===0&&Pn.inBatch>0&&gc(T),!1)}function Ta(T,M){if(T.isTracing===Le.BREAK){var B=[];da(jo(T),B,1),new Function(`debugger;
/*
Tracing '`+T.name+`'

You are entering this break point because derivation '`+T.name+"' is being traced and '"+M.name+`' is now forcing it to update.
Just follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update
The stackframe you are looking for is at least ~6-8 stack-frames up.

`+(T instanceof Ua?T.derivation.toString().replace(/[*]\//g,"/"):"")+`

The dependencies for this derivation are:

`+B.join(`
`)+`
*/
    `)()}}function da(T,M,B){M.length>=1e3?M.push("(and many more)"):(M.push(""+new Array(B).join("	")+T.name),T.dependencies&&T.dependencies.forEach(function(ne){return da(ne,M,B+1)}))}var Ma=function(){function T(M,B,ne,ye){M===void 0&&(M="Reaction@"+g()),ye===void 0&&(ye=!1),this.name=M,this.onInvalidate=B,this.errorHandler=ne,this.requiresObservable=ye,this.observing=[],this.newObserving=[],this.dependenciesState=xn.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+g(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=Le.NONE}return T.prototype.onBecomeStale=function(){this.schedule()},T.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Pn.pendingReactions.push(this),bc())},T.prototype.isScheduled=function(){return this._isScheduled},T.prototype.runReaction=function(){if(!this.isDisposed){if(Hi(),this._isScheduled=!1,Gr(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(M){this.reportExceptionInDerivation(M)}}ta()}},T.prototype.track=function(M){if(!this.isDisposed){Hi(),this._isRunning=!0;var B=ho(this,M,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&Oe(this),vr(B)&&this.reportExceptionInDerivation(B.cause),ta()}},T.prototype.reportExceptionInDerivation=function(M){var B=this;if(this.errorHandler)this.errorHandler(M,this);else{if(Pn.disableErrorBoundaries)throw M;Pn.suppressReactionErrors,Pn.globalReactionErrorHandlers.forEach(function(ne){return ne(M,B)})}},T.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(Hi(),Oe(this),ta()))},T.prototype.getDisposer=function(){var M=this.dispose.bind(this);return M[W]=this,M},T.prototype.toString=function(){return"Reaction["+this.name+"]"},T.prototype.trace=function(M){M===void 0&&(M=!1),function(){for(var B=[],ne=0;ne<arguments.length;ne++)B[ne]=arguments[ne];var ye=!1;typeof B[B.length-1]=="boolean"&&(ye=B.pop());var Ge=Fr(B);if(!Ge)return _(!1);Ge.isTracing,Le.NONE,Ge.isTracing=ye?Le.BREAK:Le.LOG}(this,M)},T}(),_c=function(T){return T()};function bc(){Pn.inBatch>0||Pn.isRunningReactions||_c(Df)}function Df(){Pn.isRunningReactions=!0;for(var T=Pn.pendingReactions,M=0;T.length>0;){++M==100&&T.splice(0);for(var B=T.splice(0),ne=0,ye=B.length;ne<ye;ne++)B[ne].runReaction()}Pn.isRunningReactions=!1}var zu=D("Reaction",Ma);function If(T){var M=_c;_c=function(B){return T(function(){return M(B)})}}function wc(T){return function(){}}function Gd(){_(!1)}function Rl(T){return function(M,B,ne){if(ne){if(ne.value)return{value:Go(T,ne.value),enumerable:!1,configurable:!0,writable:!0};var ye=ne.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return Go(T,ye.call(this))}}}return Lf(T).apply(this,arguments)}}function Lf(T){return function(M,B,ne){Object.defineProperty(M,B,{configurable:!0,enumerable:!1,get:function(){},set:function(ye){R(this,B,dl(T,ye))}})}}var dl=function(T,M,B,ne){return arguments.length===1&&typeof T=="function"?Go(T.name||"<unnamed action>",T):arguments.length===2&&typeof M=="function"?Go(T,M):arguments.length===1&&typeof T=="string"?Rl(T):ne!==!0?Rl(M).apply(null,arguments):void R(T,M,Go(T.name||M,B.value,this))};function Ec(T,M){return Xo(typeof T=="string"?T:T.name||"<unnamed action>",typeof T=="function"?T:M,this,void 0)}function Os(T){return typeof T=="function"&&T.isMobxAction===!0}function Oc(T,M,B){R(T,M,Go(M,B.bind(T)))}function xc(T,M){M===void 0&&(M=h);var B,ne=M&&M.name||T.name||"Autorun@"+g();if(!M.scheduler&&!M.delay)B=new Ma(ne,function(){this.track(pt)},M.onError,M.requiresObservable);else{var ye=Ff(M),Ge=!1;B=new Ma(ne,function(){Ge||(Ge=!0,ye(function(){Ge=!1,B.isDisposed||B.track(pt)}))},M.onError,M.requiresObservable)}function pt(){T(B)}return B.schedule(),B.getDisposer()}dl.bound=function(T,M,B,ne){return ne===!0?(Oc(T,M,B.value),null):B?{configurable:!0,enumerable:!1,get:function(){return Oc(this,M,B.value||B.initializer.call(this)),this[M]},set:Gd}:{enumerable:!1,configurable:!0,set:function(ye){Oc(this,M,ye)},get:function(){}}};var Vd=function(T){return T()};function Ff(T){return T.scheduler?T.scheduler:T.delay?function(M){return setTimeout(M,T.delay)}:Vd}function zr(T,M,B){B===void 0&&(B=h);var ne,ye,Ge,pt=B.name||"Reaction@"+g(),Ht=dl(pt,B.onError?(ne=B.onError,ye=M,function(){try{return ye.apply(this,arguments)}catch(bo){ne.call(this,bo)}}):M),_n=!B.scheduler&&!B.delay,mr=Ff(B),ln=!0,Wr=!1,pr=B.compareStructural?z.structural:B.equals||z.default,Cr=new Ma(pt,function(){ln||_n?ia():Wr||(Wr=!0,mr(ia))},B.onError,B.requiresObservable);function ia(){if(Wr=!1,!Cr.isDisposed){var bo=!1;Cr.track(function(){var qi=T(Cr);bo=ln||!pr(Ge,qi),Ge=qi}),ln&&B.fireImmediately&&Ht(Ge,Cr),ln||bo!==!0||Ht(Ge,Cr),ln&&(ln=!1)}}return Cr.schedule(),Cr.getDisposer()}function Vr(T,M,B){return $f("onBecomeUnobserved",T,M,B)}function $f(T,M,B,ne){var ye=typeof ne=="function"?oa(M,B):oa(M),Ge=typeof ne=="function"?ne:B,pt=T+"Listeners";return ye[pt]?ye[pt].add(Ge):ye[pt]=new Set([Ge]),typeof ye[T]!="function"?_(!1):function(){var Ht=ye[pt];Ht&&(Ht.delete(Ge),Ht.size===0&&delete ye[pt])}}function lu(T){var M=T.enforceActions,B=T.computedRequiresReaction,ne=T.computedConfigurable,ye=T.disableErrorBoundaries,Ge=T.reactionScheduler,pt=T.reactionRequiresObservable,Ht=T.observableRequiresReaction;if(T.isolateGlobalState===!0&&((Pn.pendingReactions.length||Pn.inBatch||Pn.isRunningReactions)&&_("isolateGlobalState should be called before MobX is running any reactions"),Wu=!0,fa&&(--mc().__mobxInstanceCount==0&&(mc().__mobxGlobals=void 0),Pn=new au)),M!==void 0){var _n=void 0;switch(M){case!0:case"observed":_n=!0;break;case!1:case"never":_n=!1;break;case"strict":case"always":_n="strict";break;default:_("Invalid value for 'enforceActions': '"+M+"', expected 'never', 'always' or 'observed'")}Pn.enforceActions=_n,Pn.allowStateChanges=_n!==!0&&_n!=="strict"}B!==void 0&&(Pn.computedRequiresReaction=!!B),pt!==void 0&&(Pn.reactionRequiresObservable=!!pt),Ht!==void 0&&(Pn.observableRequiresReaction=!!Ht,Pn.allowStateReads=!Pn.observableRequiresReaction),ne!==void 0&&(Pn.computedConfigurable=!!ne),ye!==void 0&&(Pn.disableErrorBoundaries=!!ye),Ge&&If(Ge)}function pa(T,M,B,ne){var ye=xs(ne=Me(ne));return st(T),ra(T,ne.name,ye.enhancer),M&&Bf(T,M,B,ye),T}function xs(T){return T.defaultDecorator||(T.deep===!1?Et:dt)}function Bf(T,M,B,ne){var ye,Ge;Hi();try{var pt=te(M);try{for(var Ht=ge(pt),_n=Ht.next();!_n.done;_n=Ht.next()){var mr=_n.value,ln=Object.getOwnPropertyDescriptor(M,mr),Wr=(B&&mr in B?B[mr]:ln.get?mn:ne)(T,mr,ln,!0);Wr&&Object.defineProperty(T,mr,Wr)}}catch(pr){ye={error:pr}}finally{try{_n&&!_n.done&&(Ge=Ht.return)&&Ge.call(Ht)}finally{if(ye)throw ye.error}}}finally{ta()}}function jo(T,M){return jl(oa(T,M))}function jl(T){var M,B,ne={name:T.name};return T.observing&&T.observing.length>0&&(ne.dependencies=(M=T.observing,B=[],M.forEach(function(ye){B.indexOf(ye)===-1&&B.push(ye)}),B).map(jl)),ne}var Cl=0;function Ss(){this.message="FLOW_CANCELLED"}function uu(T){arguments.length!==1&&_("Flow expects 1 argument and cannot be used as decorator");var M=T.name||"<unnamed flow>";return function(){var B,ne=this,ye=arguments,Ge=++Cl,pt=dl(M+" - runid: "+Ge+" - init",T).apply(ne,ye),Ht=void 0,_n=new Promise(function(mr,ln){var Wr=0;function pr(bo){var qi;Ht=void 0;try{qi=dl(M+" - runid: "+Ge+" - yield "+Wr++,pt.next).call(pt,bo)}catch(pl){return ln(pl)}ia(qi)}function Cr(bo){var qi;Ht=void 0;try{qi=dl(M+" - runid: "+Ge+" - yield "+Wr++,pt.throw).call(pt,bo)}catch(pl){return ln(pl)}ia(qi)}function ia(bo){if(!bo||typeof bo.then!="function")return bo.done?mr(bo.value):(Ht=Promise.resolve(bo.value)).then(pr,Cr);bo.then(ia,ln)}B=ln,pr(void 0)});return _n.cancel=dl(M+" - runid: "+Ge+" - cancel",function(){try{Ht&&mi(Ht);var mr=pt.return(void 0),ln=Promise.resolve(mr.value);ln.then(S,S),mi(ln),B(new Ss)}catch(Wr){B(Wr)}}),_n}}function mi(T){typeof T.cancel=="function"&&T.cancel()}function Sc(T,M){if(T==null)return!1;if(M!==void 0){if(ii(T)===!1||!T[W].values.has(M))return!1;var B=oa(T,M);return fl(B)}return fl(T)}function Uf(T){return arguments.length>1?_(!1):Sc(T)}function Ac(T,M){return typeof M!="string"?_(!1):Sc(T,M)}function Ni(T,M){return T!=null&&(M!==void 0?!!ii(T)&&T[W].values.has(M):ii(T)||!!T[W]||G(T)||zu(T)||fl(T))}function ri(T){return arguments.length!==1&&_(!1),Ni(T)}function na(T){return ii(T)?T[W].getKeys():Vo(T)||Yo(T)?Array.from(T.keys()):va(T)?T.map(function(M,B){return B}):_(!1)}function to(T){return ii(T)?na(T).map(function(M){return T[M]}):Vo(T)?na(T).map(function(M){return T.get(M)}):Yo(T)?Array.from(T.values()):va(T)?T.slice():_(!1)}function Gf(T){return ii(T)?na(T).map(function(M){return[M,T[M]]}):Vo(T)?na(T).map(function(M){return[M,T.get(M)]}):Yo(T)?Array.from(T.entries()):va(T)?T.map(function(M,B){return[B,M]}):_(!1)}function Ri(T,M,B){if(arguments.length!==2||Yo(T))if(ii(T)){var ne=T[W],ye=ne.values.get(M);ye?ne.write(M,B):ne.addObservableProp(M,B,ne.defaultEnhancer)}else if(Vo(T))T.set(M,B);else if(Yo(T))T.add(M);else{if(!va(T))return _(!1);typeof M!="number"&&(M=parseInt(M,10)),w(M>=0,"Not a valid index: '"+M+"'"),Hi(),M>=T.length&&(T.length=M+1),T[M]=B,ta()}else{Hi();var Ge=M;try{for(var pt in Ge)Ri(T,pt,Ge[pt])}finally{ta()}}}function Tc(T,M,B,ne){return typeof B=="function"?function(ye,Ge,pt,Ht){return Ti(ye,Ge).observe(pt,Ht)}(T,M,B,ne):function(ye,Ge,pt){return Ti(ye).observe(Ge,pt)}(T,M,B)}Ss.prototype=Object.create(Error.prototype);var Vf={detectCycles:!0,exportMapsAsObjects:!0,recurseEverything:!1};function ji(T,M,B,ne){return ne.detectCycles&&T.set(M,B),B}function Ai(T,M,B){if(!M.recurseEverything&&!ri(T)||typeof T!="object")return T;if(T===null)return null;if(T instanceof Date)return T;if(cl(T))return Ai(T.get(),M,B);if(ri(T)&&na(T),M.detectCycles===!0&&T!==null&&B.has(T))return B.get(T);if(va(T)||Array.isArray(T)){var ne=ji(B,T,[],M),ye=T.map(function(pr){return Ai(pr,M,B)});ne.length=ye.length;for(var Ge=0,pt=ye.length;Ge<pt;Ge++)ne[Ge]=ye[Ge];return ne}if(Yo(T)||Object.getPrototypeOf(T)===Set.prototype){if(M.exportMapsAsObjects===!1){var Ht=ji(B,T,new Set,M);return T.forEach(function(pr){Ht.add(Ai(pr,M,B))}),Ht}var _n=ji(B,T,[],M);return T.forEach(function(pr){_n.push(Ai(pr,M,B))}),_n}if(Vo(T)||Object.getPrototypeOf(T)===Map.prototype){if(M.exportMapsAsObjects===!1){var mr=ji(B,T,new Map,M);return T.forEach(function(pr,Cr){mr.set(Cr,Ai(pr,M,B))}),mr}var ln=ji(B,T,{},M);return T.forEach(function(pr,Cr){ln[Cr]=Ai(pr,M,B)}),ln}var Wr=ji(B,T,{},M);return Y(T).forEach(function(pr){Wr[pr]=Ai(T[pr],M,B)}),Wr}function Mc(T,M){var B;return typeof M=="boolean"&&(M={detectCycles:M}),M||(M=Vf),M.detectCycles=M.detectCycles===void 0?M.recurseEverything===!0:M.detectCycles===!0,M.detectCycles&&(B=new Map),Ai(T,M,B)}function Fr(T){switch(T.length){case 0:return Pn.trackingDerivation;case 1:return oa(T[0]);case 2:return oa(T[0],T[1])}}function oi(T,M){M===void 0&&(M=void 0),Hi();try{return T.apply(M)}finally{ta()}}function As(T,M,B){return arguments.length===1||M&&typeof M=="object"?Pc(T,M):Wf(T,M,B||{})}function Wf(T,M,B){var ne;typeof B.timeout=="number"&&(ne=setTimeout(function(){if(!Ge[W].isDisposed){Ge();var pt=new Error("WHEN_TIMEOUT");if(!B.onError)throw pt;B.onError(pt)}},B.timeout)),B.name=B.name||"When@"+g();var ye=Go(B.name+"-effect",M),Ge=xc(function(pt){T()&&(pt.dispose(),ne&&clearTimeout(ne),ye())},B);return Ge}function Pc(T,M){var B,ne=new Promise(function(ye,Ge){var pt=Wf(T,ye,me(me({},M),{onError:Ge}));B=function(){pt(),Ge("WHEN_CANCELLED")}});return ne.cancel=B,ne}function Ts(T){return T[W]}function Ga(T){return typeof T=="string"||typeof T=="number"||typeof T=="symbol"}var Ci={has:function(T,M){if(M===W||M==="constructor"||M===ve)return!0;var B=Ts(T);return Ga(M)?B.has(M):M in T},get:function(T,M){if(M===W||M==="constructor"||M===ve)return T[M];var B=Ts(T),ne=B.values.get(M);if(ne instanceof C){var ye=ne.get();return ye===void 0&&B.has(M),ye}return Ga(M)&&B.has(M),T[M]},set:function(T,M,B){return!!Ga(M)&&(Ri(T,M,B),!0)},deleteProperty:function(T,M){return!!Ga(M)&&(Ts(T).remove(M),!0)},ownKeys:function(T){return Ts(T).keysAtom.reportObserved(),Reflect.ownKeys(T)},preventExtensions:function(T){return _("Dynamic observable objects cannot be frozen"),!1}};function su(T){var M=new Proxy(T,Ci);return T[W].proxy=M,M}function Xi(T){return T.interceptors!==void 0&&T.interceptors.length>0}function ha(T,M){var B=T.interceptors||(T.interceptors=[]);return B.push(M),O(function(){var ne=B.indexOf(M);ne!==-1&&B.splice(ne,1)})}function Mr(T,M){var B=Ne();try{for(var ne=Be(T.interceptors||[]),ye=0,Ge=ne.length;ye<Ge&&(w(!(M=ne[ye](M))||M.type,"Intercept handlers should return nothing or a change object"),M);ye++);return M}finally{rt(B)}}function Di(T){return T.changeListeners!==void 0&&T.changeListeners.length>0}function Pa(T,M){var B=T.changeListeners||(T.changeListeners=[]);return B.push(M),O(function(){var ne=B.indexOf(M);ne!==-1&&B.splice(ne,1)})}function fi(T,M){var B=Ne(),ne=T.changeListeners;if(ne){for(var ye=0,Ge=(ne=ne.slice()).length;ye<Ge;ye++)ne[ye](M);rt(B)}}var cu={get:function(T,M){return M===W?T[W]:M==="length"?T[W].getArrayLength():typeof M=="number"?uo.get.call(T,M):typeof M!="string"||isNaN(M)?uo.hasOwnProperty(M)?uo[M]:T[M]:uo.get.call(T,parseInt(M))},set:function(T,M,B){return M==="length"&&T[W].setArrayLength(B),typeof M=="number"&&uo.set.call(T,M,B),typeof M=="symbol"||isNaN(M)?T[M]=B:uo.set.call(T,parseInt(M),B),!0},preventExtensions:function(T){return _("Observable arrays cannot be frozen"),!1}};function Dl(T,M,B,ne){B===void 0&&(B="ObservableArray@"+g()),ne===void 0&&(ne=!1);var ye,Ge,pt,Ht=new ka(B,M,ne);ye=Ht.values,Ge=W,pt=Ht,Object.defineProperty(ye,Ge,{enumerable:!1,writable:!1,configurable:!0,value:pt});var _n=new Proxy(Ht.values,cu);if(Ht.proxy=_n,T&&T.length){var mr=ir(!0);Ht.spliceWithArray(0,0,T),Kr(mr)}return _n}var ka=function(){function T(M,B,ne){this.owned=ne,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new C(M||"ObservableArray@"+g()),this.enhancer=function(ye,Ge){return B(ye,Ge,M+"[..]")}}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.dehanceValues=function(M){return this.dehancer!==void 0&&M.length>0?M.map(this.dehancer):M},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.observe=function(M,B){return B===void 0&&(B=!1),B&&M({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),Pa(this,M)},T.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},T.prototype.setArrayLength=function(M){if(typeof M!="number"||M<0)throw new Error("[mobx.array] Out of range: "+M);var B=this.values.length;if(M!==B)if(M>B){for(var ne=new Array(M-B),ye=0;ye<M-B;ye++)ne[ye]=void 0;this.spliceWithArray(B,0,ne)}else this.spliceWithArray(M,B-M)},T.prototype.updateArrayLength=function(M,B){if(M!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=B},T.prototype.spliceWithArray=function(M,B,ne){var ye=this;Fn(this.atom);var Ge=this.values.length;if(M===void 0?M=0:M>Ge?M=Ge:M<0&&(M=Math.max(0,Ge+M)),B=arguments.length===1?Ge-M:B==null?0:Math.max(0,Math.min(B,Ge-M)),ne===void 0&&(ne=v),Xi(this)){var pt=Mr(this,{object:this.proxy,type:"splice",index:M,removedCount:B,added:ne});if(!pt)return v;B=pt.removedCount,ne=pt.added}ne=ne.length===0?ne:ne.map(function(_n){return ye.enhancer(_n,void 0)});var Ht=this.spliceItemsIntoValues(M,B,ne);return B===0&&ne.length===0||this.notifyArraySplice(M,ne,Ht),this.dehanceValues(Ht)},T.prototype.spliceItemsIntoValues=function(M,B,ne){var ye;if(ne.length<1e4)return(ye=this.values).splice.apply(ye,Be([M,B],ne));var Ge=this.values.slice(M,M+B);return this.values=this.values.slice(0,M).concat(ne,this.values.slice(M+B)),Ge},T.prototype.notifyArrayChildUpdate=function(M,B,ne){var ye=!this.owned&&!1,Ge=Di(this),pt=Ge||ye?{object:this.proxy,type:"update",index:M,newValue:B,oldValue:ne}:null;this.atom.reportChanged(),Ge&&fi(this,pt)},T.prototype.notifyArraySplice=function(M,B,ne){var ye=!this.owned&&!1,Ge=Di(this),pt=Ge||ye?{object:this.proxy,type:"splice",index:M,removed:ne,added:B,removedCount:ne.length,addedCount:B.length}:null;this.atom.reportChanged(),Ge&&fi(this,pt)},T}(),uo={intercept:function(T){return this[W].intercept(T)},observe:function(T,M){return M===void 0&&(M=!1),this[W].observe(T,M)},clear:function(){return this.splice(0)},replace:function(T){var M=this[W];return M.spliceWithArray(0,M.values.length,T)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(T,M){for(var B=[],ne=2;ne<arguments.length;ne++)B[ne-2]=arguments[ne];var ye=this[W];switch(arguments.length){case 0:return[];case 1:return ye.spliceWithArray(T);case 2:return ye.spliceWithArray(T,M)}return ye.spliceWithArray(T,M,B)},spliceWithArray:function(T,M,B){return this[W].spliceWithArray(T,M,B)},push:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var B=this[W];return B.spliceWithArray(B.values.length,0,T),B.values.length},pop:function(){return this.splice(Math.max(this[W].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var T=[],M=0;M<arguments.length;M++)T[M]=arguments[M];var B=this[W];return B.spliceWithArray(0,0,T),B.values.length},reverse:function(){var T=this.slice();return T.reverse.apply(T,arguments)},sort:function(T){var M=this.slice();return M.sort.apply(M,arguments)},remove:function(T){var M=this[W],B=M.dehanceValues(M.values).indexOf(T);return B>-1&&(this.splice(B,1),!0)},get:function(T){var M=this[W];if(M&&T<M.values.length)return M.atom.reportObserved(),M.dehanceValue(M.values[T])},set:function(T,M){var B=this[W],ne=B.values;if(T<ne.length){Fn(B.atom);var ye=ne[T];if(Xi(B)){var Ge=Mr(B,{type:"update",object:B.proxy,index:T,newValue:M});if(!Ge)return;M=Ge.newValue}(M=B.enhancer(M,ye))!==ye&&(ne[T]=M,B.notifyArrayChildUpdate(T,M,ye))}else{if(T!==ne.length)throw new Error("[mobx.array] Index out of bounds, "+T+" is larger than "+ne.length);B.spliceWithArray(T,0,[M])}}};["concat","flat","includes","indexOf","join","lastIndexOf","slice","toString","toLocaleString"].forEach(function(T){typeof Array.prototype[T]=="function"&&(uo[T]=function(){var M=this[W];M.atom.reportObserved();var B=M.dehanceValues(M.values);return B[T].apply(B,arguments)})}),["every","filter","find","findIndex","flatMap","forEach","map","some"].forEach(function(T){typeof Array.prototype[T]=="function"&&(uo[T]=function(M,B){var ne=this,ye=this[W];return ye.atom.reportObserved(),ye.dehanceValues(ye.values)[T](function(Ge,pt){return M.call(B,Ge,pt,ne)},B)})}),["reduce","reduceRight"].forEach(function(T){uo[T]=function(){var M=this,B=this[W];B.atom.reportObserved();var ne=arguments[0];return arguments[0]=function(ye,Ge,pt){return Ge=B.dehanceValue(Ge),ne(ye,Ge,pt,M)},B.values[T].apply(B.values,arguments)}});var Hu,Va=D("ObservableArrayAdministration",ka);function va(T){return P(T)&&Va(T[W])}var kc,Wd={},Nc=function(){function T(M,B,ne){if(B===void 0&&(B=yt),ne===void 0&&(ne="ObservableMap@"+g()),this.enhancer=B,this.name=ne,this[Hu]=Wd,this._keysAtom=q(this.name+".keys()"),this[Symbol.toStringTag]="Map",typeof Map!="function")throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(M)}return T.prototype._has=function(M){return this._data.has(M)},T.prototype.has=function(M){var B=this;if(!Pn.trackingDerivation)return this._has(M);var ne=this._hasMap.get(M);if(!ne){var ye=ne=new Rr(this._has(M),Kt,this.name+"."+K(M)+"?",!1);this._hasMap.set(M,ye),Vr(ye,function(){return B._hasMap.delete(M)})}return ne.get()},T.prototype.set=function(M,B){var ne=this._has(M);if(Xi(this)){var ye=Mr(this,{type:ne?"update":"add",object:this,newValue:B,name:M});if(!ye)return this;B=ye.newValue}return ne?this._updateValue(M,B):this._addValue(M,B),this},T.prototype.delete=function(M){var B=this;if(Fn(this._keysAtom),Xi(this)&&!(ye=Mr(this,{type:"delete",object:this,name:M})))return!1;if(this._has(M)){var ne=Di(this),ye=ne?{type:"delete",object:this,oldValue:this._data.get(M).value,name:M}:null;return oi(function(){B._keysAtom.reportChanged(),B._updateHasMapEntry(M,!1),B._data.get(M).setNewValue(void 0),B._data.delete(M)}),ne&&fi(this,ye),!0}return!1},T.prototype._updateHasMapEntry=function(M,B){var ne=this._hasMap.get(M);ne&&ne.setNewValue(B)},T.prototype._updateValue=function(M,B){var ne=this._data.get(M);if((B=ne.prepareNewValue(B))!==Pn.UNCHANGED){var ye=Di(this),Ge=ye?{type:"update",object:this,oldValue:ne.value,name:M,newValue:B}:null;ne.setNewValue(B),ye&&fi(this,Ge)}},T.prototype._addValue=function(M,B){var ne=this;Fn(this._keysAtom),oi(function(){var pt=new Rr(B,ne.enhancer,ne.name+"."+K(M),!1);ne._data.set(M,pt),B=pt.value,ne._updateHasMapEntry(M,!0),ne._keysAtom.reportChanged()});var ye=Di(this),Ge=ye?{type:"add",object:this,name:M,newValue:B}:null;ye&&fi(this,Ge)},T.prototype.get=function(M){return this.has(M)?this.dehanceValue(this._data.get(M).get()):this.dehanceValue(void 0)},T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},T.prototype.values=function(){var M=this,B=this.keys();return Pr({next:function(){var ne=B.next(),ye=ne.done,Ge=ne.value;return{done:ye,value:ye?void 0:M.get(Ge)}}})},T.prototype.entries=function(){var M=this,B=this.keys();return Pr({next:function(){var ne=B.next(),ye=ne.done,Ge=ne.value;return{done:ye,value:ye?void 0:[Ge,M.get(Ge)]}}})},T.prototype[Hu=W,Symbol.iterator]=function(){return this.entries()},T.prototype.forEach=function(M,B){var ne,ye;try{for(var Ge=ge(this),pt=Ge.next();!pt.done;pt=Ge.next()){var Ht=Re(pt.value,2),_n=Ht[0],mr=Ht[1];M.call(B,mr,_n,this)}}catch(ln){ne={error:ln}}finally{try{pt&&!pt.done&&(ye=Ge.return)&&ye.call(Ge)}finally{if(ne)throw ne.error}}},T.prototype.merge=function(M){var B=this;return Vo(M)&&(M=M.toJS()),oi(function(){var ne=ir(!0);try{A(M)?Y(M).forEach(function(ye){return B.set(ye,M[ye])}):Array.isArray(M)?M.forEach(function(ye){var Ge=Re(ye,2),pt=Ge[0],Ht=Ge[1];return B.set(pt,Ht)}):N(M)?(M.constructor!==Map&&_("Cannot initialize from classes that inherit from Map: "+M.constructor.name),M.forEach(function(ye,Ge){return B.set(Ge,ye)})):M!=null&&_("Cannot initialize map from "+M)}finally{Kr(ne)}}),this},T.prototype.clear=function(){var M=this;oi(function(){ze(function(){var B,ne;try{for(var ye=ge(M.keys()),Ge=ye.next();!Ge.done;Ge=ye.next()){var pt=Ge.value;M.delete(pt)}}catch(Ht){B={error:Ht}}finally{try{Ge&&!Ge.done&&(ne=ye.return)&&ne.call(ye)}finally{if(B)throw B.error}}})})},T.prototype.replace=function(M){var B=this;return oi(function(){var ne,ye,Ge,pt,Ht=function(qo){if(N(qo)||Vo(qo))return qo;if(Array.isArray(qo))return new Map(qo);if(A(qo)){var Fl=new Map;for(var vl in qo)Fl.set(vl,qo[vl]);return Fl}return _("Cannot convert to map from '"+qo+"'")}(M),_n=new Map,mr=!1;try{for(var ln=ge(B._data.keys()),Wr=ln.next();!Wr.done;Wr=ln.next()){var pr=Wr.value;if(!Ht.has(pr))if(B.delete(pr))mr=!0;else{var Cr=B._data.get(pr);_n.set(pr,Cr)}}}catch(qo){ne={error:qo}}finally{try{Wr&&!Wr.done&&(ye=ln.return)&&ye.call(ln)}finally{if(ne)throw ne.error}}try{for(var ia=ge(Ht.entries()),bo=ia.next();!bo.done;bo=ia.next()){var qi=Re(bo.value,2),pl=(pr=qi[0],Cr=qi[1],B._data.has(pr));if(B.set(pr,Cr),B._data.has(pr)){var hl=B._data.get(pr);_n.set(pr,hl),pl||(mr=!0)}}}catch(qo){Ge={error:qo}}finally{try{bo&&!bo.done&&(pt=ia.return)&&pt.call(ia)}finally{if(Ge)throw Ge.error}}if(!mr)if(B._data.size!==_n.size)B._keysAtom.reportChanged();else for(var Ll=B._data.keys(),fu=_n.keys(),za=Ll.next(),du=fu.next();!za.done;){if(za.value!==du.value){B._keysAtom.reportChanged();break}za=Ll.next(),du=fu.next()}B._data=_n}),this},Object.defineProperty(T.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.toPOJO=function(){var M,B,ne={};try{for(var ye=ge(this),Ge=ye.next();!Ge.done;Ge=ye.next()){var pt=Re(Ge.value,2),Ht=pt[0],_n=pt[1];ne[typeof Ht=="symbol"?Ht:K(Ht)]=_n}}catch(mr){M={error:mr}}finally{try{Ge&&!Ge.done&&(B=ye.return)&&B.call(ye)}finally{if(M)throw M.error}}return ne},T.prototype.toJS=function(){return new Map(this)},T.prototype.toJSON=function(){return this.toPOJO()},T.prototype.toString=function(){var M=this;return this.name+"[{ "+Array.from(this.keys()).map(function(B){return K(B)+": "+M.get(B)}).join(", ")+" }]"},T.prototype.observe=function(M,B){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T}(),Vo=D("ObservableMap",Nc),Il={},Wa=function(){function T(M,B,ne){if(B===void 0&&(B=yt),ne===void 0&&(ne="ObservableSet@"+g()),this.name=ne,this[kc]=Il,this._data=new Set,this._atom=q(this.name),this[Symbol.toStringTag]="Set",typeof Set!="function")throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(ye,Ge){return B(ye,Ge,ne)},M&&this.replace(M)}return T.prototype.dehanceValue=function(M){return this.dehancer!==void 0?this.dehancer(M):M},T.prototype.clear=function(){var M=this;oi(function(){ze(function(){var B,ne;try{for(var ye=ge(M._data.values()),Ge=ye.next();!Ge.done;Ge=ye.next()){var pt=Ge.value;M.delete(pt)}}catch(Ht){B={error:Ht}}finally{try{Ge&&!Ge.done&&(ne=ye.return)&&ne.call(ye)}finally{if(B)throw B.error}}})})},T.prototype.forEach=function(M,B){var ne,ye;try{for(var Ge=ge(this),pt=Ge.next();!pt.done;pt=Ge.next()){var Ht=pt.value;M.call(B,Ht,Ht,this)}}catch(_n){ne={error:_n}}finally{try{pt&&!pt.done&&(ye=Ge.return)&&ye.call(Ge)}finally{if(ne)throw ne.error}}},Object.defineProperty(T.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),T.prototype.add=function(M){var B=this;if(Fn(this._atom),Xi(this)&&!(ye=Mr(this,{type:"add",object:this,newValue:M})))return this;if(!this.has(M)){oi(function(){B._data.add(B.enhancer(M,void 0)),B._atom.reportChanged()});var ne=Di(this),ye=ne?{type:"add",object:this,newValue:M}:null;ne&&fi(this,ye)}return this},T.prototype.delete=function(M){var B=this;if(Xi(this)&&!(ye=Mr(this,{type:"delete",object:this,oldValue:M})))return!1;if(this.has(M)){var ne=Di(this),ye=ne?{type:"delete",object:this,oldValue:M}:null;return oi(function(){B._atom.reportChanged(),B._data.delete(M)}),ne&&fi(this,ye),!0}return!1},T.prototype.has=function(M){return this._atom.reportObserved(),this._data.has(this.dehanceValue(M))},T.prototype.entries=function(){var M=0,B=Array.from(this.keys()),ne=Array.from(this.values());return Pr({next:function(){var ye=M;return M+=1,ye<ne.length?{value:[B[ye],ne[ye]],done:!1}:{done:!0}}})},T.prototype.keys=function(){return this.values()},T.prototype.values=function(){this._atom.reportObserved();var M=this,B=0,ne=Array.from(this._data.values());return Pr({next:function(){return B<ne.length?{value:M.dehanceValue(ne[B++]),done:!1}:{done:!0}}})},T.prototype.replace=function(M){var B=this;return Yo(M)&&(M=M.toJS()),oi(function(){var ne=ir(!0);try{Array.isArray(M)||$(M)?(B.clear(),M.forEach(function(ye){return B.add(ye)})):M!=null&&_("Cannot initialize set from "+M)}finally{Kr(ne)}}),this},T.prototype.observe=function(M,B){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.toJS=function(){return new Set(this)},T.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},T.prototype[kc=W,Symbol.iterator]=function(){return this.values()},T}(),Yo=D("ObservableSet",Wa),Rc=function(){function T(M,B,ne,ye){B===void 0&&(B=new Map),this.target=M,this.values=B,this.name=ne,this.defaultEnhancer=ye,this.keysAtom=new C(ne+".keys")}return T.prototype.read=function(M){return this.values.get(M).get()},T.prototype.write=function(M,B){var ne=this.target,ye=this.values.get(M);if(ye instanceof Ua)ye.set(B);else{if(Xi(this)){if(!(pt=Mr(this,{type:"update",object:this.proxy||ne,name:M,newValue:B})))return;B=pt.newValue}if((B=ye.prepareNewValue(B))!==Pn.UNCHANGED){var Ge=Di(this),pt=Ge?{type:"update",object:this.proxy||ne,oldValue:ye.value,name:M,newValue:B}:null;ye.setNewValue(B),Ge&&fi(this,pt)}}},T.prototype.has=function(M){var B=this.pendingKeys||(this.pendingKeys=new Map),ne=B.get(M);if(ne)return ne.get();var ye=!!this.values.get(M);return ne=new Rr(ye,Kt,this.name+"."+K(M)+"?",!1),B.set(M,ne),ne.get()},T.prototype.addObservableProp=function(M,B,ne){ne===void 0&&(ne=this.defaultEnhancer);var ye=this.target;if(Xi(this)){var Ge=Mr(this,{object:this.proxy||ye,name:M,type:"add",newValue:B});if(!Ge)return;B=Ge.newValue}var pt=new Rr(B,ne,this.name+"."+K(M),!1);this.values.set(M,pt),B=pt.value,Object.defineProperty(ye,M,function(Ht){return ya[Ht]||(ya[Ht]={configurable:!0,enumerable:!0,get:function(){return this[W].read(Ht)},set:function(_n){this[W].write(Ht,_n)}})}(M)),this.notifyPropertyAddition(M,B)},T.prototype.addComputedProp=function(M,B,ne){var ye,Ge,pt,Ht=this.target;ne.name=ne.name||this.name+"."+K(B),this.values.set(B,new Ua(ne)),(M===Ht||(ye=M,Ge=B,!(pt=Object.getOwnPropertyDescriptor(ye,Ge))||pt.configurable!==!1&&pt.writable!==!1))&&Object.defineProperty(M,B,function(_n){return Ms[_n]||(Ms[_n]={configurable:Pn.computedConfigurable,enumerable:!1,get:function(){return Ii(this).read(_n)},set:function(mr){Ii(this).write(_n,mr)}})}(B))},T.prototype.remove=function(M){if(this.values.has(M)){var B=this.target;if(Xi(this)&&!(_n=Mr(this,{object:this.proxy||B,name:M,type:"remove"})))return;try{Hi();var ne=Di(this),ye=!1,Ge=this.values.get(M),pt=Ge&&Ge.get();if(Ge&&Ge.set(void 0),this.keysAtom.reportChanged(),this.values.delete(M),this.pendingKeys){var Ht=this.pendingKeys.get(M);Ht&&Ht.set(!1)}delete this.target[M];var _n=ne?{type:"remove",object:this.proxy||B,oldValue:pt,name:M}:null;ne&&fi(this,_n)}finally{ta()}}},T.prototype.illegalAccess=function(M,B){},T.prototype.observe=function(M,B){return Pa(this,M)},T.prototype.intercept=function(M){return ha(this,M)},T.prototype.notifyPropertyAddition=function(M,B){var ne=Di(this),ye=ne?{type:"add",object:this.proxy||this.target,name:M,newValue:B}:null;if(ne&&fi(this,ye),this.pendingKeys){var Ge=this.pendingKeys.get(M);Ge&&Ge.set(!0)}this.keysAtom.reportChanged()},T.prototype.getKeys=function(){var M,B;this.keysAtom.reportObserved();var ne=[];try{for(var ye=ge(this.values),Ge=ye.next();!Ge.done;Ge=ye.next()){var pt=Re(Ge.value,2),Ht=pt[0];pt[1]instanceof Rr&&ne.push(Ht)}}catch(_n){M={error:_n}}finally{try{Ge&&!Ge.done&&(B=ye.return)&&B.call(ye)}finally{if(M)throw M.error}}return ne},T}();function ra(T,M,B){if(M===void 0&&(M=""),B===void 0&&(B=yt),Object.prototype.hasOwnProperty.call(T,W))return T[W];A(T)||(M=(T.constructor.name||"ObservableObject")+"@"+g()),M||(M="ObservableObject@"+g());var ne=new Rc(T,new Map,K(M),B);return R(T,W,ne),ne}var ya=Object.create(null),Ms=Object.create(null);function Ii(T){var M=T[W];return M||(st(T),T[W])}var Yi=D("ObservableObjectAdministration",Rc);function ii(T){return!!P(T)&&(st(T),Yi(T[W]))}function oa(T,M){if(typeof T=="object"&&T!==null){if(va(T))return M!==void 0&&_(!1),T[W].atom;if(Yo(T))return T[W];if(Vo(T)){var B=T;return M===void 0?B._keysAtom:((ne=B._data.get(M)||B._hasMap.get(M))||_(!1),ne)}var ne;if(st(T),M&&!T[W]&&T[M],ii(T))return M?((ne=T[W].values.get(M))||_(!1),ne):_(!1);if(G(T)||fl(T)||zu(T))return T}else if(typeof T=="function"&&zu(T[W]))return T[W];return _(!1)}function Ti(T,M){return T||_("Expecting some object"),M!==void 0?Ti(oa(T,M)):G(T)||fl(T)||zu(T)||Vo(T)||Yo(T)?T:(st(T),T[W]?T[W]:void _(!1))}var it=Object.prototype.toString;function Ct(T,M,B){return B===void 0&&(B=-1),Ft(T,M,B)}function Ft(T,M,B,ne,ye){if(T===M)return T!==0||1/T==1/M;if(T==null||M==null)return!1;if(T!=T)return M!=M;var Ge=typeof T;if(Ge!=="function"&&Ge!=="object"&&typeof M!="object")return!1;var pt=it.call(T);if(pt!==it.call(M))return!1;switch(pt){case"[object RegExp]":case"[object String]":return""+T==""+M;case"[object Number]":return+T!=+T?+M!=+M:+T==0?1/+T==1/M:+T==+M;case"[object Date]":case"[object Boolean]":return+T==+M;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(T)===Symbol.valueOf.call(M);case"[object Map]":case"[object Set]":B>=0&&B++}T=fn(T),M=fn(M);var Ht=pt==="[object Array]";if(!Ht){if(typeof T!="object"||typeof M!="object")return!1;var _n=T.constructor,mr=M.constructor;if(_n!==mr&&!(typeof _n=="function"&&_n instanceof _n&&typeof mr=="function"&&mr instanceof mr)&&"constructor"in T&&"constructor"in M)return!1}if(B===0)return!1;B<0&&(B=-1),ye=ye||[];for(var ln=(ne=ne||[]).length;ln--;)if(ne[ln]===T)return ye[ln]===M;if(ne.push(T),ye.push(M),Ht){if((ln=T.length)!==M.length)return!1;for(;ln--;)if(!Ft(T[ln],M[ln],B-1,ne,ye))return!1}else{var Wr=Object.keys(T),pr=void 0;if(ln=Wr.length,Object.keys(M).length!==ln)return!1;for(;ln--;)if(!ur(M,pr=Wr[ln])||!Ft(T[pr],M[pr],B-1,ne,ye))return!1}return ne.pop(),ye.pop(),!0}function fn(T){return va(T)?T.slice():N(T)||Vo(T)||$(T)||Yo(T)?Array.from(T.entries()):T}function ur(T,M){return Object.prototype.hasOwnProperty.call(T,M)}function Pr(T){return T[Symbol.iterator]=so,T}function so(){return this}if(typeof Proxy>"u"||typeof Symbol>"u")throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:wc,extras:{getDebugName:function(T,M){return(M!==void 0?oa(T,M):ii(T)||Vo(T)||Yo(T)?Ti(T):oa(T)).name}},$mobx:W})}).call(this,r(163),r(68))},function(n,o,r){var s=r(113),c=r(42),v=r(179);s||c(Object.prototype,"toString",v,{unsafe:!0})},function(n,o,r){var s=r(41),c=r(100),v=r(80),h=r(58),g=r(116),_="Array Iterator",w=h.set,O=h.getterFor(_);n.exports=g(Array,"Array",function(S,P){w(this,{type:_,target:s(S),index:0,kind:P})},function(){var S=O(this),P=S.target,A=S.kind,R=S.index++;return!P||R>=P.length?(S.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:R,done:!1}:A=="values"?{value:P[R],done:!1}:{value:[R,P[R]],done:!1}},"values"),v.Arguments=v.Array,c("keys"),c("values"),c("entries")},function(n,o,r){var s=r(16),c=r(7),v=r(46),h=r(76),g=r(34),_=r(15),w=r(71),O=r(36),S=r(108),P=r(18),A=r(35),R=r(96),D=r(30),N=r(33),$=r(54),Y=r(87),K=r(32),X=r(40),te=r(41),W=r(86),C=r(39),G=r(69),q=r(60),z=r(77),Z=r(74),me=r(139),ge=r(112),Re=r(50),Be=r(38),ve=r(84),_e=r(98),Ce=r(42),tt=r(89),gt=r(93),st=r(72),At=r(90),jt=r(28),yt=r(140),Kt=r(141),je=r(78),we=r(58),Me=r(79).forEach,dt=gt("hidden"),zt="Symbol",Et=jt("toPrimitive"),rn=we.set,yn=we.getterFor(zt),Tn=Object.prototype,pn=c.Symbol,ut=pn&&pn.prototype,xn=c.TypeError,Le=c.QObject,mn=v("JSON","stringify"),qn=Re.f,re=Be.f,Kn=me.f,vr=ve.f,Gr=_([].push),eo=tt("symbols"),Fn=tt("op-symbols"),ho=tt("string-to-symbol-registry"),Oe=tt("symbol-to-string-registry"),ze=tt("wks"),Ne=!Le||!Le.prototype||!Le.prototype.findChild,rt=O&&P(function(){return q(re({},"a",{get:function(){return re(this,"a",{value:7}).a}})).a!=7})?function(Sn,$n,Hn){var ir=qn(Tn,$n);ir&&delete Tn[$n],re(Sn,$n,Hn),ir&&Sn!==Tn&&re(Tn,$n,ir)}:re,en=function(Sn,$n){var Hn=eo[Sn]=q(ut);return rn(Hn,{type:zt,tag:Sn,description:$n}),O||(Hn.description=$n),Hn},Yt=function(Sn,$n,Hn){Sn===Tn&&Yt(Fn,$n,Hn),K(Sn);var ir=W($n);return K(Hn),A(eo,ir)?(Hn.enumerable?(A(Sn,dt)&&Sn[dt][ir]&&(Sn[dt][ir]=!1),Hn=q(Hn,{enumerable:G(0,!1)})):(A(Sn,dt)||re(Sn,dt,G(1,{})),Sn[dt][ir]=!0),rt(Sn,ir,Hn)):re(Sn,ir,Hn)},kn=function(Sn,$n){K(Sn);var Hn=te($n),ir=z(Hn).concat(Go(Hn));return Me(ir,function(Kr){O&&!g(Er,Hn,Kr)||Yt(Sn,Kr,Hn[Kr])}),Sn},Er=function(Sn){var $n=W(Sn),Hn=g(vr,this,$n);return!(this===Tn&&A(eo,$n)&&!A(Fn,$n))&&(!(Hn||!A(this,$n)||!A(eo,$n)||A(this,dt)&&this[dt][$n])||Hn)},ni=function(Sn,$n){var Hn=te(Sn),ir=W($n);if(Hn!==Tn||!A(eo,ir)||A(Fn,ir)){var Kr=qn(Hn,ir);return!Kr||!A(eo,ir)||A(Hn,dt)&&Hn[dt][ir]||(Kr.enumerable=!0),Kr}},yi=function(Sn){var $n=Kn(te(Sn)),Hn=[];return Me($n,function(ir){A(eo,ir)||A(st,ir)||Gr(Hn,ir)}),Hn},Go=function(Sn){var $n=Sn===Tn,Hn=Kn($n?Fn:te(Sn)),ir=[];return Me(Hn,function(Kr){!A(eo,Kr)||$n&&!A(Tn,Kr)||Gr(ir,eo[Kr])}),ir};if(S||(pn=function(){if($(ut,this))throw xn("Symbol is not a constructor");var Sn=arguments.length&&arguments[0]!==void 0?C(arguments[0]):void 0,$n=At(Sn),Hn=function(ir){this===Tn&&g(Hn,Fn,ir),A(this,dt)&&A(this[dt],$n)&&(this[dt][$n]=!1),rt(this,$n,G(1,ir))};return O&&Ne&&rt(Tn,$n,{configurable:!0,set:Hn}),en($n,Sn)},Ce(ut=pn.prototype,"toString",function(){return yn(this).tag}),Ce(pn,"withoutSetter",function(Sn){return en(At(Sn),Sn)}),ve.f=Er,Be.f=Yt,Re.f=ni,Z.f=me.f=yi,ge.f=Go,yt.f=function(Sn){return en(jt(Sn),Sn)},O&&(re(ut,"description",{configurable:!0,get:function(){return yn(this).description}}),w||Ce(Tn,"propertyIsEnumerable",Er,{unsafe:!0}))),s({global:!0,wrap:!0,forced:!S,sham:!S},{Symbol:pn}),Me(z(ze),function(Sn){Kt(Sn)}),s({target:zt,stat:!0,forced:!S},{for:function(Sn){var $n=C(Sn);if(A(ho,$n))return ho[$n];var Hn=pn($n);return ho[$n]=Hn,Oe[Hn]=$n,Hn},keyFor:function(Sn){if(!Y(Sn))throw xn(Sn+" is not a symbol");if(A(Oe,Sn))return Oe[Sn]},useSetter:function(){Ne=!0},useSimple:function(){Ne=!1}}),s({target:"Object",stat:!0,forced:!S,sham:!O},{create:function(Sn,$n){return $n===void 0?q(Sn):kn(q(Sn),$n)},defineProperty:Yt,defineProperties:kn,getOwnPropertyDescriptor:ni}),s({target:"Object",stat:!0,forced:!S},{getOwnPropertyNames:yi,getOwnPropertySymbols:Go}),s({target:"Object",stat:!0,forced:P(function(){ge.f(1)})},{getOwnPropertySymbols:function(Sn){return ge.f(X(Sn))}}),mn&&s({target:"JSON",stat:!0,forced:!S||P(function(){var Sn=pn();return mn([Sn])!="[null]"||mn({a:Sn})!="{}"||mn(Object(Sn))!="{}"})},{stringify:function(Sn,$n,Hn){var ir=_e(arguments),Kr=$n;if((N($n)||Sn!==void 0)&&!Y(Sn))return R($n)||($n=function(Rr,cl){if(D(Kr)&&(cl=g(Kr,this,Rr,cl)),!Y(cl))return cl}),ir[1]=$n,h(mn,null,ir)}}),!ut[Et]){var Xo=ut.valueOf;Ce(ut,Et,function(Sn){return g(Xo,this)})}je(pn,zt),st[dt]=!0},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(3),g=r(57),_=r(28),w=_("iterator"),O=_("toStringTag"),S=h.values,P=function(R,D){if(R){if(R[w]!==S)try{g(R,w,S)}catch{R[w]=S}if(R[O]||g(R,O,D),c[D]){for(var N in h)if(R[N]!==h[N])try{g(R,N,h[N])}catch{R[N]=h[N]}}}};for(var A in c)P(s[A]&&s[A].prototype,A);P(v,"DOMTokenList")},function(n,o,r){var s=r(151).charAt,c=r(39),v=r(58),h=r(116),g="String Iterator",_=v.set,w=v.getterFor(g);h(String,"String",function(O){_(this,{type:g,string:c(O),index:0})},function(){var O,S=w(this),P=S.string,A=S.index;return A>=P.length?{value:void 0,done:!0}:(O=s(P,A),S.index+=O.length,{value:O,done:!1})})},function(n,o,r){(function(s){var c=function(v){return v&&v.Math==Math&&v};n.exports=c(typeof globalThis=="object"&&globalThis)||c(typeof window=="object"&&window)||c(typeof self=="object"&&self)||c(typeof s=="object"&&s)||function(){return this}()||Function("return this")()}).call(this,r(68))},function(n,o,r){var s=r(16),c=r(36),v=r(7),h=r(15),g=r(35),_=r(30),w=r(54),O=r(39),S=r(38).f,P=r(134),A=v.Symbol,R=A&&A.prototype;if(c&&_(A)&&(!("description"in R)||A().description!==void 0)){var D={},N=function(){var C=arguments.length<1||arguments[0]===void 0?void 0:O(arguments[0]),G=w(R,this)?new A(C):C===void 0?A():A(C);return C===""&&(D[G]=!0),G};P(N,A),N.prototype=R,R.constructor=N;var $=String(A("test"))=="Symbol(test)",Y=h(R.toString),K=h(R.valueOf),X=/^Symbol\((.*)\)[^)]+$/,te=h("".replace),W=h("".slice);S(R,"description",{configurable:!0,get:function(){var C=K(this),G=Y(C);if(g(D,C))return"";var q=$?W(G,7,-1):te(G,X,"$1");return q===""?void 0:q}}),s({global:!0,forced:!0},{Symbol:N})}},function(n,o,r){r(141)("iterator")},function(n,o,r){r.d(o,"a",function(){return h.a}),r.d(o,"c",function(){return h.e}),r.d(o,"h",function(){return X}),r.d(o,"i",function(){return $}),r.d(o,"j",function(){return D}),r.d(o,"b",function(){return Re}),r.d(o,"e",function(){return Ce}),r.d(o,"f",function(){return Be}),r.d(o,"g",function(){return eo});var s,c,v,h=r(0),g=0,_=[],w=h.i.__b,O=h.i.__r,S=h.i.diffed,P=h.i.__c,A=h.i.unmount;function R(Oe,ze){h.i.__h&&h.i.__h(c,Oe,g||ze),g=0;var Ne=c.__H||(c.__H={__:[],__h:[]});return Oe>=Ne.__.length&&Ne.__.push({}),Ne.__[Oe]}function D(Oe){return g=1,N(Z,Oe)}function N(Oe,ze,Ne){var rt=R(s++,2);return rt.t=Oe,rt.__c||(rt.__=[Ne?Ne(ze):Z(void 0,ze),function(en){var Yt=rt.t(rt.__[0],en);rt.__[0]!==Yt&&(rt.__=[Yt,rt.__[1]],rt.__c.setState({}))}],rt.__c=c),rt.__}function $(Oe,ze){var Ne=R(s++,3);!h.i.__s&&z(Ne.__H,ze)&&(Ne.__=Oe,Ne.__H=ze,c.__H.__h.push(Ne))}function Y(Oe,ze){var Ne=R(s++,4);!h.i.__s&&z(Ne.__H,ze)&&(Ne.__=Oe,Ne.__H=ze,c.__h.push(Ne))}function K(Oe,ze){var Ne=R(s++,7);return z(Ne.__H,ze)&&(Ne.__=Oe(),Ne.__H=ze,Ne.__h=Oe),Ne.__}function X(Oe,ze){return g=8,K(function(){return Oe},ze)}function te(){var Oe;for(_.sort(function(ze,Ne){return ze.__v.__b-Ne.__v.__b});Oe=_.pop();)if(Oe.__P)try{Oe.__H.__h.forEach(G),Oe.__H.__h.forEach(q),Oe.__H.__h=[]}catch(ze){Oe.__H.__h=[],h.i.__e(ze,Oe.__v)}}h.i.__b=function(Oe){c=null,w&&w(Oe)},h.i.__r=function(Oe){O&&O(Oe),s=0;var ze=(c=Oe.__c).__H;ze&&(ze.__h.forEach(G),ze.__h.forEach(q),ze.__h=[])},h.i.diffed=function(Oe){S&&S(Oe);var ze=Oe.__c;ze&&ze.__H&&ze.__H.__h.length&&(_.push(ze)!==1&&v===h.i.requestAnimationFrame||((v=h.i.requestAnimationFrame)||C)(te)),c=null},h.i.__c=function(Oe,ze){ze.some(function(Ne){try{Ne.__h.forEach(G),Ne.__h=Ne.__h.filter(function(rt){return!rt.__||q(rt)})}catch(rt){ze.some(function(en){en.__h&&(en.__h=[])}),ze=[],h.i.__e(rt,Ne.__v)}}),P&&P(Oe,ze)},h.i.unmount=function(Oe){A&&A(Oe);var ze,Ne=Oe.__c;Ne&&Ne.__H&&(Ne.__H.__.forEach(function(rt){try{G(rt)}catch(en){ze=en}}),ze&&h.i.__e(ze,Ne.__v))};var W=typeof requestAnimationFrame=="function";function C(Oe){var ze,Ne=function(){clearTimeout(rt),W&&cancelAnimationFrame(ze),setTimeout(Oe)},rt=setTimeout(Ne,100);W&&(ze=requestAnimationFrame(Ne))}function G(Oe){var ze=c,Ne=Oe.__c;typeof Ne=="function"&&(Oe.__c=void 0,Ne()),c=ze}function q(Oe){var ze=c;Oe.__c=Oe.__(),c=ze}function z(Oe,ze){return!Oe||Oe.length!==ze.length||ze.some(function(Ne,rt){return Ne!==Oe[rt]})}function Z(Oe,ze){return typeof ze=="function"?ze(Oe):ze}function me(Oe,ze){for(var Ne in ze)Oe[Ne]=ze[Ne];return Oe}function ge(Oe,ze){for(var Ne in Oe)if(Ne!=="__source"&&!(Ne in ze))return!0;for(var rt in ze)if(rt!=="__source"&&Oe[rt]!==ze[rt])return!0;return!1}function Re(Oe){this.props=Oe}function Be(Oe,ze){function Ne(en){var Yt=this.props.ref,kn=Yt==en.ref;return!kn&&Yt&&(Yt.call?Yt(null):Yt.current=null),ze?!ze(this.props,en)||!kn:ge(this.props,en)}function rt(en){return this.shouldComponentUpdate=Ne,Object(h.e)(Oe,en)}return rt.displayName="Memo("+(Oe.displayName||Oe.name)+")",rt.prototype.isReactComponent=!0,rt.__f=!0,rt}(Re.prototype=new h.a).isPureReactComponent=!0,Re.prototype.shouldComponentUpdate=function(Oe,ze){return ge(this.props,Oe)||ge(this.state,ze)};var ve=h.i.__b;h.i.__b=function(Oe){Oe.type&&Oe.type.__f&&Oe.ref&&(Oe.props.ref=Oe.ref,Oe.ref=null),ve&&ve(Oe)};var _e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Ce(Oe){function ze(Ne,rt){var en=me({},Ne);return delete en.ref,Oe(en,!(rt=Ne.ref||rt)||typeof rt=="object"&&!("current"in rt)?null:rt)}return ze.$$typeof=_e,ze.render=ze,ze.prototype.isReactComponent=ze.__f=!0,ze.displayName="ForwardRef("+(Oe.displayName||Oe.name)+")",ze}var tt=function(Oe,ze){return Oe==null?null:Object(h.k)(Object(h.k)(Oe).map(ze))},gt={map:tt,forEach:tt,count:function(Oe){return Oe?Object(h.k)(Oe).length:0},only:function(Oe){var ze=Object(h.k)(Oe);if(ze.length!==1)throw"Children.only";return ze[0]},toArray:h.k},st=h.i.__e;h.i.__e=function(Oe,ze,Ne){if(Oe.then){for(var rt,en=ze;en=en.__;)if((rt=en.__c)&&rt.__c)return ze.__e==null&&(ze.__e=Ne.__e,ze.__k=Ne.__k),rt.__c(Oe,ze)}st(Oe,ze,Ne)};var At=h.i.unmount;function jt(Oe,ze,Ne){return Oe&&(Oe.__c&&Oe.__c.__H&&(Oe.__c.__H.__.forEach(function(rt){typeof rt.__c=="function"&&rt.__c()}),Oe.__c.__H=null),(Oe=me({},Oe)).__c!=null&&(Oe.__c.__P===Ne&&(Oe.__c.__P=ze),Oe.__c=null),Oe.__k=Oe.__k&&Oe.__k.map(function(rt){return jt(rt,ze,Ne)})),Oe}function yt(Oe,ze,Ne){return Oe&&(Oe.__v=null,Oe.__k=Oe.__k&&Oe.__k.map(function(rt){return yt(rt,ze,Ne)}),Oe.__c&&Oe.__c.__P===ze&&(Oe.__e&&Ne.insertBefore(Oe.__e,Oe.__d),Oe.__c.__e=!0,Oe.__c.__P=Ne)),Oe}function Kt(){this.__u=0,this.t=null,this.__b=null}function je(Oe){var ze=Oe.__.__c;return ze&&ze.__e&&ze.__e(Oe)}function we(){this.u=null,this.o=null}h.i.unmount=function(Oe){var ze=Oe.__c;ze&&ze.__R&&ze.__R(),ze&&Oe.__h===!0&&(Oe.type=null),At&&At(Oe)},(Kt.prototype=new h.a).__c=function(Oe,ze){var Ne=ze.__c,rt=this;rt.t==null&&(rt.t=[]),rt.t.push(Ne);var en=je(rt.__v),Yt=!1,kn=function(){Yt||(Yt=!0,Ne.__R=null,en?en(Er):Er())};Ne.__R=kn;var Er=function(){if(!--rt.__u){if(rt.state.__e){var yi=rt.state.__e;rt.__v.__k[0]=yt(yi,yi.__c.__P,yi.__c.__O)}var Go;for(rt.setState({__e:rt.__b=null});Go=rt.t.pop();)Go.forceUpdate()}},ni=ze.__h===!0;rt.__u++||ni||rt.setState({__e:rt.__b=rt.__v.__k[0]}),Oe.then(kn,kn)},Kt.prototype.componentWillUnmount=function(){this.t=[]},Kt.prototype.render=function(Oe,ze){if(this.__b){if(this.__v.__k){var Ne=document.createElement("div"),rt=this.__v.__k[0].__c;this.__v.__k[0]=jt(this.__b,Ne,rt.__O=rt.__P)}this.__b=null}var en=ze.__e&&Object(h.e)(h.b,null,Oe.fallback);return en&&(en.__h=null),[Object(h.e)(h.b,null,ze.__e?null:Oe.children),en]};var Me=function(Oe,ze,Ne){if(++Ne[1]===Ne[0]&&Oe.o.delete(ze),Oe.props.revealOrder&&(Oe.props.revealOrder[0]!=="t"||!Oe.o.size))for(Ne=Oe.u;Ne;){for(;Ne.length>3;)Ne.pop()();if(Ne[1]<Ne[0])break;Oe.u=Ne=Ne[2]}};function dt(Oe){return this.getChildContext=function(){return Oe.context},Oe.children}function zt(Oe){var ze=this,Ne=Oe.i;ze.componentWillUnmount=function(){Object(h.j)(null,ze.l),ze.l=null,ze.i=null},ze.i&&ze.i!==Ne&&ze.componentWillUnmount(),Oe.__v?(ze.l||(ze.i=Ne,ze.l={nodeType:1,parentNode:Ne,childNodes:[],appendChild:function(rt){this.childNodes.push(rt),ze.i.appendChild(rt)},insertBefore:function(rt,en){this.childNodes.push(rt),ze.i.appendChild(rt)},removeChild:function(rt){this.childNodes.splice(this.childNodes.indexOf(rt)>>>1,1),ze.i.removeChild(rt)}}),Object(h.j)(Object(h.e)(dt,{context:ze.context},Oe.__v),ze.l)):ze.l&&ze.componentWillUnmount()}(we.prototype=new h.a).__e=function(Oe){var ze=this,Ne=je(ze.__v),rt=ze.o.get(Oe);return rt[0]++,function(en){var Yt=function(){ze.props.revealOrder?(rt.push(en),Me(ze,Oe,rt)):en()};Ne?Ne(Yt):Yt()}},we.prototype.render=function(Oe){this.u=null,this.o=new Map;var ze=Object(h.k)(Oe.children);Oe.revealOrder&&Oe.revealOrder[0]==="b"&&ze.reverse();for(var Ne=ze.length;Ne--;)this.o.set(ze[Ne],this.u=[1,0,this.u]);return Oe.children},we.prototype.componentDidUpdate=we.prototype.componentDidMount=function(){var Oe=this;this.o.forEach(function(ze,Ne){Me(Oe,Ne,ze)})};var Et=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,rn=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,yn=typeof document<"u",Tn=function(Oe){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(Oe)};h.a.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(Oe){Object.defineProperty(h.a.prototype,Oe,{configurable:!0,get:function(){return this["UNSAFE_"+Oe]},set:function(ze){Object.defineProperty(this,Oe,{configurable:!0,writable:!0,value:ze})}})});var pn=h.i.event;function ut(){}function xn(){return this.cancelBubble}function Le(){return this.defaultPrevented}h.i.event=function(Oe){return pn&&(Oe=pn(Oe)),Oe.persist=ut,Oe.isPropagationStopped=xn,Oe.isDefaultPrevented=Le,Oe.nativeEvent=Oe};var mn,qn={configurable:!0,get:function(){return this.class}},re=h.i.vnode;h.i.vnode=function(Oe){var ze=Oe.type,Ne=Oe.props,rt=Ne;if(typeof ze=="string"){var en=ze.indexOf("-")===-1;for(var Yt in rt={},Ne){var kn=Ne[Yt];yn&&Yt==="children"&&ze==="noscript"||Yt==="value"&&"defaultValue"in Ne&&kn==null||(Yt==="defaultValue"&&"value"in Ne&&Ne.value==null?Yt="value":Yt==="download"&&kn===!0?kn="":/ondoubleclick/i.test(Yt)?Yt="ondblclick":/^onchange(textarea|input)/i.test(Yt+ze)&&!Tn(Ne.type)?Yt="oninput":/^onfocus$/i.test(Yt)?Yt="onfocusin":/^onblur$/i.test(Yt)?Yt="onfocusout":/^on(Ani|Tra|Tou|BeforeInp)/.test(Yt)?Yt=Yt.toLowerCase():en&&rn.test(Yt)?Yt=Yt.replace(/[A-Z0-9]/,"-$&").toLowerCase():kn===null&&(kn=void 0),rt[Yt]=kn)}ze=="select"&&rt.multiple&&Array.isArray(rt.value)&&(rt.value=Object(h.k)(Ne.children).forEach(function(Er){Er.props.selected=rt.value.indexOf(Er.props.value)!=-1})),ze=="select"&&rt.defaultValue!=null&&(rt.value=Object(h.k)(Ne.children).forEach(function(Er){Er.props.selected=rt.multiple?rt.defaultValue.indexOf(Er.props.value)!=-1:rt.defaultValue==Er.props.value})),Oe.props=rt,Ne.class!=Ne.className&&(qn.enumerable="className"in Ne,Ne.className!=null&&(rt.class=Ne.className),Object.defineProperty(rt,"className",qn))}Oe.$$typeof=Et,re&&re(Oe)};var Kn=h.i.__r;h.i.__r=function(Oe){Kn&&Kn(Oe),mn=Oe.__c};var vr={ReactCurrentDispatcher:{current:{readContext:function(Oe){return mn.__n[Oe.__c].props.value}}}};function Gr(Oe){return!!Oe&&Oe.$$typeof===Et}var eo=function(Oe,ze){return Oe(ze)},Fn=h.b,ho={useState:D,useReducer:N,useEffect:$,useLayoutEffect:Y,useRef:function(Oe){return g=5,K(function(){return{current:Oe}},[])},useImperativeHandle:function(Oe,ze,Ne){g=6,Y(function(){typeof Oe=="function"?Oe(ze()):Oe&&(Oe.current=ze())},Ne==null?Ne:Ne.concat(Oe))},useMemo:K,useCallback:X,useContext:function(Oe){var ze=c.context[Oe.__c],Ne=R(s++,9);return Ne.c=Oe,ze?(Ne.__==null&&(Ne.__=!0,ze.sub(c)),ze.props.value):Oe.__},useDebugValue:function(Oe,ze){h.i.useDebugValue&&h.i.useDebugValue(ze?ze(Oe):Oe)},version:"17.0.2",Children:gt,render:function(Oe,ze,Ne){return ze.__k==null&&(ze.textContent=""),Object(h.j)(Oe,ze),typeof Ne=="function"&&Ne(),Oe?Oe.__c:null},hydrate:function(Oe,ze,Ne){return Object(h.h)(Oe,ze),typeof Ne=="function"&&Ne(),Oe?Oe.__c:null},unmountComponentAtNode:function(Oe){return!!Oe.__k&&(Object(h.j)(null,Oe),!0)},createPortal:function(Oe,ze){return Object(h.e)(zt,{__v:Oe,i:ze})},createElement:h.e,createContext:h.d,createFactory:function(Oe){return h.e.bind(null,Oe)},cloneElement:function(Oe){return Gr(Oe)?h.c.apply(null,arguments):Oe},createRef:h.f,Fragment:h.b,isValidElement:Gr,findDOMNode:function(Oe){return Oe&&(Oe.base||Oe.nodeType===1&&Oe)||null},Component:h.a,PureComponent:Re,memo:Be,forwardRef:Ce,flushSync:function(Oe,ze){return Oe(ze)},unstable_batchedUpdates:eo,StrictMode:Fn,Suspense:Kt,SuspenseList:we,lazy:function(Oe){var ze,Ne,rt;function en(Yt){if(ze||(ze=Oe()).then(function(kn){Ne=kn.default||kn},function(kn){rt=kn}),rt)throw rt;if(!Ne)throw ze;return Object(h.e)(Ne,Yt)}return en.displayName="Lazy",en.__f=!0,en},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:vr};o.d=ho},function(n,o,r){var s=r(7),c=r(152),v=r(153),h=r(187),g=r(57),_=function(O){if(O&&O.forEach!==h)try{g(O,"forEach",h)}catch{O.forEach=h}};for(var w in c)c[w]&&_(s[w]&&s[w].prototype);_(v)},function(n,o,r){r(16)({target:"Object",stat:!0},{setPrototypeOf:r(102)})},function(n,o,r){var s=r(16),c=r(18),v=r(40),h=r(101),g=r(143);s({target:"Object",stat:!0,forced:c(function(){h(1)}),sham:!g},{getPrototypeOf:function(_){return h(v(_))}})},function(n,o,r){var s=r(16),c=r(46),v=r(76),h=r(203),g=r(165),_=r(32),w=r(33),O=r(60),S=r(18),P=c("Reflect","construct"),A=Object.prototype,R=[].push,D=S(function(){function Y(){}return!(P(function(){},[],Y)instanceof Y)}),N=!S(function(){P(function(){})}),$=D||N;s({target:"Reflect",stat:!0,forced:$,sham:$},{construct:function(Y,K){g(Y),_(K);var X=arguments.length<3?Y:g(arguments[2]);if(N&&!D)return P(Y,K,X);if(Y==X){switch(K.length){case 0:return new Y;case 1:return new Y(K[0]);case 2:return new Y(K[0],K[1]);case 3:return new Y(K[0],K[1],K[2]);case 4:return new Y(K[0],K[1],K[2],K[3])}var te=[null];return v(R,te,K),new(v(h,Y,te))}var W=X.prototype,C=O(w(W)?W:A),G=v(Y,C,K);return w(G)?G:C}})},function(n,o){var r=Function.prototype,s=r.bind,c=r.call,v=s&&s.bind(c);n.exports=s?function(h){return h&&v(c,h)}:function(h){return h&&function(){return c.apply(h,arguments)}}},function(n,o,r){var s=r(7),c=r(50).f,v=r(57),h=r(42),g=r(110),_=r(134),w=r(95);n.exports=function(O,S){var P,A,R,D,N,$=O.target,Y=O.global,K=O.stat;if(P=Y?s:K?s[$]||g($,{}):(s[$]||{}).prototype)for(A in S){if(D=S[A],R=O.noTargetGet?(N=c(P,A))&&N.value:P[A],!w(Y?A:$+(K?".":"#")+A,O.forced)&&R!==void 0){if(typeof D==typeof R)continue;_(D,R)}(O.sham||R&&R.sham)&&v(D,"sham",!0),h(P,A,D,O)}}},function(n,o,r){var s=r(16),c=r(7),v=r(96),h=r(99),g=r(33),_=r(75),w=r(45),O=r(41),S=r(63),P=r(28),A=r(81),R=r(98),D=A("slice"),N=P("species"),$=c.Array,Y=Math.max;s({target:"Array",proto:!0,forced:!D},{slice:function(K,X){var te,W,C,G=O(this),q=w(G),z=_(K,q),Z=_(X===void 0?q:X,q);if(v(G)&&(te=G.constructor,(h(te)&&(te===$||v(te.prototype))||g(te)&&(te=te[N])===null)&&(te=void 0),te===$||te===void 0))return R(G,z,Z);for(W=new(te===void 0?$:te)(Y(Z-z,0)),C=0;z<Z;z++,C++)z in G&&S(W,C,G[z]);return W.length=C,W}})},function(n,o){n.exports=function(r){try{return!!r()}catch{return!0}}},function(n,o,r){var s=r(16),c=r(103);s({target:"RegExp",proto:!0,forced:/./.exec!==c},{exec:c})},function(n,o,r){var s=r(16),c=r(40),v=r(77);s({target:"Object",stat:!0,forced:r(18)(function(){v(1)})},{keys:function(h){return v(c(h))}})},function(n,o,r){var s=r(36),c=r(73).EXISTS,v=r(15),h=r(38).f,g=Function.prototype,_=v(g.toString),w=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,O=v(w.exec);s&&!c&&h(g,"name",{configurable:!0,get:function(){try{return O(w,_(this))[1]}catch{return""}}})},function(n,o,r){var s=r(16),c=r(18),v=r(41),h=r(50).f,g=r(36),_=c(function(){h(1)});s({target:"Object",stat:!0,forced:!g||_,sham:!g},{getOwnPropertyDescriptor:function(w,O){return h(v(w),O)}})},function(n,o,r){var s=r(16),c=r(188);s({target:"Array",stat:!0,forced:!r(120)(function(v){Array.from(v)})},{from:c})},function(n,o,r){var s=r(16),c=r(79).filter;s({target:"Array",proto:!0,forced:!r(81)("filter")},{filter:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(16),c=r(36),v=r(135),h=r(41),g=r(50),_=r(63);s({target:"Object",stat:!0,sham:!c},{getOwnPropertyDescriptors:function(w){for(var O,S,P=h(w),A=g.f,R=v(P),D={},N=0;R.length>N;)(S=A(P,O=R[N++]))!==void 0&&_(D,O,S);return D}})},,function(n,o,r){var s=r(16),c=r(7),v=r(18),h=r(96),g=r(33),_=r(40),w=r(45),O=r(63),S=r(115),P=r(81),A=r(28),R=r(70),D=A("isConcatSpreadable"),N=9007199254740991,$="Maximum allowed index exceeded",Y=c.TypeError,K=R>=51||!v(function(){var W=[];return W[D]=!1,W.concat()[0]!==W}),X=P("concat"),te=function(W){if(!g(W))return!1;var C=W[D];return C!==void 0?!!C:h(W)};s({target:"Array",proto:!0,forced:!K||!X},{concat:function(W){var C,G,q,z,Z,me=_(this),ge=S(me,0),Re=0;for(C=-1,q=arguments.length;C<q;C++)if(te(Z=C===-1?me:arguments[C])){if(Re+(z=w(Z))>N)throw Y($);for(G=0;G<z;G++,Re++)G in Z&&O(ge,Re,Z[G])}else{if(Re>=N)throw Y($);O(ge,Re++,Z)}return ge.length=Re,ge}})},function(n,o,r){var s=r(7),c=r(89),v=r(35),h=r(90),g=r(108),_=r(132),w=c("wks"),O=s.Symbol,S=O&&O.for,P=_?O:O&&O.withoutSetter||h;n.exports=function(A){if(!v(w,A)||!g&&typeof w[A]!="string"){var R="Symbol."+A;g&&v(O,A)?w[A]=O[A]:w[A]=_&&S?S(R):P(R)}return w[A]}},function(n,o,r){var s=r(16),c=r(202);s({target:"Object",stat:!0,forced:Object.assign!==c},{assign:c})},function(n,o){n.exports=function(r){return typeof r=="function"}},function(n,o,r){var s=r(106),c=typeof self=="object"&&self&&self.Object===Object&&self,v=s.a||c||Function("return this")();o.a=v},function(n,o,r){var s=r(7),c=r(33),v=s.String,h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not an object")}},function(n,o,r){var s=r(30);n.exports=function(c){return typeof c=="object"?c!==null:s(c)}},function(n,o){var r=Function.prototype.call;n.exports=r.bind?r.bind(r):function(){return r.apply(r,arguments)}},function(n,o,r){var s=r(15),c=r(40),v=s({}.hasOwnProperty);n.exports=Object.hasOwn||function(h,g){return v(c(h),g)}},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},function(n,o,r){var s=r(16),c=r(79).map;s({target:"Array",proto:!0,forced:!r(81)("map")},{map:function(v){return c(this,v,arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(7),c=r(36),v=r(133),h=r(32),g=r(86),_=s.TypeError,w=Object.defineProperty;o.f=c?w:function(O,S,P){if(h(O),S=g(S),h(P),v)try{return w(O,S,P)}catch{}if("get"in P||"set"in P)throw _("Accessors not supported");return"value"in P&&(O[S]=P.value),O}},function(n,o,r){var s=r(7),c=r(97),v=s.String;n.exports=function(h){if(c(h)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return v(h)}},function(n,o,r){var s=r(7),c=r(44),v=s.Object;n.exports=function(h){return v(c(h))}},function(n,o,r){var s=r(85),c=r(44);n.exports=function(v){return s(c(v))}},function(n,o,r){var s=r(7),c=r(30),v=r(35),h=r(57),g=r(110),_=r(92),w=r(58),O=r(73).CONFIGURABLE,S=w.get,P=w.enforce,A=String(String).split("String");(n.exports=function(R,D,N,$){var Y,K=!!$&&!!$.unsafe,X=!!$&&!!$.enumerable,te=!!$&&!!$.noTargetGet,W=$&&$.name!==void 0?$.name:D;c(N)&&(String(W).slice(0,7)==="Symbol("&&(W="["+String(W).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!v(N,"name")||O&&N.name!==W)&&h(N,"name",W),(Y=P(N)).source||(Y.source=A.join(typeof W=="string"?W:""))),R!==s?(K?!te&&R[D]&&(X=!0):delete R[D],X?R[D]=N:h(R,D,N)):X?R[D]=N:g(D,N)})(Function.prototype,"toString",function(){return c(this)&&S(this).source||_(this)})},function(n,o,r){(function(s){r.d(o,"d",function(){return h}),r.d(o,"c",function(){return g}),r.d(o,"b",function(){return _}),r.d(o,"a",function(){return O});var c=r(10),v=function(S,P){var A=typeof Symbol=="function"&&S[Symbol.iterator];if(!A)return S;var R,D,N=A.call(S),$=[];try{for(;(P===void 0||P-- >0)&&!(R=N.next()).done;)$.push(R.value)}catch(Y){D={error:Y}}finally{try{R&&!R.done&&(A=N.return)&&A.call(N)}finally{if(D)throw D.error}}return $};function h(){var S=v(Object(c.j)(0),2)[1];return Object(c.h)(function(){S(function(P){return P+1})},[])}function g(S){if(!S||typeof S!="object")return!1;var P=Object.getPrototypeOf(S);return!P||P===Object.prototype}function _(S){return typeof Symbol=="function"?Symbol.for(S):"__$mobx-react "+S+"__"}var w={};function O(){return typeof window<"u"?window:s!==void 0?s:typeof self<"u"?self:w}}).call(this,r(68))},function(n,o,r){var s=r(7).TypeError;n.exports=function(c){if(c==null)throw s("Can't call method on "+c);return c}},function(n,o,r){var s=r(94);n.exports=function(c){return s(c.length)}},function(n,o,r){var s=r(7),c=r(30),v=function(h){return c(h)?h:void 0};n.exports=function(h,g){return arguments.length<2?v(s[h]):s[h]&&s[h][g]}},function(n,o,r){var s=r(16),c=r(34),v=r(33),h=r(32),g=r(204),_=r(50),w=r(101);s({target:"Reflect",stat:!0},{get:function O(S,P){var A,R,D=arguments.length<3?S:arguments[2];return h(S)===D?S[P]:(A=_.f(S,P))?g(A)?A.value:A.get===void 0?void 0:c(A.get,D):v(R=w(S))?O(R,P,D):void 0}})},function(n,o,r){(function(s){var c=r(31),v=r(171),h=t&&!t.nodeType&&t,g=h&&typeof s=="object"&&s&&!s.nodeType&&s,_=g&&g.exports===h?c.a.Buffer:void 0,w=(_?_.isBuffer:void 0)||v.a;o.a=w}).call(this,r(122)(n))},function(n,o,r){(function(s){var c=r(106),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v&&c.a.process,_=function(){try{var w=h&&h.require&&h.require("util").types;return w||g&&g.binding&&g.binding("util")}catch{}}();o.a=_}).call(this,r(122)(n))},function(n,o,r){var s=r(36),c=r(34),v=r(84),h=r(69),g=r(41),_=r(86),w=r(35),O=r(133),S=Object.getOwnPropertyDescriptor;o.f=s?S:function(P,A){if(P=g(P),A=_(A),O)try{return S(P,A)}catch{}if(w(P,A))return h(!c(v.f,P,A),P[A])}},function(n,o,r){var s=r(15),c=s({}.toString),v=s("".slice);n.exports=function(h){return v(c(h),8,-1)}},function(n,o,r){r(182)("Map",function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}},r(186))},function(n,o,r){var s=r(16),c=r(220).entries;s({target:"Object",stat:!0},{entries:function(v){return c(v)}})},function(n,o,r){var s=r(15);n.exports=s({}.isPrototypeOf)},function(n,o,r){var s=r(46);n.exports=s("navigator","userAgent")||""},function(n,o,r){var s=r(7),c=r(30),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a function")}},function(n,o,r){var s=r(36),c=r(38),v=r(69);n.exports=s?function(h,g,_){return c.f(h,g,v(1,_))}:function(h,g,_){return h[g]=_,h}},function(n,o,r){var s,c,v,h=r(175),g=r(7),_=r(15),w=r(33),O=r(57),S=r(35),P=r(109),A=r(93),R=r(72),D="Object already initialized",N=g.TypeError,$=g.WeakMap;if(h||P.state){var Y=P.state||(P.state=new $),K=_(Y.get),X=_(Y.has),te=_(Y.set);s=function(C,G){if(X(Y,C))throw new N(D);return G.facade=C,te(Y,C,G),G},c=function(C){return K(Y,C)||{}},v=function(C){return X(Y,C)}}else{var W=A("state");R[W]=!0,s=function(C,G){if(S(C,W))throw new N(D);return G.facade=C,O(C,W,G),G},c=function(C){return S(C,W)?C[W]:{}},v=function(C){return S(C,W)}}n.exports={set:s,get:c,has:v,enforce:function(C){return v(C)?c(C):s(C,{})},getterFor:function(C){return function(G){var q;if(!w(G)||(q=c(G)).type!==C)throw N("Incompatible receiver, "+C+" required");return q}}}},function(n,o){var r=Math.ceil,s=Math.floor;n.exports=function(c){var v=+c;return v!=v||v===0?0:(v>0?s:r)(v)}},function(n,o,r){var s,c=r(32),v=r(176),h=r(111),g=r(72),_=r(138),w=r(91),O=r(93),S=O("IE_PROTO"),P=function(){},A=function(N){return"<script>"+N+"<\/script>"},R=function(N){N.write(A("")),N.close();var $=N.parentWindow.Object;return N=null,$},D=function(){try{s=new ActiveXObject("htmlfile")}catch{}var N,$;D=typeof document<"u"?document.domain&&s?R(s):(($=w("iframe")).style.display="none",_.appendChild($),$.src="javascript:",(N=$.contentWindow.document).open(),N.write(A("document.F=Object")),N.close(),N.F):R(s);for(var Y=h.length;Y--;)delete D.prototype[h[Y]];return D()};g[S]=!0,n.exports=Object.create||function(N,$){var Y;return N!==null?(P.prototype=c(N),Y=new P,P.prototype=null,Y[S]=N):Y=D(),$===void 0?Y:v(Y,$)}},function(n,o,r){var s=r(36),c=r(7),v=r(15),h=r(95),g=r(42),_=r(35),w=r(148),O=r(54),S=r(87),P=r(131),A=r(18),R=r(74).f,D=r(50).f,N=r(38).f,$=r(160),Y=r(161).trim,K="Number",X=c.Number,te=X.prototype,W=c.TypeError,C=v("".slice),G=v("".charCodeAt),q=function(Be){var ve=P(Be,"number");return typeof ve=="bigint"?ve:z(ve)},z=function(Be){var ve,_e,Ce,tt,gt,st,At,jt,yt=P(Be,"number");if(S(yt))throw W("Cannot convert a Symbol value to a number");if(typeof yt=="string"&&yt.length>2){if(yt=Y(yt),(ve=G(yt,0))===43||ve===45){if((_e=G(yt,2))===88||_e===120)return NaN}else if(ve===48){switch(G(yt,1)){case 66:case 98:Ce=2,tt=49;break;case 79:case 111:Ce=8,tt=55;break;default:return+yt}for(st=(gt=C(yt,2)).length,At=0;At<st;At++)if((jt=G(gt,At))<48||jt>tt)return NaN;return parseInt(gt,Ce)}}return+yt};if(h(K,!X(" 0o1")||!X("0b1")||X("+0x1"))){for(var Z,me=function(Be){var ve=arguments.length<1?0:X(q(Be)),_e=this;return O(te,_e)&&A(function(){$(_e)})?w(Object(ve),_e,me):ve},ge=s?R(X):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),Re=0;ge.length>Re;Re++)_(X,Z=ge[Re])&&!_(me,Z)&&N(me,Z,D(X,Z));me.prototype=te,te.constructor=me,g(c,K,me)}},function(n,o,r){var s=r(56);n.exports=function(c,v){var h=c[v];return h==null?void 0:s(h)}},function(n,o,r){var s=r(86),c=r(38),v=r(69);n.exports=function(h,g,_){var w=s(g);w in h?c.f(h,w,v(0,_)):h[w]=_}},function(n,o,r){var s=r(15),c=r(56),v=s(s.bind);n.exports=function(h,g){return c(h),g===void 0?h:v?v(h,g):function(){return h.apply(g,arguments)}}},function(n,o,r){var s=r(16),c=r(15),v=r(85),h=r(41),g=r(121),_=c([].join),w=v!=Object,O=g("join",",");s({target:"Array",proto:!0,forced:w||!O},{join:function(S){return _(h(this),S===void 0?",":S)}})},function(n,o,r){var s=r(15),c=r(73).PROPER,v=r(42),h=r(32),g=r(54),_=r(39),w=r(18),O=r(154),S="toString",P=RegExp.prototype,A=P.toString,R=s(O),D=w(function(){return A.call({source:"a",flags:"b"})!="/a/b"}),N=c&&A.name!=S;(D||N)&&v(RegExp.prototype,S,function(){var $=h(this),Y=_($.source),K=$.flags;return"/"+Y+"/"+_(K===void 0&&g(P,$)&&!("flags"in P)?R($):K)},{unsafe:!0})},function(n,o,r){var s=r(16),c=r(217),v=r(100);s({target:"Array",proto:!0},{fill:c}),v("fill")},function(n,o){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch{typeof window=="object"&&(r=window)}n.exports=r},function(n,o){n.exports=function(r,s){return{enumerable:!(1&r),configurable:!(2&r),writable:!(4&r),value:s}}},function(n,o,r){var s,c,v=r(7),h=r(55),g=v.process,_=v.Deno,w=g&&g.versions||_&&_.version,O=w&&w.v8;O&&(c=(s=O.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!c&&h&&(!(s=h.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=h.match(/Chrome\/(\d+)/))&&(c=+s[1]),n.exports=c},function(n,o){n.exports=!1},function(n,o){n.exports={}},function(n,o,r){var s=r(36),c=r(35),v=Function.prototype,h=s&&Object.getOwnPropertyDescriptor,g=c(v,"name"),_=g&&(function(){}).name==="something",w=g&&(!s||s&&h(v,"name").configurable);n.exports={EXISTS:g,PROPER:_,CONFIGURABLE:w}},function(n,o,r){var s=r(136),c=r(111).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(v){return s(v,c)}},function(n,o,r){var s=r(59),c=Math.max,v=Math.min;n.exports=function(h,g){var _=s(h);return _<0?c(_+g,0):v(_,g)}},function(n,o){var r=Function.prototype,s=r.apply,c=r.bind,v=r.call;n.exports=typeof Reflect=="object"&&Reflect.apply||(c?v.bind(s):function(){return v.apply(s,arguments)})},function(n,o,r){var s=r(136),c=r(111);n.exports=Object.keys||function(v){return s(v,c)}},function(n,o,r){var s=r(38).f,c=r(35),v=r(28)("toStringTag");n.exports=function(h,g,_){h&&!c(h=_?h:h.prototype,v)&&s(h,v,{configurable:!0,value:g})}},function(n,o,r){var s=r(64),c=r(15),v=r(85),h=r(40),g=r(45),_=r(115),w=c([].push),O=function(S){var P=S==1,A=S==2,R=S==3,D=S==4,N=S==6,$=S==7,Y=S==5||N;return function(K,X,te,W){for(var C,G,q=h(K),z=v(q),Z=s(X,te),me=g(z),ge=0,Re=W||_,Be=P?Re(K,me):A||$?Re(K,0):void 0;me>ge;ge++)if((Y||ge in z)&&(G=Z(C=z[ge],ge,q),S))if(P)Be[ge]=G;else if(G)switch(S){case 3:return!0;case 5:return C;case 6:return ge;case 2:w(Be,C)}else switch(S){case 4:return!1;case 7:w(Be,C)}return N?-1:R||D?D:Be}};n.exports={forEach:O(0),map:O(1),filter:O(2),some:O(3),every:O(4),find:O(5),findIndex:O(6),filterReject:O(7)}},function(n,o){n.exports={}},function(n,o,r){var s=r(18),c=r(28),v=r(70),h=c("species");n.exports=function(g){return v>=51||!s(function(){var _=[];return(_.constructor={})[h]=function(){return{foo:1}},_[g](Boolean).foo!==1})}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(159),_=r(32),w=r(44),O=r(164),S=r(124),P=r(94),A=r(39),R=r(62),D=r(114),N=r(125),$=r(103),Y=r(155),K=r(18),X=Y.UNSUPPORTED_Y,te=4294967295,W=Math.min,C=[].push,G=v(/./.exec),q=v(C),z=v("".slice),Z=!K(function(){var me=/(?:)/,ge=me.exec;me.exec=function(){return ge.apply(this,arguments)};var Re="ab".split(me);return Re.length!==2||Re[0]!=="a"||Re[1]!=="b"});h("split",function(me,ge,Re){var Be;return Be="abbc".split(/(b)*/)[1]=="c"||"test".split(/(?:)/,-1).length!=4||"ab".split(/(?:ab)*/).length!=2||".".split(/(.?)(.?)/).length!=4||".".split(/()()/).length>1||"".split(/.?/).length?function(ve,_e){var Ce=A(w(this)),tt=_e===void 0?te:_e>>>0;if(tt===0)return[];if(ve===void 0)return[Ce];if(!g(ve))return c(ge,Ce,ve,tt);for(var gt,st,At,jt=[],yt=(ve.ignoreCase?"i":"")+(ve.multiline?"m":"")+(ve.unicode?"u":"")+(ve.sticky?"y":""),Kt=0,je=new RegExp(ve.source,yt+"g");(gt=c($,je,Ce))&&!((st=je.lastIndex)>Kt&&(q(jt,z(Ce,Kt,gt.index)),gt.length>1&&gt.index<Ce.length&&s(C,jt,D(gt,1)),At=gt[0].length,Kt=st,jt.length>=tt));)je.lastIndex===gt.index&&je.lastIndex++;return Kt===Ce.length?!At&&G(je,"")||q(jt,""):q(jt,z(Ce,Kt)),jt.length>tt?D(jt,0,tt):jt}:"0".split(void 0,0).length?function(ve,_e){return ve===void 0&&_e===0?[]:c(ge,this,ve,_e)}:ge,[function(ve,_e){var Ce=w(this),tt=ve==null?void 0:R(ve,me);return tt?c(tt,ve,Ce,_e):c(Be,A(Ce),ve,_e)},function(ve,_e){var Ce=_(this),tt=A(ve),gt=Re(Be,Ce,tt,_e,Be!==ge);if(gt.done)return gt.value;var st=O(Ce,RegExp),At=Ce.unicode,jt=(Ce.ignoreCase?"i":"")+(Ce.multiline?"m":"")+(Ce.unicode?"u":"")+(X?"g":"y"),yt=new st(X?"^(?:"+Ce.source+")":Ce,jt),Kt=_e===void 0?te:_e>>>0;if(Kt===0)return[];if(tt.length===0)return N(yt,tt)===null?[tt]:[];for(var je=0,we=0,Me=[];we<tt.length;){yt.lastIndex=X?0:we;var dt,zt=N(yt,X?z(tt,we):tt);if(zt===null||(dt=W(P(yt.lastIndex+(X?we:0)),tt.length))===je)we=S(tt,we,At);else{if(q(Me,z(tt,je,we)),Me.length===Kt)return Me;for(var Et=1;Et<=zt.length-1;Et++)if(q(Me,zt[Et]),Me.length===Kt)return Me;we=je=dt}}return q(Me,z(tt,je)),Me}]},!Z,X)},function(n,o,r){r(16)({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991})},function(n,o,r){var s={}.propertyIsEnumerable,c=Object.getOwnPropertyDescriptor,v=c&&!s.call({1:2},1);o.f=v?function(h){var g=c(this,h);return!!g&&g.enumerable}:s},function(n,o,r){var s=r(7),c=r(15),v=r(18),h=r(51),g=s.Object,_=c("".split);n.exports=v(function(){return!g("z").propertyIsEnumerable(0)})?function(w){return h(w)=="String"?_(w,""):g(w)}:g},function(n,o,r){var s=r(131),c=r(87);n.exports=function(v){var h=s(v,"string");return c(h)?h:h+""}},function(n,o,r){var s=r(7),c=r(46),v=r(30),h=r(54),g=r(132),_=s.Object;n.exports=g?function(w){return typeof w=="symbol"}:function(w){var O=c("Symbol");return v(O)&&h(O.prototype,_(w))}},function(n,o,r){var s=r(7).String;n.exports=function(c){try{return s(c)}catch{return"Object"}}},function(n,o,r){var s=r(71),c=r(109);(n.exports=function(v,h){return c[v]||(c[v]=h!==void 0?h:{})})("versions",[]).push({version:"3.19.3",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},function(n,o,r){var s=r(15),c=0,v=Math.random(),h=s(1 .toString);n.exports=function(g){return"Symbol("+(g===void 0?"":g)+")_"+h(++c+v,36)}},function(n,o,r){var s=r(7),c=r(33),v=s.document,h=c(v)&&c(v.createElement);n.exports=function(g){return h?v.createElement(g):{}}},function(n,o,r){var s=r(15),c=r(30),v=r(109),h=s(Function.toString);c(v.inspectSource)||(v.inspectSource=function(g){return h(g)}),n.exports=v.inspectSource},function(n,o,r){var s=r(89),c=r(90),v=s("keys");n.exports=function(h){return v[h]||(v[h]=c(h))}},function(n,o,r){var s=r(59),c=Math.min;n.exports=function(v){return v>0?c(s(v),9007199254740991):0}},function(n,o,r){var s=r(18),c=r(30),v=/#|\.prototype\./,h=function(S,P){var A=_[g(S)];return A==O||A!=w&&(c(P)?s(P):!!P)},g=h.normalize=function(S){return String(S).replace(v,".").toLowerCase()},_=h.data={},w=h.NATIVE="N",O=h.POLYFILL="P";n.exports=h},function(n,o,r){var s=r(51);n.exports=Array.isArray||function(c){return s(c)=="Array"}},function(n,o,r){var s=r(7),c=r(113),v=r(30),h=r(51),g=r(28)("toStringTag"),_=s.Object,w=h(function(){return arguments}())=="Arguments";n.exports=c?h:function(O){var S,P,A;return O===void 0?"Undefined":O===null?"Null":typeof(P=function(R,D){try{return R[D]}catch{}}(S=_(O),g))=="string"?P:w?h(S):(A=h(S))=="Object"&&v(S.callee)?"Arguments":A}},function(n,o,r){var s=r(15);n.exports=s([].slice)},function(n,o,r){var s=r(15),c=r(18),v=r(30),h=r(97),g=r(46),_=r(92),w=function(){},O=[],S=g("Reflect","construct"),P=/^\s*(?:class|function)\b/,A=s(P.exec),R=!P.exec(w),D=function(N){if(!v(N))return!1;try{return S(w,O,N),!0}catch{return!1}};n.exports=!S||c(function(){var N;return D(D.call)||!D(Object)||!D(function(){N=!0})||N})?function(N){if(!v(N))return!1;switch(h(N)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return R||!!A(P,_(N))}:D},function(n,o,r){var s=r(28),c=r(60),v=r(38),h=s("unscopables"),g=Array.prototype;g[h]==null&&v.f(g,h,{configurable:!0,value:c(null)}),n.exports=function(_){g[h][_]=!0}},function(n,o,r){var s=r(7),c=r(35),v=r(30),h=r(40),g=r(93),_=r(143),w=g("IE_PROTO"),O=s.Object,S=O.prototype;n.exports=_?O.getPrototypeOf:function(P){var A=h(P);if(c(A,w))return A[w];var R=A.constructor;return v(R)&&A instanceof R?R.prototype:A instanceof O?S:null}},function(n,o,r){var s=r(15),c=r(32),v=r(181);n.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var h,g=!1,_={};try{(h=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(_,[]),g=_ instanceof Array}catch{}return function(w,O){return c(w),v(O),g?h(w,O):w.__proto__=O,w}}():void 0)},function(n,o,r){var s,c,v=r(34),h=r(15),g=r(39),_=r(154),w=r(155),O=r(89),S=r(60),P=r(58).get,A=r(190),R=r(191),D=O("native-string-replace",String.prototype.replace),N=RegExp.prototype.exec,$=N,Y=h("".charAt),K=h("".indexOf),X=h("".replace),te=h("".slice),W=(c=/b*/g,v(N,s=/a/,"a"),v(N,c,"a"),s.lastIndex!==0||c.lastIndex!==0),C=w.BROKEN_CARET,G=/()??/.exec("")[1]!==void 0;(W||G||C||A||R)&&($=function(q){var z,Z,me,ge,Re,Be,ve,_e=this,Ce=P(_e),tt=g(q),gt=Ce.raw;if(gt)return gt.lastIndex=_e.lastIndex,z=v($,gt,tt),_e.lastIndex=gt.lastIndex,z;var st=Ce.groups,At=C&&_e.sticky,jt=v(_,_e),yt=_e.source,Kt=0,je=tt;if(At&&(jt=X(jt,"y",""),K(jt,"g")===-1&&(jt+="g"),je=te(tt,_e.lastIndex),_e.lastIndex>0&&(!_e.multiline||_e.multiline&&Y(tt,_e.lastIndex-1)!==`
`)&&(yt="(?: "+yt+")",je=" "+je,Kt++),Z=new RegExp("^(?:"+yt+")",jt)),G&&(Z=new RegExp("^"+yt+"$(?!\\s)",jt)),W&&(me=_e.lastIndex),ge=v(N,At?Z:_e,je),At?ge?(ge.input=te(ge.input,Kt),ge[0]=te(ge[0],Kt),ge.index=_e.lastIndex,_e.lastIndex+=ge[0].length):_e.lastIndex=0:W&&ge&&(_e.lastIndex=_e.global?ge.index+ge[0].length:me),G&&ge&&ge.length>1&&v(D,ge[0],Z,function(){for(Re=1;Re<arguments.length-2;Re++)arguments[Re]===void 0&&(ge[Re]=void 0)}),ge&&st)for(ge.groups=Be=S(null),Re=0;Re<st.length;Re++)Be[(ve=st[Re])[0]]=ge[ve[1]];return ge}),n.exports=$},function(n,o,r){var s=r(16),c=r(7),v=r(75),h=r(59),g=r(45),_=r(40),w=r(115),O=r(63),S=r(81)("splice"),P=c.TypeError,A=Math.max,R=Math.min,D=9007199254740991,N="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!S},{splice:function($,Y){var K,X,te,W,C,G,q=_(this),z=g(q),Z=v($,z),me=arguments.length;if(me===0?K=X=0:me===1?(K=0,X=z-Z):(K=me-2,X=R(A(h(Y),0),z-Z)),z+K-X>D)throw P(N);for(te=w(q,X),W=0;W<X;W++)(C=Z+W)in q&&O(te,W,q[C]);if(te.length=X,K<X){for(W=Z;W<z-X;W++)G=W+K,(C=W+X)in q?q[G]=q[C]:delete q[G];for(W=z;W>z-X+K;W--)delete q[W-1]}else if(K>X)for(W=z-X;W>Z;W--)G=W+K-1,(C=W+X-1)in q?q[G]=q[C]:delete q[G];for(W=0;W<K;W++)q[W+Z]=arguments[W+2];return q.length=z-X+K,te}})},function(n,o,r){var s=r(16),c=r(205);s({target:"String",proto:!0,forced:r(206)("anchor")},{anchor:function(v){return c(this,"a","name",v)}})},function(n,o,r){(function(s){var c=typeof s=="object"&&s&&s.Object===Object&&s;o.a=c}).call(this,r(68))},function(n,o,r){(function(s){var c=r(31),v=t&&!t.nodeType&&t,h=v&&typeof s=="object"&&s&&!s.nodeType&&s,g=h&&h.exports===v?c.a.Buffer:void 0,_=g?g.allocUnsafe:void 0;o.a=function(w,O){if(O)return w.slice();var S=w.length,P=_?_(S):new w.constructor(S);return w.copy(P),P}}).call(this,r(122)(n))},function(n,o,r){var s=r(70),c=r(18);n.exports=!!Object.getOwnPropertySymbols&&!c(function(){var v=Symbol();return!String(v)||!(Object(v)instanceof Symbol)||!Symbol.sham&&s&&s<41})},function(n,o,r){var s=r(7),c=r(110),v="__core-js_shared__",h=s[v]||c(v,{});n.exports=h},function(n,o,r){var s=r(7),c=Object.defineProperty;n.exports=function(v,h){try{c(s,v,{value:h,configurable:!0,writable:!0})}catch{s[v]=h}return h}},function(n,o){n.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(n,o){o.f=Object.getOwnPropertySymbols},function(n,o,r){var s={};s[r(28)("toStringTag")]="z",n.exports=String(s)==="[object z]"},function(n,o,r){var s=r(7),c=r(75),v=r(45),h=r(63),g=s.Array,_=Math.max;n.exports=function(w,O,S){for(var P=v(w),A=c(O,P),R=c(S===void 0?P:S,P),D=g(_(R-A,0)),N=0;A<R;A++,N++)h(D,N,w[A]);return D.length=N,D}},function(n,o,r){var s=r(178);n.exports=function(c,v){return new(s(c))(v===0?0:v)}},function(n,o,r){var s=r(16),c=r(34),v=r(71),h=r(73),g=r(30),_=r(180),w=r(101),O=r(102),S=r(78),P=r(57),A=r(42),R=r(28),D=r(80),N=r(142),$=h.PROPER,Y=h.CONFIGURABLE,K=N.IteratorPrototype,X=N.BUGGY_SAFARI_ITERATORS,te=R("iterator"),W="keys",C="values",G="entries",q=function(){return this};n.exports=function(z,Z,me,ge,Re,Be,ve){_(me,Z,ge);var _e,Ce,tt,gt=function(we){if(we===Re&&Kt)return Kt;if(!X&&we in jt)return jt[we];switch(we){case W:case C:case G:return function(){return new me(this,we)}}return function(){return new me(this)}},st=Z+" Iterator",At=!1,jt=z.prototype,yt=jt[te]||jt["@@iterator"]||Re&&jt[Re],Kt=!X&&yt||gt(Re),je=Z=="Array"&&jt.entries||yt;if(je&&(_e=w(je.call(new z)))!==Object.prototype&&_e.next&&(v||w(_e)===K||(O?O(_e,K):g(_e[te])||A(_e,te,q)),S(_e,st,!0,!0),v&&(D[st]=q)),$&&Re==C&&yt&&yt.name!==C&&(!v&&Y?P(jt,"name",C):(At=!0,Kt=function(){return c(yt,this)})),Re)if(Ce={values:gt(C),keys:Be?Kt:gt(W),entries:gt(G)},ve)for(tt in Ce)(X||At||!(tt in jt))&&A(jt,tt,Ce[tt]);else s({target:Z,proto:!0,forced:X||At},Ce);return v&&!ve||jt[te]===Kt||A(jt,te,Kt,{name:Re}),D[Z]=Kt,Ce}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(32),g=r(88),_=r(145),w=r(45),O=r(54),S=r(146),P=r(118),A=r(147),R=s.TypeError,D=function($,Y){this.stopped=$,this.result=Y},N=D.prototype;n.exports=function($,Y,K){var X,te,W,C,G,q,z,Z=K&&K.that,me=!(!K||!K.AS_ENTRIES),ge=!(!K||!K.IS_ITERATOR),Re=!(!K||!K.INTERRUPTED),Be=c(Y,Z),ve=function(Ce){return X&&A(X,"normal",Ce),new D(!0,Ce)},_e=function(Ce){return me?(h(Ce),Re?Be(Ce[0],Ce[1],ve):Be(Ce[0],Ce[1])):Re?Be(Ce,ve):Be(Ce)};if(ge)X=$;else{if(!(te=P($)))throw R(g($)+" is not iterable");if(_(te)){for(W=0,C=w($);C>W;W++)if((G=_e($[W]))&&O(N,G))return G;return new D(!1)}X=S($,te)}for(q=X.next;!(z=v(q,X)).done;){try{G=_e(z.value)}catch(Ce){A(X,"throw",Ce)}if(typeof G=="object"&&G&&O(N,G))return G}return new D(!1)}},function(n,o,r){var s=r(97),c=r(62),v=r(80),h=r(28)("iterator");n.exports=function(g){if(g!=null)return c(g,h)||c(g,"@@iterator")||v[s(g)]}},function(n,o,r){var s=r(7),c=r(54),v=s.TypeError;n.exports=function(h,g){if(c(g,h))return h;throw v("Incorrect invocation")}},function(n,o,r){var s=r(28)("iterator"),c=!1;try{var v=0,h={next:function(){return{done:!!v++}},return:function(){c=!0}};h[s]=function(){return this},Array.from(h,function(){throw 2})}catch{}n.exports=function(g,_){if(!_&&!c)return!1;var w=!1;try{var O={};O[s]=function(){return{next:function(){return{done:w=!0}}}},g(O)}catch{}return w}},function(n,o,r){var s=r(18);n.exports=function(c,v){var h=[][c];return!!h&&s(function(){h.call(null,v||function(){throw 1},1)})}},function(n,o){n.exports=function(r){if(!r.webpackPolyfill){var s=Object.create(r);s.children||(s.children=[]),Object.defineProperty(s,"loaded",{enumerable:!0,get:function(){return s.l}}),Object.defineProperty(s,"id",{enumerable:!0,get:function(){return s.i}}),Object.defineProperty(s,"exports",{enumerable:!0}),s.webpackPolyfill=1}return s}},function(n,o,r){r(19);var s=r(15),c=r(42),v=r(103),h=r(18),g=r(28),_=r(57),w=g("species"),O=RegExp.prototype;n.exports=function(S,P,A,R){var D=g(S),N=!h(function(){var X={};return X[D]=function(){return 7},""[S](X)!=7}),$=N&&!h(function(){var X=!1,te=/a/;return S==="split"&&((te={}).constructor={},te.constructor[w]=function(){return te},te.flags="",te[D]=/./[D]),te.exec=function(){return X=!0,null},te[D](""),!X});if(!N||!$||A){var Y=s(/./[D]),K=P(D,""[S],function(X,te,W,C,G){var q=s(X),z=te.exec;return z===v||z===O.exec?N&&!G?{done:!0,value:Y(te,W,C)}:{done:!0,value:q(W,te,C)}:{done:!1}});c(String.prototype,S,K[0]),c(O,D,K[1])}R&&_(O[D],"sham",!0)}},function(n,o,r){var s=r(151).charAt;n.exports=function(c,v,h){return v+(h?s(c,v).length:1)}},function(n,o,r){var s=r(7),c=r(34),v=r(32),h=r(30),g=r(51),_=r(103),w=s.TypeError;n.exports=function(O,S){var P=O.exec;if(h(P)){var A=c(P,O,S);return A!==null&&v(A),A}if(g(O)==="RegExp")return c(_,O,S);throw w("RegExp#exec called on incompatible receiver")}},function(n,o,r){var s=r(76),c=r(34),v=r(15),h=r(123),g=r(18),_=r(32),w=r(30),O=r(59),S=r(94),P=r(39),A=r(44),R=r(124),D=r(62),N=r(201),$=r(125),Y=r(28)("replace"),K=Math.max,X=Math.min,te=v([].concat),W=v([].push),C=v("".indexOf),G=v("".slice),q="a".replace(/./,"$0")==="$0",z=!!/./[Y]&&/./[Y]("a","$0")==="";h("replace",function(Z,me,ge){var Re=z?"$":"$0";return[function(Be,ve){var _e=A(this),Ce=Be==null?void 0:D(Be,Y);return Ce?c(Ce,Be,_e,ve):c(me,P(_e),Be,ve)},function(Be,ve){var _e=_(this),Ce=P(Be);if(typeof ve=="string"&&C(ve,Re)===-1&&C(ve,"$<")===-1){var tt=ge(me,_e,Ce,ve);if(tt.done)return tt.value}var gt=w(ve);gt||(ve=P(ve));var st=_e.global;if(st){var At=_e.unicode;_e.lastIndex=0}for(var jt=[];;){var yt=$(_e,Ce);if(yt===null||(W(jt,yt),!st))break;P(yt[0])===""&&(_e.lastIndex=R(Ce,S(_e.lastIndex),At))}for(var Kt,je="",we=0,Me=0;Me<jt.length;Me++){for(var dt=P((yt=jt[Me])[0]),zt=K(X(O(yt.index),Ce.length),0),Et=[],rn=1;rn<yt.length;rn++)W(Et,(Kt=yt[rn])===void 0?Kt:String(Kt));var yn=yt.groups;if(gt){var Tn=te([dt],Et,zt,Ce);yn!==void 0&&W(Tn,yn);var pn=P(s(ve,void 0,Tn))}else pn=N(dt,Ce,zt,Et,yn,ve);zt>=we&&(je+=G(Ce,we,zt)+pn,we=zt+dt.length)}return je+G(Ce,we)}]},!!g(function(){var Z=/./;return Z.exec=function(){var me=[];return me.groups={a:"7"},me},"".replace(Z,"$<a>")!=="7"})||!q||z)},function(n,o,r){var s=r(16),c=Math.hypot,v=Math.abs,h=Math.sqrt;s({target:"Math",stat:!0,forced:!!c&&c(1/0,NaN)!==1/0},{hypot:function(g,_){for(var w,O,S=0,P=0,A=arguments.length,R=0;P<A;)R<(w=v(arguments[P++]))?(S=S*(O=R/w)*O+1,R=w):S+=w>0?(O=w/R)*O:w;return R===1/0?1/0:R*h(S)}})},function(n,o,r){var s=r(51),c=r(7);n.exports=s(c.process)=="process"},function(n,o,r){r(16)({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991})},function(n,o,r){(function(s,c){var v;/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(){var h,g="Expected a function",_="__lodash_hash_undefined__",w="__lodash_placeholder__",O=16,S=32,P=64,A=128,R=256,D=1/0,N=9007199254740991,$=NaN,Y=4294967295,K=[["ary",A],["bind",1],["bindKey",2],["curry",8],["curryRight",O],["flip",512],["partial",S],["partialRight",P],["rearg",R]],X="[object Arguments]",te="[object Array]",W="[object Boolean]",C="[object Date]",G="[object Error]",q="[object Function]",z="[object GeneratorFunction]",Z="[object Map]",me="[object Number]",ge="[object Object]",Re="[object Promise]",Be="[object RegExp]",ve="[object Set]",_e="[object String]",Ce="[object Symbol]",tt="[object WeakMap]",gt="[object ArrayBuffer]",st="[object DataView]",At="[object Float32Array]",jt="[object Float64Array]",yt="[object Int8Array]",Kt="[object Int16Array]",je="[object Int32Array]",we="[object Uint8Array]",Me="[object Uint8ClampedArray]",dt="[object Uint16Array]",zt="[object Uint32Array]",Et=/\b__p \+= '';/g,rn=/\b(__p \+=) '' \+/g,yn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Tn=/&(?:amp|lt|gt|quot|#39);/g,pn=/[&<>"']/g,ut=RegExp(Tn.source),xn=RegExp(pn.source),Le=/<%-([\s\S]+?)%>/g,mn=/<%([\s\S]+?)%>/g,qn=/<%=([\s\S]+?)%>/g,re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kn=/^\w*$/,vr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gr=/[\\^$.*+?()[\]{}|]/g,eo=RegExp(Gr.source),Fn=/^\s+/,ho=/\s/,Oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ze=/\{\n\/\* \[wrapped with (.+)\] \*/,Ne=/,? & /,rt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,en=/[()=,{}\[\]\/\s]/,Yt=/\\(\\)?/g,kn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Er=/\w*$/,ni=/^[-+]0x[0-9a-f]+$/i,yi=/^0b[01]+$/i,Go=/^\[object .+?Constructor\]$/,Xo=/^0o[0-7]+$/i,Sn=/^(?:0|[1-9]\d*)$/,$n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Hn=/($^)/,ir=/['\n\r\u2028\u2029\\]/g,Kr="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Rr="\\u2700-\\u27bf",cl="a-z\\xdf-\\xf6\\xf8-\\xff",Ua="A-Z\\xc0-\\xd6\\xd8-\\xde",fl="\\ufe0e\\ufe0f",au="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ud="['’]",mc="[\\ud800-\\udfff]",fa="["+au+"]",Wu="["+Kr+"]",Pn="\\d+",Cf="[\\u2700-\\u27bf]",vo="["+cl+"]",gc="[^\\ud800-\\udfff"+au+Pn+Rr+cl+Ua+"]",Hi="\\ud83c[\\udffb-\\udfff]",ta="[^\\ud800-\\udfff]",Es="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",da="["+Ua+"]",Ma="(?:"+vo+"|"+gc+")",_c="(?:"+da+"|"+gc+")",bc="(?:['’](?:d|ll|m|re|s|t|ve))?",Df="(?:['’](?:D|LL|M|RE|S|T|VE))?",zu="(?:"+Wu+"|"+Hi+")?",If="[\\ufe0e\\ufe0f]?",wc=If+zu+("(?:\\u200d(?:"+[ta,Es,Ta].join("|")+")"+If+zu+")*"),Gd="(?:"+[Cf,Es,Ta].join("|")+")"+wc,Rl="(?:"+[ta+Wu+"?",Wu,Es,Ta,mc].join("|")+")",Lf=RegExp(Ud,"g"),dl=RegExp(Wu,"g"),Ec=RegExp(Hi+"(?="+Hi+")|"+Rl+wc,"g"),Os=RegExp([da+"?"+vo+"+"+bc+"(?="+[fa,da,"$"].join("|")+")",_c+"+"+Df+"(?="+[fa,da+Ma,"$"].join("|")+")",da+"?"+Ma+"+"+bc,da+"+"+Df,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn,Gd].join("|"),"g"),Oc=RegExp("[\\u200d\\ud800-\\udfff"+Kr+fl+"]"),xc=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Vd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ff=-1,zr={};zr[At]=zr[jt]=zr[yt]=zr[Kt]=zr[je]=zr[we]=zr[Me]=zr[dt]=zr[zt]=!0,zr[X]=zr[te]=zr[gt]=zr[W]=zr[st]=zr[C]=zr[G]=zr[q]=zr[Z]=zr[me]=zr[ge]=zr[Be]=zr[ve]=zr[_e]=zr[tt]=!1;var Vr={};Vr[X]=Vr[te]=Vr[gt]=Vr[st]=Vr[W]=Vr[C]=Vr[At]=Vr[jt]=Vr[yt]=Vr[Kt]=Vr[je]=Vr[Z]=Vr[me]=Vr[ge]=Vr[Be]=Vr[ve]=Vr[_e]=Vr[Ce]=Vr[we]=Vr[Me]=Vr[dt]=Vr[zt]=!0,Vr[G]=Vr[q]=Vr[tt]=!1;var $f={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},lu=parseFloat,pa=parseInt,xs=typeof s=="object"&&s&&s.Object===Object&&s,Bf=typeof self=="object"&&self&&self.Object===Object&&self,jo=xs||Bf||Function("return this")(),jl=o&&!o.nodeType&&o,Cl=jl&&typeof c=="object"&&c&&!c.nodeType&&c,Ss=Cl&&Cl.exports===jl,uu=Ss&&xs.process,mi=function(){try{var it=Cl&&Cl.require&&Cl.require("util").types;return it||uu&&uu.binding&&uu.binding("util")}catch{}}(),Sc=mi&&mi.isArrayBuffer,Uf=mi&&mi.isDate,Ac=mi&&mi.isMap,Ni=mi&&mi.isRegExp,ri=mi&&mi.isSet,na=mi&&mi.isTypedArray;function to(it,Ct,Ft){switch(Ft.length){case 0:return it.call(Ct);case 1:return it.call(Ct,Ft[0]);case 2:return it.call(Ct,Ft[0],Ft[1]);case 3:return it.call(Ct,Ft[0],Ft[1],Ft[2])}return it.apply(Ct,Ft)}function Gf(it,Ct,Ft,fn){for(var ur=-1,Pr=it==null?0:it.length;++ur<Pr;){var so=it[ur];Ct(fn,so,Ft(so),it)}return fn}function Ri(it,Ct){for(var Ft=-1,fn=it==null?0:it.length;++Ft<fn&&Ct(it[Ft],Ft,it)!==!1;);return it}function Tc(it,Ct){for(var Ft=it==null?0:it.length;Ft--&&Ct(it[Ft],Ft,it)!==!1;);return it}function Vf(it,Ct){for(var Ft=-1,fn=it==null?0:it.length;++Ft<fn;)if(!Ct(it[Ft],Ft,it))return!1;return!0}function ji(it,Ct){for(var Ft=-1,fn=it==null?0:it.length,ur=0,Pr=[];++Ft<fn;){var so=it[Ft];Ct(so,Ft,it)&&(Pr[ur++]=so)}return Pr}function Ai(it,Ct){return!!(it!=null&&it.length)&&su(it,Ct,0)>-1}function Mc(it,Ct,Ft){for(var fn=-1,ur=it==null?0:it.length;++fn<ur;)if(Ft(Ct,it[fn]))return!0;return!1}function Fr(it,Ct){for(var Ft=-1,fn=it==null?0:it.length,ur=Array(fn);++Ft<fn;)ur[Ft]=Ct(it[Ft],Ft,it);return ur}function oi(it,Ct){for(var Ft=-1,fn=Ct.length,ur=it.length;++Ft<fn;)it[ur+Ft]=Ct[Ft];return it}function As(it,Ct,Ft,fn){var ur=-1,Pr=it==null?0:it.length;for(fn&&Pr&&(Ft=it[++ur]);++ur<Pr;)Ft=Ct(Ft,it[ur],ur,it);return Ft}function Wf(it,Ct,Ft,fn){var ur=it==null?0:it.length;for(fn&&ur&&(Ft=it[--ur]);ur--;)Ft=Ct(Ft,it[ur],ur,it);return Ft}function Pc(it,Ct){for(var Ft=-1,fn=it==null?0:it.length;++Ft<fn;)if(Ct(it[Ft],Ft,it))return!0;return!1}var Ts=Di("length");function Ga(it,Ct,Ft){var fn;return Ft(it,function(ur,Pr,so){if(Ct(ur,Pr,so))return fn=Pr,!1}),fn}function Ci(it,Ct,Ft,fn){for(var ur=it.length,Pr=Ft+(fn?1:-1);fn?Pr--:++Pr<ur;)if(Ct(it[Pr],Pr,it))return Pr;return-1}function su(it,Ct,Ft){return Ct==Ct?function(fn,ur,Pr){for(var so=Pr-1,T=fn.length;++so<T;)if(fn[so]===ur)return so;return-1}(it,Ct,Ft):Ci(it,ha,Ft)}function Xi(it,Ct,Ft,fn){for(var ur=Ft-1,Pr=it.length;++ur<Pr;)if(fn(it[ur],Ct))return ur;return-1}function ha(it){return it!=it}function Mr(it,Ct){var Ft=it==null?0:it.length;return Ft?cu(it,Ct)/Ft:$}function Di(it){return function(Ct){return Ct==null?h:Ct[it]}}function Pa(it){return function(Ct){return it==null?h:it[Ct]}}function fi(it,Ct,Ft,fn,ur){return ur(it,function(Pr,so,T){Ft=fn?(fn=!1,Pr):Ct(Ft,Pr,so,T)}),Ft}function cu(it,Ct){for(var Ft,fn=-1,ur=it.length;++fn<ur;){var Pr=Ct(it[fn]);Pr!==h&&(Ft=Ft===h?Pr:Ft+Pr)}return Ft}function Dl(it,Ct){for(var Ft=-1,fn=Array(it);++Ft<it;)fn[Ft]=Ct(Ft);return fn}function ka(it){return it&&it.slice(0,ii(it)+1).replace(Fn,"")}function uo(it){return function(Ct){return it(Ct)}}function Hu(it,Ct){return Fr(Ct,function(Ft){return it[Ft]})}function Va(it,Ct){return it.has(Ct)}function va(it,Ct){for(var Ft=-1,fn=it.length;++Ft<fn&&su(Ct,it[Ft],0)>-1;);return Ft}function kc(it,Ct){for(var Ft=it.length;Ft--&&su(Ct,it[Ft],0)>-1;);return Ft}function Wd(it,Ct){for(var Ft=it.length,fn=0;Ft--;)it[Ft]===Ct&&++fn;return fn}var Nc=Pa({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Vo=Pa({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Il(it){return"\\"+$f[it]}function Wa(it){return Oc.test(it)}function Yo(it){var Ct=-1,Ft=Array(it.size);return it.forEach(function(fn,ur){Ft[++Ct]=[ur,fn]}),Ft}function Rc(it,Ct){return function(Ft){return it(Ct(Ft))}}function ra(it,Ct){for(var Ft=-1,fn=it.length,ur=0,Pr=[];++Ft<fn;){var so=it[Ft];so!==Ct&&so!==w||(it[Ft]=w,Pr[ur++]=Ft)}return Pr}function ya(it){var Ct=-1,Ft=Array(it.size);return it.forEach(function(fn){Ft[++Ct]=fn}),Ft}function Ms(it){var Ct=-1,Ft=Array(it.size);return it.forEach(function(fn){Ft[++Ct]=[fn,fn]}),Ft}function Ii(it){return Wa(it)?function(Ct){for(var Ft=Ec.lastIndex=0;Ec.test(Ct);)++Ft;return Ft}(it):Ts(it)}function Yi(it){return Wa(it)?function(Ct){return Ct.match(Ec)||[]}(it):function(Ct){return Ct.split("")}(it)}function ii(it){for(var Ct=it.length;Ct--&&ho.test(it.charAt(Ct)););return Ct}var oa=Pa({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ti=function it(Ct){var Ft,fn=(Ct=Ct==null?jo:Ti.defaults(jo.Object(),Ct,Ti.pick(jo,Vd))).Array,ur=Ct.Date,Pr=Ct.Error,so=Ct.Function,T=Ct.Math,M=Ct.Object,B=Ct.RegExp,ne=Ct.String,ye=Ct.TypeError,Ge=fn.prototype,pt=so.prototype,Ht=M.prototype,_n=Ct["__core-js_shared__"],mr=pt.toString,ln=Ht.hasOwnProperty,Wr=0,pr=(Ft=/[^.]+$/.exec(_n&&_n.keys&&_n.keys.IE_PROTO||""))?"Symbol(src)_1."+Ft:"",Cr=Ht.toString,ia=mr.call(M),bo=jo._,qi=B("^"+mr.call(ln).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pl=Ss?Ct.Buffer:h,hl=Ct.Symbol,Ll=Ct.Uint8Array,fu=pl?pl.allocUnsafe:h,za=Rc(M.getPrototypeOf,M),du=M.create,qo=Ht.propertyIsEnumerable,Fl=Ge.splice,vl=hl?hl.isConcatSpreadable:h,Ha=hl?hl.iterator:h,Xa=hl?hl.toStringTag:h,Xu=function(){try{var d=Ja(M,"defineProperty");return d({},"",{}),d}catch{}}(),nh=Ct.clearTimeout!==jo.clearTimeout&&Ct.clearTimeout,rh=ur&&ur.now!==jo.Date.now&&ur.now,zd=Ct.setTimeout!==jo.setTimeout&&Ct.setTimeout,jc=T.ceil,Yu=T.floor,zf=M.getOwnPropertySymbols,oh=pl?pl.isBuffer:h,qu=Ct.isFinite,Cc=Ge.join,Hf=Rc(M.keys,M),Co=T.max,Li=T.min,Xf=ur.now,Yf=Ct.parseInt,Ps=T.random,Vv=Ge.reverse,ks=Ja(Ct,"DataView"),yl=Ja(Ct,"Map"),Dc=Ja(Ct,"Promise"),Ku=Ja(Ct,"Set"),pu=Ja(Ct,"WeakMap"),Ns=Ja(M,"create"),Ic=pu&&new pu,hu={},Wv=Au(ks),Lc=Au(yl),zv=Au(Dc),Hv=Au(Ku),ih=Au(pu),qf=hl?hl.prototype:h,Mi=qf?qf.valueOf:h,ah=qf?qf.toString:h;function oe(d){if(Mo(d)&&!gr(d)&&!(d instanceof kr)){if(d instanceof Na)return d;if(ln.call(d,"__wrapped__"))return md(d)}return new Na(d)}var Zu=function(){function d(){}return function(m){if(!Jr(m))return{};if(du)return du(m);d.prototype=m;var E=new d;return d.prototype=h,E}}();function $l(){}function Na(d,m){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=h}function kr(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Y,this.__views__=[]}function gi(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var j=d[m];this.set(j[0],j[1])}}function $r(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var j=d[m];this.set(j[0],j[1])}}function Ya(d){var m=-1,E=d==null?0:d.length;for(this.clear();++m<E;){var j=d[m];this.set(j[0],j[1])}}function Bl(d){var m=-1,E=d==null?0:d.length;for(this.__data__=new Ya;++m<E;)this.add(d[m])}function ma(d){var m=this.__data__=new $r(d);this.size=m.size}function Kf(d,m){var E=gr(d),j=!E&&Mu(d),V=!E&&!j&&La(d),Q=!E&&!j&&!V&&qe(d),fe=E||j||V||Q,Ee=fe?Dl(d.length,ne):[],Ie=Ee.length;for(var ft in d)!m&&!ln.call(d,ft)||fe&&(ft=="length"||V&&(ft=="offset"||ft=="parent")||Q&&(ft=="buffer"||ft=="byteLength"||ft=="byteOffset")||no(ft,Ie))||Ee.push(ft);return Ee}function Zf(d){var m=d.length;return m?d[np(0,m-1)]:h}function Hd(d,m){return xl(di(d),vu(m,0,d.length))}function lh(d){return xl(di(d))}function Ul(d,m,E){(E!==h&&!ua(d[m],E)||E===h&&!(m in d))&&qa(d,m,E)}function Do(d,m,E){var j=d[m];ln.call(d,m)&&ua(j,E)&&(E!==h||m in d)||qa(d,m,E)}function Rs(d,m){for(var E=d.length;E--;)if(ua(d[E][0],m))return E;return-1}function Xd(d,m,E,j){return yo(d,function(V,Q,fe){m(j,V,E(V),fe)}),j}function Gl(d,m){return d&&_l(m,It(m),d)}function qa(d,m,E){m=="__proto__"&&Xu?Xu(d,m,{configurable:!0,enumerable:!0,value:E,writable:!0}):d[m]=E}function Fc(d,m){for(var E=-1,j=m.length,V=fn(j),Q=d==null;++E<j;)V[E]=Q?h:Wt(d,m[E]);return V}function vu(d,m,E){return d==d&&(E!==h&&(d=d<=E?d:E),m!==h&&(d=d>=m?d:m)),d}function ga(d,m,E,j,V,Q){var fe,Ee=1&m,Ie=2&m,ft=4&m;if(E&&(fe=V?E(d,j,V,Q):E(d)),fe!==h)return fe;if(!Jr(d))return d;var vt=gr(d);if(vt){if(fe=function(Mt){var Jt=Mt.length,dr=new Mt.constructor(Jt);return Jt&&typeof Mt[0]=="string"&&ln.call(Mt,"index")&&(dr.index=Mt.index,dr.input=Mt.input),dr}(d),!Ee)return di(d,fe)}else{var Gt=Ao(d),An=Gt==q||Gt==z;if(La(d))return lp(d,Ee);if(Gt==ge||Gt==X||An&&!V){if(fe=Ie||An?{}:Ou(d),!Ee)return Ie?function(Mt,Jt){return _l(Mt,Bs(Mt),Jt)}(d,function(Mt,Jt){return Mt&&_l(Jt,St(Jt),Mt)}(fe,d)):function(Mt,Jt){return _l(Mt,$s(Mt),Jt)}(d,Gl(fe,d))}else{if(!Vr[Gt])return V?d:{};fe=function(Mt,Jt,dr){var gn=Mt.constructor;switch(Jt){case gt:return Qu(Mt);case W:case C:return new gn(+Mt);case st:return function(or,Dr){var Bn=Dr?Qu(or.buffer):or.buffer;return new or.constructor(Bn,or.byteOffset,or.byteLength)}(Mt,dr);case At:case jt:case yt:case Kt:case je:case we:case Me:case dt:case zt:return co(Mt,dr);case Z:return new gn;case me:case _e:return new gn(Mt);case Be:return function(or){var Dr=new or.constructor(or.source,Er.exec(or));return Dr.lastIndex=or.lastIndex,Dr}(Mt);case ve:return new gn;case Ce:return ar=Mt,Mi?M(Mi.call(ar)):{}}var ar}(d,Gt,Ee)}}Q||(Q=new ma);var On=Q.get(d);if(On)return On;Q.set(d,fe),be(d)?d.forEach(function(Mt){fe.add(ga(Mt,m,E,Mt,d,Q))}):_i(d)&&d.forEach(function(Mt,Jt){fe.set(Jt,ga(Mt,m,E,Jt,d,Q))});var Xn=vt?h:(ft?Ie?hd:Kc:Ie?St:It)(d);return Ri(Xn||d,function(Mt,Jt){Xn&&(Mt=d[Jt=Mt]),Do(fe,Jt,ga(Mt,m,E,Jt,d,Q))}),fe}function Yd(d,m,E){var j=E.length;if(d==null)return!j;for(d=M(d);j--;){var V=E[j],Q=m[V],fe=d[V];if(fe===h&&!(V in d)||!Q(fe))return!1}return!0}function qd(d,m,E){if(typeof d!="function")throw new ye(g);return ns(function(){d.apply(h,E)},m)}function Ka(d,m,E,j){var V=-1,Q=Ai,fe=!0,Ee=d.length,Ie=[],ft=m.length;if(!Ee)return Ie;E&&(m=Fr(m,uo(E))),j?(Q=Mc,fe=!1):m.length>=200&&(Q=Va,fe=!1,m=new Bl(m));e:for(;++V<Ee;){var vt=d[V],Gt=E==null?vt:E(vt);if(vt=j||vt!==0?vt:0,fe&&Gt==Gt){for(var An=ft;An--;)if(m[An]===Gt)continue e;Ie.push(vt)}else Q(m,Gt,j)||Ie.push(vt)}return Ie}oe.templateSettings={escape:Le,evaluate:mn,interpolate:qn,variable:"",imports:{_:oe}},oe.prototype=$l.prototype,oe.prototype.constructor=oe,Na.prototype=Zu($l.prototype),Na.prototype.constructor=Na,kr.prototype=Zu($l.prototype),kr.prototype.constructor=kr,gi.prototype.clear=function(){this.__data__=Ns?Ns(null):{},this.size=0},gi.prototype.delete=function(d){var m=this.has(d)&&delete this.__data__[d];return this.size-=m?1:0,m},gi.prototype.get=function(d){var m=this.__data__;if(Ns){var E=m[d];return E===_?h:E}return ln.call(m,d)?m[d]:h},gi.prototype.has=function(d){var m=this.__data__;return Ns?m[d]!==h:ln.call(m,d)},gi.prototype.set=function(d,m){var E=this.__data__;return this.size+=this.has(d)?0:1,E[d]=Ns&&m===h?_:m,this},$r.prototype.clear=function(){this.__data__=[],this.size=0},$r.prototype.delete=function(d){var m=this.__data__,E=Rs(m,d);return!(E<0)&&(E==m.length-1?m.pop():Fl.call(m,E,1),--this.size,!0)},$r.prototype.get=function(d){var m=this.__data__,E=Rs(m,d);return E<0?h:m[E][1]},$r.prototype.has=function(d){return Rs(this.__data__,d)>-1},$r.prototype.set=function(d,m){var E=this.__data__,j=Rs(E,d);return j<0?(++this.size,E.push([d,m])):E[j][1]=m,this},Ya.prototype.clear=function(){this.size=0,this.__data__={hash:new gi,map:new(yl||$r),string:new gi}},Ya.prototype.delete=function(d){var m=Fs(this,d).delete(d);return this.size-=m?1:0,m},Ya.prototype.get=function(d){return Fs(this,d).get(d)},Ya.prototype.has=function(d){return Fs(this,d).has(d)},Ya.prototype.set=function(d,m){var E=Fs(this,d),j=E.size;return E.set(d,m),this.size+=E.size==j?0:1,this},Bl.prototype.add=Bl.prototype.push=function(d){return this.__data__.set(d,_),this},Bl.prototype.has=function(d){return this.__data__.has(d)},ma.prototype.clear=function(){this.__data__=new $r,this.size=0},ma.prototype.delete=function(d){var m=this.__data__,E=m.delete(d);return this.size=m.size,E},ma.prototype.get=function(d){return this.__data__.get(d)},ma.prototype.has=function(d){return this.__data__.has(d)},ma.prototype.set=function(d,m){var E=this.__data__;if(E instanceof $r){var j=E.__data__;if(!yl||j.length<199)return j.push([d,m]),this.size=++E.size,this;E=this.__data__=new Ya(j)}return E.set(d,m),this.size=E.size,this};var yo=es(Nn),uh=es(ao,!0);function Kd(d,m){var E=!0;return yo(d,function(j,V,Q){return E=!!m(j,V,Q)}),E}function Io(d,m,E){for(var j=-1,V=d.length;++j<V;){var Q=d[j],fe=m(Q);if(fe!=null&&(Ee===h?fe==fe&&!ct(fe):E(fe,Ee)))var Ee=fe,Ie=Q}return Ie}function Hr(d,m){var E=[];return yo(d,function(j,V,Q){m(j,V,Q)&&E.push(j)}),E}function Ko(d,m,E,j,V){var Q=-1,fe=d.length;for(E||(E=Jc),V||(V=[]);++Q<fe;){var Ee=d[Q];m>0&&E(Ee)?m>1?Ko(Ee,m-1,E,j,V):oi(V,Ee):j||(V[V.length]=Ee)}return V}var xr=ld(),io=ld(!0);function Nn(d,m){return d&&xr(d,m,It)}function ao(d,m){return d&&io(d,m,It)}function $c(d,m){return ji(m,function(E){return Al(d[E])})}function ml(d,m){for(var E=0,j=(m=_u(m,d)).length;d!=null&&E<j;)d=d[tl(m[E++])];return E&&E==j?d:h}function Jf(d,m,E){var j=m(d);return gr(d)?j:oi(j,E(d))}function wo(d){return d==null?d===h?"[object Undefined]":"[object Null]":Xa&&Xa in M(d)?function(m){var E=ln.call(m,Xa),j=m[Xa];try{m[Xa]=h;var V=!0}catch{}var Q=Cr.call(m);return V&&(E?m[Xa]=j:delete m[Xa]),Q}(d):function(m){return Cr.call(m)}(d)}function So(d,m){return d>m}function Zd(d,m){return d!=null&&ln.call(d,m)}function Jd(d,m){return d!=null&&m in M(d)}function Bc(d,m,E){for(var j=E?Mc:Ai,V=d[0].length,Q=d.length,fe=Q,Ee=fn(Q),Ie=1/0,ft=[];fe--;){var vt=d[fe];fe&&m&&(vt=Fr(vt,uo(m))),Ie=Li(vt.length,Ie),Ee[fe]=!E&&(m||V>=120&&vt.length>=120)?new Bl(fe&&vt):h}vt=d[0];var Gt=-1,An=Ee[0];e:for(;++Gt<V&&ft.length<Ie;){var On=vt[Gt],Xn=m?m(On):On;if(On=E||On!==0?On:0,!(An?Va(An,Xn):j(ft,Xn,E))){for(fe=Q;--fe;){var Mt=Ee[fe];if(!(Mt?Va(Mt,Xn):j(d[fe],Xn,E)))continue e}An&&An.push(Xn),ft.push(On)}}return ft}function Fi(d,m,E){var j=(d=Su(d,m=_u(m,d)))==null?d:d[tl($i(m))];return j==null?h:to(j,d,E)}function Qf(d){return Mo(d)&&wo(d)==X}function js(d,m,E,j,V){return d===m||(d==null||m==null||!Mo(d)&&!Mo(m)?d!=d&&m!=m:function(Q,fe,Ee,Ie,ft,vt){var Gt=gr(Q),An=gr(fe),On=Gt?te:Ao(Q),Xn=An?te:Ao(fe),Mt=(On=On==X?ge:On)==ge,Jt=(Xn=Xn==X?ge:Xn)==ge,dr=On==Xn;if(dr&&La(Q)){if(!La(fe))return!1;Gt=!0,Mt=!1}if(dr&&!Mt)return vt||(vt=new ma),Gt||qe(Q)?pd(Q,fe,Ee,Ie,ft,vt):function(Bn,er,zo,nt,Jl,bi,Pu){switch(zo){case st:if(Bn.byteLength!=er.byteLength||Bn.byteOffset!=er.byteOffset)return!1;Bn=Bn.buffer,er=er.buffer;case gt:return!(Bn.byteLength!=er.byteLength||!bi(new Ll(Bn),new Ll(er)));case W:case C:case me:return ua(+Bn,+er);case G:return Bn.name==er.name&&Bn.message==er.message;case Be:case _e:return Bn==er+"";case Z:var us=Yo;case ve:var wd=1&nt;if(us||(us=ya),Bn.size!=er.size&&!wd)return!1;var Ep=Pu.get(Bn);if(Ep)return Ep==er;nt|=2,Pu.set(Bn,er);var cf=pd(us(Bn),us(er),nt,Jl,bi,Pu);return Pu.delete(Bn),cf;case Ce:if(Mi)return Mi.call(Bn)==Mi.call(er)}return!1}(Q,fe,On,Ee,Ie,ft,vt);if(!(1&Ee)){var gn=Mt&&ln.call(Q,"__wrapped__"),ar=Jt&&ln.call(fe,"__wrapped__");if(gn||ar){var or=gn?Q.value():Q,Dr=ar?fe.value():fe;return vt||(vt=new ma),ft(or,Dr,Ee,Ie,vt)}}return dr?(vt||(vt=new ma),function(Bn,er,zo,nt,Jl,bi){var Pu=1&zo,us=Kc(Bn),wd=us.length,Ep=Kc(er).length;if(wd!=Ep&&!Pu)return!1;for(var cf=wd;cf--;){var qs=us[cf];if(!(Pu?qs in er:ln.call(er,qs)))return!1}var Jv=bi.get(Bn),Qv=bi.get(er);if(Jv&&Qv)return Jv==er&&Qv==Bn;var Op=!0;bi.set(Bn,er),bi.set(er,Bn);for(var Mh=Pu;++cf<wd;){var Ks=Bn[qs=us[cf]],xp=er[qs];if(nt)var ey=Pu?nt(xp,Ks,qs,er,Bn,bi):nt(Ks,xp,qs,Bn,er,bi);if(!(ey===h?Ks===xp||Jl(Ks,xp,zo,nt,bi):ey)){Op=!1;break}Mh||(Mh=qs=="constructor")}if(Op&&!Mh){var Zs=Bn.constructor,Sp=er.constructor;Zs==Sp||!("constructor"in Bn)||!("constructor"in er)||typeof Zs=="function"&&Zs instanceof Zs&&typeof Sp=="function"&&Sp instanceof Sp||(Op=!1)}return bi.delete(Bn),bi.delete(er),Op}(Q,fe,Ee,Ie,ft,vt)):!1}(d,m,E,j,js,V))}function Ra(d,m,E,j){var V=E.length,Q=V,fe=!j;if(d==null)return!Q;for(d=M(d);V--;){var Ee=E[V];if(fe&&Ee[2]?Ee[1]!==d[Ee[0]]:!(Ee[0]in d))return!1}for(;++V<Q;){var Ie=(Ee=E[V])[0],ft=d[Ie],vt=Ee[1];if(fe&&Ee[2]){if(ft===h&&!(Ie in d))return!1}else{var Gt=new ma;if(j)var An=j(ft,vt,Ie,d,m,Gt);if(!(An===h?js(vt,ft,3,j,Gt):An))return!1}}return!0}function yu(d){return!(!Jr(d)||(m=d,pr&&pr in m))&&(Al(d)?qi:Go).test(Au(d));var m}function Vl(d){return typeof d=="function"?d:d==null?Wn:typeof d=="object"?gr(d)?ep(d[0],d[1]):Qd(d):ue(d)}function ja(d){if(!xu(d))return Hf(d);var m=[];for(var E in M(d))ln.call(d,E)&&E!="constructor"&&m.push(E);return m}function sh(d){if(!Jr(d))return function(V){var Q=[];if(V!=null)for(var fe in M(V))Q.push(fe);return Q}(d);var m=xu(d),E=[];for(var j in d)(j!="constructor"||!m&&ln.call(d,j))&&E.push(j);return E}function gl(d,m){return d<m}function _a(d,m){var E=-1,j=sa(d)?fn(d.length):[];return yo(d,function(V,Q,fe){j[++E]=m(V,Q,fe)}),j}function Qd(d){var m=Zc(d);return m.length==1&&m[0][2]?Gs(m[0][0],m[0][1]):function(E){return E===d||Ra(E,d,m)}}function ep(d,m){return Xl(d)&&Ol(m)?Gs(tl(d),m):function(E){var j=Wt(E,d);return j===h&&j===m?_t(E,d):js(m,j,3)}}function ed(d,m,E,j,V){d!==m&&xr(m,function(Q,fe){if(V||(V=new ma),Jr(Q))(function(Ie,ft,vt,Gt,An,On,Xn){var Mt=Nt(Ie,vt),Jt=Nt(ft,vt),dr=Xn.get(Jt);if(dr)return void Ul(Ie,vt,dr);var gn=On?On(Mt,Jt,vt+"",Ie,ft,Xn):h,ar=gn===h;if(ar){var or=gr(Jt),Dr=!or&&La(Jt),Bn=!or&&!Dr&&qe(Jt);gn=Jt,or||Dr||Bn?gr(Mt)?gn=Mt:Qo(Mt)?gn=di(Mt):Dr?(ar=!1,gn=lp(Jt,!0)):Bn?(ar=!1,gn=co(Jt,!0)):gn=[]:L(Jt)||Mu(Jt)?(gn=Mt,Mu(Mt)?gn=kt(Mt):Jr(Mt)&&!Al(Mt)||(gn=Ou(Jt))):ar=!1}ar&&(Xn.set(Jt,gn),An(gn,Jt,Gt,On,Xn),Xn.delete(Jt)),Ul(Ie,vt,gn)})(d,m,fe,E,ed,j,V);else{var Ee=j?j(Nt(d,fe),Q,fe+"",d,m,V):h;Ee===h&&(Ee=Q),Ul(d,fe,Ee)}},St)}function ch(d,m){var E=d.length;if(E)return no(m+=m<0?E:0,E)?d[m]:h}function fh(d,m,E){m=m.length?Fr(m,function(Q){return gr(Q)?function(fe){return ml(fe,Q.length===1?Q[0]:Q)}:Q}):[Wn];var j=-1;m=Fr(m,uo(Jn()));var V=_a(d,function(Q,fe,Ee){var Ie=Fr(m,function(ft){return ft(Q)});return{criteria:Ie,index:++j,value:Q}});return function(Q,fe){var Ee=Q.length;for(Q.sort(fe);Ee--;)Q[Ee]=Q[Ee].value;return Q}(V,function(Q,fe){return function(Ee,Ie,ft){for(var vt=-1,Gt=Ee.criteria,An=Ie.criteria,On=Gt.length,Xn=ft.length;++vt<On;){var Mt=zc(Gt[vt],An[vt]);if(Mt)return vt>=Xn?Mt:Mt*(ft[vt]=="desc"?-1:1)}return Ee.index-Ie.index}(Q,fe,E)})}function dh(d,m,E){for(var j=-1,V=m.length,Q={};++j<V;){var fe=m[j],Ee=ml(d,fe);E(Ee,fe)&&mu(Q,_u(fe,d),Ee)}return Q}function tp(d,m,E,j){var V=j?Xi:su,Q=-1,fe=m.length,Ee=d;for(d===m&&(m=di(m)),E&&(Ee=Fr(d,uo(E)));++Q<fe;)for(var Ie=0,ft=m[Q],vt=E?E(ft):ft;(Ie=V(Ee,vt,Ie,j))>-1;)Ee!==d&&Fl.call(Ee,Ie,1),Fl.call(d,Ie,1);return d}function Cs(d,m){for(var E=d?m.length:0,j=E-1;E--;){var V=m[E];if(E==j||V!==Q){var Q=V;no(V)?Fl.call(d,V,1):rd(d,V)}}return d}function np(d,m){return d+Yu(Ps()*(m-d+1))}function Uc(d,m){var E="";if(!d||m<1||m>N)return E;do m%2&&(E+=d),(m=Yu(m/2))&&(d+=d);while(m);return E}function Sr(d,m){return ef(Qc(d,m,Wn),d+"")}function Xv(d){return Zf(_r(d))}function rp(d,m){var E=_r(d);return xl(E,vu(m,0,E.length))}function mu(d,m,E,j){if(!Jr(d))return d;for(var V=-1,Q=(m=_u(m,d)).length,fe=Q-1,Ee=d;Ee!=null&&++V<Q;){var Ie=tl(m[V]),ft=E;if(Ie==="__proto__"||Ie==="constructor"||Ie==="prototype")return d;if(V!=fe){var vt=Ee[Ie];(ft=j?j(vt,Ie,Ee):h)===h&&(ft=Jr(vt)?vt:no(m[V+1])?[]:{})}Do(Ee,Ie,ft),Ee=Ee[Ie]}return d}var Gc=Ic?function(d,m){return Ic.set(d,m),d}:Wn,Yv=Xu?function(d,m){return Xu(d,"toString",{configurable:!0,enumerable:!1,value:Nr(m),writable:!0})}:Wn;function qv(d){return xl(_r(d))}function Ca(d,m,E){var j=-1,V=d.length;m<0&&(m=-m>V?0:V+m),(E=E>V?V:E)<0&&(E+=V),V=m>E?0:E-m>>>0,m>>>=0;for(var Q=fn(V);++j<V;)Q[j]=d[j+m];return Q}function op(d,m){var E;return yo(d,function(j,V,Q){return!(E=m(j,V,Q))}),!!E}function td(d,m,E){var j=0,V=d==null?j:d.length;if(typeof m=="number"&&m==m&&V<=2147483647){for(;j<V;){var Q=j+V>>>1,fe=d[Q];fe!==null&&!ct(fe)&&(E?fe<=m:fe<m)?j=Q+1:V=Q}return V}return nd(d,m,Wn,E)}function nd(d,m,E,j){var V=0,Q=d==null?0:d.length;if(Q===0)return 0;for(var fe=(m=E(m))!=m,Ee=m===null,Ie=ct(m),ft=m===h;V<Q;){var vt=Yu((V+Q)/2),Gt=E(d[vt]),An=Gt!==h,On=Gt===null,Xn=Gt==Gt,Mt=ct(Gt);if(fe)var Jt=j||Xn;else Jt=ft?Xn&&(j||An):Ee?Xn&&An&&(j||!On):Ie?Xn&&An&&!On&&(j||!Mt):!On&&!Mt&&(j?Gt<=m:Gt<m);Jt?V=vt+1:Q=vt}return Li(Q,4294967294)}function ph(d,m){for(var E=-1,j=d.length,V=0,Q=[];++E<j;){var fe=d[E],Ee=m?m(fe):fe;if(!E||!ua(Ee,Ie)){var Ie=Ee;Q[V++]=fe===0?0:fe}}return Q}function ip(d){return typeof d=="number"?d:ct(d)?$:+d}function aa(d){if(typeof d=="string")return d;if(gr(d))return Fr(d,aa)+"";if(ct(d))return ah?ah.call(d):"";var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function gu(d,m,E){var j=-1,V=Ai,Q=d.length,fe=!0,Ee=[],Ie=Ee;if(E)fe=!1,V=Mc;else if(Q>=200){var ft=m?null:fd(d);if(ft)return ya(ft);fe=!1,V=Va,Ie=new Bl}else Ie=m?[]:Ee;e:for(;++j<Q;){var vt=d[j],Gt=m?m(vt):vt;if(vt=E||vt!==0?vt:0,fe&&Gt==Gt){for(var An=Ie.length;An--;)if(Ie[An]===Gt)continue e;m&&Ie.push(Gt),Ee.push(vt)}else V(Ie,Gt,E)||(Ie!==Ee&&Ie.push(Gt),Ee.push(vt))}return Ee}function rd(d,m){return(d=Su(d,m=_u(m,d)))==null||delete d[tl($i(m))]}function Ju(d,m,E,j){return mu(d,m,E(ml(d,m)),j)}function Vc(d,m,E,j){for(var V=d.length,Q=j?V:-1;(j?Q--:++Q<V)&&m(d[Q],Q,d););return E?Ca(d,j?0:Q,j?Q+1:V):Ca(d,j?Q+1:0,j?V:Q)}function hh(d,m){var E=d;return E instanceof kr&&(E=E.value()),As(m,function(j,V){return V.func.apply(V.thisArg,oi([j],V.args))},E)}function Wc(d,m,E){var j=d.length;if(j<2)return j?gu(d[0]):[];for(var V=-1,Q=fn(j);++V<j;)for(var fe=d[V],Ee=-1;++Ee<j;)Ee!=V&&(Q[V]=Ka(Q[V]||fe,d[Ee],m,E));return gu(Ko(Q,1),m,E)}function od(d,m,E){for(var j=-1,V=d.length,Q=m.length,fe={};++j<V;){var Ee=j<Q?m[j]:h;E(fe,d[j],Ee)}return fe}function id(d){return Qo(d)?d:[]}function ad(d){return typeof d=="function"?d:Wn}function _u(d,m){return gr(d)?d:Xl(d,m)?[d]:hp(mt(d))}var vh=Sr;function bu(d,m,E){var j=d.length;return E=E===h?j:E,!m&&E>=j?d:Ca(d,m,E)}var ap=nh||function(d){return jo.clearTimeout(d)};function lp(d,m){if(m)return d.slice();var E=d.length,j=fu?fu(E):new d.constructor(E);return d.copy(j),j}function Qu(d){var m=new d.constructor(d.byteLength);return new Ll(m).set(new Ll(d)),m}function co(d,m){var E=m?Qu(d.buffer):d.buffer;return new d.constructor(E,d.byteOffset,d.length)}function zc(d,m){if(d!==m){var E=d!==h,j=d===null,V=d==d,Q=ct(d),fe=m!==h,Ee=m===null,Ie=m==m,ft=ct(m);if(!Ee&&!ft&&!Q&&d>m||Q&&fe&&Ie&&!Ee&&!ft||j&&fe&&Ie||!E&&Ie||!V)return 1;if(!j&&!Q&&!ft&&d<m||ft&&E&&V&&!j&&!Q||Ee&&E&&V||!fe&&V||!Ie)return-1}return 0}function Eo(d,m,E,j){for(var V=-1,Q=d.length,fe=E.length,Ee=-1,Ie=m.length,ft=Co(Q-fe,0),vt=fn(Ie+ft),Gt=!j;++Ee<Ie;)vt[Ee]=m[Ee];for(;++V<fe;)(Gt||V<Q)&&(vt[E[V]]=d[V]);for(;ft--;)vt[Ee++]=d[V++];return vt}function Wl(d,m,E,j){for(var V=-1,Q=d.length,fe=-1,Ee=E.length,Ie=-1,ft=m.length,vt=Co(Q-Ee,0),Gt=fn(vt+ft),An=!j;++V<vt;)Gt[V]=d[V];for(var On=V;++Ie<ft;)Gt[On+Ie]=m[Ie];for(;++fe<Ee;)(An||V<Q)&&(Gt[On+E[fe]]=d[V++]);return Gt}function di(d,m){var E=-1,j=d.length;for(m||(m=fn(j));++E<j;)m[E]=d[E];return m}function _l(d,m,E,j){var V=!E;E||(E={});for(var Q=-1,fe=m.length;++Q<fe;){var Ee=m[Q],Ie=j?j(E[Ee],d[Ee],Ee,E,d):h;Ie===h&&(Ie=d[Ee]),V?qa(E,Ee,Ie):Do(E,Ee,Ie)}return E}function zl(d,m){return function(E,j){var V=gr(E)?Gf:Xd,Q=m?m():{};return V(E,d,Jn(j,2),Q)}}function wu(d){return Sr(function(m,E){var j=-1,V=E.length,Q=V>1?E[V-1]:h,fe=V>2?E[2]:h;for(Q=d.length>3&&typeof Q=="function"?(V--,Q):h,fe&&Lo(E[0],E[1],fe)&&(Q=V<3?h:Q,V=1),m=M(m);++j<V;){var Ee=E[j];Ee&&d(m,Ee,j,Q)}return m})}function es(d,m){return function(E,j){if(E==null)return E;if(!sa(E))return d(E,j);for(var V=E.length,Q=m?V:-1,fe=M(E);(m?Q--:++Q<V)&&j(fe[Q],Q,fe)!==!1;);return E}}function ld(d){return function(m,E,j){for(var V=-1,Q=M(m),fe=j(m),Ee=fe.length;Ee--;){var Ie=fe[d?Ee:++V];if(E(Q[Ie],Ie,Q)===!1)break}return m}}function ud(d){return function(m){var E=Wa(m=mt(m))?Yi(m):h,j=E?E[0]:m.charAt(0),V=E?bu(E,1).join(""):m.slice(1);return j[d]()+V}}function bl(d){return function(m){return As(xo(cr(m).replace(Lf,"")),d,"")}}function ts(d){return function(){var m=arguments;switch(m.length){case 0:return new d;case 1:return new d(m[0]);case 2:return new d(m[0],m[1]);case 3:return new d(m[0],m[1],m[2]);case 4:return new d(m[0],m[1],m[2],m[3]);case 5:return new d(m[0],m[1],m[2],m[3],m[4]);case 6:return new d(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new d(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var E=Zu(d.prototype),j=d.apply(E,m);return Jr(j)?j:E}}function sd(d){return function(m,E,j){var V=M(m);if(!sa(m)){var Q=Jn(E,3);m=It(m),E=function(Ee){return Q(V[Ee],Ee,V)}}var fe=d(m,E,j);return fe>-1?V[Q?m[fe]:fe]:h}}function Hc(d){return El(function(m){var E=m.length,j=E,V=Na.prototype.thru;for(d&&m.reverse();j--;){var Q=m[j];if(typeof Q!="function")throw new ye(g);if(V&&!fe&&Ls(Q)=="wrapper")var fe=new Na([],!0)}for(j=fe?j:E;++j<E;){var Ee=Ls(Q=m[j]),Ie=Ee=="wrapper"?vd(Q):h;fe=Ie&&Qa(Ie[0])&&Ie[1]==424&&!Ie[4].length&&Ie[9]==1?fe[Ls(Ie[0])].apply(fe,Ie[3]):Q.length==1&&Qa(Q)?fe[Ee]():fe.thru(Q)}return function(){var ft=arguments,vt=ft[0];if(fe&&ft.length==1&&gr(vt))return fe.plant(vt).value();for(var Gt=0,An=E?m[Gt].apply(this,ft):vt;++Gt<E;)An=m[Gt].call(this,An);return An}})}function Eu(d,m,E,j,V,Q,fe,Ee,Ie,ft){var vt=m&A,Gt=1&m,An=2&m,On=24&m,Xn=512&m,Mt=An?h:ts(d);return function Jt(){for(var dr=arguments.length,gn=fn(dr),ar=dr;ar--;)gn[ar]=arguments[ar];if(On)var or=Hl(Jt),Dr=Wd(gn,or);if(j&&(gn=Eo(gn,j,V,On)),Q&&(gn=Wl(gn,Q,fe,On)),dr-=Dr,On&&dr<ft){var Bn=ra(gn,or);return Yc(d,m,Eu,Jt.placeholder,E,gn,Bn,Ee,Ie,ft-dr)}var er=Gt?E:this,zo=An?er[d]:d;return dr=gn.length,Ee?gn=Vs(gn,Ee):Xn&&dr>1&&gn.reverse(),vt&&Ie<dr&&(gn.length=Ie),this&&this!==jo&&this instanceof Jt&&(zo=Mt||ts(zo)),zo.apply(er,gn)}}function up(d,m){return function(E,j){return function(V,Q,fe,Ee){return Nn(V,function(Ie,ft,vt){Q(Ee,fe(Ie),ft,vt)}),Ee}(E,d,m(j),{})}}function Ds(d,m){return function(E,j){var V;if(E===h&&j===h)return m;if(E!==h&&(V=E),j!==h){if(V===h)return j;typeof E=="string"||typeof j=="string"?(E=aa(E),j=aa(j)):(E=ip(E),j=ip(j)),V=d(E,j)}return V}}function cd(d){return El(function(m){return m=Fr(m,uo(Jn())),Sr(function(E){var j=this;return d(m,function(V){return to(V,j,E)})})})}function Xc(d,m){var E=(m=m===h?" ":aa(m)).length;if(E<2)return E?Uc(m,d):m;var j=Uc(m,jc(d/Ii(m)));return Wa(m)?bu(Yi(j),0,d).join(""):j.slice(0,d)}function wl(d){return function(m,E,j){return j&&typeof j!="number"&&Lo(m,E,j)&&(E=j=h),m=Rt(m),E===h?(E=m,m=0):E=Rt(E),function(V,Q,fe,Ee){for(var Ie=-1,ft=Co(jc((Q-V)/(fe||1)),0),vt=fn(ft);ft--;)vt[Ee?ft:++Ie]=V,V+=fe;return vt}(m,E,j=j===h?m<E?1:-1:Rt(j),d)}}function Is(d){return function(m,E){return typeof m=="string"&&typeof E=="string"||(m=Ut(m),E=Ut(E)),d(m,E)}}function Yc(d,m,E,j,V,Q,fe,Ee,Ie,ft){var vt=8&m;m|=vt?S:P,4&(m&=~(vt?P:S))||(m&=-4);var Gt=[d,m,V,vt?Q:h,vt?fe:h,vt?h:Q,vt?h:fe,Ee,Ie,ft],An=E.apply(h,Gt);return Qa(d)&&dp(An,Gt),An.placeholder=j,yd(An,d,m)}function qc(d){var m=T[d];return function(E,j){if(E=Ut(E),(j=j==null?0:Li(lt(j),292))&&qu(E)){var V=(mt(E)+"e").split("e");return+((V=(mt(m(V[0]+"e"+(+V[1]+j)))+"e").split("e"))[0]+"e"+(+V[1]-j))}return m(E)}}var fd=Ku&&1/ya(new Ku([,-0]))[1]==D?function(d){return new Ku(d)}:et;function dd(d){return function(m){var E=Ao(m);return E==Z?Yo(m):E==ve?Ms(m):function(j,V){return Fr(V,function(Q){return[Q,j[Q]]})}(m,d(m))}}function Za(d,m,E,j,V,Q,fe,Ee){var Ie=2&m;if(!Ie&&typeof d!="function")throw new ye(g);var ft=j?j.length:0;if(ft||(m&=-97,j=V=h),fe=fe===h?fe:Co(lt(fe),0),Ee=Ee===h?Ee:lt(Ee),ft-=V?V.length:0,m&P){var vt=j,Gt=V;j=V=h}var An=Ie?h:vd(d),On=[d,m,E,j,V,vt,Gt,Q,fe,Ee];if(An&&function(Mt,Jt){var dr=Mt[1],gn=Jt[1],ar=dr|gn,or=ar<131,Dr=gn==A&&dr==8||gn==A&&dr==R&&Mt[7].length<=Jt[8]||gn==384&&Jt[7].length<=Jt[8]&&dr==8;if(!or&&!Dr)return Mt;1&gn&&(Mt[2]=Jt[2],ar|=1&dr?0:4);var Bn=Jt[3];if(Bn){var er=Mt[3];Mt[3]=er?Eo(er,Bn,Jt[4]):Bn,Mt[4]=er?ra(Mt[3],w):Jt[4]}(Bn=Jt[5])&&(er=Mt[5],Mt[5]=er?Wl(er,Bn,Jt[6]):Bn,Mt[6]=er?ra(Mt[5],w):Jt[6]),(Bn=Jt[7])&&(Mt[7]=Bn),gn&A&&(Mt[8]=Mt[8]==null?Jt[8]:Li(Mt[8],Jt[8])),Mt[9]==null&&(Mt[9]=Jt[9]),Mt[0]=Jt[0],Mt[1]=ar}(On,An),d=On[0],m=On[1],E=On[2],j=On[3],V=On[4],!(Ee=On[9]=On[9]===h?Ie?0:d.length:Co(On[9]-ft,0))&&24&m&&(m&=-25),m&&m!=1)Xn=m==8||m==O?function(Mt,Jt,dr){var gn=ts(Mt);return function ar(){for(var or=arguments.length,Dr=fn(or),Bn=or,er=Hl(ar);Bn--;)Dr[Bn]=arguments[Bn];var zo=or<3&&Dr[0]!==er&&Dr[or-1]!==er?[]:ra(Dr,er);return(or-=zo.length)<dr?Yc(Mt,Jt,Eu,ar.placeholder,h,Dr,zo,h,h,dr-or):to(this&&this!==jo&&this instanceof ar?gn:Mt,this,Dr)}}(d,m,Ee):m!=S&&m!=33||V.length?Eu.apply(h,On):function(Mt,Jt,dr,gn){var ar=1&Jt,or=ts(Mt);return function Dr(){for(var Bn=-1,er=arguments.length,zo=-1,nt=gn.length,Jl=fn(nt+er),bi=this&&this!==jo&&this instanceof Dr?or:Mt;++zo<nt;)Jl[zo]=gn[zo];for(;er--;)Jl[zo++]=arguments[++Bn];return to(bi,ar?dr:this,Jl)}}(d,m,E,j);else var Xn=function(Mt,Jt,dr){var gn=1&Jt,ar=ts(Mt);return function or(){return(this&&this!==jo&&this instanceof or?ar:Mt).apply(gn?dr:this,arguments)}}(d,m,E);return yd((An?Gc:dp)(Xn,On),d,m)}function sp(d,m,E,j){return d===h||ua(d,Ht[E])&&!ln.call(j,E)?m:d}function cp(d,m,E,j,V,Q){return Jr(d)&&Jr(m)&&(Q.set(m,d),ed(d,m,h,cp,Q),Q.delete(m)),d}function fp(d){return L(d)?h:d}function pd(d,m,E,j,V,Q){var fe=1&E,Ee=d.length,Ie=m.length;if(Ee!=Ie&&!(fe&&Ie>Ee))return!1;var ft=Q.get(d),vt=Q.get(m);if(ft&&vt)return ft==m&&vt==d;var Gt=-1,An=!0,On=2&E?new Bl:h;for(Q.set(d,m),Q.set(m,d);++Gt<Ee;){var Xn=d[Gt],Mt=m[Gt];if(j)var Jt=fe?j(Mt,Xn,Gt,m,d,Q):j(Xn,Mt,Gt,d,m,Q);if(Jt!==h){if(Jt)continue;An=!1;break}if(On){if(!Pc(m,function(dr,gn){if(!Va(On,gn)&&(Xn===dr||V(Xn,dr,E,j,Q)))return On.push(gn)})){An=!1;break}}else if(Xn!==Mt&&!V(Xn,Mt,E,j,Q)){An=!1;break}}return Q.delete(d),Q.delete(m),An}function El(d){return ef(Qc(d,h,mp),d+"")}function Kc(d){return Jf(d,It,$s)}function hd(d){return Jf(d,St,Bs)}var vd=Ic?function(d){return Ic.get(d)}:et;function Ls(d){for(var m=d.name+"",E=hu[m],j=ln.call(hu,m)?E.length:0;j--;){var V=E[j],Q=V.func;if(Q==null||Q==d)return V.name}return m}function Hl(d){return(ln.call(oe,"placeholder")?oe:d).placeholder}function Jn(){var d=oe.iteratee||lo;return d=d===lo?Vl:d,arguments.length?d(arguments[0],arguments[1]):d}function Fs(d,m){var E,j,V=d.__data__;return((j=typeof(E=m))=="string"||j=="number"||j=="symbol"||j=="boolean"?E!=="__proto__":E===null)?V[typeof m=="string"?"string":"hash"]:V.map}function Zc(d){for(var m=It(d),E=m.length;E--;){var j=m[E],V=d[j];m[E]=[j,V,Ol(V)]}return m}function Ja(d,m){var E=function(j,V){return j==null?h:j[V]}(d,m);return yu(E)?E:h}var $s=zf?function(d){return d==null?[]:(d=M(d),ji(zf(d),function(m){return qo.call(d,m)}))}:Ue,Bs=zf?function(d){for(var m=[];d;)oi(m,$s(d)),d=za(d);return m}:Ue,Ao=wo;function Us(d,m,E){for(var j=-1,V=(m=_u(m,d)).length,Q=!1;++j<V;){var fe=tl(m[j]);if(!(Q=d!=null&&E(d,fe)))break;d=d[fe]}return Q||++j!=V?Q:!!(V=d==null?0:d.length)&&Kl(V)&&no(fe,V)&&(gr(d)||Mu(d))}function Ou(d){return typeof d.constructor!="function"||xu(d)?{}:Zu(za(d))}function Jc(d){return gr(d)||Mu(d)||!!(vl&&d&&d[vl])}function no(d,m){var E=typeof d;return!!(m=m??N)&&(E=="number"||E!="symbol"&&Sn.test(d))&&d>-1&&d%1==0&&d<m}function Lo(d,m,E){if(!Jr(E))return!1;var j=typeof m;return!!(j=="number"?sa(E)&&no(m,E.length):j=="string"&&m in E)&&ua(E[m],d)}function Xl(d,m){if(gr(d))return!1;var E=typeof d;return!(E!="number"&&E!="symbol"&&E!="boolean"&&d!=null&&!ct(d))||Kn.test(d)||!re.test(d)||m!=null&&d in M(m)}function Qa(d){var m=Ls(d),E=oe[m];if(typeof E!="function"||!(m in kr.prototype))return!1;if(d===E)return!0;var j=vd(E);return!!j&&d===j[0]}(ks&&Ao(new ks(new ArrayBuffer(1)))!=st||yl&&Ao(new yl)!=Z||Dc&&Ao(Dc.resolve())!=Re||Ku&&Ao(new Ku)!=ve||pu&&Ao(new pu)!=tt)&&(Ao=function(d){var m=wo(d),E=m==ge?d.constructor:h,j=E?Au(E):"";if(j)switch(j){case Wv:return st;case Lc:return Z;case zv:return Re;case Hv:return ve;case ih:return tt}return m});var el=_n?Al:We;function xu(d){var m=d&&d.constructor;return d===(typeof m=="function"&&m.prototype||Ht)}function Ol(d){return d==d&&!Jr(d)}function Gs(d,m){return function(E){return E!=null&&E[d]===m&&(m!==h||d in M(E))}}function Qc(d,m,E){return m=Co(m===h?d.length-1:m,0),function(){for(var j=arguments,V=-1,Q=Co(j.length-m,0),fe=fn(Q);++V<Q;)fe[V]=j[m+V];V=-1;for(var Ee=fn(m+1);++V<m;)Ee[V]=j[V];return Ee[m]=E(fe),to(d,this,Ee)}}function Su(d,m){return m.length<2?d:ml(d,Ca(m,0,-1))}function Vs(d,m){for(var E=d.length,j=Li(m.length,E),V=di(d);j--;){var Q=m[j];d[j]=no(Q,E)?V[Q]:h}return d}function Nt(d,m){if((m!=="constructor"||typeof d[m]!="function")&&m!="__proto__")return d[m]}var dp=pp(Gc),ns=zd||function(d,m){return jo.setTimeout(d,m)},ef=pp(Yv);function yd(d,m,E){var j=m+"";return ef(d,function(V,Q){var fe=Q.length;if(!fe)return V;var Ee=fe-1;return Q[Ee]=(fe>1?"& ":"")+Q[Ee],Q=Q.join(fe>2?", ":" "),V.replace(Oe,`{
/* [wrapped with `+Q+`] */
`)}(j,function(V,Q){return Ri(K,function(fe){var Ee="_."+fe[0];Q&fe[1]&&!Ai(V,Ee)&&V.push(Ee)}),V.sort()}(function(V){var Q=V.match(ze);return Q?Q[1].split(Ne):[]}(j),E)))}function pp(d){var m=0,E=0;return function(){var j=Xf(),V=16-(j-E);if(E=j,V>0){if(++m>=800)return arguments[0]}else m=0;return d.apply(h,arguments)}}function xl(d,m){var E=-1,j=d.length,V=j-1;for(m=m===h?j:m;++E<m;){var Q=np(E,V),fe=d[Q];d[Q]=d[E],d[E]=fe}return d.length=m,d}var hp=function(d){var m=Tu(d,function(j){return E.size===500&&E.clear(),j}),E=m.cache;return m}(function(d){var m=[];return d.charCodeAt(0)===46&&m.push(""),d.replace(vr,function(E,j,V,Q){m.push(V?Q.replace(Yt,"$1"):j||E)}),m});function tl(d){if(typeof d=="string"||ct(d))return d;var m=d+"";return m=="0"&&1/d==-1/0?"-0":m}function Au(d){if(d!=null){try{return mr.call(d)}catch{}try{return d+""}catch{}}return""}function md(d){if(d instanceof kr)return d.clone();var m=new Na(d.__wrapped__,d.__chain__);return m.__actions__=di(d.__actions__),m.__index__=d.__index__,m.__values__=d.__values__,m}var yh=Sr(function(d,m){return Qo(d)?Ka(d,Ko(m,1,Qo,!0)):[]}),mh=Sr(function(d,m){var E=$i(m);return Qo(E)&&(E=h),Qo(d)?Ka(d,Ko(m,1,Qo,!0),Jn(E,2)):[]}),gh=Sr(function(d,m){var E=$i(m);return Qo(E)&&(E=h),Qo(d)?Ka(d,Ko(m,1,Qo,!0),h,E):[]});function vp(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=E==null?0:lt(E);return V<0&&(V=Co(j+V,0)),Ci(d,Jn(m,3),V)}function yp(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=j-1;return E!==h&&(V=lt(E),V=E<0?Co(j+V,0):Li(V,j-1)),Ci(d,Jn(m,3),V,!0)}function mp(d){return d!=null&&d.length?Ko(d,1):[]}function gp(d){return d&&d.length?d[0]:h}var _h=Sr(function(d){var m=Fr(d,id);return m.length&&m[0]===d[0]?Bc(m):[]}),bh=Sr(function(d){var m=$i(d),E=Fr(d,id);return m===$i(E)?m=h:E.pop(),E.length&&E[0]===d[0]?Bc(E,Jn(m,2)):[]}),wh=Sr(function(d){var m=$i(d),E=Fr(d,id);return(m=typeof m=="function"?m:h)&&E.pop(),E.length&&E[0]===d[0]?Bc(E,h,m):[]});function $i(d){var m=d==null?0:d.length;return m?d[m-1]:h}var rs=Sr(tf);function tf(d,m){return d&&d.length&&m&&m.length?tp(d,m):d}var la=El(function(d,m){var E=d==null?0:d.length,j=Fc(d,m);return Cs(d,Fr(m,function(V){return no(V,E)?+V:V}).sort(zc)),j});function Da(d){return d==null?d:Vv.call(d)}var gd=Sr(function(d){return gu(Ko(d,1,Qo,!0))}),Bi=Sr(function(d){var m=$i(d);return Qo(m)&&(m=h),gu(Ko(d,1,Qo,!0),Jn(m,2))}),nf=Sr(function(d){var m=$i(d);return m=typeof m=="function"?m:h,gu(Ko(d,1,Qo,!0),h,m)});function os(d){if(!d||!d.length)return[];var m=0;return d=ji(d,function(E){if(Qo(E))return m=Co(E.length,m),!0}),Dl(m,function(E){return Fr(d,Di(E))})}function Ws(d,m){if(!d||!d.length)return[];var E=os(d);return m==null?E:Fr(E,function(j){return to(m,h,j)})}var rf=Sr(function(d,m){return Qo(d)?Ka(d,m):[]}),of=Sr(function(d){return Wc(ji(d,Qo))}),zs=Sr(function(d){var m=$i(d);return Qo(m)&&(m=h),Wc(ji(d,Qo),Jn(m,2))}),Hs=Sr(function(d){var m=$i(d);return m=typeof m=="function"?m:h,Wc(ji(d,Qo),h,m)}),is=Sr(os),Yl=Sr(function(d){var m=d.length,E=m>1?d[m-1]:h;return E=typeof E=="function"?(d.pop(),E):h,Ws(d,E)});function Zo(d){var m=oe(d);return m.__chain__=!0,m}function af(d,m){return m(d)}var lf=El(function(d){var m=d.length,E=m?d[0]:0,j=this.__wrapped__,V=function(Q){return Fc(Q,d)};return!(m>1||this.__actions__.length)&&j instanceof kr&&no(E)?((j=j.slice(E,+E+(m?1:0))).__actions__.push({func:af,args:[V],thisArg:h}),new Na(j,this.__chain__).thru(function(Q){return m&&!Q.length&&Q.push(h),Q})):this.thru(V)}),ql=zl(function(d,m,E){ln.call(d,E)?++d[E]:qa(d,E,1)}),_p=sd(vp),Ui=sd(yp);function Jo(d,m){return(gr(d)?Ri:yo)(d,Jn(m,3))}function Eh(d,m){return(gr(d)?Tc:uh)(d,Jn(m,3))}var Ia=zl(function(d,m,E){ln.call(d,E)?d[E].push(m):qa(d,E,[m])}),Ln=Sr(function(d,m,E){var j=-1,V=typeof m=="function",Q=sa(d)?fn(d.length):[];return yo(d,function(fe){Q[++j]=V?to(m,fe,E):Fi(fe,m,E)}),Q}),_d=zl(function(d,m,E){qa(d,E,m)});function as(d,m){return(gr(d)?Fr:_a)(d,Jn(m,3))}var bd=zl(function(d,m,E){d[E?0:1].push(m)},function(){return[[],[]]}),Oh=Sr(function(d,m){if(d==null)return[];var E=m.length;return E>1&&Lo(d,m[0],m[1])?m=[]:E>2&&Lo(m[0],m[1],m[2])&&(m=[m[0]]),fh(d,Ko(m,1),[])}),Xs=rh||function(){return jo.Date.now()};function xh(d,m,E){return m=E?h:m,m=d&&m==null?d.length:m,Za(d,A,h,h,h,h,m)}function nl(d,m){var E;if(typeof m!="function")throw new ye(g);return d=lt(d),function(){return--d>0&&(E=m.apply(this,arguments)),d<=1&&(m=h),E}}var Ys=Sr(function(d,m,E){var j=1;if(E.length){var V=ra(E,Hl(Ys));j|=S}return Za(d,j,m,E,V)}),ls=Sr(function(d,m,E){var j=3;if(E.length){var V=ra(E,Hl(ls));j|=S}return Za(m,j,d,E,V)});function rl(d,m,E){var j,V,Q,fe,Ee,Ie,ft=0,vt=!1,Gt=!1,An=!0;if(typeof d!="function")throw new ye(g);function On(ar){var or=j,Dr=V;return j=V=h,ft=ar,fe=d.apply(Dr,or)}function Xn(ar){return ft=ar,Ee=ns(Jt,m),vt?On(ar):fe}function Mt(ar){var or=ar-Ie;return Ie===h||or>=m||or<0||Gt&&ar-ft>=Q}function Jt(){var ar=Xs();if(Mt(ar))return dr(ar);Ee=ns(Jt,function(or){var Dr=m-(or-Ie);return Gt?Li(Dr,Q-(or-ft)):Dr}(ar))}function dr(ar){return Ee=h,An&&j?On(ar):(j=V=h,fe)}function gn(){var ar=Xs(),or=Mt(ar);if(j=arguments,V=this,Ie=ar,or){if(Ee===h)return Xn(Ie);if(Gt)return ap(Ee),Ee=ns(Jt,m),On(Ie)}return Ee===h&&(Ee=ns(Jt,m)),fe}return m=Ut(m)||0,Jr(E)&&(vt=!!E.leading,Q=(Gt="maxWait"in E)?Co(Ut(E.maxWait)||0,m):Q,An="trailing"in E?!!E.trailing:An),gn.cancel=function(){Ee!==h&&ap(Ee),ft=0,j=Ie=V=Ee=h},gn.flush=function(){return Ee===h?fe:dr(Xs())},gn}var Sh=Sr(function(d,m){return qd(d,1,m)}),bp=Sr(function(d,m,E){return qd(d,Ut(m)||0,E)});function Tu(d,m){if(typeof d!="function"||m!=null&&typeof m!="function")throw new ye(g);var E=function(){var j=arguments,V=m?m.apply(this,j):j[0],Q=E.cache;if(Q.has(V))return Q.get(V);var fe=d.apply(this,j);return E.cache=Q.set(V,fe)||Q,fe};return E.cache=new(Tu.Cache||Ya),E}function Sl(d){if(typeof d!="function")throw new ye(g);return function(){var m=arguments;switch(m.length){case 0:return!d.call(this);case 1:return!d.call(this,m[0]);case 2:return!d.call(this,m[0],m[1]);case 3:return!d.call(this,m[0],m[1],m[2])}return!d.apply(this,m)}}Tu.Cache=Ya;var Gi=vh(function(d,m){var E=(m=m.length==1&&gr(m[0])?Fr(m[0],uo(Jn())):Fr(Ko(m,1),uo(Jn()))).length;return Sr(function(j){for(var V=-1,Q=Li(j.length,E);++V<Q;)j[V]=m[V].call(this,j[V]);return to(d,this,j)})}),Un=Sr(function(d,m){var E=ra(m,Hl(Un));return Za(d,S,h,m,E)}),To=Sr(function(d,m){var E=ra(m,Hl(To));return Za(d,P,h,m,E)}),Pi=El(function(d,m){return Za(d,R,h,h,h,m)});function ua(d,m){return d===m||d!=d&&m!=m}var Kv=Is(So),Ah=Is(function(d,m){return d>=m}),Mu=Qf(function(){return arguments}())?Qf:function(d){return Mo(d)&&ln.call(d,"callee")&&!qo.call(d,"callee")},gr=fn.isArray,Th=Sc?uo(Sc):function(d){return Mo(d)&&wo(d)==gt};function sa(d){return d!=null&&Kl(d.length)&&!Al(d)}function Qo(d){return Mo(d)&&sa(d)}var La=oh||We,Zv=Uf?uo(Uf):function(d){return Mo(d)&&wo(d)==C};function uf(d){if(!Mo(d))return!1;var m=wo(d);return m==G||m=="[object DOMException]"||typeof d.message=="string"&&typeof d.name=="string"&&!L(d)}function Al(d){if(!Jr(d))return!1;var m=wo(d);return m==q||m==z||m=="[object AsyncFunction]"||m=="[object Proxy]"}function wp(d){return typeof d=="number"&&d==lt(d)}function Kl(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=N}function Jr(d){var m=typeof d;return d!=null&&(m=="object"||m=="function")}function Mo(d){return d!=null&&typeof d=="object"}var _i=Ac?uo(Ac):function(d){return Mo(d)&&Ao(d)==Z};function sf(d){return typeof d=="number"||Mo(d)&&wo(d)==me}function L(d){if(!Mo(d)||wo(d)!=ge)return!1;var m=za(d);if(m===null)return!0;var E=ln.call(m,"constructor")&&m.constructor;return typeof E=="function"&&E instanceof E&&mr.call(E)==ia}var ie=Ni?uo(Ni):function(d){return Mo(d)&&wo(d)==Be},be=ri?uo(ri):function(d){return Mo(d)&&Ao(d)==ve};function Je(d){return typeof d=="string"||!gr(d)&&Mo(d)&&wo(d)==_e}function ct(d){return typeof d=="symbol"||Mo(d)&&wo(d)==Ce}var qe=na?uo(na):function(d){return Mo(d)&&Kl(d.length)&&!!zr[wo(d)]},at=Is(gl),Pt=Is(function(d,m){return d<=m});function Dt(d){if(!d)return[];if(sa(d))return Je(d)?Yi(d):di(d);if(Ha&&d[Ha])return function(E){for(var j,V=[];!(j=E.next()).done;)V.push(j.value);return V}(d[Ha]());var m=Ao(d);return(m==Z?Yo:m==ve?ya:_r)(d)}function Rt(d){return d?(d=Ut(d))===D||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0}function lt(d){var m=Rt(d),E=m%1;return m==m?E?m-E:m:0}function Vt(d){return d?vu(lt(d),0,Y):0}function Ut(d){if(typeof d=="number")return d;if(ct(d))return $;if(Jr(d)){var m=typeof d.valueOf=="function"?d.valueOf():d;d=Jr(m)?m+"":m}if(typeof d!="string")return d===0?d:+d;d=ka(d);var E=yi.test(d);return E||Xo.test(d)?pa(d.slice(2),E?2:8):ni.test(d)?$:+d}function kt(d){return _l(d,St(d))}function mt(d){return d==null?"":aa(d)}var Ve=wu(function(d,m){if(xu(m)||sa(m))_l(m,It(m),d);else for(var E in m)ln.call(m,E)&&Do(d,E,m[E])}),ot=wu(function(d,m){_l(m,St(m),d)}),Lt=wu(function(d,m,E,j){_l(m,St(m),d,j)}),qt=wu(function(d,m,E,j){_l(m,It(m),d,j)}),Ot=El(Fc),Zt=Sr(function(d,m){d=M(d);var E=-1,j=m.length,V=j>2?m[2]:h;for(V&&Lo(m[0],m[1],V)&&(j=1);++E<j;)for(var Q=m[E],fe=St(Q),Ee=-1,Ie=fe.length;++Ee<Ie;){var ft=fe[Ee],vt=d[ft];(vt===h||ua(vt,Ht[ft])&&!ln.call(d,ft))&&(d[ft]=Q[ft])}return d}),xt=Sr(function(d){return d.push(h,cp),to(Cn,h,d)});function Wt(d,m,E){var j=d==null?h:ml(d,m);return j===h?E:j}function _t(d,m){return d!=null&&Us(d,m,Jd)}var Xt=up(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),d[m]=E},Nr(Wn)),Mn=up(function(d,m,E){m!=null&&typeof m.toString!="function"&&(m=Cr.call(m)),ln.call(d,m)?d[m].push(E):d[m]=[E]},Jn),Vn=Sr(Fi);function It(d){return sa(d)?Kf(d):ja(d)}function St(d){return sa(d)?Kf(d,!0):sh(d)}var wt=wu(function(d,m,E){ed(d,m,E)}),Cn=wu(function(d,m,E,j){ed(d,m,E,j)}),tr=El(function(d,m){var E={};if(d==null)return E;var j=!1;m=Fr(m,function(Q){return Q=_u(Q,d),j||(j=Q.length>1),Q}),_l(d,hd(d),E),j&&(E=ga(E,7,fp));for(var V=m.length;V--;)rd(E,m[V]);return E}),un=El(function(d,m){return d==null?{}:function(E,j){return dh(E,j,function(V,Q){return _t(E,Q)})}(d,m)});function Qn(d,m){if(d==null)return{};var E=Fr(hd(d),function(j){return[j]});return m=Jn(m),dh(d,E,function(j,V){return m(j,V[0])})}var Gn=dd(It),rr=dd(St);function _r(d){return d==null?[]:Hu(d,It(d))}var Po=bl(function(d,m,E){return m=m.toLowerCase(),d+(E?Fo(m):m)});function Fo(d){return ei(mt(d).toLowerCase())}function cr(d){return(d=mt(d))&&d.replace($n,Nc).replace(dl,"")}var Wo=bl(function(d,m,E){return d+(E?"-":"")+m.toLowerCase()}),Qr=bl(function(d,m,E){return d+(E?" ":"")+m.toLowerCase()}),ko=ud("toLowerCase"),$o=bl(function(d,m,E){return d+(E?"_":"")+m.toLowerCase()}),Oo=bl(function(d,m,E){return d+(E?" ":"")+ei(m)}),mo=bl(function(d,m,E){return d+(E?" ":"")+m.toUpperCase()}),ei=ud("toUpperCase");function xo(d,m,E){return d=mt(d),(m=E?h:m)===h?function(j){return xc.test(j)}(d)?function(j){return j.match(Os)||[]}(d):function(j){return j.match(rt)||[]}(d):d.match(m)||[]}var Zn=Sr(function(d,m){try{return to(d,h,m)}catch(E){return uf(E)?E:new Pr(E)}}),ai=El(function(d,m){return Ri(m,function(E){E=tl(E),qa(d,E,Ys(d[E],d))}),d});function Nr(d){return function(){return d}}var jn=Hc(),fr=Hc(!0);function Wn(d){return d}function lo(d){return Vl(typeof d=="function"?d:ga(d,1))}var Fa=Sr(function(d,m){return function(E){return Fi(E,d,m)}}),Zl=Sr(function(d,m){return function(E){return Fi(d,E,m)}});function pe(d,m,E){var j=It(m),V=$c(m,j);E!=null||Jr(m)&&(V.length||!j.length)||(E=m,m=d,d=this,V=$c(m,It(m)));var Q=!(Jr(E)&&"chain"in E&&!E.chain),fe=Al(d);return Ri(V,function(Ee){var Ie=m[Ee];d[Ee]=Ie,fe&&(d.prototype[Ee]=function(){var ft=this.__chain__;if(Q||ft){var vt=d(this.__wrapped__),Gt=vt.__actions__=di(this.__actions__);return Gt.push({func:Ie,args:arguments,thisArg:d}),vt.__chain__=ft,vt}return Ie.apply(d,oi([this.value()],arguments))})}),d}function et(){}var Ye=cd(Fr),tn=cd(Vf),hr=cd(Pc);function ue(d){return Xl(d)?Di(tl(d)):function(m){return function(E){return ml(E,m)}}(d)}var ee=wl(),Ae=wl(!0);function Ue(){return[]}function We(){return!1}var Pe=Ds(function(d,m){return d+m},0),Te=qc("ceil"),De=Ds(function(d,m){return d/m},1),ce=qc("floor"),xe,se=Ds(function(d,m){return d*m},1),Fe=qc("round"),He=Ds(function(d,m){return d-m},0);return oe.after=function(d,m){if(typeof m!="function")throw new ye(g);return d=lt(d),function(){if(--d<1)return m.apply(this,arguments)}},oe.ary=xh,oe.assign=Ve,oe.assignIn=ot,oe.assignInWith=Lt,oe.assignWith=qt,oe.at=Ot,oe.before=nl,oe.bind=Ys,oe.bindAll=ai,oe.bindKey=ls,oe.castArray=function(){if(!arguments.length)return[];var d=arguments[0];return gr(d)?d:[d]},oe.chain=Zo,oe.chunk=function(d,m,E){m=(E?Lo(d,m,E):m===h)?1:Co(lt(m),0);var j=d==null?0:d.length;if(!j||m<1)return[];for(var V=0,Q=0,fe=fn(jc(j/m));V<j;)fe[Q++]=Ca(d,V,V+=m);return fe},oe.compact=function(d){for(var m=-1,E=d==null?0:d.length,j=0,V=[];++m<E;){var Q=d[m];Q&&(V[j++]=Q)}return V},oe.concat=function(){var d=arguments.length;if(!d)return[];for(var m=fn(d-1),E=arguments[0],j=d;j--;)m[j-1]=arguments[j];return oi(gr(E)?di(E):[E],Ko(m,1))},oe.cond=function(d){var m=d==null?0:d.length,E=Jn();return d=m?Fr(d,function(j){if(typeof j[1]!="function")throw new ye(g);return[E(j[0]),j[1]]}):[],Sr(function(j){for(var V=-1;++V<m;){var Q=d[V];if(to(Q[0],this,j))return to(Q[1],this,j)}})},oe.conforms=function(d){return function(m){var E=It(m);return function(j){return Yd(j,m,E)}}(ga(d,1))},oe.constant=Nr,oe.countBy=ql,oe.create=function(d,m){var E=Zu(d);return m==null?E:Gl(E,m)},oe.curry=function d(m,E,j){var V=Za(m,8,h,h,h,h,h,E=j?h:E);return V.placeholder=d.placeholder,V},oe.curryRight=function d(m,E,j){var V=Za(m,O,h,h,h,h,h,E=j?h:E);return V.placeholder=d.placeholder,V},oe.debounce=rl,oe.defaults=Zt,oe.defaultsDeep=xt,oe.defer=Sh,oe.delay=bp,oe.difference=yh,oe.differenceBy=mh,oe.differenceWith=gh,oe.drop=function(d,m,E){var j=d==null?0:d.length;return j?Ca(d,(m=E||m===h?1:lt(m))<0?0:m,j):[]},oe.dropRight=function(d,m,E){var j=d==null?0:d.length;return j?Ca(d,0,(m=j-(m=E||m===h?1:lt(m)))<0?0:m):[]},oe.dropRightWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!0,!0):[]},oe.dropWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!0):[]},oe.fill=function(d,m,E,j){var V=d==null?0:d.length;return V?(E&&typeof E!="number"&&Lo(d,m,E)&&(E=0,j=V),function(Q,fe,Ee,Ie){var ft=Q.length;for((Ee=lt(Ee))<0&&(Ee=-Ee>ft?0:ft+Ee),(Ie=Ie===h||Ie>ft?ft:lt(Ie))<0&&(Ie+=ft),Ie=Ee>Ie?0:Vt(Ie);Ee<Ie;)Q[Ee++]=fe;return Q}(d,m,E,j)):[]},oe.filter=function(d,m){return(gr(d)?ji:Hr)(d,Jn(m,3))},oe.flatMap=function(d,m){return Ko(as(d,m),1)},oe.flatMapDeep=function(d,m){return Ko(as(d,m),D)},oe.flatMapDepth=function(d,m,E){return E=E===h?1:lt(E),Ko(as(d,m),E)},oe.flatten=mp,oe.flattenDeep=function(d){return d!=null&&d.length?Ko(d,D):[]},oe.flattenDepth=function(d,m){return d!=null&&d.length?Ko(d,m=m===h?1:lt(m)):[]},oe.flip=function(d){return Za(d,512)},oe.flow=jn,oe.flowRight=fr,oe.fromPairs=function(d){for(var m=-1,E=d==null?0:d.length,j={};++m<E;){var V=d[m];j[V[0]]=V[1]}return j},oe.functions=function(d){return d==null?[]:$c(d,It(d))},oe.functionsIn=function(d){return d==null?[]:$c(d,St(d))},oe.groupBy=Ia,oe.initial=function(d){return d!=null&&d.length?Ca(d,0,-1):[]},oe.intersection=_h,oe.intersectionBy=bh,oe.intersectionWith=wh,oe.invert=Xt,oe.invertBy=Mn,oe.invokeMap=Ln,oe.iteratee=lo,oe.keyBy=_d,oe.keys=It,oe.keysIn=St,oe.map=as,oe.mapKeys=function(d,m){var E={};return m=Jn(m,3),Nn(d,function(j,V,Q){qa(E,m(j,V,Q),j)}),E},oe.mapValues=function(d,m){var E={};return m=Jn(m,3),Nn(d,function(j,V,Q){qa(E,V,m(j,V,Q))}),E},oe.matches=function(d){return Qd(ga(d,1))},oe.matchesProperty=function(d,m){return ep(d,ga(m,1))},oe.memoize=Tu,oe.merge=wt,oe.mergeWith=Cn,oe.method=Fa,oe.methodOf=Zl,oe.mixin=pe,oe.negate=Sl,oe.nthArg=function(d){return d=lt(d),Sr(function(m){return ch(m,d)})},oe.omit=tr,oe.omitBy=function(d,m){return Qn(d,Sl(Jn(m)))},oe.once=function(d){return nl(2,d)},oe.orderBy=function(d,m,E,j){return d==null?[]:(gr(m)||(m=m==null?[]:[m]),gr(E=j?h:E)||(E=E==null?[]:[E]),fh(d,m,E))},oe.over=Ye,oe.overArgs=Gi,oe.overEvery=tn,oe.overSome=hr,oe.partial=Un,oe.partialRight=To,oe.partition=bd,oe.pick=un,oe.pickBy=Qn,oe.property=ue,oe.propertyOf=function(d){return function(m){return d==null?h:ml(d,m)}},oe.pull=rs,oe.pullAll=tf,oe.pullAllBy=function(d,m,E){return d&&d.length&&m&&m.length?tp(d,m,Jn(E,2)):d},oe.pullAllWith=function(d,m,E){return d&&d.length&&m&&m.length?tp(d,m,h,E):d},oe.pullAt=la,oe.range=ee,oe.rangeRight=Ae,oe.rearg=Pi,oe.reject=function(d,m){return(gr(d)?ji:Hr)(d,Sl(Jn(m,3)))},oe.remove=function(d,m){var E=[];if(!d||!d.length)return E;var j=-1,V=[],Q=d.length;for(m=Jn(m,3);++j<Q;){var fe=d[j];m(fe,j,d)&&(E.push(fe),V.push(j))}return Cs(d,V),E},oe.rest=function(d,m){if(typeof d!="function")throw new ye(g);return Sr(d,m=m===h?m:lt(m))},oe.reverse=Da,oe.sampleSize=function(d,m,E){return m=(E?Lo(d,m,E):m===h)?1:lt(m),(gr(d)?Hd:rp)(d,m)},oe.set=function(d,m,E){return d==null?d:mu(d,m,E)},oe.setWith=function(d,m,E,j){return j=typeof j=="function"?j:h,d==null?d:mu(d,m,E,j)},oe.shuffle=function(d){return(gr(d)?lh:qv)(d)},oe.slice=function(d,m,E){var j=d==null?0:d.length;return j?(E&&typeof E!="number"&&Lo(d,m,E)?(m=0,E=j):(m=m==null?0:lt(m),E=E===h?j:lt(E)),Ca(d,m,E)):[]},oe.sortBy=Oh,oe.sortedUniq=function(d){return d&&d.length?ph(d):[]},oe.sortedUniqBy=function(d,m){return d&&d.length?ph(d,Jn(m,2)):[]},oe.split=function(d,m,E){return E&&typeof E!="number"&&Lo(d,m,E)&&(m=E=h),(E=E===h?Y:E>>>0)?(d=mt(d))&&(typeof m=="string"||m!=null&&!ie(m))&&!(m=aa(m))&&Wa(d)?bu(Yi(d),0,E):d.split(m,E):[]},oe.spread=function(d,m){if(typeof d!="function")throw new ye(g);return m=m==null?0:Co(lt(m),0),Sr(function(E){var j=E[m],V=bu(E,0,m);return j&&oi(V,j),to(d,this,V)})},oe.tail=function(d){var m=d==null?0:d.length;return m?Ca(d,1,m):[]},oe.take=function(d,m,E){return d&&d.length?Ca(d,0,(m=E||m===h?1:lt(m))<0?0:m):[]},oe.takeRight=function(d,m,E){var j=d==null?0:d.length;return j?Ca(d,(m=j-(m=E||m===h?1:lt(m)))<0?0:m,j):[]},oe.takeRightWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3),!1,!0):[]},oe.takeWhile=function(d,m){return d&&d.length?Vc(d,Jn(m,3)):[]},oe.tap=function(d,m){return m(d),d},oe.throttle=function(d,m,E){var j=!0,V=!0;if(typeof d!="function")throw new ye(g);return Jr(E)&&(j="leading"in E?!!E.leading:j,V="trailing"in E?!!E.trailing:V),rl(d,m,{leading:j,maxWait:m,trailing:V})},oe.thru=af,oe.toArray=Dt,oe.toPairs=Gn,oe.toPairsIn=rr,oe.toPath=function(d){return gr(d)?Fr(d,tl):ct(d)?[d]:di(hp(mt(d)))},oe.toPlainObject=kt,oe.transform=function(d,m,E){var j=gr(d),V=j||La(d)||qe(d);if(m=Jn(m,4),E==null){var Q=d&&d.constructor;E=V?j?new Q:[]:Jr(d)&&Al(Q)?Zu(za(d)):{}}return(V?Ri:Nn)(d,function(fe,Ee,Ie){return m(E,fe,Ee,Ie)}),E},oe.unary=function(d){return xh(d,1)},oe.union=gd,oe.unionBy=Bi,oe.unionWith=nf,oe.uniq=function(d){return d&&d.length?gu(d):[]},oe.uniqBy=function(d,m){return d&&d.length?gu(d,Jn(m,2)):[]},oe.uniqWith=function(d,m){return m=typeof m=="function"?m:h,d&&d.length?gu(d,h,m):[]},oe.unset=function(d,m){return d==null||rd(d,m)},oe.unzip=os,oe.unzipWith=Ws,oe.update=function(d,m,E){return d==null?d:Ju(d,m,ad(E))},oe.updateWith=function(d,m,E,j){return j=typeof j=="function"?j:h,d==null?d:Ju(d,m,ad(E),j)},oe.values=_r,oe.valuesIn=function(d){return d==null?[]:Hu(d,St(d))},oe.without=rf,oe.words=xo,oe.wrap=function(d,m){return Un(ad(m),d)},oe.xor=of,oe.xorBy=zs,oe.xorWith=Hs,oe.zip=is,oe.zipObject=function(d,m){return od(d||[],m||[],Do)},oe.zipObjectDeep=function(d,m){return od(d||[],m||[],mu)},oe.zipWith=Yl,oe.entries=Gn,oe.entriesIn=rr,oe.extend=ot,oe.extendWith=Lt,pe(oe,oe),oe.add=Pe,oe.attempt=Zn,oe.camelCase=Po,oe.capitalize=Fo,oe.ceil=Te,oe.clamp=function(d,m,E){return E===h&&(E=m,m=h),E!==h&&(E=(E=Ut(E))==E?E:0),m!==h&&(m=(m=Ut(m))==m?m:0),vu(Ut(d),m,E)},oe.clone=function(d){return ga(d,4)},oe.cloneDeep=function(d){return ga(d,5)},oe.cloneDeepWith=function(d,m){return ga(d,5,m=typeof m=="function"?m:h)},oe.cloneWith=function(d,m){return ga(d,4,m=typeof m=="function"?m:h)},oe.conformsTo=function(d,m){return m==null||Yd(d,m,It(m))},oe.deburr=cr,oe.defaultTo=function(d,m){return d==null||d!=d?m:d},oe.divide=De,oe.endsWith=function(d,m,E){d=mt(d),m=aa(m);var j=d.length,V=E=E===h?j:vu(lt(E),0,j);return(E-=m.length)>=0&&d.slice(E,V)==m},oe.eq=ua,oe.escape=function(d){return(d=mt(d))&&xn.test(d)?d.replace(pn,Vo):d},oe.escapeRegExp=function(d){return(d=mt(d))&&eo.test(d)?d.replace(Gr,"\\$&"):d},oe.every=function(d,m,E){var j=gr(d)?Vf:Kd;return E&&Lo(d,m,E)&&(m=h),j(d,Jn(m,3))},oe.find=_p,oe.findIndex=vp,oe.findKey=function(d,m){return Ga(d,Jn(m,3),Nn)},oe.findLast=Ui,oe.findLastIndex=yp,oe.findLastKey=function(d,m){return Ga(d,Jn(m,3),ao)},oe.floor=ce,oe.forEach=Jo,oe.forEachRight=Eh,oe.forIn=function(d,m){return d==null?d:xr(d,Jn(m,3),St)},oe.forInRight=function(d,m){return d==null?d:io(d,Jn(m,3),St)},oe.forOwn=function(d,m){return d&&Nn(d,Jn(m,3))},oe.forOwnRight=function(d,m){return d&&ao(d,Jn(m,3))},oe.get=Wt,oe.gt=Kv,oe.gte=Ah,oe.has=function(d,m){return d!=null&&Us(d,m,Zd)},oe.hasIn=_t,oe.head=gp,oe.identity=Wn,oe.includes=function(d,m,E,j){d=sa(d)?d:_r(d),E=E&&!j?lt(E):0;var V=d.length;return E<0&&(E=Co(V+E,0)),Je(d)?E<=V&&d.indexOf(m,E)>-1:!!V&&su(d,m,E)>-1},oe.indexOf=function(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=E==null?0:lt(E);return V<0&&(V=Co(j+V,0)),su(d,m,V)},oe.inRange=function(d,m,E){return m=Rt(m),E===h?(E=m,m=0):E=Rt(E),function(j,V,Q){return j>=Li(V,Q)&&j<Co(V,Q)}(d=Ut(d),m,E)},oe.invoke=Vn,oe.isArguments=Mu,oe.isArray=gr,oe.isArrayBuffer=Th,oe.isArrayLike=sa,oe.isArrayLikeObject=Qo,oe.isBoolean=function(d){return d===!0||d===!1||Mo(d)&&wo(d)==W},oe.isBuffer=La,oe.isDate=Zv,oe.isElement=function(d){return Mo(d)&&d.nodeType===1&&!L(d)},oe.isEmpty=function(d){if(d==null)return!0;if(sa(d)&&(gr(d)||typeof d=="string"||typeof d.splice=="function"||La(d)||qe(d)||Mu(d)))return!d.length;var m=Ao(d);if(m==Z||m==ve)return!d.size;if(xu(d))return!ja(d).length;for(var E in d)if(ln.call(d,E))return!1;return!0},oe.isEqual=function(d,m){return js(d,m)},oe.isEqualWith=function(d,m,E){var j=(E=typeof E=="function"?E:h)?E(d,m):h;return j===h?js(d,m,h,E):!!j},oe.isError=uf,oe.isFinite=function(d){return typeof d=="number"&&qu(d)},oe.isFunction=Al,oe.isInteger=wp,oe.isLength=Kl,oe.isMap=_i,oe.isMatch=function(d,m){return d===m||Ra(d,m,Zc(m))},oe.isMatchWith=function(d,m,E){return E=typeof E=="function"?E:h,Ra(d,m,Zc(m),E)},oe.isNaN=function(d){return sf(d)&&d!=+d},oe.isNative=function(d){if(el(d))throw new Pr("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return yu(d)},oe.isNil=function(d){return d==null},oe.isNull=function(d){return d===null},oe.isNumber=sf,oe.isObject=Jr,oe.isObjectLike=Mo,oe.isPlainObject=L,oe.isRegExp=ie,oe.isSafeInteger=function(d){return wp(d)&&d>=-9007199254740991&&d<=N},oe.isSet=be,oe.isString=Je,oe.isSymbol=ct,oe.isTypedArray=qe,oe.isUndefined=function(d){return d===h},oe.isWeakMap=function(d){return Mo(d)&&Ao(d)==tt},oe.isWeakSet=function(d){return Mo(d)&&wo(d)=="[object WeakSet]"},oe.join=function(d,m){return d==null?"":Cc.call(d,m)},oe.kebabCase=Wo,oe.last=$i,oe.lastIndexOf=function(d,m,E){var j=d==null?0:d.length;if(!j)return-1;var V=j;return E!==h&&(V=(V=lt(E))<0?Co(j+V,0):Li(V,j-1)),m==m?function(Q,fe,Ee){for(var Ie=Ee+1;Ie--;)if(Q[Ie]===fe)return Ie;return Ie}(d,m,V):Ci(d,ha,V,!0)},oe.lowerCase=Qr,oe.lowerFirst=ko,oe.lt=at,oe.lte=Pt,oe.max=function(d){return d&&d.length?Io(d,Wn,So):h},oe.maxBy=function(d,m){return d&&d.length?Io(d,Jn(m,2),So):h},oe.mean=function(d){return Mr(d,Wn)},oe.meanBy=function(d,m){return Mr(d,Jn(m,2))},oe.min=function(d){return d&&d.length?Io(d,Wn,gl):h},oe.minBy=function(d,m){return d&&d.length?Io(d,Jn(m,2),gl):h},oe.stubArray=Ue,oe.stubFalse=We,oe.stubObject=function(){return{}},oe.stubString=function(){return""},oe.stubTrue=function(){return!0},oe.multiply=se,oe.nth=function(d,m){return d&&d.length?ch(d,lt(m)):h},oe.noConflict=function(){return jo._===this&&(jo._=bo),this},oe.noop=et,oe.now=Xs,oe.pad=function(d,m,E){d=mt(d);var j=(m=lt(m))?Ii(d):0;if(!m||j>=m)return d;var V=(m-j)/2;return Xc(Yu(V),E)+d+Xc(jc(V),E)},oe.padEnd=function(d,m,E){d=mt(d);var j=(m=lt(m))?Ii(d):0;return m&&j<m?d+Xc(m-j,E):d},oe.padStart=function(d,m,E){d=mt(d);var j=(m=lt(m))?Ii(d):0;return m&&j<m?Xc(m-j,E)+d:d},oe.parseInt=function(d,m,E){return E||m==null?m=0:m&&(m=+m),Yf(mt(d).replace(Fn,""),m||0)},oe.random=function(d,m,E){if(E&&typeof E!="boolean"&&Lo(d,m,E)&&(m=E=h),E===h&&(typeof m=="boolean"?(E=m,m=h):typeof d=="boolean"&&(E=d,d=h)),d===h&&m===h?(d=0,m=1):(d=Rt(d),m===h?(m=d,d=0):m=Rt(m)),d>m){var j=d;d=m,m=j}if(E||d%1||m%1){var V=Ps();return Li(d+V*(m-d+lu("1e-"+((V+"").length-1))),m)}return np(d,m)},oe.reduce=function(d,m,E){var j=gr(d)?As:fi,V=arguments.length<3;return j(d,Jn(m,4),E,V,yo)},oe.reduceRight=function(d,m,E){var j=gr(d)?Wf:fi,V=arguments.length<3;return j(d,Jn(m,4),E,V,uh)},oe.repeat=function(d,m,E){return m=(E?Lo(d,m,E):m===h)?1:lt(m),Uc(mt(d),m)},oe.replace=function(){var d=arguments,m=mt(d[0]);return d.length<3?m:m.replace(d[1],d[2])},oe.result=function(d,m,E){var j=-1,V=(m=_u(m,d)).length;for(V||(V=1,d=h);++j<V;){var Q=d==null?h:d[tl(m[j])];Q===h&&(j=V,Q=E),d=Al(Q)?Q.call(d):Q}return d},oe.round=Fe,oe.runInContext=it,oe.sample=function(d){return(gr(d)?Zf:Xv)(d)},oe.size=function(d){if(d==null)return 0;if(sa(d))return Je(d)?Ii(d):d.length;var m=Ao(d);return m==Z||m==ve?d.size:ja(d).length},oe.snakeCase=$o,oe.some=function(d,m,E){var j=gr(d)?Pc:op;return E&&Lo(d,m,E)&&(m=h),j(d,Jn(m,3))},oe.sortedIndex=function(d,m){return td(d,m)},oe.sortedIndexBy=function(d,m,E){return nd(d,m,Jn(E,2))},oe.sortedIndexOf=function(d,m){var E=d==null?0:d.length;if(E){var j=td(d,m);if(j<E&&ua(d[j],m))return j}return-1},oe.sortedLastIndex=function(d,m){return td(d,m,!0)},oe.sortedLastIndexBy=function(d,m,E){return nd(d,m,Jn(E,2),!0)},oe.sortedLastIndexOf=function(d,m){if(d!=null&&d.length){var E=td(d,m,!0)-1;if(ua(d[E],m))return E}return-1},oe.startCase=Oo,oe.startsWith=function(d,m,E){return d=mt(d),E=E==null?0:vu(lt(E),0,d.length),m=aa(m),d.slice(E,E+m.length)==m},oe.subtract=He,oe.sum=function(d){return d&&d.length?cu(d,Wn):0},oe.sumBy=function(d,m){return d&&d.length?cu(d,Jn(m,2)):0},oe.template=function(d,m,E){var j=oe.templateSettings;E&&Lo(d,m,E)&&(m=h),d=mt(d),m=Lt({},m,j,sp);var V,Q,fe=Lt({},m.imports,j.imports,sp),Ee=It(fe),Ie=Hu(fe,Ee),ft=0,vt=m.interpolate||Hn,Gt="__p += '",An=B((m.escape||Hn).source+"|"+vt.source+"|"+(vt===qn?kn:Hn).source+"|"+(m.evaluate||Hn).source+"|$","g"),On="//# sourceURL="+(ln.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ff+"]")+`
`;d.replace(An,function(Jt,dr,gn,ar,or,Dr){return gn||(gn=ar),Gt+=d.slice(ft,Dr).replace(ir,Il),dr&&(V=!0,Gt+=`' +
__e(`+dr+`) +
'`),or&&(Q=!0,Gt+=`';
`+or+`;
__p += '`),gn&&(Gt+=`' +
((__t = (`+gn+`)) == null ? '' : __t) +
'`),ft=Dr+Jt.length,Jt}),Gt+=`';
`;var Xn=ln.call(m,"variable")&&m.variable;if(Xn){if(en.test(Xn))throw new Pr("Invalid `variable` option passed into `_.template`")}else Gt=`with (obj) {
`+Gt+`
}
`;Gt=(Q?Gt.replace(Et,""):Gt).replace(rn,"$1").replace(yn,"$1;"),Gt="function("+(Xn||"obj")+`) {
`+(Xn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(V?", __e = _.escape":"")+(Q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Gt+`return __p
}`;var Mt=Zn(function(){return so(Ee,On+"return "+Gt).apply(h,Ie)});if(Mt.source=Gt,uf(Mt))throw Mt;return Mt},oe.times=function(d,m){if((d=lt(d))<1||d>N)return[];var E=Y,j=Li(d,Y);m=Jn(m),d-=Y;for(var V=Dl(j,m);++E<d;)m(E);return V},oe.toFinite=Rt,oe.toInteger=lt,oe.toLength=Vt,oe.toLower=function(d){return mt(d).toLowerCase()},oe.toNumber=Ut,oe.toSafeInteger=function(d){return d?vu(lt(d),-9007199254740991,N):d===0?d:0},oe.toString=mt,oe.toUpper=function(d){return mt(d).toUpperCase()},oe.trim=function(d,m,E){if((d=mt(d))&&(E||m===h))return ka(d);if(!d||!(m=aa(m)))return d;var j=Yi(d),V=Yi(m);return bu(j,va(j,V),kc(j,V)+1).join("")},oe.trimEnd=function(d,m,E){if((d=mt(d))&&(E||m===h))return d.slice(0,ii(d)+1);if(!d||!(m=aa(m)))return d;var j=Yi(d);return bu(j,0,kc(j,Yi(m))+1).join("")},oe.trimStart=function(d,m,E){if((d=mt(d))&&(E||m===h))return d.replace(Fn,"");if(!d||!(m=aa(m)))return d;var j=Yi(d);return bu(j,va(j,Yi(m))).join("")},oe.truncate=function(d,m){var E=30,j="...";if(Jr(m)){var V="separator"in m?m.separator:V;E="length"in m?lt(m.length):E,j="omission"in m?aa(m.omission):j}var Q=(d=mt(d)).length;if(Wa(d)){var fe=Yi(d);Q=fe.length}if(E>=Q)return d;var Ee=E-Ii(j);if(Ee<1)return j;var Ie=fe?bu(fe,0,Ee).join(""):d.slice(0,Ee);if(V===h)return Ie+j;if(fe&&(Ee+=Ie.length-Ee),ie(V)){if(d.slice(Ee).search(V)){var ft,vt=Ie;for(V.global||(V=B(V.source,mt(Er.exec(V))+"g")),V.lastIndex=0;ft=V.exec(vt);)var Gt=ft.index;Ie=Ie.slice(0,Gt===h?Ee:Gt)}}else if(d.indexOf(aa(V),Ee)!=Ee){var An=Ie.lastIndexOf(V);An>-1&&(Ie=Ie.slice(0,An))}return Ie+j},oe.unescape=function(d){return(d=mt(d))&&ut.test(d)?d.replace(Tn,oa):d},oe.uniqueId=function(d){var m=++Wr;return mt(d)+m},oe.upperCase=mo,oe.upperFirst=ei,oe.each=Jo,oe.eachRight=Eh,oe.first=gp,pe(oe,(xe={},Nn(oe,function(d,m){ln.call(oe.prototype,m)||(xe[m]=d)}),xe),{chain:!1}),oe.VERSION="4.17.21",Ri(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){oe[d].placeholder=oe}),Ri(["drop","take"],function(d,m){kr.prototype[d]=function(E){E=E===h?1:Co(lt(E),0);var j=this.__filtered__&&!m?new kr(this):this.clone();return j.__filtered__?j.__takeCount__=Li(E,j.__takeCount__):j.__views__.push({size:Li(E,Y),type:d+(j.__dir__<0?"Right":"")}),j},kr.prototype[d+"Right"]=function(E){return this.reverse()[d](E).reverse()}}),Ri(["filter","map","takeWhile"],function(d,m){var E=m+1,j=E==1||E==3;kr.prototype[d]=function(V){var Q=this.clone();return Q.__iteratees__.push({iteratee:Jn(V,3),type:E}),Q.__filtered__=Q.__filtered__||j,Q}}),Ri(["head","last"],function(d,m){var E="take"+(m?"Right":"");kr.prototype[d]=function(){return this[E](1).value()[0]}}),Ri(["initial","tail"],function(d,m){var E="drop"+(m?"":"Right");kr.prototype[d]=function(){return this.__filtered__?new kr(this):this[E](1)}}),kr.prototype.compact=function(){return this.filter(Wn)},kr.prototype.find=function(d){return this.filter(d).head()},kr.prototype.findLast=function(d){return this.reverse().find(d)},kr.prototype.invokeMap=Sr(function(d,m){return typeof d=="function"?new kr(this):this.map(function(E){return Fi(E,d,m)})}),kr.prototype.reject=function(d){return this.filter(Sl(Jn(d)))},kr.prototype.slice=function(d,m){d=lt(d);var E=this;return E.__filtered__&&(d>0||m<0)?new kr(E):(d<0?E=E.takeRight(-d):d&&(E=E.drop(d)),m!==h&&(E=(m=lt(m))<0?E.dropRight(-m):E.take(m-d)),E)},kr.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},kr.prototype.toArray=function(){return this.take(Y)},Nn(kr.prototype,function(d,m){var E=/^(?:filter|find|map|reject)|While$/.test(m),j=/^(?:head|last)$/.test(m),V=oe[j?"take"+(m=="last"?"Right":""):m],Q=j||/^find/.test(m);V&&(oe.prototype[m]=function(){var fe=this.__wrapped__,Ee=j?[1]:arguments,Ie=fe instanceof kr,ft=Ee[0],vt=Ie||gr(fe),Gt=function(dr){var gn=V.apply(oe,oi([dr],Ee));return j&&An?gn[0]:gn};vt&&E&&typeof ft=="function"&&ft.length!=1&&(Ie=vt=!1);var An=this.__chain__,On=!!this.__actions__.length,Xn=Q&&!An,Mt=Ie&&!On;if(!Q&&vt){fe=Mt?fe:new kr(this);var Jt=d.apply(fe,Ee);return Jt.__actions__.push({func:af,args:[Gt],thisArg:h}),new Na(Jt,An)}return Xn&&Mt?d.apply(this,Ee):(Jt=this.thru(Gt),Xn?j?Jt.value()[0]:Jt.value():Jt)})}),Ri(["pop","push","shift","sort","splice","unshift"],function(d){var m=Ge[d],E=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",j=/^(?:pop|shift)$/.test(d);oe.prototype[d]=function(){var V=arguments;if(j&&!this.__chain__){var Q=this.value();return m.apply(gr(Q)?Q:[],V)}return this[E](function(fe){return m.apply(gr(fe)?fe:[],V)})}}),Nn(kr.prototype,function(d,m){var E=oe[m];if(E){var j=E.name+"";ln.call(hu,j)||(hu[j]=[]),hu[j].push({name:m,func:E})}}),hu[Eu(h,2).name]=[{name:"wrapper",func:h}],kr.prototype.clone=function(){var d=new kr(this.__wrapped__);return d.__actions__=di(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=di(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=di(this.__views__),d},kr.prototype.reverse=function(){if(this.__filtered__){var d=new kr(this);d.__dir__=-1,d.__filtered__=!0}else(d=this.clone()).__dir__*=-1;return d},kr.prototype.value=function(){var d=this.__wrapped__.value(),m=this.__dir__,E=gr(d),j=m<0,V=E?d.length:0,Q=function(Dr,Bn,er){for(var zo=-1,nt=er.length;++zo<nt;){var Jl=er[zo],bi=Jl.size;switch(Jl.type){case"drop":Dr+=bi;break;case"dropRight":Bn-=bi;break;case"take":Bn=Li(Bn,Dr+bi);break;case"takeRight":Dr=Co(Dr,Bn-bi)}}return{start:Dr,end:Bn}}(0,V,this.__views__),fe=Q.start,Ee=Q.end,Ie=Ee-fe,ft=j?Ee:fe-1,vt=this.__iteratees__,Gt=vt.length,An=0,On=Li(Ie,this.__takeCount__);if(!E||!j&&V==Ie&&On==Ie)return hh(d,this.__actions__);var Xn=[];e:for(;Ie--&&An<On;){for(var Mt=-1,Jt=d[ft+=m];++Mt<Gt;){var dr=vt[Mt],gn=dr.iteratee,ar=dr.type,or=gn(Jt);if(ar==2)Jt=or;else if(!or){if(ar==1)continue e;break e}}Xn[An++]=Jt}return Xn},oe.prototype.at=lf,oe.prototype.chain=function(){return Zo(this)},oe.prototype.commit=function(){return new Na(this.value(),this.__chain__)},oe.prototype.next=function(){this.__values__===h&&(this.__values__=Dt(this.value()));var d=this.__index__>=this.__values__.length;return{done:d,value:d?h:this.__values__[this.__index__++]}},oe.prototype.plant=function(d){for(var m,E=this;E instanceof $l;){var j=md(E);j.__index__=0,j.__values__=h,m?V.__wrapped__=j:m=j;var V=j;E=E.__wrapped__}return V.__wrapped__=d,m},oe.prototype.reverse=function(){var d=this.__wrapped__;if(d instanceof kr){var m=d;return this.__actions__.length&&(m=new kr(this)),(m=m.reverse()).__actions__.push({func:af,args:[Da],thisArg:h}),new Na(m,this.__chain__)}return this.thru(Da)},oe.prototype.toJSON=oe.prototype.valueOf=oe.prototype.value=function(){return hh(this.__wrapped__,this.__actions__)},oe.prototype.first=oe.prototype.head,Ha&&(oe.prototype[Ha]=function(){return this}),oe}();jo._=Ti,(v=(function(){return Ti}).call(o,r,o,c))===h||(c.exports=v)}).call(this)}).call(this,r(68),r(221)(n))},function(n,o,r){var s=r(7),c=r(34),v=r(33),h=r(87),g=r(62),_=r(174),w=r(28),O=s.TypeError,S=w("toPrimitive");n.exports=function(P,A){if(!v(P)||h(P))return P;var R,D=g(P,S);if(D){if(A===void 0&&(A="default"),R=c(D,P,A),!v(R)||h(R))return R;throw O("Can't convert object to primitive value")}return A===void 0&&(A="number"),_(P,A)}},function(n,o,r){var s=r(108);n.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},function(n,o,r){var s=r(36),c=r(18),v=r(91);n.exports=!s&&!c(function(){return Object.defineProperty(v("div"),"a",{get:function(){return 7}}).a!=7})},function(n,o,r){var s=r(35),c=r(135),v=r(50),h=r(38);n.exports=function(g,_){for(var w=c(_),O=h.f,S=v.f,P=0;P<w.length;P++){var A=w[P];s(g,A)||O(g,A,S(_,A))}}},function(n,o,r){var s=r(46),c=r(15),v=r(74),h=r(112),g=r(32),_=c([].concat);n.exports=s("Reflect","ownKeys")||function(w){var O=v.f(g(w)),S=h.f;return S?_(O,S(w)):O}},function(n,o,r){var s=r(15),c=r(35),v=r(41),h=r(137).indexOf,g=r(72),_=s([].push);n.exports=function(w,O){var S,P=v(w),A=0,R=[];for(S in P)!c(g,S)&&c(P,S)&&_(R,S);for(;O.length>A;)c(P,S=O[A++])&&(~h(R,S)||_(R,S));return R}},function(n,o,r){var s=r(41),c=r(75),v=r(45),h=function(g){return function(_,w,O){var S,P=s(_),A=v(P),R=c(O,A);if(g&&w!=w){for(;A>R;)if((S=P[R++])!=S)return!0}else for(;A>R;R++)if((g||R in P)&&P[R]===w)return g||R||0;return!g&&-1}};n.exports={includes:h(!0),indexOf:h(!1)}},function(n,o,r){var s=r(46);n.exports=s("document","documentElement")},function(n,o,r){var s=r(51),c=r(41),v=r(74).f,h=r(114),g=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];n.exports.f=function(_){return g&&s(_)=="Window"?function(w){try{return v(w)}catch{return h(g)}}(_):v(c(_))}},function(n,o,r){var s=r(28);o.f=s},function(n,o,r){var s=r(177),c=r(35),v=r(140),h=r(38).f;n.exports=function(g){var _=s.Symbol||(s.Symbol={});c(_,g)||h(_,g,{value:v.f(g)})}},function(n,o,r){var s,c,v,h=r(18),g=r(30),_=r(60),w=r(101),O=r(42),S=r(28),P=r(71),A=S("iterator"),R=!1;[].keys&&("next"in(v=[].keys())?(c=w(w(v)))!==Object.prototype&&(s=c):R=!0),s==null||h(function(){var D={};return s[A].call(D)!==D})?s={}:P&&(s=_(s)),g(s[A])||O(s,A,function(){return this}),n.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:R}},function(n,o,r){var s=r(18);n.exports=!s(function(){function c(){}return c.prototype.constructor=null,Object.getPrototypeOf(new c)!==c.prototype})},function(n,o,r){var s=r(16),c=r(15),v=r(72),h=r(33),g=r(35),_=r(38).f,w=r(74),O=r(139),S=r(183),P=r(90),A=r(185),R=!1,D=P("meta"),N=0,$=function(K){_(K,D,{value:{objectID:"O"+N++,weakData:{}}})},Y=n.exports={enable:function(){Y.enable=function(){},R=!0;var K=w.f,X=c([].splice),te={};te[D]=1,K(te).length&&(w.f=function(W){for(var C=K(W),G=0,q=C.length;G<q;G++)if(C[G]===D){X(C,G,1);break}return C},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:O.f}))},fastKey:function(K,X){if(!h(K))return typeof K=="symbol"?K:(typeof K=="string"?"S":"P")+K;if(!g(K,D)){if(!S(K))return"F";if(!X)return"E";$(K)}return K[D].objectID},getWeakData:function(K,X){if(!g(K,D)){if(!S(K))return!0;if(!X)return!1;$(K)}return K[D].weakData},onFreeze:function(K){return A&&R&&S(K)&&!g(K,D)&&$(K),K}};v[D]=!0},function(n,o,r){var s=r(28),c=r(80),v=s("iterator"),h=Array.prototype;n.exports=function(g){return g!==void 0&&(c.Array===g||h[v]===g)}},function(n,o,r){var s=r(7),c=r(34),v=r(56),h=r(32),g=r(88),_=r(118),w=s.TypeError;n.exports=function(O,S){var P=arguments.length<2?_(O):S;if(v(P))return h(c(P,O));throw w(g(O)+" is not iterable")}},function(n,o,r){var s=r(34),c=r(32),v=r(62);n.exports=function(h,g,_){var w,O;c(h);try{if(!(w=v(h,"return"))){if(g==="throw")throw _;return _}w=s(w,h)}catch(S){O=!0,w=S}if(g==="throw")throw _;if(O)throw w;return c(w),_}},function(n,o,r){var s=r(30),c=r(33),v=r(102);n.exports=function(h,g,_){var w,O;return v&&s(w=g.constructor)&&w!==_&&c(O=w.prototype)&&O!==_.prototype&&v(h,O),h}},function(n,o,r){var s=r(42);n.exports=function(c,v,h){for(var g in v)s(c,g,v[g],h);return c}},function(n,o,r){var s=r(46),c=r(38),v=r(28),h=r(36),g=v("species");n.exports=function(_){var w=s(_),O=c.f;h&&w&&!w[g]&&O(w,g,{configurable:!0,get:function(){return this}})}},function(n,o,r){var s=r(15),c=r(59),v=r(39),h=r(44),g=s("".charAt),_=s("".charCodeAt),w=s("".slice),O=function(S){return function(P,A){var R,D,N=v(h(P)),$=c(A),Y=N.length;return $<0||$>=Y?S?"":void 0:(R=_(N,$))<55296||R>56319||$+1===Y||(D=_(N,$+1))<56320||D>57343?S?g(N,$):R:S?w(N,$,$+2):D-56320+(R-55296<<10)+65536}};n.exports={codeAt:O(!1),charAt:O(!0)}},function(n,o){n.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(n,o,r){var s=r(91)("span").classList,c=s&&s.constructor&&s.constructor.prototype;n.exports=c===Object.prototype?void 0:c},function(n,o,r){var s=r(32);n.exports=function(){var c=s(this),v="";return c.global&&(v+="g"),c.ignoreCase&&(v+="i"),c.multiline&&(v+="m"),c.dotAll&&(v+="s"),c.unicode&&(v+="u"),c.sticky&&(v+="y"),v}},function(n,o,r){var s=r(18),c=r(7).RegExp,v=s(function(){var _=c("a","y");return _.lastIndex=2,_.exec("abcd")!=null}),h=v||s(function(){return!c("a","y").sticky}),g=v||s(function(){var _=c("^r","gy");return _.lastIndex=2,_.exec("str")!=null});n.exports={BROKEN_CARET:g,MISSED_STICKY:h,UNSUPPORTED_Y:v}},function(n,o,r){var s=r(16),c=r(79).find,v=r(100),h="find",g=!0;h in[]&&Array(1).find(function(){g=!1}),s({target:"Array",proto:!0,forced:g},{find:function(_){return c(this,_,arguments.length>1?arguments[1]:void 0)}}),v(h)},function(n,o,r){var s=r(16),c=r(137).includes,v=r(100);s({target:"Array",proto:!0},{includes:function(h){return c(this,h,arguments.length>1?arguments[1]:void 0)}}),v("includes")},function(n,o,r){var s=r(16),c=r(15),v=r(197),h=r(44),g=r(39),_=r(198),w=c("".indexOf);s({target:"String",proto:!0,forced:!_("includes")},{includes:function(O){return!!~w(g(h(this)),g(v(O)),arguments.length>1?arguments[1]:void 0)}})},function(n,o,r){var s=r(33),c=r(51),v=r(28)("match");n.exports=function(h){var g;return s(h)&&((g=h[v])!==void 0?!!g:c(h)=="RegExp")}},function(n,o,r){var s=r(15);n.exports=s(1 .valueOf)},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=r(162),g=s("".replace),_="["+h+"]",w=RegExp("^"+_+_+"*"),O=RegExp(_+_+"*$"),S=function(P){return function(A){var R=v(c(A));return 1&P&&(R=g(R,w,"")),2&P&&(R=g(R,O,"")),R}};n.exports={start:S(1),end:S(2),trim:S(3)}},function(n,o){n.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},function(n,o){var r,s,c=n.exports={};function v(){throw new Error("setTimeout has not been defined")}function h(){throw new Error("clearTimeout has not been defined")}function g(N){if(r===setTimeout)return setTimeout(N,0);if((r===v||!r)&&setTimeout)return r=setTimeout,setTimeout(N,0);try{return r(N,0)}catch{try{return r.call(null,N,0)}catch{return r.call(this,N,0)}}}(function(){try{r=typeof setTimeout=="function"?setTimeout:v}catch{r=v}try{s=typeof clearTimeout=="function"?clearTimeout:h}catch{s=h}})();var _,w=[],O=!1,S=-1;function P(){O&&_&&(O=!1,_.length?w=_.concat(w):S=-1,w.length&&A())}function A(){if(!O){var N=g(P);O=!0;for(var $=w.length;$;){for(_=w,w=[];++S<$;)_&&_[S].run();S=-1,$=w.length}_=null,O=!1,function(Y){if(s===clearTimeout)return clearTimeout(Y);if((s===h||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(Y);try{s(Y)}catch{try{return s.call(null,Y)}catch{return s.call(this,Y)}}}(N)}}function R(N,$){this.fun=N,this.array=$}function D(){}c.nextTick=function(N){var $=new Array(arguments.length-1);if(arguments.length>1)for(var Y=1;Y<arguments.length;Y++)$[Y-1]=arguments[Y];w.push(new R(N,$)),w.length!==1||O||g(A)},R.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=D,c.addListener=D,c.once=D,c.off=D,c.removeListener=D,c.removeAllListeners=D,c.emit=D,c.prependListener=D,c.prependOnceListener=D,c.listeners=function(N){return[]},c.binding=function(N){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(N){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(n,o,r){var s=r(32),c=r(165),v=r(28)("species");n.exports=function(h,g){var _,w=s(h).constructor;return w===void 0||(_=s(w)[v])==null?g:c(_)}},function(n,o,r){var s=r(7),c=r(99),v=r(88),h=s.TypeError;n.exports=function(g){if(c(g))return g;throw h(v(g)+" is not a constructor")}},function(n,o,r){var s=r(16),c=r(161).trim;s({target:"String",proto:!0,forced:r(200)("trim")},{trim:function(){return c(this)}})},function(n,o,r){var s=r(34),c=r(123),v=r(32),h=r(94),g=r(39),_=r(44),w=r(62),O=r(124),S=r(125);c("match",function(P,A,R){return[function(D){var N=_(this),$=D==null?void 0:w(D,P);return $?s($,D,N):new RegExp(D)[P](g(N))},function(D){var N=v(this),$=g(D),Y=R(A,N,$);if(Y.done)return Y.value;if(!N.global)return S(N,$);var K=N.unicode;N.lastIndex=0;for(var X,te=[],W=0;(X=S(N,$))!==null;){var C=g(X[0]);te[W]=C,C===""&&(N.lastIndex=O($,h(N.lastIndex),K)),W++}return W===0?null:te}]})},function(n,o,r){var s,c,v,h,g=r(7),_=r(76),w=r(64),O=r(30),S=r(35),P=r(18),A=r(138),R=r(98),D=r(91),N=r(169),$=r(128),Y=g.setImmediate,K=g.clearImmediate,X=g.process,te=g.Dispatch,W=g.Function,C=g.MessageChannel,G=g.String,q=0,z={},Z="onreadystatechange";try{s=g.location}catch{}var me=function(ve){if(S(z,ve)){var _e=z[ve];delete z[ve],_e()}},ge=function(ve){return function(){me(ve)}},Re=function(ve){me(ve.data)},Be=function(ve){g.postMessage(G(ve),s.protocol+"//"+s.host)};Y&&K||(Y=function(ve){var _e=R(arguments,1);return z[++q]=function(){_(O(ve)?ve:W(ve),void 0,_e)},c(q),q},K=function(ve){delete z[ve]},$?c=function(ve){X.nextTick(ge(ve))}:te&&te.now?c=function(ve){te.now(ge(ve))}:C&&!N?(h=(v=new C).port2,v.port1.onmessage=Re,c=w(h.postMessage,h)):g.addEventListener&&O(g.postMessage)&&!g.importScripts&&s&&s.protocol!=="file:"&&!P(Be)?(c=Be,g.addEventListener("message",Re,!1)):c=Z in D("script")?function(ve){A.appendChild(D("script")).onreadystatechange=function(){A.removeChild(this),me(ve)}}:function(ve){setTimeout(ge(ve),0)}),n.exports={set:Y,clear:K}},function(n,o,r){var s=r(55);n.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},function(n,o,r){var s=r(56),c=function(v){var h,g;this.promise=new v(function(_,w){if(h!==void 0||g!==void 0)throw TypeError("Bad Promise constructor");h=_,g=w}),this.resolve=s(h),this.reject=s(g)};n.exports.f=function(v){return new c(v)}},function(n,o,r){o.a=function(){return!1}},function(n,o,r){(function(s){r.d(o,"a",function(){return X});var c=r(1);function v(C){throw new Error("[mobx-utils] "+C)}function h(C,G){G===void 0&&(G="Illegal state"),C||v(G)}var g=function(C){return C&&C!==Object.prototype&&Object.getOwnPropertyNames(C).concat(g(Object.getPrototypeOf(C))||[])},_=function(C){return function(G){var q=g(G);return q.filter(function(z,Z){return q.indexOf(z)===Z})}(C).filter(function(G){return G!=="constructor"&&!~G.indexOf("__")})},w="pending",O="fulfilled",S="rejected";function P(C){switch(this.state){case w:return C.pending&&C.pending(this.value);case S:return C.rejected&&C.rejected(this.value);case O:return C.fulfilled?C.fulfilled(this.value):this.value}}function A(C,G){if(h(arguments.length<=2,"fromPromise expects up to two arguments"),h(typeof C=="function"||typeof C=="object"&&C&&typeof C.then=="function","Please pass a promise or function to fromPromise"),C.isPromiseBasedObservable===!0)return C;typeof C=="function"&&(C=new Promise(C));var q=C;C.then(Object(c.k)("observableFromPromise-resolve",function(Z){q.value=Z,q.state=O}),Object(c.k)("observableFromPromise-reject",function(Z){q.value=Z,q.state=S})),q.isPromiseBasedObservable=!0,q.case=P;var z=G&&G.state===O?G.value:void 0;return Object(c.q)(q,{value:z,state:w},{},{deep:!1}),q}(function(C){C.reject=Object(c.k)("fromPromise.reject",function(G){var q=C(Promise.reject(G));return q.state=S,q.value=G,q}),C.resolve=Object(c.k)("fromPromise.resolve",function(G){G===void 0&&(G=void 0);var q=C(Promise.resolve(G));return q.state=O,q.value=G,q})})(A||(A={}));var R=function(C,G,q,z){var Z,me=arguments.length,ge=me<3?G:z===null?z=Object.getOwnPropertyDescriptor(G,q):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(C,G,q,z);else for(var Re=C.length-1;Re>=0;Re--)(Z=C[Re])&&(ge=(me<3?Z(ge):me>3?Z(G,q,ge):Z(G,q))||ge);return me>3&&ge&&Object.defineProperty(G,q,ge),ge};(function(){function C(G,q){var z=this;Object(c.G)(function(){z.current=q,z.subscription=G.subscribe(z)})}C.prototype.dispose=function(){this.subscription&&this.subscription.unsubscribe()},C.prototype.next=function(G){this.current=G},C.prototype.complete=function(){this.dispose()},C.prototype.error=function(G){this.current=G,this.dispose()},R([c.C.ref],C.prototype,"current",void 0),R([c.k.bound],C.prototype,"next",null),R([c.k.bound],C.prototype,"complete",null),R([c.k.bound],C.prototype,"error",null)})();var D=function(){return D=Object.assign||function(C){for(var G,q=1,z=arguments.length;q<z;q++)for(var Z in G=arguments[q])Object.prototype.hasOwnProperty.call(G,Z)&&(C[Z]=G[Z]);return C},D.apply(this,arguments)},N=function(C,G,q,z){var Z,me=arguments.length,ge=me<3?G:z===null?z=Object.getOwnPropertyDescriptor(G,q):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ge=Reflect.decorate(C,G,q,z);else for(var Re=C.length-1;Re>=0;Re--)(Z=C[Re])&&(ge=(me<3?Z(ge):me>3?Z(G,q,ge):Z(G,q))||ge);return me>3&&ge&&Object.defineProperty(G,q,ge),ge},$=["model","reset","submit","isDirty","isPropertyDirty","resetProperty"];(function(){function C(G){var q=this;this.model=G,this.localValues=c.C.map({}),this.localComputedValues=c.C.map({}),this.isPropertyDirty=function(z){return q.localValues.has(z)},h(Object(c.A)(G),"createViewModel expects an observable object"),_(G).forEach(function(z){if(z!==c.a&&z!=="__mobxDidRunLazyInitializers"){if(h($.indexOf(z)===-1,"The propertyname "+z+" is reserved and cannot be used with viewModels"),Object(c.w)(G,z)){var Z=Object(c.h)(G,z).derivation;q.localComputedValues.set(z,Object(c.m)(Z.bind(q)))}var me=Object.getOwnPropertyDescriptor(G,z),ge=me?{enumerable:me.enumerable}:{};Object.defineProperty(q,z,D(D({},ge),{configurable:!0,get:function(){return Object(c.w)(G,z)?q.localComputedValues.get(z).get():q.isPropertyDirty(z)?q.localValues.get(z):q.model[z]},set:Object(c.k)(function(Re){Re!==q.model[z]?q.localValues.set(z,Re):q.localValues.delete(z)})}))}})}Object.defineProperty(C.prototype,"isDirty",{get:function(){return this.localValues.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"changedValues",{get:function(){return this.localValues.toJS()},enumerable:!1,configurable:!0}),C.prototype.submit=function(){var G=this;Object(c.B)(this.localValues).forEach(function(q){var z=G.localValues.get(q),Z=G.model[q];Object(c.y)(Z)?Z.replace(z):Object(c.z)(Z)?(Z.clear(),Z.merge(z)):Object(c.v)(z)||(G.model[q]=z)}),this.localValues.clear()},C.prototype.reset=function(){this.localValues.clear()},C.prototype.resetProperty=function(G){this.localValues.delete(G)},N([c.m],C.prototype,"isDirty",null),N([c.m],C.prototype,"changedValues",null),N([c.k.bound],C.prototype,"submit",null),N([c.k.bound],C.prototype,"reset",null),N([c.k.bound],C.prototype,"resetProperty",null)})();function Y(C){if(!C)return"ROOT";for(var G=[];C.parent;)G.push(C.path),C=C.parent;return G.reverse().join("/")}function K(C){return Object(c.A)(C)||Object(c.y)(C)||Object(c.z)(C)}function X(C,G){var q=new WeakMap;function z(ge){var Re=q.get(ge.object);(function(Be,ve){switch(Be.type){case"add":Z(Be.newValue,ve,Be.name);break;case"update":me(Be.oldValue),Z(Be.newValue,ve,Be.name||""+Be.index);break;case"remove":case"delete":me(Be.oldValue);break;case"splice":Be.removed.map(me),Be.added.forEach(function(tt,gt){return Z(tt,ve,""+(Be.index+gt))});for(var _e=Be.index+Be.addedCount;_e<Be.object.length;_e++)if(K(Be.object[_e])){var Ce=q.get(Be.object[_e]);Ce&&(Ce.path=""+_e)}}})(ge,Re),G(ge,Y(Re),C)}function Z(ge,Re,Be){if(K(ge)){var ve=q.get(ge);if(ve){if(ve.parent!==Re||ve.path!==Be)throw new Error("The same observable object cannot appear twice in the same tree, trying to assign it to '"+Y(Re)+"/"+Be+"', but it already exists at '"+Y(ve.parent)+"/"+ve.path+"'")}else{var _e={parent:Re,path:Be,dispose:Object(c.D)(ge,z)};q.set(ge,_e),Object(c.p)(ge).forEach(function(Ce){var tt=Ce[0];return Z(Ce[1],_e,tt)})}}}function me(ge){if(K(ge)){var Re=q.get(ge);if(!Re)return;q.delete(ge),Re.dispose(),Object(c.L)(ge).forEach(me)}}return Z(C,void 0,""),function(){me(C)}}var te,W=(te=function(C,G){return te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,z){q.__proto__=z}||function(q,z){for(var Z in z)z.hasOwnProperty(Z)&&(q[Z]=z[Z])},te(C,G)},function(C,G){function q(){this.constructor=C}te(C,G),C.prototype=G===null?Object.create(G):(q.prototype=G.prototype,new q)});(function(C){function G(q,z,Z){var me=Z===void 0?{}:Z,ge=me.name,Re=ge===void 0?"ogm"+(1e3*Math.random()|0):ge,Be=me.keyToName,ve=Be===void 0?function(tt){return""+tt}:Be,_e=C.call(this)||this;_e._keyToName=ve,_e._groupBy=z,_e._ogmInfoKey=Symbol("ogmInfo"+Re),_e._base=q;for(var Ce=0;Ce<q.length;Ce++)_e._addItem(q[Ce]);return _e._disposeBaseObserver=Object(c.D)(_e._base,function(tt){if(tt.type==="splice")Object(c.J)(function(){for(var gt=0,st=tt.removed;gt<st.length;gt++){var At=st[gt];_e._removeItem(At)}for(var jt=0,yt=tt.added;jt<yt.length;jt++){var Kt=yt[jt];_e._addItem(Kt)}});else{if(tt.type!=="update")throw new Error("illegal state");Object(c.J)(function(){_e._removeItem(tt.oldValue),_e._addItem(tt.newValue)})}}),_e}W(G,C),G.prototype.clear=function(){throw new Error("not supported")},G.prototype.delete=function(q){throw new Error("not supported")},G.prototype.set=function(q,z){throw new Error("not supported")},G.prototype.dispose=function(){this._disposeBaseObserver();for(var q=0;q<this._base.length;q++){var z=this._base[q];z[this._ogmInfoKey].reaction(),delete z[this._ogmInfoKey]}},G.prototype._getGroupArr=function(q){var z=C.prototype.get.call(this,q);return z===void 0&&(z=Object(c.C)([],{name:"GroupArray["+this._keyToName(q)+"]",deep:!1}),C.prototype.set.call(this,q,z)),z},G.prototype._removeFromGroupArr=function(q,z){var Z=C.prototype.get.call(this,q);Z.length===1?C.prototype.delete.call(this,q):(z===Z.length-1||(Z[z]=Z[Z.length-1],Z[z][this._ogmInfoKey].groupArrIndex=z),Z.length--)},G.prototype._addItem=function(q){var z=this,Z=this._groupBy(q),me=this._getGroupArr(Z),ge={groupByValue:Z,groupArrIndex:me.length,reaction:Object(c.F)(function(){return z._groupBy(q)},function(Re,Be){var ve=q[z._ogmInfoKey];z._removeFromGroupArr(ve.groupByValue,ve.groupArrIndex);var _e=z._getGroupArr(Re),Ce=_e.length;_e.push(q),ve.groupByValue=Re,ve.groupArrIndex=Ce})};Object.defineProperty(q,this._ogmInfoKey,{configurable:!0,enumerable:!1,value:ge}),me.push(q)},G.prototype._removeItem=function(q){var z=q[this._ogmInfoKey];this._removeFromGroupArr(z.groupByValue,z.groupArrIndex),z.reaction(),delete q[this._ogmInfoKey]}})(c.b),function(){function C(G,q){this.base=G,this.args=q,this.closestIdx=0,this.isDisposed=!1;for(var z=this.closest=this.root=G,Z=0;Z<this.args.length-1&&(z=z.get(q[Z]));Z++)this.closest=z;this.closestIdx=Z}return C.prototype.exists=function(){this.assertNotDisposed();var G=this.args.length;return this.closestIdx>=G-1&&this.closest.has(this.args[G-1])},C.prototype.get=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");return this.closest.get(this.args[this.args.length-1])},C.prototype.set=function(G){this.assertNotDisposed();for(var q=this.args.length,z=this.closest,Z=this.closestIdx;Z<q-1;Z++){var me=new Map;z.set(this.args[Z],me),z=me}this.closestIdx=q-1,this.closest=z,z.set(this.args[q-1],G)},C.prototype.delete=function(){if(this.assertNotDisposed(),!this.exists())throw new Error("Entry doesn't exist");var G=this.args.length;this.closest.delete(this.args[G-1]);for(var q=this.root,z=[q],Z=0;Z<G-1;Z++)q=q.get(this.args[Z]),z.push(q);for(Z=z.length-1;Z>0;Z--)z[Z].size===0&&z[Z-1].delete(this.args[Z-1]);this.isDisposed=!0},C.prototype.assertNotDisposed=function(){if(this.isDisposed)throw new Error("Concurrent modification exception")},C}(),Promise.resolve(),typeof queueMicrotask<"u"||s!==void 0&&s.nextTick}).call(this,r(163))},function(n,o,r){var s;(function(c,v,h){if(c){for(var g,_={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},O={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},P=1;P<20;++P)_[111+P]="f"+P;for(P=0;P<=9;++P)_[P+96]=P.toString();K.prototype.bind=function(X,te,W){var C=this;return X=X instanceof Array?X:[X],C._bindMultiple.call(C,X,te,W),C},K.prototype.unbind=function(X,te){return this.bind.call(this,X,function(){},te)},K.prototype.trigger=function(X,te){var W=this;return W._directMap[X+":"+te]&&W._directMap[X+":"+te]({},X),W},K.prototype.reset=function(){var X=this;return X._callbacks={},X._directMap={},X},K.prototype.stopCallback=function(X,te){if((" "+te.className+" ").indexOf(" mousetrap ")>-1||Y(te,this.target))return!1;if("composedPath"in X&&typeof X.composedPath=="function"){var W=X.composedPath()[0];W!==X.target&&(te=W)}return te.tagName=="INPUT"||te.tagName=="SELECT"||te.tagName=="TEXTAREA"||te.isContentEditable},K.prototype.handleKey=function(){var X=this;return X._handleKey.apply(X,arguments)},K.addKeycodes=function(X){for(var te in X)X.hasOwnProperty(te)&&(_[te]=X[te]);g=null},K.init=function(){var X=K(v);for(var te in X)te.charAt(0)!=="_"&&(K[te]=function(W){return function(){return X[W].apply(X,arguments)}}(te))},K.init(),c.Mousetrap=K,n.exports&&(n.exports=K),(s=(function(){return K}).call(o,r,o,n))===void 0||(n.exports=s)}function A(X,te,W){X.addEventListener?X.addEventListener(te,W,!1):X.attachEvent("on"+te,W)}function R(X){if(X.type=="keypress"){var te=String.fromCharCode(X.which);return X.shiftKey||(te=te.toLowerCase()),te}return _[X.which]?_[X.which]:w[X.which]?w[X.which]:String.fromCharCode(X.which).toLowerCase()}function D(X){return X=="shift"||X=="ctrl"||X=="alt"||X=="meta"}function N(X,te,W){return W||(W=function(){if(!g)for(var C in g={},_)C>95&&C<112||_.hasOwnProperty(C)&&(g[_[C]]=C);return g}()[X]?"keydown":"keypress"),W=="keypress"&&te.length&&(W="keydown"),W}function $(X,te){var W,C,G,q=[];for(W=function(z){return z==="+"?["+"]:(z=z.replace(/\+{2}/g,"+plus")).split("+")}(X),G=0;G<W.length;++G)C=W[G],S[C]&&(C=S[C]),te&&te!="keypress"&&O[C]&&(C=O[C],q.push("shift")),D(C)&&q.push(C);return{key:C,modifiers:q,action:te=N(C,q,te)}}function Y(X,te){return X!==null&&X!==v&&(X===te||Y(X.parentNode,te))}function K(X){var te=this;if(X=X||v,!(te instanceof K))return new K(X);te.target=X,te._callbacks={},te._directMap={};var W,C={},G=!1,q=!1,z=!1;function Z(_e){_e=_e||{};var Ce,tt=!1;for(Ce in C)_e[Ce]?tt=!0:C[Ce]=0;tt||(z=!1)}function me(_e,Ce,tt,gt,st,At){var jt,yt,Kt,je,we=[],Me=tt.type;if(!te._callbacks[_e])return[];for(Me=="keyup"&&D(_e)&&(Ce=[_e]),jt=0;jt<te._callbacks[_e].length;++jt)if(yt=te._callbacks[_e][jt],(gt||!yt.seq||C[yt.seq]==yt.level)&&Me==yt.action&&(Me=="keypress"&&!tt.metaKey&&!tt.ctrlKey||(Kt=Ce,je=yt.modifiers,Kt.sort().join(",")===je.sort().join(",")))){var dt=!gt&&yt.combo==st,zt=gt&&yt.seq==gt&&yt.level==At;(dt||zt)&&te._callbacks[_e].splice(jt,1),we.push(yt)}return we}function ge(_e,Ce,tt,gt){te.stopCallback(Ce,Ce.target||Ce.srcElement,tt,gt)||_e(Ce,tt)===!1&&(function(st){st.preventDefault?st.preventDefault():st.returnValue=!1}(Ce),function(st){st.stopPropagation?st.stopPropagation():st.cancelBubble=!0}(Ce))}function Re(_e){typeof _e.which!="number"&&(_e.which=_e.keyCode);var Ce=R(_e);Ce&&(_e.type!="keyup"||G!==Ce?te.handleKey(Ce,function(tt){var gt=[];return tt.shiftKey&&gt.push("shift"),tt.altKey&&gt.push("alt"),tt.ctrlKey&&gt.push("ctrl"),tt.metaKey&&gt.push("meta"),gt}(_e),_e):G=!1)}function Be(_e,Ce,tt,gt){function st(Kt){return function(){z=Kt,++C[_e],clearTimeout(W),W=setTimeout(Z,1e3)}}function At(Kt){ge(tt,Kt,_e),gt!=="keyup"&&(G=R(Kt)),setTimeout(Z,10)}C[_e]=0;for(var jt=0;jt<Ce.length;++jt){var yt=jt+1===Ce.length?At:st(gt||$(Ce[jt+1]).action);ve(Ce[jt],yt,gt,_e,jt)}}function ve(_e,Ce,tt,gt,st){te._directMap[_e+":"+tt]=Ce;var At,jt=(_e=_e.replace(/\s+/g," ")).split(" ");jt.length>1?Be(_e,jt,Ce,tt):(At=$(_e,tt),te._callbacks[At.key]=te._callbacks[At.key]||[],me(At.key,At.modifiers,{type:At.action},gt,_e,st),te._callbacks[At.key][gt?"unshift":"push"]({callback:Ce,modifiers:At.modifiers,action:At.action,seq:gt,level:st,combo:_e}))}te._handleKey=function(_e,Ce,tt){var gt,st=me(_e,Ce,tt),At={},jt=0,yt=!1;for(gt=0;gt<st.length;++gt)st[gt].seq&&(jt=Math.max(jt,st[gt].level));for(gt=0;gt<st.length;++gt)if(st[gt].seq){if(st[gt].level!=jt)continue;yt=!0,At[st[gt].seq]=1,ge(st[gt].callback,tt,st[gt].combo,st[gt].seq)}else yt||ge(st[gt].callback,tt,st[gt].combo);var Kt=tt.type=="keypress"&&q;tt.type!=z||D(_e)||Kt||Z(At),q=yt&&tt.type=="keydown"},te._bindMultiple=function(_e,Ce,tt){for(var gt=0;gt<_e.length;++gt)ve(_e[gt],Ce,tt)},A(X,"keypress",Re),A(X,"keydown",Re),A(X,"keyup",Re)}})(typeof window<"u"?window:null,typeof window<"u"?document:null)},function(n,o,r){var s=r(7),c=r(34),v=r(30),h=r(33),g=s.TypeError;n.exports=function(_,w){var O,S;if(w==="string"&&v(O=_.toString)&&!h(S=c(O,_))||v(O=_.valueOf)&&!h(S=c(O,_))||w!=="string"&&v(O=_.toString)&&!h(S=c(O,_)))return S;throw g("Can't convert object to primitive value")}},function(n,o,r){var s=r(7),c=r(30),v=r(92),h=s.WeakMap;n.exports=c(h)&&/native code/.test(v(h))},function(n,o,r){var s=r(36),c=r(38),v=r(32),h=r(41),g=r(77);n.exports=s?Object.defineProperties:function(_,w){v(_);for(var O,S=h(w),P=g(w),A=P.length,R=0;A>R;)c.f(_,O=P[R++],S[O]);return _}},function(n,o,r){var s=r(7);n.exports=s},function(n,o,r){var s=r(7),c=r(96),v=r(99),h=r(33),g=r(28)("species"),_=s.Array;n.exports=function(w){var O;return c(w)&&(O=w.constructor,(v(O)&&(O===_||c(O.prototype))||h(O)&&(O=O[g])===null)&&(O=void 0)),O===void 0?_:O}},function(n,o,r){var s=r(113),c=r(97);n.exports=s?{}.toString:function(){return"[object "+c(this)+"]"}},function(n,o,r){var s=r(142).IteratorPrototype,c=r(60),v=r(69),h=r(78),g=r(80),_=function(){return this};n.exports=function(w,O,S,P){var A=O+" Iterator";return w.prototype=c(s,{next:v(+!P,S)}),h(w,A,!1,!0),g[A]=_,w}},function(n,o,r){var s=r(7),c=r(30),v=s.String,h=s.TypeError;n.exports=function(g){if(typeof g=="object"||c(g))return g;throw h("Can't set "+v(g)+" as a prototype")}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(95),g=r(42),_=r(144),w=r(117),O=r(119),S=r(30),P=r(33),A=r(18),R=r(120),D=r(78),N=r(148);n.exports=function($,Y,K){var X=$.indexOf("Map")!==-1,te=$.indexOf("Weak")!==-1,W=X?"set":"add",C=c[$],G=C&&C.prototype,q=C,z={},Z=function(_e){var Ce=v(G[_e]);g(G,_e,_e=="add"?function(tt){return Ce(this,tt===0?0:tt),this}:_e=="delete"?function(tt){return!(te&&!P(tt))&&Ce(this,tt===0?0:tt)}:_e=="get"?function(tt){return te&&!P(tt)?void 0:Ce(this,tt===0?0:tt)}:_e=="has"?function(tt){return!(te&&!P(tt))&&Ce(this,tt===0?0:tt)}:function(tt,gt){return Ce(this,tt===0?0:tt,gt),this})};if(h($,!S(C)||!(te||G.forEach&&!A(function(){new C().entries().next()}))))q=K.getConstructor(Y,$,X,W),_.enable();else if(h($,!0)){var me=new q,ge=me[W](te?{}:-0,1)!=me,Re=A(function(){me.has(1)}),Be=R(function(_e){new C(_e)}),ve=!te&&A(function(){for(var _e=new C,Ce=5;Ce--;)_e[W](Ce,Ce);return!_e.has(-0)});Be||((q=Y(function(_e,Ce){O(_e,G);var tt=N(new C,_e,q);return Ce!=null&&w(Ce,tt[W],{that:tt,AS_ENTRIES:X}),tt})).prototype=G,G.constructor=q),(Re||ve)&&(Z("delete"),Z("has"),X&&Z("get")),(ve||ge)&&Z(W),te&&G.clear&&delete G.clear}return z[$]=q,s({global:!0,forced:q!=C},z),D(q,$),te||K.setStrong(q,$,X),q}},function(n,o,r){var s=r(18),c=r(33),v=r(51),h=r(184),g=Object.isExtensible,_=s(function(){});n.exports=_||h?function(w){return!!c(w)&&(!h||v(w)!="ArrayBuffer")&&(!g||g(w))}:g},function(n,o,r){var s=r(18);n.exports=s(function(){if(typeof ArrayBuffer=="function"){var c=new ArrayBuffer(8);Object.isExtensible(c)&&Object.defineProperty(c,"a",{value:8})}})},function(n,o,r){var s=r(18);n.exports=!s(function(){return Object.isExtensible(Object.preventExtensions({}))})},function(n,o,r){var s=r(38).f,c=r(60),v=r(149),h=r(64),g=r(119),_=r(117),w=r(116),O=r(150),S=r(36),P=r(144).fastKey,A=r(58),R=A.set,D=A.getterFor;n.exports={getConstructor:function(N,$,Y,K){var X=N(function(q,z){g(q,te),R(q,{type:$,index:c(null),first:void 0,last:void 0,size:0}),S||(q.size=0),z!=null&&_(z,q[K],{that:q,AS_ENTRIES:Y})}),te=X.prototype,W=D($),C=function(q,z,Z){var me,ge,Re=W(q),Be=G(q,z);return Be?Be.value=Z:(Re.last=Be={index:ge=P(z,!0),key:z,value:Z,previous:me=Re.last,next:void 0,removed:!1},Re.first||(Re.first=Be),me&&(me.next=Be),S?Re.size++:q.size++,ge!=="F"&&(Re.index[ge]=Be)),q},G=function(q,z){var Z,me=W(q),ge=P(z);if(ge!=="F")return me.index[ge];for(Z=me.first;Z;Z=Z.next)if(Z.key==z)return Z};return v(te,{clear:function(){for(var q=W(this),z=q.index,Z=q.first;Z;)Z.removed=!0,Z.previous&&(Z.previous=Z.previous.next=void 0),delete z[Z.index],Z=Z.next;q.first=q.last=void 0,S?q.size=0:this.size=0},delete:function(q){var z=this,Z=W(z),me=G(z,q);if(me){var ge=me.next,Re=me.previous;delete Z.index[me.index],me.removed=!0,Re&&(Re.next=ge),ge&&(ge.previous=Re),Z.first==me&&(Z.first=ge),Z.last==me&&(Z.last=Re),S?Z.size--:z.size--}return!!me},forEach:function(q){for(var z,Z=W(this),me=h(q,arguments.length>1?arguments[1]:void 0);z=z?z.next:Z.first;)for(me(z.value,z.key,this);z&&z.removed;)z=z.previous},has:function(q){return!!G(this,q)}}),v(te,Y?{get:function(q){var z=G(this,q);return z&&z.value},set:function(q,z){return C(this,q===0?0:q,z)}}:{add:function(q){return C(this,q=q===0?0:q,q)}}),S&&s(te,"size",{get:function(){return W(this).size}}),X},setStrong:function(N,$,Y){var K=$+" Iterator",X=D($),te=D(K);w(N,$,function(W,C){R(this,{type:K,target:W,state:X(W),kind:C,last:void 0})},function(){for(var W=te(this),C=W.kind,G=W.last;G&&G.removed;)G=G.previous;return W.target&&(W.last=G=G?G.next:W.state.first)?C=="keys"?{value:G.key,done:!1}:C=="values"?{value:G.value,done:!1}:{value:[G.key,G.value],done:!1}:(W.target=void 0,{value:void 0,done:!0})},Y?"entries":"values",!Y,!0),O($)}}},function(n,o,r){var s=r(79).forEach,c=r(121)("forEach");n.exports=c?[].forEach:function(v){return s(this,v,arguments.length>1?arguments[1]:void 0)}},function(n,o,r){var s=r(7),c=r(64),v=r(34),h=r(40),g=r(189),_=r(145),w=r(99),O=r(45),S=r(63),P=r(146),A=r(118),R=s.Array;n.exports=function(D){var N=h(D),$=w(this),Y=arguments.length,K=Y>1?arguments[1]:void 0,X=K!==void 0;X&&(K=c(K,Y>2?arguments[2]:void 0));var te,W,C,G,q,z,Z=A(N),me=0;if(!Z||this==R&&_(Z))for(te=O(N),W=$?new this(te):R(te);te>me;me++)z=X?K(N[me],me):N[me],S(W,me,z);else for(q=(G=P(N,Z)).next,W=$?new this:[];!(C=v(q,G)).done;me++)z=X?g(G,K,[C.value,me],!0):C.value,S(W,me,z);return W.length=me,W}},function(n,o,r){var s=r(32),c=r(147);n.exports=function(v,h,g,_){try{return _?h(s(g)[0],g[1]):h(g)}catch(w){c(v,"throw",w)}}},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c(".","s");return!(v.dotAll&&v.exec(`
`)&&v.flags==="s")})},function(n,o,r){var s=r(18),c=r(7).RegExp;n.exports=s(function(){var v=c("(?<a>b)","g");return v.exec("b").groups.a!=="b"||"b".replace(v,"$<a>c")!=="bc"})},function(n,o,r){var s=r(16),c=r(15),v=r(56),h=r(40),g=r(45),_=r(39),w=r(18),O=r(193),S=r(121),P=r(194),A=r(195),R=r(70),D=r(196),N=[],$=c(N.sort),Y=c(N.push),K=w(function(){N.sort(void 0)}),X=w(function(){N.sort(null)}),te=S("sort"),W=!w(function(){if(R)return R<70;if(!(P&&P>3)){if(A)return!0;if(D)return D<603;var C,G,q,z,Z="";for(C=65;C<76;C++){switch(G=String.fromCharCode(C),C){case 66:case 69:case 70:case 72:q=3;break;case 68:case 71:q=4;break;default:q=2}for(z=0;z<47;z++)N.push({k:G+z,v:q})}for(N.sort(function(me,ge){return ge.v-me.v}),z=0;z<N.length;z++)G=N[z].k.charAt(0),Z.charAt(Z.length-1)!==G&&(Z+=G);return Z!=="DGBEFHACIJK"}});s({target:"Array",proto:!0,forced:K||!X||!te||!W},{sort:function(C){C!==void 0&&v(C);var G=h(this);if(W)return C===void 0?$(G):$(G,C);var q,z,Z=[],me=g(G);for(z=0;z<me;z++)z in G&&Y(Z,G[z]);for(O(Z,function(ge){return function(Re,Be){return Be===void 0?-1:Re===void 0?1:ge!==void 0?+ge(Re,Be)||0:_(Re)>_(Be)?1:-1}}(C)),q=Z.length,z=0;z<q;)G[z]=Z[z++];for(;z<me;)delete G[z++];return G}})},function(n,o,r){var s=r(114),c=Math.floor,v=function(_,w){var O=_.length,S=c(O/2);return O<8?h(_,w):g(_,v(s(_,0,S),w),v(s(_,S),w),w)},h=function(_,w){for(var O,S,P=_.length,A=1;A<P;){for(S=A,O=_[A];S&&w(_[S-1],O)>0;)_[S]=_[--S];S!==A++&&(_[S]=O)}return _},g=function(_,w,O,S){for(var P=w.length,A=O.length,R=0,D=0;R<P||D<A;)_[R+D]=R<P&&D<A?S(w[R],O[D])<=0?w[R++]:O[D++]:R<P?w[R++]:O[D++];return _};n.exports=v},function(n,o,r){var s=r(55).match(/firefox\/(\d+)/i);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(55);n.exports=/MSIE|Trident/.test(s)},function(n,o,r){var s=r(55).match(/AppleWebKit\/(\d+)\./);n.exports=!!s&&+s[1]},function(n,o,r){var s=r(7),c=r(159),v=s.TypeError;n.exports=function(h){if(c(h))throw v("The method doesn't accept regular expressions");return h}},function(n,o,r){var s=r(28)("match");n.exports=function(c){var v=/./;try{"/./"[c](v)}catch{try{return v[s]=!1,"/./"[c](v)}catch{}}return!1}},function(n,o,r){r(16)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},function(n,o,r){var s=r(73).PROPER,c=r(18),v=r(162);n.exports=function(h){return c(function(){return!!v[h]()||"​᠎"[h]()!=="​᠎"||s&&v[h].name!==h})}},function(n,o,r){var s=r(15),c=r(40),v=Math.floor,h=s("".charAt),g=s("".replace),_=s("".slice),w=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,O=/\$([$&'`]|\d{1,2})/g;n.exports=function(S,P,A,R,D,N){var $=A+S.length,Y=R.length,K=O;return D!==void 0&&(D=c(D),K=w),g(N,K,function(X,te){var W;switch(h(te,0)){case"$":return"$";case"&":return S;case"`":return _(P,0,A);case"'":return _(P,$);case"<":W=D[_(te,1,-1)];break;default:var C=+te;if(C===0)return X;if(C>Y){var G=v(C/10);return G===0?X:G<=Y?R[G-1]===void 0?h(te,1):R[G-1]+h(te,1):X}W=R[C-1]}return W===void 0?"":W})}},function(n,o,r){var s=r(36),c=r(15),v=r(34),h=r(18),g=r(77),_=r(112),w=r(84),O=r(40),S=r(85),P=Object.assign,A=Object.defineProperty,R=c([].concat);n.exports=!P||h(function(){if(s&&P({b:1},P(A({},"a",{enumerable:!0,get:function(){A(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var D={},N={},$=Symbol(),Y="abcdefghijklmnopqrst";return D[$]=7,Y.split("").forEach(function(K){N[K]=K}),P({},D)[$]!=7||g(P({},N)).join("")!=Y})?function(D,N){for(var $=O(D),Y=arguments.length,K=1,X=_.f,te=w.f;Y>K;)for(var W,C=S(arguments[K++]),G=X?R(g(C),X(C)):g(C),q=G.length,z=0;q>z;)W=G[z++],s&&!v(te,C,W)||($[W]=C[W]);return $}:P},function(n,o,r){var s=r(7),c=r(15),v=r(56),h=r(33),g=r(35),_=r(98),w=s.Function,O=c([].concat),S=c([].join),P={},A=function(R,D,N){if(!g(P,D)){for(var $=[],Y=0;Y<D;Y++)$[Y]="a["+Y+"]";P[D]=w("C,a","return new C("+S($,",")+")")}return P[D](R,N)};n.exports=w.bind||function(R){var D=v(this),N=D.prototype,$=_(arguments,1),Y=function(){var K=O($,_(arguments));return this instanceof Y?A(D,K.length,K):D.apply(R,K)};return h(N)&&(Y.prototype=N),Y}},function(n,o,r){var s=r(35);n.exports=function(c){return c!==void 0&&(s(c,"value")||s(c,"writable"))}},function(n,o,r){var s=r(15),c=r(44),v=r(39),h=/"/g,g=s("".replace);n.exports=function(_,w,O,S){var P=v(c(_)),A="<"+w;return O!==""&&(A+=" "+O+'="'+g(v(S),h,"&quot;")+'"'),A+">"+P+"</"+w+">"}},function(n,o,r){var s=r(18);n.exports=function(c){return s(function(){var v=""[c]('"');return v!==v.toLowerCase()||v.split('"').length>3})}},function(n,o,r){r(16)({target:"Number",stat:!0},{EPSILON:Math.pow(2,-52)})},function(n,o,r){var s,c,v,h,g=r(16),_=r(71),w=r(7),O=r(46),S=r(34),P=r(209),A=r(42),R=r(149),D=r(102),N=r(78),$=r(150),Y=r(56),K=r(30),X=r(33),te=r(119),W=r(92),C=r(117),G=r(120),q=r(164),z=r(168).set,Z=r(210),me=r(213),ge=r(214),Re=r(170),Be=r(215),ve=r(58),_e=r(95),Ce=r(28),tt=r(216),gt=r(128),st=r(70),At=Ce("species"),jt="Promise",yt=ve.getterFor(jt),Kt=ve.set,je=ve.getterFor(jt),we=P&&P.prototype,Me=P,dt=we,zt=w.TypeError,Et=w.document,rn=w.process,yn=Re.f,Tn=yn,pn=!!(Et&&Et.createEvent&&w.dispatchEvent),ut=K(w.PromiseRejectionEvent),xn="unhandledrejection",Le=!1,mn=_e(jt,function(){var Ne=W(Me),rt=Ne!==String(Me);if(!rt&&st===66||_&&!dt.finally)return!0;if(st>=51&&/native code/.test(Ne))return!1;var en=new Me(function(kn){kn(1)}),Yt=function(kn){kn(function(){},function(){})};return(en.constructor={})[At]=Yt,!(Le=en.then(function(){})instanceof Yt)||!rt&&tt&&!ut}),qn=mn||!G(function(Ne){Me.all(Ne).catch(function(){})}),re=function(Ne){var rt;return!(!X(Ne)||!K(rt=Ne.then))&&rt},Kn=function(Ne,rt){if(!Ne.notified){Ne.notified=!0;var en=Ne.reactions;Z(function(){for(var Yt=Ne.value,kn=Ne.state==1,Er=0;en.length>Er;){var ni,yi,Go,Xo=en[Er++],Sn=kn?Xo.ok:Xo.fail,$n=Xo.resolve,Hn=Xo.reject,ir=Xo.domain;try{Sn?(kn||(Ne.rejection===2&&Fn(Ne),Ne.rejection=1),Sn===!0?ni=Yt:(ir&&ir.enter(),ni=Sn(Yt),ir&&(ir.exit(),Go=!0)),ni===Xo.promise?Hn(zt("Promise-chain cycle")):(yi=re(ni))?S(yi,ni,$n,Hn):$n(ni)):Hn(Yt)}catch(Kr){ir&&!Go&&ir.exit(),Hn(Kr)}}Ne.reactions=[],Ne.notified=!1,rt&&!Ne.rejection&&Gr(Ne)})}},vr=function(Ne,rt,en){var Yt,kn;pn?((Yt=Et.createEvent("Event")).promise=rt,Yt.reason=en,Yt.initEvent(Ne,!1,!0),w.dispatchEvent(Yt)):Yt={promise:rt,reason:en},!ut&&(kn=w["on"+Ne])?kn(Yt):Ne===xn&&ge("Unhandled promise rejection",en)},Gr=function(Ne){S(z,w,function(){var rt,en=Ne.facade,Yt=Ne.value;if(eo(Ne)&&(rt=Be(function(){gt?rn.emit("unhandledRejection",Yt,en):vr(xn,en,Yt)}),Ne.rejection=gt||eo(Ne)?2:1,rt.error))throw rt.value})},eo=function(Ne){return Ne.rejection!==1&&!Ne.parent},Fn=function(Ne){S(z,w,function(){var rt=Ne.facade;gt?rn.emit("rejectionHandled",rt):vr("rejectionhandled",rt,Ne.value)})},ho=function(Ne,rt,en){return function(Yt){Ne(rt,Yt,en)}},Oe=function(Ne,rt,en){Ne.done||(Ne.done=!0,en&&(Ne=en),Ne.value=rt,Ne.state=2,Kn(Ne,!0))},ze=function(Ne,rt,en){if(!Ne.done){Ne.done=!0,en&&(Ne=en);try{if(Ne.facade===rt)throw zt("Promise can't be resolved itself");var Yt=re(rt);Yt?Z(function(){var kn={done:!1};try{S(Yt,rt,ho(ze,kn,Ne),ho(Oe,kn,Ne))}catch(Er){Oe(kn,Er,Ne)}}):(Ne.value=rt,Ne.state=1,Kn(Ne,!1))}catch(kn){Oe({done:!1},kn,Ne)}}};if(mn&&(dt=(Me=function(Ne){te(this,dt),Y(Ne),S(s,this);var rt=yt(this);try{Ne(ho(ze,rt),ho(Oe,rt))}catch(en){Oe(rt,en)}}).prototype,(s=function(Ne){Kt(this,{type:jt,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=R(dt,{then:function(Ne,rt){var en=je(this),Yt=en.reactions,kn=yn(q(this,Me));return kn.ok=!K(Ne)||Ne,kn.fail=K(rt)&&rt,kn.domain=gt?rn.domain:void 0,en.parent=!0,Yt[Yt.length]=kn,en.state!=0&&Kn(en,!1),kn.promise},catch:function(Ne){return this.then(void 0,Ne)}}),c=function(){var Ne=new s,rt=yt(Ne);this.promise=Ne,this.resolve=ho(ze,rt),this.reject=ho(Oe,rt)},Re.f=yn=function(Ne){return Ne===Me||Ne===v?new c(Ne):Tn(Ne)},!_&&K(P)&&we!==Object.prototype)){h=we.then,Le||(A(we,"then",function(Ne,rt){var en=this;return new Me(function(Yt,kn){S(h,en,Yt,kn)}).then(Ne,rt)},{unsafe:!0}),A(we,"catch",dt.catch,{unsafe:!0}));try{delete we.constructor}catch{}D&&D(we,dt)}g({global:!0,wrap:!0,forced:mn},{Promise:Me}),N(Me,jt,!1,!0),$(jt),v=O(jt),g({target:jt,stat:!0,forced:mn},{reject:function(Ne){var rt=yn(this);return S(rt.reject,void 0,Ne),rt.promise}}),g({target:jt,stat:!0,forced:_||mn},{resolve:function(Ne){return me(_&&this===v?Me:this,Ne)}}),g({target:jt,stat:!0,forced:qn},{all:function(Ne){var rt=this,en=yn(rt),Yt=en.resolve,kn=en.reject,Er=Be(function(){var ni=Y(rt.resolve),yi=[],Go=0,Xo=1;C(Ne,function(Sn){var $n=Go++,Hn=!1;Xo++,S(ni,rt,Sn).then(function(ir){Hn||(Hn=!0,yi[$n]=ir,--Xo||Yt(yi))},kn)}),--Xo||Yt(yi)});return Er.error&&kn(Er.value),en.promise},race:function(Ne){var rt=this,en=yn(rt),Yt=en.reject,kn=Be(function(){var Er=Y(rt.resolve);C(Ne,function(ni){S(Er,rt,ni).then(en.resolve,Yt)})});return kn.error&&Yt(kn.value),en.promise}})},function(n,o,r){var s=r(7);n.exports=s.Promise},function(n,o,r){var s,c,v,h,g,_,w,O,S=r(7),P=r(64),A=r(50).f,R=r(168).set,D=r(169),N=r(211),$=r(212),Y=r(128),K=S.MutationObserver||S.WebKitMutationObserver,X=S.document,te=S.process,W=S.Promise,C=A(S,"queueMicrotask"),G=C&&C.value;G||(s=function(){var q,z;for(Y&&(q=te.domain)&&q.exit();c;){z=c.fn,c=c.next;try{z()}catch(Z){throw c?h():v=void 0,Z}}v=void 0,q&&q.enter()},D||Y||$||!K||!X?!N&&W&&W.resolve?((w=W.resolve(void 0)).constructor=W,O=P(w.then,w),h=function(){O(s)}):Y?h=function(){te.nextTick(s)}:(R=P(R,S),h=function(){R(s)}):(g=!0,_=X.createTextNode(""),new K(s).observe(_,{characterData:!0}),h=function(){_.data=g=!g})),n.exports=G||function(q){var z={fn:q,next:void 0};v&&(v.next=z),c||(c=z,h()),v=z}},function(n,o,r){var s=r(55),c=r(7);n.exports=/ipad|iphone|ipod/i.test(s)&&c.Pebble!==void 0},function(n,o,r){var s=r(55);n.exports=/web0s(?!.*chrome)/i.test(s)},function(n,o,r){var s=r(32),c=r(33),v=r(170);n.exports=function(h,g){if(s(h),c(g)&&g.constructor===h)return g;var _=v.f(h);return(0,_.resolve)(g),_.promise}},function(n,o,r){var s=r(7);n.exports=function(c,v){var h=s.console;h&&h.error&&(arguments.length==1?h.error(c):h.error(c,v))}},function(n,o){n.exports=function(r){try{return{error:!1,value:r()}}catch(s){return{error:!0,value:s}}}},function(n,o){n.exports=typeof window=="object"},function(n,o,r){var s=r(40),c=r(75),v=r(45);n.exports=function(h){for(var g=s(this),_=v(g),w=arguments.length,O=c(w>1?arguments[1]:void 0,_),S=w>2?arguments[2]:void 0,P=S===void 0?_:c(S,_);P>O;)g[O++]=h;return g}},function(n,o,r){var s=r(16),c=r(7),v=r(15),h=r(59),g=r(160),_=r(219),w=r(18),O=c.RangeError,S=c.String,P=Math.floor,A=v(_),R=v("".slice),D=v(1 .toFixed),N=function(X,te,W){return te===0?W:te%2==1?N(X,te-1,W*X):N(X*X,te/2,W)},$=function(X,te,W){for(var C=-1,G=W;++C<6;)G+=te*X[C],X[C]=G%1e7,G=P(G/1e7)},Y=function(X,te){for(var W=6,C=0;--W>=0;)C+=X[W],X[W]=P(C/te),C=C%te*1e7},K=function(X){for(var te=6,W="";--te>=0;)if(W!==""||te===0||X[te]!==0){var C=S(X[te]);W=W===""?C:W+A("0",7-C.length)+C}return W};s({target:"Number",proto:!0,forced:w(function(){return D(8e-5,3)!=="0.000"||D(.9,0)!=="1"||D(1.255,2)!=="1.25"||D(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!w(function(){D({})})},{toFixed:function(X){var te,W,C,G,q=g(this),z=h(X),Z=[0,0,0,0,0,0],me="",ge="0";if(z<0||z>20)throw O("Incorrect fraction digits");if(q!=q)return"NaN";if(q<=-1e21||q>=1e21)return S(q);if(q<0&&(me="-",q=-q),q>1e-21)if(W=(te=function(Re){for(var Be=0,ve=Re;ve>=4096;)Be+=12,ve/=4096;for(;ve>=2;)Be+=1,ve/=2;return Be}(q*N(2,69,1))-69)<0?q*N(2,-te,1):q/N(2,te,1),W*=4503599627370496,(te=52-te)>0){for($(Z,0,W),C=z;C>=7;)$(Z,1e7,0),C-=7;for($(Z,N(10,C,1),0),C=te-1;C>=23;)Y(Z,1<<23),C-=23;Y(Z,1<<C),$(Z,1,1),Y(Z,2),ge=K(Z)}else $(Z,0,W),$(Z,1<<-te,0),ge=K(Z)+A("0",z);return ge=z>0?me+((G=ge.length)<=z?"0."+A("0",z-G)+ge:R(ge,0,G-z)+"."+R(ge,G-z)):me+ge}})},function(n,o,r){var s=r(7),c=r(59),v=r(39),h=r(44),g=s.RangeError;n.exports=function(_){var w=v(h(this)),O="",S=c(_);if(S<0||S==1/0)throw g("Wrong number of repetitions");for(;S>0;(S>>>=1)&&(w+=w))1&S&&(O+=w);return O}},function(n,o,r){var s=r(36),c=r(15),v=r(77),h=r(41),g=c(r(84).f),_=c([].push),w=function(O){return function(S){for(var P,A=h(S),R=v(A),D=R.length,N=0,$=[];D>N;)P=R[N++],s&&!g(A,P)||_($,O?[P,A[P]]:A[P]);return $}};n.exports={entries:w(!0),values:w(!1)}},function(n,o){n.exports=function(r){return r.webpackPolyfill||(r.deprecate=function(){},r.paths=[],r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),r.webpackPolyfill=1),r}},function(n,o,r){r.r(o),r.d(o,"observer",function(){return ps}),r.d(o,"LogicFlow",function(){return _1}),r.d(o,"h",function(){return Le.g}),r.d(o,"LogicFlowUtil",function(){return s}),r.d(o,"BaseNode",function(){return vf}),r.d(o,"RectNode",function(){return c0}),r.d(o,"CircleNode",function(){return h0}),r.d(o,"PolygonNode",function(){return _0}),r.d(o,"DiamondNode",function(){return O0}),r.d(o,"EllipseNode",function(){return M0}),r.d(o,"TextNode",function(){return N0}),r.d(o,"HtmlNode",function(){return D0}),r.d(o,"BaseEdge",function(){return cy}),r.d(o,"LineEdge",function(){return q0}),r.d(o,"PolylineEdge",function(){return e1}),r.d(o,"BezierEdge",function(){return o1}),r.d(o,"Arrow",function(){return ID}),r.d(o,"BaseEdgeModel",function(){return _d}),r.d(o,"BezierEdgeModel",function(){return yb}),r.d(o,"LineEdgeModel",function(){return Pi}),r.d(o,"PolylineEdgeModel",function(){return sf}),r.d(o,"BaseNodeModel",function(){return hf}),r.d(o,"CircleNodeModel",function(){return Eb}),r.d(o,"DiamondNodeModel",function(){return Tb}),r.d(o,"EllipseNodeModel",function(){return Nb}),r.d(o,"PolygonNodeModel",function(){return Lb}),r.d(o,"RectNodeModel",function(){return Ub}),r.d(o,"TextNodeModel",function(){return zb}),r.d(o,"HtmlNodeModel",function(){return Yb}),r.d(o,"EditConfigModel",function(){return Jf}),r.d(o,"GraphModel",function(){return XE}),r.d(o,"SnaplineModel",function(){return Nx}),r.d(o,"Keyboard",function(){return mS}),r.d(o,"get",function(){return mO}),r.d(o,"defaults",function(){return _O}),r.d(o,"ElementState",function(){return Hr}),r.d(o,"ModelType",function(){return xr}),r.d(o,"ElementType",function(){return io}),r.d(o,"EventType",function(){return Nn}),r.d(o,"formateAnchorConnectValidateData",function(){return Yl});var s={};r.r(s),r.d(s,"createUuid",function(){return el}),r.d(s,"refreshGraphId",function(){return xu}),r.d(s,"StepDrag",function(){return ee}),r.d(s,"setupEdgeModel",function(){return mt}),r.d(s,"isBboxOverLapping",function(){return Ve}),r.d(s,"filterRepeatPoints",function(){return ot}),r.d(s,"getSimplePolyline",function(){return Lt}),r.d(s,"getExpandedBBox",function(){return qt}),r.d(s,"pointDirection",function(){return Ot}),r.d(s,"getExpandedBBoxPoint",function(){return Zt}),r.d(s,"mergeBBox",function(){return xt}),r.d(s,"getBBoxOfPoints",function(){return Wt}),r.d(s,"getPointsFromBBox",function(){return _t}),r.d(s,"isPointOutsideBBox",function(){return Xt}),r.d(s,"getBBoxXCrossPoints",function(){return Mn}),r.d(s,"getBBoxYCrossPoints",function(){return Vn}),r.d(s,"getBBoxCrossPointsByPoint",function(){return It}),r.d(s,"estimateDistance",function(){return St}),r.d(s,"costByPoints",function(){return wt}),r.d(s,"heuristicCostEstimate",function(){return Cn}),r.d(s,"rebuildPath",function(){return tr}),r.d(s,"removeClosePointFromOpenList",function(){return un}),r.d(s,"isSegmentsIntersected",function(){return Qn}),r.d(s,"isSegmentCrossingBBox",function(){return Gn}),r.d(s,"getNextNeighborPoints",function(){return rr}),r.d(s,"pathFinder",function(){return _r}),r.d(s,"getBoxByOriginNode",function(){return Po}),r.d(s,"pointFilter",function(){return Fo}),r.d(s,"getPolylinePoints",function(){return cr}),r.d(s,"getLongestEdge",function(){return Wo}),r.d(s,"isSegmentsInNode",function(){return Qr}),r.d(s,"isSegmentsCrossNode",function(){return ko}),r.d(s,"getCrossPointInRect",function(){return $o}),r.d(s,"segmentDirection",function(){return Oo}),r.d(s,"points2PointsList",function(){return mo}),r.d(s,"getSimplePoints",function(){return ei}),r.d(s,"getBytesLength",function(){return Zn}),r.d(s,"getTextWidth",function(){return Nr}),r.d(s,"getAppendAttributes",function(){return jn}),r.d(s,"getBezierControlPoints",function(){return fr}),r.d(s,"getBezierPoints",function(){return Wn}),r.d(s,"getEndTangent",function(){return Fa}),r.d(s,"getClosestPointOfPolyline",function(){return Zl}),r.d(s,"pickEdgeConfig",function(){return pe}),r.d(s,"twoPointDistance",function(){return et}),r.d(s,"createEdgeGenerator",function(){return Ye}),r.d(s,"snapToGrid",function(){return wl}),r.d(s,"getGridOffset",function(){return Is}),r.d(s,"sampleCubic",function(){return be}),r.d(s,"getThetaOfVector",function(){return ct}),r.d(s,"degrees",function(){return qe}),r.d(s,"Vector",function(){return Q}),r.d(s,"Point",function(){return fe}),r.d(s,"Matrix",function(){return Ks}),r.d(s,"RotateMatrix",function(){return xp}),r.d(s,"ScaleMatrix",function(){return ey}),r.d(s,"TranslateMatrix",function(){return Zs});var c=r(1),v=r(10);if(!v.j)throw new Error("mobx-react-lite requires React with Hooks support");if(!c.H)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");var h=r(43),g=Object(h.b)("observerBatching");function _(a){a()}var w=!1;function O(){return w}function S(a){return Object(c.t)(a)}var P,A=1e4,R=new Set;function D(){P===void 0&&(P=setTimeout(N,1e4))}function N(){P=void 0;var a=Date.now();R.forEach(function(i){var l=i.current;l&&a>=l.cleanAt&&(l.reaction.dispose(),i.current=null,R.delete(i))}),R.size>0&&D()}var $=!1,Y=[],K={};function X(a){return"observer"+a}function te(a,i,l){i===void 0&&(i="observed"),l===void 0&&(l=K),O();var u,p=function(k){return function(){$?Y.push(k):k()}}((l.useForceUpdate||h.d)()),f=v.d.useRef(null);if(!f.current){var y=new c.c(X(i),function(){b.mounted?p():(y.dispose(),f.current=null)}),b=function(k){return{cleanAt:Date.now()+A,reaction:k}}(y);f.current=b,u=f,R.add(u),D()}var x=f.current.reaction;return v.d.useDebugValue(x,S),v.d.useEffect(function(){var k;return k=f,R.delete(k),f.current?f.current.mounted=!0:(f.current={reaction:new c.c(X(i),function(){p()}),cleanAt:1/0},p()),function(){f.current.reaction.dispose(),f.current=null}},[]),function(k){$=!0,Y=[];try{var I=k();$=!1;var H=Y.length>0?Y:void 0;return v.d.useLayoutEffect(function(){H&&H.forEach(function(J){return J()})},[H]),I}finally{$=!1}}(function(){var k,I;if(x.track(function(){try{k=a()}catch(H){I=H}}),I)throw I;return k})}var W=function(){return W=Object.assign||function(a){for(var i,l=1,u=arguments.length;l<u;l++)for(var p in i=arguments[l])Object.prototype.hasOwnProperty.call(i,p)&&(a[p]=i[p]);return a},W.apply(this,arguments)};function C(a,i){var l,u,p,f=W({forwardRef:!1},i),y=a.displayName||a.name,b=function(x,k){return te(function(){return a(x,k)},y)};return b.displayName=y,l=f.forwardRef?Object(v.f)(Object(v.e)(b)):Object(v.f)(b),u=a,p=l,Object.keys(u).forEach(function(x){G[x]||Object.defineProperty(p,x,Object.getOwnPropertyDescriptor(u,x))}),l.displayName=y,l}var G={$$typeof:!0,render:!0,compare:!0,type:!0};function q(a){var i=a.children,l=a.render,u=i||l;return typeof u!="function"?null:te(u)}function z(a,i,l,u,p){var f=i==="children"?"render":"children",y=typeof a[i]=="function",b=typeof a[f]=="function";return y&&b?new Error("MobX Observer: Do not use children and render in the same time in`"+l):y||b?null:new Error("Invalid prop `"+p+"` of type `"+typeof a[i]+"` supplied to `"+l+"`, expected `function`.")}q.propTypes={children:z,render:z},q.displayName="Observer";var Z;(Z=v.g)||(Z=_),Object(c.n)({reactionScheduler:Z}),Object(h.a)()[g]=!0;var me=0,ge={};function Re(a){return ge[a]||(ge[a]=function(i){if(typeof Symbol=="function")return Symbol(i);var l="__$mobx-react "+i+" ("+me+")";return me++,l}(a)),ge[a]}function Be(a,i){if(ve(a,i))return!0;if(typeof a!="object"||a===null||typeof i!="object"||i===null)return!1;var l=Object.keys(a),u=Object.keys(i);if(l.length!==u.length)return!1;for(var p=0;p<l.length;p++)if(!Object.hasOwnProperty.call(i,l[p])||!ve(a[l[p]],i[l[p]]))return!1;return!0}function ve(a,i){return a===i?a!==0||1/a==1/i:a!=a&&i!=i}function _e(a,i,l){Object.hasOwnProperty.call(a,i)?a[i]=l:Object.defineProperty(a,i,{enumerable:!1,configurable:!0,writable:!0,value:l})}var Ce=Re("patchMixins"),tt=Re("patchedDefinition");function gt(a,i){for(var l=this,u=arguments.length,p=new Array(u>2?u-2:0),f=2;f<u;f++)p[f-2]=arguments[f];i.locks++;try{var y;return a!=null&&(y=a.apply(this,p)),y}finally{i.locks--,i.locks===0&&i.methods.forEach(function(b){b.apply(l,p)})}}function st(a,i){return function(){for(var l=arguments.length,u=new Array(l),p=0;p<l;p++)u[p]=arguments[p];gt.call.apply(gt,[this,a,i].concat(u))}}function At(a,i,l){var u=function(b,x){var k=b[Ce]=b[Ce]||{},I=k[x]=k[x]||{};return I.locks=I.locks||0,I.methods=I.methods||[],I}(a,i);u.methods.indexOf(l)<0&&u.methods.push(l);var p=Object.getOwnPropertyDescriptor(a,i);if(!p||!p[tt]){var f=a[i],y=jt(a,i,p?p.enumerable:void 0,u,f);Object.defineProperty(a,i,y)}}function jt(a,i,l,u,p){var f,y=st(p,u);return(f={})[tt]=!0,f.get=function(){return y},f.set=function(b){if(this===a)y=st(b,u);else{var x=jt(this,i,l,u,b);Object.defineProperty(this,i,x)}},f.configurable=!0,f.enumerable=l,f}var yt=c.a||"$mobx",Kt=Re("isMobXReactObserver"),je=Re("isUnmounted"),we=Re("skipRender"),Me=Re("isForcingUpdate");function dt(a){var i=a.prototype;if(a[Kt]?zt(i):a[Kt]=!0,i.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(a.__proto__!==v.b)if(i.shouldComponentUpdate){if(i.shouldComponentUpdate!==rn)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else i.shouldComponentUpdate=rn;yn(i,"props"),yn(i,"state");var l=i.render;return i.render=function(){return Et.call(this,l)},At(i,"componentWillUnmount",function(){var u;(u=this.render[yt])===null||u===void 0||u.dispose(),this[je]=!0,!this.render[yt]&&zt(this)}),a}function zt(a){return a.displayName||a.name||a.constructor&&(a.constructor.displayName||a.constructor.name)||"<component>"}function Et(a){var i=this;_e(this,we,!1),_e(this,Me,!1);var l=zt(this),u=a.bind(this),p=!1,f=new c.c(l+".render()",function(){if(!p&&(p=!0,i[je]!==!0)){var b=!0;try{_e(i,Me,!0),i[we]||v.a.prototype.forceUpdate.call(i),b=!1}finally{_e(i,Me,!1),b&&f.dispose()}}});function y(){p=!1;var b=void 0,x=void 0;if(f.track(function(){try{x=Object(c.d)(!1,u)}catch(k){b=k}}),b)throw b;return x}return f.reactComponent=this,y[yt]=f,this.render=y,y.call(this)}function rn(a,i){return this.state!==i||!Be(this.props,a)}function yn(a,i){var l=Re("reactProp_"+i+"_valueHolder"),u=Re("reactProp_"+i+"_atomHolder");function p(){return this[u]||_e(this,u,Object(c.o)("reactive "+i)),this[u]}Object.defineProperty(a,i,{configurable:!0,enumerable:!0,get:function(){var f=!1;return c.f&&c.e&&(f=Object(c.f)(!0)),p.call(this).reportObserved(),c.f&&c.e&&Object(c.e)(f),this[l]},set:function(f){this[Me]||Be(this[l],f)?_e(this,l,f):(_e(this,l,f),_e(this,we,!0),p.call(this).reportChanged(),_e(this,we,!1))}})}var Tn=typeof Symbol=="function"&&Symbol.for,pn=Tn?Symbol.for("react.forward_ref"):typeof v.e=="function"&&Object(v.e)(function(a){return null}).$$typeof,ut=Tn?Symbol.for("react.memo"):typeof v.f=="function"&&Object(v.f)(function(a){return null}).$$typeof;function xn(a){if(a.isMobxInjector,ut&&a.$$typeof===ut)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(pn&&a.$$typeof===pn){var i=a.render;if(typeof i!="function")throw new Error("render property of ForwardRef was not a function");return Object(v.e)(function(){var l=arguments;return Object(v.c)(q,null,function(){return i.apply(void 0,l)})})}return typeof a!="function"||a.prototype&&a.prototype.render||a.isReactClass||Object.prototype.isPrototypeOf.call(v.a,a)?dt(a):C(a)}if(!v.a)throw new Error("mobx-react requires React to be available");if(!c.C)throw new Error("mobx-react requires mobx to be available");var Le=r(0);r(4),r(8),r(2),r(3),r(52),r(6),r(5),r(11),r(37),r(27),r(21),r(20),r(24),r(22),r(25),r(9),r(17),r(23),r(19),r(192),r(156),r(104),r(157),r(158),r(199),r(61);var mn=function(a,i){for(var l=-1,u=a==null?0:a.length,p=Array(u);++l<u;)p[l]=i(a[l],l,a);return p},qn=function(){this.__data__=[],this.size=0},re=function(a,i){return a===i||a!=a&&i!=i},Kn=function(a,i){for(var l=a.length;l--;)if(re(a[l][0],i))return l;return-1},vr=Array.prototype.splice,Gr=function(a){var i=this.__data__,l=Kn(i,a);return!(l<0)&&(l==i.length-1?i.pop():vr.call(i,l,1),--this.size,!0)},eo=function(a){var i=this.__data__,l=Kn(i,a);return l<0?void 0:i[l][1]},Fn=function(a){return Kn(this.__data__,a)>-1},ho=function(a,i){var l=this.__data__,u=Kn(l,a);return u<0?(++this.size,l.push([a,i])):l[u][1]=i,this};function Oe(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Oe.prototype.clear=qn,Oe.prototype.delete=Gr,Oe.prototype.get=eo,Oe.prototype.has=Fn,Oe.prototype.set=ho;var ze=Oe,Ne=function(){this.__data__=new ze,this.size=0},rt=function(a){var i=this.__data__,l=i.delete(a);return this.size=i.size,l},en=function(a){return this.__data__.get(a)},Yt=function(a){return this.__data__.has(a)},kn=r(31),Er=kn.a.Symbol,ni=Object.prototype,yi=ni.hasOwnProperty,Go=ni.toString,Xo=Er?Er.toStringTag:void 0,Sn=function(a){var i=yi.call(a,Xo),l=a[Xo];try{a[Xo]=void 0;var u=!0}catch{}var p=Go.call(a);return u&&(i?a[Xo]=l:delete a[Xo]),p},$n=Object.prototype.toString,Hn=function(a){return $n.call(a)},ir=Er?Er.toStringTag:void 0,Kr=function(a){return a==null?a===void 0?"[object Undefined]":"[object Null]":ir&&ir in Object(a)?Sn(a):Hn(a)},Rr=function(a){var i=typeof a;return a!=null&&(i=="object"||i=="function")},cl,Ua=function(a){if(!Rr(a))return!1;var i=Kr(a);return i=="[object Function]"||i=="[object GeneratorFunction]"||i=="[object AsyncFunction]"||i=="[object Proxy]"},fl=kn.a["__core-js_shared__"],au=(cl=/[^.]+$/.exec(fl&&fl.keys&&fl.keys.IE_PROTO||""))?"Symbol(src)_1."+cl:"",Ud=function(a){return!!au&&au in a},mc=Function.prototype.toString,fa=function(a){if(a!=null){try{return mc.call(a)}catch{}try{return a+""}catch{}}return""},Wu=/^\[object .+?Constructor\]$/,Pn=Function.prototype,Cf=Object.prototype,vo=Pn.toString,gc=Cf.hasOwnProperty,Hi=RegExp("^"+vo.call(gc).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ta=function(a){return!(!Rr(a)||Ud(a))&&(Ua(a)?Hi:Wu).test(fa(a))},Es=function(a,i){return a==null?void 0:a[i]},Ta=function(a,i){var l=Es(a,i);return ta(l)?l:void 0},da=Ta(kn.a,"Map"),Ma=Ta(Object,"create"),_c=function(){this.__data__=Ma?Ma(null):{},this.size=0},bc=function(a){var i=this.has(a)&&delete this.__data__[a];return this.size-=i?1:0,i},Df=Object.prototype.hasOwnProperty,zu=function(a){var i=this.__data__;if(Ma){var l=i[a];return l==="__lodash_hash_undefined__"?void 0:l}return Df.call(i,a)?i[a]:void 0},If=Object.prototype.hasOwnProperty,wc=function(a){var i=this.__data__;return Ma?i[a]!==void 0:If.call(i,a)},Gd=function(a,i){var l=this.__data__;return this.size+=this.has(a)?0:1,l[a]=Ma&&i===void 0?"__lodash_hash_undefined__":i,this};function Rl(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}Rl.prototype.clear=_c,Rl.prototype.delete=bc,Rl.prototype.get=zu,Rl.prototype.has=wc,Rl.prototype.set=Gd;var Lf=Rl,dl=function(){this.size=0,this.__data__={hash:new Lf,map:new(da||ze),string:new Lf}},Ec=function(a){var i=typeof a;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?a!=="__proto__":a===null},Os=function(a,i){var l=a.__data__;return Ec(i)?l[typeof i=="string"?"string":"hash"]:l.map},Oc=function(a){var i=Os(this,a).delete(a);return this.size-=i?1:0,i},xc=function(a){return Os(this,a).get(a)},Vd=function(a){return Os(this,a).has(a)},Ff=function(a,i){var l=Os(this,a),u=l.size;return l.set(a,i),this.size+=l.size==u?0:1,this};function zr(a){var i=-1,l=a==null?0:a.length;for(this.clear();++i<l;){var u=a[i];this.set(u[0],u[1])}}zr.prototype.clear=dl,zr.prototype.delete=Oc,zr.prototype.get=xc,zr.prototype.has=Vd,zr.prototype.set=Ff;var Vr=zr,$f=function(a,i){var l=this.__data__;if(l instanceof ze){var u=l.__data__;if(!da||u.length<199)return u.push([a,i]),this.size=++l.size,this;l=this.__data__=new Vr(u)}return l.set(a,i),this.size=l.size,this};function lu(a){var i=this.__data__=new ze(a);this.size=i.size}lu.prototype.clear=Ne,lu.prototype.delete=rt,lu.prototype.get=en,lu.prototype.has=Yt,lu.prototype.set=$f;var pa=lu,xs=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this},Bf=function(a){return this.__data__.has(a)};function jo(a){var i=-1,l=a==null?0:a.length;for(this.__data__=new Vr;++i<l;)this.add(a[i])}jo.prototype.add=jo.prototype.push=xs,jo.prototype.has=Bf;var jl=jo,Cl=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u;)if(i(a[l],l,a))return!0;return!1},Ss=function(a,i){return a.has(i)},uu=function(a,i,l,u,p,f){var y=1&l,b=a.length,x=i.length;if(b!=x&&!(y&&x>b))return!1;var k=f.get(a),I=f.get(i);if(k&&I)return k==i&&I==a;var H=-1,J=!0,de=2&l?new jl:void 0;for(f.set(a,i),f.set(i,a);++H<b;){var Se=a[H],ke=i[H];if(u)var Ke=y?u(ke,Se,H,i,a,f):u(Se,ke,H,a,i,f);if(Ke!==void 0){if(Ke)continue;J=!1;break}if(de){if(!Cl(i,function(Ze,ht){if(!Ss(de,ht)&&(Se===Ze||p(Se,Ze,l,u,f)))return de.push(ht)})){J=!1;break}}else if(Se!==ke&&!p(Se,ke,l,u,f)){J=!1;break}}return f.delete(a),f.delete(i),J},mi=kn.a.Uint8Array,Sc=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u,p){l[++i]=[p,u]}),l},Uf=function(a){var i=-1,l=Array(a.size);return a.forEach(function(u){l[++i]=u}),l},Ac=Er?Er.prototype:void 0,Ni=Ac?Ac.valueOf:void 0,ri=function(a,i,l,u,p,f,y){switch(l){case"[object DataView]":if(a.byteLength!=i.byteLength||a.byteOffset!=i.byteOffset)return!1;a=a.buffer,i=i.buffer;case"[object ArrayBuffer]":return!(a.byteLength!=i.byteLength||!f(new mi(a),new mi(i)));case"[object Boolean]":case"[object Date]":case"[object Number]":return re(+a,+i);case"[object Error]":return a.name==i.name&&a.message==i.message;case"[object RegExp]":case"[object String]":return a==i+"";case"[object Map]":var b=Sc;case"[object Set]":var x=1&u;if(b||(b=Uf),a.size!=i.size&&!x)return!1;var k=y.get(a);if(k)return k==i;u|=2,y.set(a,i);var I=uu(b(a),b(i),u,p,f,y);return y.delete(a),I;case"[object Symbol]":if(Ni)return Ni.call(a)==Ni.call(i)}return!1},na=function(a,i){for(var l=-1,u=i.length,p=a.length;++l<u;)a[p+l]=i[l];return a},to=Array.isArray,Gf=function(a,i,l){var u=i(a);return to(a)?u:na(u,l(a))},Ri=function(a,i){for(var l=-1,u=a==null?0:a.length,p=0,f=[];++l<u;){var y=a[l];i(y,l,a)&&(f[p++]=y)}return f},Tc=function(){return[]},Vf=Object.prototype.propertyIsEnumerable,ji=Object.getOwnPropertySymbols,Ai=ji?function(a){return a==null?[]:(a=Object(a),Ri(ji(a),function(i){return Vf.call(a,i)}))}:Tc,Mc=function(a,i){for(var l=-1,u=Array(a);++l<a;)u[l]=i(l);return u},Fr=function(a){return a!=null&&typeof a=="object"},oi=function(a){return Fr(a)&&Kr(a)=="[object Arguments]"},As=Object.prototype,Wf=As.hasOwnProperty,Pc=As.propertyIsEnumerable,Ts=oi(function(){return arguments}())?oi:function(a){return Fr(a)&&Wf.call(a,"callee")&&!Pc.call(a,"callee")},Ga=Ts,Ci=r(48),su=/^(?:0|[1-9]\d*)$/,Xi=function(a,i){var l=typeof a;return!!(i=i??9007199254740991)&&(l=="number"||l!="symbol"&&su.test(a))&&a>-1&&a%1==0&&a<i},ha=function(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=9007199254740991},Mr={};Mr["[object Float32Array]"]=Mr["[object Float64Array]"]=Mr["[object Int8Array]"]=Mr["[object Int16Array]"]=Mr["[object Int32Array]"]=Mr["[object Uint8Array]"]=Mr["[object Uint8ClampedArray]"]=Mr["[object Uint16Array]"]=Mr["[object Uint32Array]"]=!0,Mr["[object Arguments]"]=Mr["[object Array]"]=Mr["[object ArrayBuffer]"]=Mr["[object Boolean]"]=Mr["[object DataView]"]=Mr["[object Date]"]=Mr["[object Error]"]=Mr["[object Function]"]=Mr["[object Map]"]=Mr["[object Number]"]=Mr["[object Object]"]=Mr["[object RegExp]"]=Mr["[object Set]"]=Mr["[object String]"]=Mr["[object WeakMap]"]=!1;var Di=function(a){return Fr(a)&&ha(a.length)&&!!Mr[Kr(a)]},Pa=function(a){return function(i){return a(i)}},fi=r(49),cu=fi.a&&fi.a.isTypedArray,Dl=cu?Pa(cu):Di,ka=Object.prototype.hasOwnProperty,uo=function(a,i){var l=to(a),u=!l&&Ga(a),p=!l&&!u&&Object(Ci.a)(a),f=!l&&!u&&!p&&Dl(a),y=l||u||p||f,b=y?Mc(a.length,String):[],x=b.length;for(var k in a)!i&&!ka.call(a,k)||y&&(k=="length"||p&&(k=="offset"||k=="parent")||f&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||Xi(k,x))||b.push(k);return b},Hu=Object.prototype,Va=function(a){var i=a&&a.constructor;return a===(typeof i=="function"&&i.prototype||Hu)},va=function(a,i){return function(l){return a(i(l))}},kc=va(Object.keys,Object),Wd=Object.prototype.hasOwnProperty,Nc=function(a){if(!Va(a))return kc(a);var i=[];for(var l in Object(a))Wd.call(a,l)&&l!="constructor"&&i.push(l);return i},Vo=function(a){return a!=null&&ha(a.length)&&!Ua(a)},Il=function(a){return Vo(a)?uo(a):Nc(a)},Wa=function(a){return Gf(a,Il,Ai)},Yo=Object.prototype.hasOwnProperty,Rc=function(a,i,l,u,p,f){var y=1&l,b=Wa(a),x=b.length;if(x!=Wa(i).length&&!y)return!1;for(var k=x;k--;){var I=b[k];if(!(y?I in i:Yo.call(i,I)))return!1}var H=f.get(a),J=f.get(i);if(H&&J)return H==i&&J==a;var de=!0;f.set(a,i),f.set(i,a);for(var Se=y;++k<x;){var ke=a[I=b[k]],Ke=i[I];if(u)var Ze=y?u(Ke,ke,I,i,a,f):u(ke,Ke,I,a,i,f);if(!(Ze===void 0?ke===Ke||p(ke,Ke,l,u,f):Ze)){de=!1;break}Se||(Se=I=="constructor")}if(de&&!Se){var ht=a.constructor,$t=i.constructor;ht==$t||!("constructor"in a)||!("constructor"in i)||typeof ht=="function"&&ht instanceof ht&&typeof $t=="function"&&$t instanceof $t||(de=!1)}return f.delete(a),f.delete(i),de},ra=Ta(kn.a,"DataView"),ya=Ta(kn.a,"Promise"),Ms=Ta(kn.a,"Set"),Ii=Ta(kn.a,"WeakMap"),Yi="[object Map]",ii="[object Promise]",oa="[object Set]",Ti="[object WeakMap]",it="[object DataView]",Ct=fa(ra),Ft=fa(da),fn=fa(ya),ur=fa(Ms),Pr=fa(Ii),so=Kr;(ra&&so(new ra(new ArrayBuffer(1)))!=it||da&&so(new da)!=Yi||ya&&so(ya.resolve())!=ii||Ms&&so(new Ms)!=oa||Ii&&so(new Ii)!=Ti)&&(so=function(a){var i=Kr(a),l=i=="[object Object]"?a.constructor:void 0,u=l?fa(l):"";if(u)switch(u){case Ct:return it;case Ft:return Yi;case fn:return ii;case ur:return oa;case Pr:return Ti}return i});var T=so,M="[object Arguments]",B="[object Array]",ne="[object Object]",ye=Object.prototype.hasOwnProperty,Ge=function(a,i,l,u,p,f){var y=to(a),b=to(i),x=y?B:T(a),k=b?B:T(i),I=(x=x==M?ne:x)==ne,H=(k=k==M?ne:k)==ne,J=x==k;if(J&&Object(Ci.a)(a)){if(!Object(Ci.a)(i))return!1;y=!0,I=!1}if(J&&!I)return f||(f=new pa),y||Dl(a)?uu(a,i,l,u,p,f):ri(a,i,x,l,u,p,f);if(!(1&l)){var de=I&&ye.call(a,"__wrapped__"),Se=H&&ye.call(i,"__wrapped__");if(de||Se){var ke=de?a.value():a,Ke=Se?i.value():i;return f||(f=new pa),p(ke,Ke,l,u,f)}}return!!J&&(f||(f=new pa),Rc(a,i,l,u,p,f))},pt=function a(i,l,u,p,f){return i===l||(i==null||l==null||!Fr(i)&&!Fr(l)?i!=i&&l!=l:Ge(i,l,u,p,a,f))},Ht=function(a,i,l,u){var p=l.length,f=p,y=!u;if(a==null)return!f;for(a=Object(a);p--;){var b=l[p];if(y&&b[2]?b[1]!==a[b[0]]:!(b[0]in a))return!1}for(;++p<f;){var x=(b=l[p])[0],k=a[x],I=b[1];if(y&&b[2]){if(k===void 0&&!(x in a))return!1}else{var H=new pa;if(u)var J=u(k,I,x,a,i,H);if(!(J===void 0?pt(I,k,3,u,H):J))return!1}}return!0},_n=function(a){return a==a&&!Rr(a)},mr=function(a){for(var i=Il(a),l=i.length;l--;){var u=i[l],p=a[u];i[l]=[u,p,_n(p)]}return i},ln=function(a,i){return function(l){return l!=null&&l[a]===i&&(i!==void 0||a in Object(l))}},Wr=function(a){var i=mr(a);return i.length==1&&i[0][2]?ln(i[0][0],i[0][1]):function(l){return l===a||Ht(l,a,i)}},pr=function(a){return typeof a=="symbol"||Fr(a)&&Kr(a)=="[object Symbol]"},Cr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ia=/^\w*$/,bo=function(a,i){if(to(a))return!1;var l=typeof a;return!(l!="number"&&l!="symbol"&&l!="boolean"&&a!=null&&!pr(a))||ia.test(a)||!Cr.test(a)||i!=null&&a in Object(i)};function qi(a,i){if(typeof a!="function"||i!=null&&typeof i!="function")throw new TypeError("Expected a function");var l=function(){var u=arguments,p=i?i.apply(this,u):u[0],f=l.cache;if(f.has(p))return f.get(p);var y=a.apply(this,u);return l.cache=f.set(p,y)||f,y};return l.cache=new(qi.Cache||Vr),l}qi.Cache=Vr;var pl=qi,hl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ll=/\\(\\)?/g,fu=function(a){var i=pl(a,function(u){return l.size===500&&l.clear(),u}),l=i.cache;return i}(function(a){var i=[];return a.charCodeAt(0)===46&&i.push(""),a.replace(hl,function(l,u,p,f){i.push(p?f.replace(Ll,"$1"):u||l)}),i}),za=Er?Er.prototype:void 0,du=za?za.toString:void 0,qo=function a(i){if(typeof i=="string")return i;if(to(i))return mn(i,a)+"";if(pr(i))return du?du.call(i):"";var l=i+"";return l=="0"&&1/i==-1/0?"-0":l},Fl=function(a){return a==null?"":qo(a)},vl=function(a,i){return to(a)?a:bo(a,i)?[a]:fu(Fl(a))},Ha=function(a){if(typeof a=="string"||pr(a))return a;var i=a+"";return i=="0"&&1/a==-1/0?"-0":i},Xa=function(a,i){for(var l=0,u=(i=vl(i,a)).length;a!=null&&l<u;)a=a[Ha(i[l++])];return l&&l==u?a:void 0},Xu=function(a,i,l){var u=a==null?void 0:Xa(a,i);return u===void 0?l:u},nh=function(a,i){return a!=null&&i in Object(a)},rh=function(a,i,l){for(var u=-1,p=(i=vl(i,a)).length,f=!1;++u<p;){var y=Ha(i[u]);if(!(f=a!=null&&l(a,y)))break;a=a[y]}return f||++u!=p?f:!!(p=a==null?0:a.length)&&ha(p)&&Xi(y,p)&&(to(a)||Ga(a))},zd=function(a,i){return a!=null&&rh(a,i,nh)},jc=function(a,i){return bo(a)&&_n(i)?ln(Ha(a),i):function(l){var u=Xu(l,a);return u===void 0&&u===i?zd(l,a):pt(i,u,3)}},Yu=function(a){return a},zf=function(a){return function(i){return i==null?void 0:i[a]}},oh=function(a){return function(i){return Xa(i,a)}},qu=function(a){return bo(a)?zf(Ha(a)):oh(a)},Cc=function(a){return typeof a=="function"?a:a==null?Yu:typeof a=="object"?to(a)?jc(a[0],a[1]):Wr(a):qu(a)},Hf=function(a){return function(i,l,u){for(var p=-1,f=Object(i),y=u(i),b=y.length;b--;){var x=y[a?b:++p];if(l(f[x],x,f)===!1)break}return i}}(),Co=function(a,i){return function(l,u){if(l==null)return l;if(!Vo(l))return a(l,u);for(var p=l.length,f=i?p:-1,y=Object(l);(i?f--:++f<p)&&u(y[f],f,y)!==!1;);return l}}(function(a,i){return a&&Hf(a,i,Il)}),Li=function(a,i){var l=-1,u=Vo(a)?Array(a.length):[];return Co(a,function(p,f,y){u[++l]=i(p,f,y)}),u},Xf=function(a,i){return(to(a)?mn:Li)(a,Cc(i))};Object(c.n)({isolateGlobalState:!0});var Yf=function(){try{var a=Ta(Object,"defineProperty");return a({},"",{}),a}catch{}}(),Ps=function(a,i,l){i=="__proto__"&&Yf?Yf(a,i,{configurable:!0,enumerable:!0,value:l,writable:!0}):a[i]=l},Vv=Object.prototype.hasOwnProperty,ks=function(a,i,l){var u=a[i];Vv.call(a,i)&&re(u,l)&&(l!==void 0||i in a)||Ps(a,i,l)},yl=function(a,i,l,u){var p=!l;l||(l={});for(var f=-1,y=i.length;++f<y;){var b=i[f],x=u?u(l[b],a[b],b,l,a):void 0;x===void 0&&(x=a[b]),p?Ps(l,b,x):ks(l,b,x)}return l},Dc=function(a,i,l){switch(l.length){case 0:return a.call(i);case 1:return a.call(i,l[0]);case 2:return a.call(i,l[0],l[1]);case 3:return a.call(i,l[0],l[1],l[2])}return a.apply(i,l)},Ku=Math.max,pu=function(a,i,l){return i=Ku(i===void 0?a.length-1:i,0),function(){for(var u=arguments,p=-1,f=Ku(u.length-i,0),y=Array(f);++p<f;)y[p]=u[i+p];p=-1;for(var b=Array(i+1);++p<i;)b[p]=u[p];return b[i]=l(y),Dc(a,this,b)}},Ns=function(a){return function(){return a}},Ic=Yf?function(a,i){return Yf(a,"toString",{configurable:!0,enumerable:!1,value:Ns(i),writable:!0})}:Yu,hu=Date.now,Wv=function(a){var i=0,l=0;return function(){var u=hu(),p=16-(u-l);if(l=u,p>0){if(++i>=800)return arguments[0]}else i=0;return a.apply(void 0,arguments)}},Lc=Wv(Ic),zv=function(a,i){return Lc(pu(a,i,Yu),a+"")},Hv=function(a,i,l){if(!Rr(l))return!1;var u=typeof i;return!!(u=="number"?Vo(l)&&Xi(i,l.length):u=="string"&&i in l)&&re(l[i],a)},ih=function(a){return zv(function(i,l){var u=-1,p=l.length,f=p>1?l[p-1]:void 0,y=p>2?l[2]:void 0;for(f=a.length>3&&typeof f=="function"?(p--,f):void 0,y&&Hv(l[0],l[1],y)&&(f=p<3?void 0:f,p=1),i=Object(i);++u<p;){var b=l[u];b&&a(i,b,u,f)}return i})},qf=Object.prototype.hasOwnProperty,Mi=ih(function(a,i){if(Va(i)||Vo(i))yl(i,Il(i),a);else for(var l in i)qf.call(i,l)&&ks(a,l,i[l])}),ah=function(a,i,l,u){if(!Rr(a))return a;for(var p=-1,f=(i=vl(i,a)).length,y=f-1,b=a;b!=null&&++p<f;){var x=Ha(i[p]),k=l;if(x==="__proto__"||x==="constructor"||x==="prototype")return a;if(p!=y){var I=b[x];(k=u?u(I,x,b):void 0)===void 0&&(k=Rr(I)?I:Xi(i[p+1])?[]:{})}ks(b,x,k),b=b[x]}return a},oe=function(a,i,l){for(var u=-1,p=i.length,f={};++u<p;){var y=i[u],b=Xa(a,y);l(b,y)&&ah(f,vl(y,a),b)}return f},Zu=function(a,i){return oe(a,i,function(l,u){return zd(a,u)})},$l=Er?Er.isConcatSpreadable:void 0,Na=function(a){return to(a)||Ga(a)||!!($l&&a&&a[$l])},kr=function a(i,l,u,p,f){var y=-1,b=i.length;for(u||(u=Na),f||(f=[]);++y<b;){var x=i[y];l>0&&u(x)?l>1?a(x,l-1,u,p,f):na(f,x):p||(f[f.length]=x)}return f},gi=function(a){return a!=null&&a.length?kr(a,1):[]},$r,Ya,Bl,ma,Kf,Zf,Hd,lh,Ul,Do,Rs,Xd,Gl,qa,Fc,vu,ga,Yd,qd,Ka=function(a){return Lc(pu(a,void 0,gi),a+"")}(function(a,i){return a==null?{}:Zu(a,i)});function yo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Kd(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Io(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Hr,Ko,xr,io,Nn,ao,$c={stopZoomGraph:!1,stopScrollGraph:!1,stopMoveGraph:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,adjustNodePosition:!1,hideAnchors:!0,allowRotation:!1,nodeSelectedOutline:!0,nodeTextEdit:!1,edgeTextEdit:!1,nodeTextDraggable:!1,edgeTextDraggable:!1},ml=["isSilentMode","stopZoomGraph","stopScrollGraph","stopMoveGraph","adjustEdge","adjustEdgeMiddle","adjustEdgeStartAndEnd","adjustNodePosition","hideAnchors","allowRotation","hoverOutline","nodeSelectedOutline","edgeSelectedOutline","nodeTextEdit","edgeTextEdit","nodeTextDraggable","edgeTextDraggable","multipleSelectKey","autoExpand"],Jf=(Ya=Io(($r=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),yo(this,"isSilentMode",Ya,this),yo(this,"stopZoomGraph",Bl,this),yo(this,"stopScrollGraph",ma,this),yo(this,"stopMoveGraph",Kf,this),yo(this,"adjustEdge",Zf,this),yo(this,"adjustEdgeMiddle",Hd,this),yo(this,"adjustEdgeStartAndEnd",lh,this),yo(this,"adjustNodePosition",Ul,this),yo(this,"hideAnchors",Do,this),yo(this,"allowRotation",Rs,this),yo(this,"hoverOutline",Xd,this),yo(this,"nodeSelectedOutline",Gl,this),yo(this,"edgeSelectedOutline",qa,this),yo(this,"nodeTextEdit",Fc,this),yo(this,"edgeTextEdit",vu,this),yo(this,"nodeTextDraggable",ga,this),yo(this,"edgeTextDraggable",Yd,this),yo(this,"autoExpand",qd,this),Kd(this,"multipleSelectKey",""),Kd(this,"defaultConfig",{}),Mi(this,this.getConfigDetail(u))}var i,l;return i=a,(l=[{key:"updateEditConfig",value:function(u){var p=this.getConfigDetail(u);Mi(this,p)}},{key:"getConfigDetail",value:function(u){var p=u.isSilentMode,f=u.textEdit,y={};if(p===!1&&Mi(y,this.defaultConfig),p===!0&&p!==this.isSilentMode){var b=Ka($c,ml);this.defaultConfig={stopZoomGraph:this.stopZoomGraph,stopScrollGraph:this.stopScrollGraph,stopMoveGraph:this.stopMoveGraph,adjustEdge:this.adjustEdge,adjustEdgeMiddle:this.adjustEdgeMiddle,adjustEdgeStartAndEnd:this.adjustEdgeStartAndEnd,adjustNodePosition:this.adjustNodePosition,hideAnchors:this.hideAnchors,allowRotation:this.allowRotation,hoverOutline:this.hoverOutline,nodeSelectedOutline:this.nodeSelectedOutline,edgeSelectedOutline:this.edgeSelectedOutline,nodeTextEdit:this.nodeTextEdit,edgeTextEdit:this.edgeTextEdit,nodeTextDraggable:this.nodeTextDraggable,edgeTextDraggable:this.edgeTextDraggable,autoExpand:this.autoExpand},Mi(y,b)}f===!1&&Mi(y,{nodeTextEdit:!1,edgeTextEdit:!1});var x=Ka(u,ml);return Mi(y,x)}},{key:"getConfig",value:function(){return Ka(this,ml)}}])&&uh(i.prototype,l),a}()).prototype,"isSilentMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bl=Io($r.prototype,"stopZoomGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ma=Io($r.prototype,"stopScrollGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Kf=Io($r.prototype,"stopMoveGraph",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Zf=Io($r.prototype,"adjustEdge",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Hd=Io($r.prototype,"adjustEdgeMiddle",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lh=Io($r.prototype,"adjustEdgeStartAndEnd",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ul=Io($r.prototype,"adjustNodePosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Do=Io($r.prototype,"hideAnchors",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rs=Io($r.prototype,"allowRotation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Xd=Io($r.prototype,"hoverOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Gl=Io($r.prototype,"nodeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),qa=Io($r.prototype,"edgeSelectedOutline",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Fc=Io($r.prototype,"nodeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vu=Io($r.prototype,"edgeTextEdit",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ga=Io($r.prototype,"nodeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yd=Io($r.prototype,"edgeTextDraggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qd=Io($r.prototype,"autoExpand",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Io($r.prototype,"updateEditConfig",[c.k],Object.getOwnPropertyDescriptor($r.prototype,"updateEditConfig"),$r.prototype),$r);r(65),r(66),function(a){a[a.DEFAULT=1]="DEFAULT",a[a.TEXT_EDIT=2]="TEXT_EDIT",a[a.SHOW_MENU=3]="SHOW_MENU",a[a.ALLOW_CONNECT=4]="ALLOW_CONNECT",a[a.NOT_ALLOW_CONNECT=5]="NOT_ALLOW_CONNECT"}(Hr||(Hr={})),function(a){a.KEY="logic-flow",a.NODE_NAME="lf-node",a.EDGE_NAME="lf-edge"}(Ko||(Ko={})),function(a){a.NODE="node",a.CIRCLE_NODE="circle-node",a.POLYGON_NODE="polygon-node",a.RECT_NODE="rect-node",a.TEXT_NODE="text-node",a.ELLIPSE_NODE="ellipse-node",a.DIAMOND_NODE="diamond-node",a.HTML_NODE="html-node",a.EDGE="edge",a.LINE_EDGE="line-edge",a.POLYLINE_EDGE="polyline-edge",a.BEZIER_EDGE="bezier-edge",a.GRAPH="graph"}(xr||(xr={})),function(a){a.NODE="node",a.EDGE="edge",a.GRAPH="graph"}(io||(io={})),function(a){a.ELEMENT_CLICK="element:click",a.NODE_CLICK="node:click",a.NODE_DBCLICK="node:dbclick",a.NODE_DELETE="node:delete",a.NODE_ADD="node:add",a.NODE_GROUP_COPY="node:group-copy-add",a.NODE_DND_ADD="node:dnd-add",a.NODE_DND_DRAG="node:dnd-drag",a.NODE_MOUSEDOWN="node:mousedown",a.NODE_DRAGSTART="node:dragstart",a.NODE_DRAG="node:drag",a.NODE_DROP="node:drop",a.NODE_MOUSEUP="node:mouseup",a.NODE_MOUSEMOVE="node:mousemove",a.NODE_MOUSEENTER="node:mouseenter",a.NODE_MOUSELEAVE="node:mouseleave",a.NODE_CONTEXTMENU="node:contextmenu",a.NODE_ROTATE="node:rotate",a.EDGE_DELETE="edge:delete",a.EDGE_ADD="edge:add",a.EDGE_CLICK="edge:click",a.EDGE_DBCLICK="edge:dbclick",a.EDGE_MOUSEENTER="edge:mouseenter",a.EDGE_MOUSELEAVE="edge:mouseleave",a.EDGE_CONTEXTMENU="edge:contextmenu",a.EDGE_ADJUST="edge:adjust",a.EDGE_EXCHANGE_NODE="edge:exchange-node",a.ANCHOR_DRAGSTART="anchor:dragstart",a.ANCHOR_DRAG="anchor:drag",a.ANCHOR_DROP="anchor:drop",a.ANCHOR_DRAGEND="anchor:dragend",a.ADJUST_POINT_MOUSEDOWN="adjustPoint:mousedown",a.ADJUST_POINT_MOUSEUP="adjustPoint:mouseup",a.ADJUST_POINT_MOUSEMOVE="adjustPoint:mousemove",a.ADJUST_POINT_DRAGSTART="adjustPoint:dragstart",a.ADJUST_POINT_DRAG="adjustPoint:drag",a.ADJUST_POINT_DROP="adjustPoint:drop",a.ADJUST_POINT_DRAGEND="adjustPoint:dragend",a.BLANK_MOUSEDOWN="blank:mousedown",a.BLANK_DRAGSTART="blank:dragstart",a.BLANK_DRAG="blank:drag",a.BLANK_DROP="blank:drop",a.BLANK_MOUSEMOVE="blank:mousemove",a.BLANK_MOUSEUP="blank:mouseup",a.BLANK_CLICK="blank:click",a.BLANK_CONTEXTMENU="blank:contextmenu",a.SELECTION_MOUSEDOWN="selection:mousedown",a.SELECTION_DRAGSTART="selection:dragstart",a.SELECTION_DRAG="selection:drag",a.SELECTION_DROP="selection:drop",a.SELECTION_MOUSEMOVE="selection:mousemove",a.SELECTION_MOUSEUP="selection:mouseup",a.SELECTION_CONTEXTMENU="selection:contextmenu",a.CONNECTION_NOT_ALLOWED="connection:not-allowed",a.HISTORY_CHANGE="history:change",a.TEXT_UPDATE="text:update",a.GRAPH_TRANSFORM="graph:transform",a.GRAPH_RENDERED="graph:rendered"}(Nn||(Nn={})),function(a){a.HORIZONTAL="horizontal",a.VERTICAL="vertical"}(ao||(ao={}));var wo,So,Zd,Jd,Bc,Fi,Qf,js,Ra;function yu(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Vl(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Vl(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vl(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ja(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function gl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _a(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(function(a){a[a.DEFAULT=0]="DEFAULT",a[a.INCREASE=1]="INCREASE"})(wo||(wo={}));var Qd={false:[-1/0,-1/0,1/0,1/0],true:[0,0,0,0],vertical:[-1/0,0,1/0,0],horizontal:[0,-1/0,0,1/0]},ep=(So=function(){function a(u,p){(function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")})(this,a),gl(this,"MINI_SCALE_SIZE",.2),gl(this,"MAX_SCALE_SIZE",16),ja(this,"SCALE_X",Zd,this),ja(this,"SKEW_Y",Jd,this),ja(this,"SKEW_X",Bc,this),ja(this,"SCALE_Y",Fi,this),ja(this,"TRANSLATE_X",Qf,this),ja(this,"TRANSLATE_Y",js,this),ja(this,"ZOOM_SIZE",Ra,this),gl(this,"eventCenter",void 0),gl(this,"translateLimitMinX",void 0),gl(this,"translateLimitMinY",void 0),gl(this,"translateLimitMaxX",void 0),gl(this,"translateLimitMaxY",void 0),this.eventCenter=u;var f=p.stopMoveGraph,y=f!==void 0&&f;this.updateTranslateLimits(y)}var i,l;return i=a,l=[{key:"setZoomMiniSize",value:function(u){this.MINI_SCALE_SIZE=u}},{key:"setZoomMaxSize",value:function(u){this.MAX_SCALE_SIZE=u}},{key:"HtmlPointToCanvasPoint",value:function(u){var p=yu(u,2),f=p[0],y=p[1];return[(f-this.TRANSLATE_X)/this.SCALE_X,(y-this.TRANSLATE_Y)/this.SCALE_Y]}},{key:"CanvasPointToHtmlPoint",value:function(u){var p=yu(u,2),f=p[0],y=p[1];return[f*this.SCALE_X+this.TRANSLATE_X,y*this.SCALE_Y+this.TRANSLATE_Y]}},{key:"moveCanvasPointByHtml",value:function(u,p,f){var y=yu(u,2),b=y[0],x=y[1];return[b+p/this.SCALE_X,x+f/this.SCALE_Y]}},{key:"fixDeltaXY",value:function(u,p){return[u/this.SCALE_X,p/this.SCALE_Y]}},{key:"getTransformStyle",value:function(){var u=[this.SCALE_X,this.SKEW_Y,this.SKEW_X,this.SCALE_Y,this.TRANSLATE_X,this.TRANSLATE_Y].join(",");return{transform:"matrix(".concat(u,")")}}},{key:"zoom",value:function(){var u=arguments.length>0&&arguments[0]!==void 0&&arguments[0],p=arguments.length>1?arguments[1]:void 0,f=this.SCALE_X,y=this.SCALE_Y;return u===!0?(f+=this.ZOOM_SIZE,y+=this.ZOOM_SIZE):u===!1?(f-=this.ZOOM_SIZE,y-=this.ZOOM_SIZE):typeof u=="number"&&(f=u,y=u),f<this.MINI_SCALE_SIZE||f>this.MAX_SCALE_SIZE||(p&&(this.TRANSLATE_X-=(f-this.SCALE_X)*p[0],this.TRANSLATE_Y-=(y-this.SCALE_Y)*p[1]),this.SCALE_X=f,this.SCALE_Y=y,this.emitGraphTransform("zoom")),"".concat(100*this.SCALE_X,"%")}},{key:"emitGraphTransform",value:function(u){this.eventCenter.emit(Nn.GRAPH_TRANSFORM,{type:u,transform:{SCALE_X:this.SCALE_X,SKEW_Y:this.SKEW_Y,SKEW_X:this.SKEW_X,SCALE_Y:this.SCALE_Y,TRANSLATE_X:this.TRANSLATE_X,TRANSLATE_Y:this.TRANSLATE_Y}})}},{key:"resetZoom",value:function(){this.SCALE_X=1,this.SCALE_Y=1,this.emitGraphTransform("resetZoom")}},{key:"translate",value:function(u,p){this.TRANSLATE_X+u<=this.translateLimitMaxX&&this.TRANSLATE_X+u>=this.translateLimitMinX&&(this.TRANSLATE_X+=u),this.TRANSLATE_Y+p<=this.translateLimitMaxY&&this.TRANSLATE_Y+p>=this.translateLimitMinY&&(this.TRANSLATE_Y+=p),this.emitGraphTransform("translate")}},{key:"focusOn",value:function(u,p,f,y){var b=yu(this.CanvasPointToHtmlPoint([u,p]),2),x=f/2-b[0],k=y/2-b[1];this.TRANSLATE_X+=x,this.TRANSLATE_Y+=k,this.emitGraphTransform("focusOn")}},{key:"updateTranslateLimits",value:function(u){var p=yu(Array.isArray(u)&&u.length===4?u:Qd[u.toString()],4);this.translateLimitMinX=p[0],this.translateLimitMinY=p[1],this.translateLimitMaxX=p[2],this.translateLimitMaxY=p[3]}}],l&&sh(i.prototype,l),a}(),Zd=_a(So.prototype,"SCALE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Jd=_a(So.prototype,"SKEW_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Bc=_a(So.prototype,"SKEW_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Fi=_a(So.prototype,"SCALE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Qf=_a(So.prototype,"TRANSLATE_X",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),js=_a(So.prototype,"TRANSLATE_Y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ra=_a(So.prototype,"ZOOM_SIZE",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return .04}}),_a(So.prototype,"zoom",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"zoom"),So.prototype),_a(So.prototype,"resetZoom",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"resetZoom"),So.prototype),_a(So.prototype,"translate",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"translate"),So.prototype),_a(So.prototype,"focusOn",[c.k],Object.getOwnPropertyDescriptor(So.prototype,"focusOn"),So.prototype),So),ed=function(a,i){for(var l=-1,u=a==null?0:a.length;++l<u&&i(a[l],l,a)!==!1;);return a},ch=function(a,i){return a&&yl(i,Il(i),a)},fh=function(a){var i=[];if(a!=null)for(var l in Object(a))i.push(l);return i},dh=Object.prototype.hasOwnProperty,tp=function(a){if(!Rr(a))return fh(a);var i=Va(a),l=[];for(var u in a)(u!="constructor"||!i&&dh.call(a,u))&&l.push(u);return l},Cs=function(a){return Vo(a)?uo(a,!0):tp(a)},np=function(a,i){return a&&yl(i,Cs(i),a)},Uc=r(107),Sr=function(a,i){var l=-1,u=a.length;for(i||(i=Array(u));++l<u;)i[l]=a[l];return i},Xv=function(a,i){return yl(a,Ai(a),i)},rp=va(Object.getPrototypeOf,Object),mu=Object.getOwnPropertySymbols?function(a){for(var i=[];a;)na(i,Ai(a)),a=rp(a);return i}:Tc,Gc=function(a,i){return yl(a,mu(a),i)},Yv=function(a){return Gf(a,Cs,mu)},qv=Object.prototype.hasOwnProperty,Ca=function(a){var i=a.length,l=new a.constructor(i);return i&&typeof a[0]=="string"&&qv.call(a,"index")&&(l.index=a.index,l.input=a.input),l},op=function(a){var i=new a.constructor(a.byteLength);return new mi(i).set(new mi(a)),i},td=function(a,i){var l=i?op(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.byteLength)},nd=/\w*$/,ph=function(a){var i=new a.constructor(a.source,nd.exec(a));return i.lastIndex=a.lastIndex,i},ip=Er?Er.prototype:void 0,aa=ip?ip.valueOf:void 0,gu=function(a){return aa?Object(aa.call(a)):{}},rd=function(a,i){var l=i?op(a.buffer):a.buffer;return new a.constructor(l,a.byteOffset,a.length)},Ju=function(a,i,l){var u=a.constructor;switch(i){case"[object ArrayBuffer]":return op(a);case"[object Boolean]":case"[object Date]":return new u(+a);case"[object DataView]":return td(a,l);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return rd(a,l);case"[object Map]":case"[object Set]":return new u;case"[object Number]":case"[object String]":return new u(a);case"[object RegExp]":return ph(a);case"[object Symbol]":return gu(a)}},Vc=Object.create,hh=function(){function a(){}return function(i){if(!Rr(i))return{};if(Vc)return Vc(i);a.prototype=i;var l=new a;return a.prototype=void 0,l}}(),Wc=function(a){return typeof a.constructor!="function"||Va(a)?{}:hh(rp(a))},od=function(a){return Fr(a)&&T(a)=="[object Map]"},id=fi.a&&fi.a.isMap,ad=id?Pa(id):od,_u=function(a){return Fr(a)&&T(a)=="[object Set]"},vh=fi.a&&fi.a.isSet,bu=vh?Pa(vh):_u,ap="[object Arguments]",lp="[object Function]",Qu="[object Object]",co={};co[ap]=co["[object Array]"]=co["[object ArrayBuffer]"]=co["[object DataView]"]=co["[object Boolean]"]=co["[object Date]"]=co["[object Float32Array]"]=co["[object Float64Array]"]=co["[object Int8Array]"]=co["[object Int16Array]"]=co["[object Int32Array]"]=co["[object Map]"]=co["[object Number]"]=co["[object Object]"]=co["[object RegExp]"]=co["[object Set]"]=co["[object String]"]=co["[object Symbol]"]=co["[object Uint8Array]"]=co["[object Uint8ClampedArray]"]=co["[object Uint16Array]"]=co["[object Uint32Array]"]=!0,co["[object Error]"]=co[lp]=co["[object WeakMap]"]=!1;var zc=function a(i,l,u,p,f,y){var b,x=1&l,k=2&l,I=4&l;if(u&&(b=f?u(i,p,f,y):u(i)),b!==void 0)return b;if(!Rr(i))return i;var H=to(i);if(H){if(b=Ca(i),!x)return Sr(i,b)}else{var J=T(i),de=J==lp||J=="[object GeneratorFunction]";if(Object(Ci.a)(i))return Object(Uc.a)(i,x);if(J==Qu||J==ap||de&&!f){if(b=k||de?{}:Wc(i),!x)return k?Gc(i,np(b,i)):Xv(i,ch(b,i))}else{if(!co[J])return f?i:{};b=Ju(i,J,x)}}y||(y=new pa);var Se=y.get(i);if(Se)return Se;y.set(i,b),bu(i)?i.forEach(function(Ke){b.add(a(Ke,l,u,Ke,i,y))}):ad(i)&&i.forEach(function(Ke,Ze){b.set(Ze,a(Ke,l,u,Ze,i,y))});var ke=H?void 0:(I?k?Yv:Wa:k?Cs:Il)(i);return ed(ke||i,function(Ke,Ze){ke&&(Ke=i[Ze=Ke]),ks(b,Ze,a(Ke,l,u,Ze,i,y))}),b},Eo=function(a){return zc(a,5)},Wl=function(a,i,l){(l!==void 0&&!re(a[i],l)||l===void 0&&!(i in a))&&Ps(a,i,l)},di=function(a){return Fr(a)&&Vo(a)},_l=Function.prototype,zl=Object.prototype,wu=_l.toString,es=zl.hasOwnProperty,ld=wu.call(Object),ud=function(a){if(!Fr(a)||Kr(a)!="[object Object]")return!1;var i=rp(a);if(i===null)return!0;var l=es.call(i,"constructor")&&i.constructor;return typeof l=="function"&&l instanceof l&&wu.call(l)==ld},bl=function(a,i){if((i!=="constructor"||typeof a[i]!="function")&&i!="__proto__")return a[i]},ts=function(a){return yl(a,Cs(a))},sd=function(a,i,l,u,p,f,y){var b=bl(a,l),x=bl(i,l),k=y.get(x);if(k)Wl(a,l,k);else{var I=f?f(b,x,l+"",a,i,y):void 0,H=I===void 0;if(H){var J=to(x),de=!J&&Object(Ci.a)(x),Se=!J&&!de&&Dl(x);I=x,J||de||Se?to(b)?I=b:di(b)?I=Sr(b):de?(H=!1,I=Object(Uc.a)(x,!0)):Se?(H=!1,I=rd(x,!0)):I=[]:ud(x)||Ga(x)?(I=b,Ga(b)?I=ts(b):Rr(b)&&!Ua(b)||(I=Wc(x))):H=!1}H&&(y.set(x,I),p(I,x,u,f,y),y.delete(x)),Wl(a,l,I)}},Hc=function a(i,l,u,p,f){i!==l&&Hf(l,function(y,b){if(f||(f=new pa),Rr(y))sd(i,l,b,u,a,p,f);else{var x=p?p(bl(i,b),y,b+"",i,l,f):void 0;x===void 0&&(x=y),Wl(i,b,x)}},Cs)},Eu=ih(function(a,i,l){Hc(a,i,l)}),up={baseNode:{fill:"#FFFFFF",stroke:"#000000",strokeWidth:2},baseEdge:{stroke:"#000000",strokeWidth:2},rect:{},circle:{},diamond:{},ellipse:{},polygon:{},text:{color:"#000000",stroke:"none",fontSize:12,background:{fill:"transparent"}},anchor:{stroke:"#000000",fill:"#FFFFFF",r:4,hover:{fill:"#949494",fillOpacity:.5,stroke:"#949494",r:10}},nodeText:{color:"#000000",overflowMode:"default",lineHeight:1.2,fontSize:12},edgeText:{textWidth:100,overflowMode:"default",fontSize:12,background:{fill:"#FFFFFF"}},line:{},polyline:{},bezier:{fill:"none",adjustLine:{stroke:"#949494"},adjustAnchor:{r:4,fill:"#949494",stroke:"#949494",fillOpacity:1}},arrow:{offset:10,verticalLength:5},anchorLine:{stroke:"#000000",strokeWidth:2,strokeDasharray:"3,2"},snapline:{stroke:"#949494",strokeWidth:1},edgeAdjust:{r:4,fill:"#FFFFFF",stroke:"#949494",strokeWidth:2},outline:{fill:"transparent",stroke:"#949494",strokeDasharray:"3,3",hover:{stroke:"#949494"}},edgeAnimation:{stroke:"red",strokeDasharray:"10 10",strokeDashoffset:"100%",animationName:"lf_animate_dash",animationDuration:"20s",animationIterationCount:"infinite",animationTimingFunction:"linear",animationDirection:"normal"},rotateControl:{stroke:"#000",fill:"#fff",strokeWidth:1.5}},Ds=function(a){var i=Eo(up);return a&&(i=Eu(i,a)),i};r(82),r(166);function cd(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}var Xc=function(){function a(){var u,p,f;(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),f={},(p="_events")in(u=this)?Object.defineProperty(u,p,{value:f,enumerable:!0,configurable:!0,writable:!0}):u[p]=f}var i,l;return i=a,(l=[{key:"on",value:function(u,p,f){var y=this;return u==null||u.split(",").forEach(function(b){b=b.trim(),y._events[b]||(y._events[b]=[]),y._events[b].push({callback:p,once:!!f})}),this}},{key:"once",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){return y=y.trim(),f.on(y,p,!0)})}},{key:"emit",value:function(u,p){var f=this;u==null||u.split(",").forEach(function(y){var b=f._events[y]||[],x=f._events["*"]||[],k=function(I){for(var H=I.length,J=0;J<H;J++)if(I[J]){var de=I[J],Se=de.callback;de.once&&(I.splice(J,1),I.length===0&&delete f._events[y],H--,J--),Se.apply(f,[p])}};k(b),k(x)})}},{key:"off",value:function(u,p){var f=this;return u||(this._events={}),u.split(",").forEach(function(y){if(p){for(var b=f._events[y]||[],x=b.length,k=0;k<x;k++)b[k].callback===p&&(b.splice(k,1),x--,k--);b.length===0&&delete f._events[y]}else delete f._events[y]}),this}},{key:"getEvents",value:function(){return this._events}}])&&cd(i.prototype,l),a}();function wl(a,i){return i*Math.round(a/i)||a}function Is(a,i){return a%i}function Yc(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return qc(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return qc(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function qc(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var fd=function(a,i,l){var u=Yc(a,2),p=u[0],f=u[1],y=Yc(i,2),b=y[0],x=y[1],k=Yc(l,2),I=k[0],H=k[1];return p>b&&p<I&&f>x&&f<H},dd=function(a,i){var l=!1;switch(i.multipleSelectKey){case"meta":l=a.metaKey;break;case"alt":l=a.altKey;break;case"shift":l=a.shiftKey;break;case"ctrl":l=a.ctrlKey;break;default:l=!1}return l};r(167),r(126),r(83),r(29),r(12),r(13),r(14),r(47);var Za=function(a){return function(i,l,u){var p=Object(i);if(!Vo(i)){var f=Cc(l);i=Il(i),l=function(b){return f(p[b],b,p)}}var y=a(i,l,u);return y>-1?p[f?i[y]:y]:void 0}},sp=function(a,i,l,u){for(var p=a.length,f=l+(u?1:-1);u?f--:++f<p;)if(i(a[f],f,a))return f;return-1},cp=/\s/,fp=function(a){for(var i=a.length;i--&&cp.test(a.charAt(i)););return i},pd=/^\s+/,El=function(a){return a&&a.slice(0,fp(a)+1).replace(pd,"")},Kc=/^[-+]0x[0-9a-f]+$/i,hd=/^0b[01]+$/i,vd=/^0o[0-7]+$/i,Ls=parseInt,Hl=function(a){if(typeof a=="number")return a;if(pr(a))return NaN;if(Rr(a)){var i=typeof a.valueOf=="function"?a.valueOf():a;a=Rr(i)?i+"":i}if(typeof a!="string")return a===0?a:+a;a=El(a);var l=hd.test(a);return l||vd.test(a)?Ls(a.slice(2),l?2:8):Kc.test(a)?NaN:+a},Jn=1/0,Fs=function(a){return a?(a=Hl(a))===Jn||a===-1/0?17976931348623157e292*(a<0?-1:1):a==a?a:0:a===0?a:0},Zc=function(a){var i=Fs(a),l=i%1;return i==i?l?i-l:i:0},Ja=Math.max,$s,Bs=Za(function(a,i,l){var u=a==null?0:a.length;if(!u)return-1;var p=l==null?0:Zc(l);return p<0&&(p=Ja(u+p,0)),sp(a,Cc(i),p)}),Ao=new Uint8Array(16);function Us(){if(!$s&&!($s=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $s(Ao)}for(var Ou=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Jc=function(a){return typeof a=="string"&&Ou.test(a)},no=[],Lo=0;Lo<256;++Lo)no.push((Lo+256).toString(16).substr(1));var Xl=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(no[a[i+0]]+no[a[i+1]]+no[a[i+2]]+no[a[i+3]]+"-"+no[a[i+4]]+no[a[i+5]]+"-"+no[a[i+6]]+no[a[i+7]]+"-"+no[a[i+8]]+no[a[i+9]]+"-"+no[a[i+10]]+no[a[i+11]]+no[a[i+12]]+no[a[i+13]]+no[a[i+14]]+no[a[i+15]]).toLowerCase();if(!Jc(l))throw TypeError("Stringified UUID is invalid");return l},Qa=function(a,i,l){var u=(a=a||{}).random||(a.rng||Us)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,i){l=l||0;for(var p=0;p<16;++p)i[l+p]=u[p];return i}return Xl(u)},el=function(){return Qa()},xu=function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=a.nodes.reduce(function(u,p){return u[p.id]=i+Qa(),p.id=u[p.id],u},{});return a.edges.forEach(function(u){u.id=i+Qa(),u.sourceNodeId=l[u.sourceNodeId],u.targetNodeId=l[u.targetNodeId]}),a},Ol=(r(105),r(127),r(207),function(a,i,l){var u=a.x,p=a.y,f=i.x,y=i.y,b=l.x,x=l.y,k=(x-y)/(b-f),I=y-k*f;return u>=f&&u<=b&&p>=y&&p<=x&&Math.abs(p-k*u+I)<Number.EPSILON});function Gs(a){return Gs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gs(a)}function Qc(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Su(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Qc(Object(l),!0).forEach(function(u){Vs(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Qc(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Vs(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Nt,dp,ns,ef,yd,pp,xl,hp,tl,Au,md,yh,mh,gh,vp,yp,mp,gp,_h,bh,wh,$i=function(a){return a.anchors},rs=function(a,i){for(var l,u=i.nodes,p=u.length-1;p>=0;p--){var f=u[p];if(gd(a,f)){var y=f.getTargetAnchor(a);if(y){var b={node:f,anchorIndex:y.index,anchor:y.anchor};l&&!tf(f,l.node,i)||(l=b)}}}return l},tf=function(a,i,l){return a.zIndex>i.zIndex||l.nodesMap[a.id].index>l.nodesMap[i.id].index},la=function(a,i,l,u){return Math.hypot(a-l,i-u)},Da=function(a,i){var l=!1,u=Bi(i);return a.x>=u.minX-0&&a.x<=u.maxX+0&&a.y>=u.minY-0&&a.y<=u.maxY+0&&(l=!0),l},gd=function(a,i){var l=!1,u=Bi(i);return a.x>=u.minX-5&&a.x<=u.maxX+5&&a.y>=u.minY-5&&a.y<=u.maxY+5&&(l=!0),l},Bi=function(a){var i=a.x,l=a.y,u=a.width,p=a.height;return{minX:i-u/2,minY:l-p/2,maxX:i+u/2,maxY:l+p/2,x:i,y:l,width:u,height:p,centerX:i,centerY:l}},nf=function(a,i,l){var u,p=function(y){var b=y,x=b.x,k=b.y,I=b.width,H=b.height,J=b.radius;return[{x:x-I/2+J,y:k-H/2+J,r:J},{x:x+I/2-J,y:k-H/2+J,r:J},{x:x-I/2+J,y:k+H/2-J,r:J},{x:x+I/2-J,y:k+H/2-J,r:J}]}(l),f=Number.MAX_SAFE_INTEGER;return p.forEach(function(y){var b=la(a.x,a.y,y.x,y.y);b<f&&(f=b,u=y)}),os(a,i,u)},os=function(a,i,l){var u,p=l,f=p.x,y=p.y,b=p.r;if(i===ao.HORIZONTAL){var x=f-Math.sqrt(b*b-(a.y-y)*(a.y-y)),k=f+Math.sqrt(b*b-(a.y-y)*(a.y-y));u={x:Math.abs(x-a.x)<Math.abs(k-a.x)?x:k,y:a.y}}else if(i===ao.VERTICAL){var I=y-Math.sqrt(b*b-(a.x-f)*(a.x-f)),H=y+Math.sqrt(b*b-(a.x-f)*(a.x-f)),J=Math.abs(I-a.y)<Math.abs(H-a.y)?I:H;u={x:a.x,y:J}}return u},Ws=function(a,i){var l=i,u=!1,p=l.x-l.width/2+l.radius,f=l.x+l.width/2-l.radius,y=l.y-l.height/2+l.radius,b=l.y+l.height/2-l.radius,x=l.x,k=l.y,I=l.width,H=l.height;return a.y===k+H/2||a.y===k-H/2?u=a.x>p&&a.x<f:a.x!==x+I/2&&a.x!==x-I/2||(u=a.y>y&&a.y<b),u},rf=function(a,i,l){var u,p=l,f=p.x,y=p.y,b=p.rx,x=p.ry;if(i===ao.HORIZONTAL){var k=f-Math.sqrt(b*b-(a.y-y)*(a.y-y)*b*b/(x*x)),I=f+Math.sqrt(b*b-(a.y-y)*(a.y-y)*b*b/(x*x));u={x:Math.abs(k-a.x)<Math.abs(I-a.x)?k:I,y:a.y}}else if(i===ao.VERTICAL){var H=y-Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(b*b)),J=y+Math.sqrt(x*x-(a.x-f)*(a.x-f)*x*x/(b*b)),de=Math.abs(H-a.y)<Math.abs(J-a.y)?H:J;u={x:a.x,y:de}}return u},of=function(a,i,l){for(var u,p=l.pointsPosition,f=Number.MAX_SAFE_INTEGER,y=[],b=0;b<p.length;b++)y.push({start:p[b],end:p[(b+1)%p.length]});return y.forEach(function(x){var k=x.start,I=x.end,H=k,J=I;k.x>I.x&&(H=I,J=k);var de={x:a.x,y:a.y};if(H.x===J.x&&i===ao.HORIZONTAL&&(de={x:H.x,y:a.y}),H.y===J.y&&i===ao.VERTICAL&&(de={x:a.x,y:H.y}),H.x!==J.x&&H.y!==J.y){var Se=(J.y-H.y)/(J.x-H.x),ke=(H.x*J.y-J.x*H.y)/(H.x-J.x);i===ao.HORIZONTAL?de={x:(a.y-ke)/Se,y:a.y}:i===ao.VERTICAL&&(de={x:a.x,y:Se*a.x+ke})}if(Ol(de,k,I)){var Ke=la(de.x,de.y,a.x,a.y);Ke<f&&(f=Ke,u=de)}}),u},zs=function(a,i,l,u){var p=a.x,f=a.y;return i.x>a.x?p=a.x+l/2:i.x<a.x&&(p=a.x-l/2),i.y>a.y?f=a.y+u/2:i.y<a.y&&(f=a.y-u/2),{x:p,y:f}},Hs=function(a){var i=a.rows,l=a.style,u=a.rowsLength,p=a.className,f=document.createElement("div");f.style.fontSize=l.fontSize,f.style.width=l.width,f.className=p,f.style.lineHeight=l.lineHeight,f.style.padding=l.padding,l.fontFamily&&(f.style.fontFamily=l.fontFamily),u>1?i.forEach(function(b){var x=document.createElement("div");x.textContent=b,f.appendChild(x)}):f.textContent=i,document.body.appendChild(f);var y=f.clientHeight;return document.body.removeChild(f),y},is=function(a){var i=a.rows,l=a.rowsLength,u=a.fontSize,p=0;return i&&i.forEach(function(f){var y=Zn(f);p=y>p?y:p}),{width:Math.ceil(p/2)*u+u/4,height:l*(u+2)+u/4}},Yl=function(a){return Gs(a)!=="object"?{isAllPass:!!a,msg:a?"":"不允许连接"}:a},Zo=function(a){try{return JSON.parse(JSON.stringify(a))}catch{return a}},af=1e3,lf=999,ql=function(){return++af};function _p(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Ui(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?_p(Object(l),!0).forEach(function(u){Ia(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):_p(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Jo(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Eh(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ia(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ln(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var _d=(Nt=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Ia(this,"id",""),Jo(this,"type",dp,this),Jo(this,"sourceNodeId",ns,this),Jo(this,"targetNodeId",ef,this),Jo(this,"startPoint",yd,this),Jo(this,"endPoint",pp,this),Jo(this,"text",xl,this),Jo(this,"properties",hp,this),Jo(this,"points",tl,this),Jo(this,"pointsList",Au,this),Jo(this,"isSelected",md,this),Jo(this,"isHovered",yh,this),Jo(this,"isHitable",mh,this),Jo(this,"draggable",gh,this),Jo(this,"visible",vp,this),Ia(this,"virtual",!1),Jo(this,"isAnimation",yp,this),Jo(this,"isShowAdjustPoint",mp,this),Ia(this,"graphModel",void 0),Jo(this,"zIndex",gp,this),Ia(this,"BaseType",io.EDGE),Ia(this,"modelType",xr.EDGE),Jo(this,"state",_h,this),Ia(this,"additionStateData",void 0),Ia(this,"sourceAnchorId",""),Ia(this,"targetAnchorId",""),Ia(this,"menu",void 0),Ia(this,"customTextPosition",!1),Jo(this,"style",bh,this),Jo(this,"arrowConfig",wh,this),this.graphModel=p,this.initEdgeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"initEdgeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||el()}this.arrowConfig.markerEnd="url(#marker-end-".concat(u.id,")"),this.arrowConfig.markerStart="url(#marker-start-".concat(u.id,")");var b=this.graphModel.editConfigModel.adjustEdgeStartAndEnd;this.isShowAdjustPoint=b,Mi(this,pe(u)),this.graphModel.overlapMode===wo.INCREASE&&(this.zIndex=u.zIndex||ql()),this.setAnchors(),this.initPoints(),this.formatText(u)}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"getEdgeStyle",value:function(){return Ui(Ui({},this.graphModel.theme.baseEdge),this.style)}},{key:"getAdjustPointStyle",value:function(){return Ui({},this.graphModel.theme.edgeAdjust)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.edgeText;return Eo(u)}},{key:"getEdgeAnimationStyle",value:function(){var u=this.graphModel.theme.edgeAnimation;return Eo(u)}},{key:"getArrowStyle",value:function(){var u=this.getEdgeStyle(),p=this.getEdgeAnimationStyle(),f=this.graphModel.theme.arrow,y=this.isAnimation?p.stroke:u.stroke;return Ui(Ui({},u),{},{fill:y,stroke:y},f)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return Eo(u)}},{key:"getTextPosition",value:function(){return{x:0,y:0}}},{key:"sourceNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.sourceNodeId])===null||p===void 0?void 0:p.model}},{key:"targetNode",get:function(){var u,p;return(u=this.graphModel)===null||u===void 0||(p=u.nodesMap[this.targetNodeId])===null||p===void 0?void 0:p.model}},{key:"textPosition",get:function(){return this.getTextPosition()}},{key:"getBeginAnchor",value:function(u,p,f){var y,b,x=$i(u);return f&&(y=Bs(x,function(k){return k.id===f}))||x.forEach(function(k){var I=et(k,p);(b===void 0||I<b)&&(b=I,y=k)}),y}},{key:"getEndAnchor",value:function(u,p){var f,y,b=this,x=$i(u);return p&&(f=Bs(x,function(k){return k.id===p}))||x.forEach(function(k){var I=et(k,b.startPoint);(y===void 0||I<y)&&(y=I,f=k)}),f}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,b={id:this.id,type:this.type,sourceNodeId:this.sourceNode.id,targetNodeId:this.targetNode.id,startPoint:Object.assign({},this.startPoint),endPoint:Object.assign({},this.endPoint),properties:Object(c.I)(this.properties)};return y&&(b.text={x:p,y:f,value:y}),this.graphModel.overlapMode===wo.INCREASE&&(b.zIndex=this.zIndex),b}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"setProperty",value:function(u,p){this.properties[u]=Zo(p),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=Ui(Ui({},Object(c.I)(this.properties)),Zo(u)),this.setAttributes()}},{key:"changeEdgeId",value:function(u){var p=this.arrowConfig,f=p.markerEnd,y=p.markerStart;y&&y==="url(#marker-start-".concat(this.id,")")&&(this.arrowConfig.markerStart="url(#marker-start-".concat(u,")")),f&&f==="url(#marker-end-".concat(this.id,")")&&(this.arrowConfig.markerEnd="url(#marker-end-".concat(u,")")),this.id=u}},{key:"setStyle",value:function(u,p){this.style=Ui(Ui({},this.style),{},Ia({},u,Zo(p)))}},{key:"setStyles",value:function(u){this.style=Ui(Ui({},this.style),Zo(u))}},{key:"updateStyles",value:function(u){this.style=Ui({},Zo(u))}},{key:"formatText",value:function(u){var p=this.textPosition,f=p.x,y=p.y;u.text&&typeof u.text!="string"?Object.prototype.toString.call(u.text)==="[object Object]"&&(this.text={x:u.text.x||f,y:u.text.y||y,value:u.text.value||"",draggable:this.text.draggable,editable:this.text.editable}):this.text={value:u.text||"",x:f,y,draggable:this.text.draggable,editable:this.text.editable}}},{key:"resetTextPosition",value:function(){var u=this.textPosition,p=u.x,f=u.y;this.text.x=p,this.text.y=f}},{key:"moveText",value:function(u,p){if(this.text){var f=this.text,y=f.x,b=f.y,x=f.value,k=f.draggable,I=f.editable;this.text={value:x,draggable:k,x:y+u,y:b+p,editable:I}}}},{key:"setText",value:function(u){u&&Mi(this.text,u)}},{key:"updateText",value:function(u){this.text=Ui(Ui({},Object(c.I)(this.text)),{},{value:u})}},{key:"setAnchors",value:function(){if(!this.sourceAnchorId||!this.startPoint){var u=this.getBeginAnchor(this.sourceNode,this.targetNode,this.sourceAnchorId);if(!u)throw new Error("无法获取beginAnchor，请检查anchors相关逻辑，anchors不能为空");this.startPoint||(this.startPoint={x:u.x,y:u.y}),this.sourceAnchorId||(this.sourceAnchorId=u.id)}if(!this.targetAnchorId||!this.endPoint){var p=this.getEndAnchor(this.targetNode,this.targetAnchorId);if(!p)throw new Error("无法获取endAnchor，请检查anchors相关逻辑，anchors不能为空");this.endPoint||(this.endPoint={x:p.x,y:p.y}),this.targetAnchorId||(this.targetAnchorId=p.id)}}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"openEdgeAnimation",value:function(){this.isAnimation=!0}},{key:"closeEdgeAnimation",value:function(){this.isAnimation=!1}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"updateStartPoint",value:function(u){this.startPoint=u}},{key:"moveStartPoint",value:function(u,p){this.startPoint.x+=u,this.startPoint.y+=p}},{key:"updateEndPoint",value:function(u){this.endPoint=u}},{key:"moveEndPoint",value:function(u,p){this.endPoint.x+=u,this.endPoint.y+=p}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;this.zIndex=u}},{key:"initPoints",value:function(){}},{key:"updateAttributes",value:function(u){Mi(this,u)}},{key:"getAdjustStart",value:function(){return this.startPoint}},{key:"getAdjustEnd",value:function(){return this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(u){var p=u.startPoint,f=u.endPoint;this.updateStartPoint({x:p.x,y:p.y}),this.updateEndPoint({x:f.x,y:f.y})}}],l&&Eh(i.prototype,l),a}(),dp=Ln(Nt.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ns=Ln(Nt.prototype,"sourceNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ef=Ln(Nt.prototype,"targetNodeId",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),yd=Ln(Nt.prototype,"startPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pp=Ln(Nt.prototype,"endPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xl=Ln(Nt.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),hp=Ln(Nt.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),tl=Ln(Nt.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Au=Ln(Nt.prototype,"pointsList",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),md=Ln(Nt.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yh=Ln(Nt.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mh=Ln(Nt.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gh=Ln(Nt.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vp=Ln(Nt.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),yp=Ln(Nt.prototype,"isAnimation",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mp=Ln(Nt.prototype,"isShowAdjustPoint",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),gp=Ln(Nt.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_h=Ln(Nt.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),bh=Ln(Nt.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),wh=Ln(Nt.prototype,"arrowConfig",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{markerEnd:"url(#marker-end-".concat(this.id,")"),markerStart:"url(#marker-start-".concat(this.id,")")}}}),Ln(Nt.prototype,"sourceNode",[c.m],Object.getOwnPropertyDescriptor(Nt.prototype,"sourceNode"),Nt.prototype),Ln(Nt.prototype,"targetNode",[c.m],Object.getOwnPropertyDescriptor(Nt.prototype,"targetNode"),Nt.prototype),Ln(Nt.prototype,"textPosition",[c.m],Object.getOwnPropertyDescriptor(Nt.prototype,"textPosition"),Nt.prototype),Ln(Nt.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setProperty"),Nt.prototype),Ln(Nt.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"deleteProperty"),Nt.prototype),Ln(Nt.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setProperties"),Nt.prototype),Ln(Nt.prototype,"changeEdgeId",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"changeEdgeId"),Nt.prototype),Ln(Nt.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setStyle"),Nt.prototype),Ln(Nt.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setStyles"),Nt.prototype),Ln(Nt.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateStyles"),Nt.prototype),Ln(Nt.prototype,"formatText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"formatText"),Nt.prototype),Ln(Nt.prototype,"resetTextPosition",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"resetTextPosition"),Nt.prototype),Ln(Nt.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"moveText"),Nt.prototype),Ln(Nt.prototype,"setText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setText"),Nt.prototype),Ln(Nt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateText"),Nt.prototype),Ln(Nt.prototype,"setAnchors",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setAnchors"),Nt.prototype),Ln(Nt.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setSelected"),Nt.prototype),Ln(Nt.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setHovered"),Nt.prototype),Ln(Nt.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setHitable"),Nt.prototype),Ln(Nt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"openEdgeAnimation"),Nt.prototype),Ln(Nt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"closeEdgeAnimation"),Nt.prototype),Ln(Nt.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setElementState"),Nt.prototype),Ln(Nt.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateStartPoint"),Nt.prototype),Ln(Nt.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"moveStartPoint"),Nt.prototype),Ln(Nt.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateEndPoint"),Nt.prototype),Ln(Nt.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"moveEndPoint"),Nt.prototype),Ln(Nt.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"setZIndex"),Nt.prototype),Ln(Nt.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"initPoints"),Nt.prototype),Ln(Nt.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateAttributes"),Nt.prototype),Ln(Nt.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"getAdjustStart"),Nt.prototype),Ln(Nt.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"getAdjustEnd"),Nt.prototype),Ln(Nt.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Nt.prototype,"updateAfterAdjustStartAndEnd"),Nt.prototype),Nt),as=_d;function bd(a){return bd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},bd(a)}function Oh(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xs(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Oh(Object(l),!0).forEach(function(u){Gi(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Oh(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function xh(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function nl(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ys(){return Ys=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=ls(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Ys.apply(this,arguments)}function ls(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Sl(a))!==null;);return a}function rl(a,i){return rl=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},rl(a,i)}function Sh(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Sl(a);if(i){var p=Sl(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return bp(this,l)}}function bp(a,i){if(i&&(bd(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tu(a)}function Tu(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Sl(a){return Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Sl(a)}function Gi(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var Un,To,Pi=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&rl(f,y)})(p,a);var i,l,u=Sh(p);function p(){var f;xh(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Gi(Tu(f=u.call.apply(u,[this].concat(b))),"modelType",xr.LINE_EDGE),f}return i=p,(l=[{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.line;return Xs(Xs({},Ys(Sl(p.prototype),"getEdgeStyle",this).call(this)),Eo(f))}},{key:"getTextPosition",value:function(){return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}}])&&nl(i.prototype,l),p}(as);function ua(a){return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ua(a)}function Kv(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Ah(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Ah(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ah(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Mu(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function gr(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Mu(Object(l),!0).forEach(function(u){Mo(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Mu(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Th(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sa(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Qo(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function La(){return La=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Zv(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},La.apply(this,arguments)}function Zv(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Jr(a))!==null;);return a}function uf(a,i){return uf=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},uf(a,i)}function Al(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jr(a);if(i){var p=Jr(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wp(this,l)}}function wp(a,i){if(i&&(ua(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kl(a)}function Kl(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jr(a){return Jr=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jr(a)}function Mo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function _i(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var sf=(Un=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&uf(f,y)})(p,a);var i,l,u=Al(p);function p(){var f;sa(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Mo(Kl(f=u.call.apply(u,[this].concat(b))),"modelType",xr.POLYLINE_EDGE),Mo(Kl(f),"draggingPointList",void 0),Th(Kl(f),"dbClickPosition",To,Kl(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=30,La(Jr(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.polyline;return gr(gr({},La(Jr(p.prototype),"getEdgeStyle",this).call(this)),Eo(f))}},{key:"getTextPosition",value:function(){var f,y=(f=this.text)===null||f===void 0?void 0:f.value;if(this.dbClickPosition&&!y){var b=this.dbClickPosition;return{x:b.x,y:b.y}}var x=mo(this.points),k=Kv(Wo(x),2),I=k[0],H=k[1];return{x:(I.x+H.x)/2,y:(I.y+H.y)/2}}},{key:"getAfterAnchor",value:function(f,y,b){var x,k;return b.forEach(function(I){var H;f===ao.HORIZONTAL?H=Math.abs(y.y-I.y):f===ao.VERTICAL&&(H=Math.abs(y.x-I.x)),(!k||k>H)&&(k=H,x=I)}),x}},{key:"getCrossPoint",value:function(f,y,b){var x;return f===ao.HORIZONTAL?x={x:b.x,y:y.y}:f===ao.VERTICAL&&(x={x:y.x,y:b.y}),x}},{key:"removeCrossPoints",value:function(f,y,b){var x=b.map(function(Ze){return Ze});if(f===1){var k=x[f],I=x[y],H=x[f-1];if(Qr(H,k,this.sourceNode)){if(ko(k,I,this.sourceNode)){var J=$o(k,I,this.sourceNode);J&&(x[f]=J,x.splice(f-1,1),f--,y--)}}else this.sourceNode.anchors.forEach(function(Ze){(Ze.x===H.x&&Ze.x===k.x||Ze.y===H.y&&Ze.y===k.y)&&la(Ze.x,Ze.y,k.x,k.y)<la(H.x,H.y,k.x,k.y)&&(x[f-1]=Ze)})}if(y===b.length-2){var de=x[f],Se=x[y],ke=x[y+1];if(Qr(Se,ke,this.targetNode)){if(ko(de,Se,this.targetNode)){var Ke=$o(de,Se,this.targetNode);Ke&&(x[y]=Ke,x.splice(y+1,1))}}else this.targetNode.anchors.forEach(function(Ze){(Ze.x===ke.x&&Ze.x===Se.x||Ze.y===ke.y&&Ze.y===Se.y)&&la(Ze.x,Ze.y,Se.x,Se.y)<la(ke.x,ke.y,Se.x,Se.y)&&(x[y+1]=Ze)})}return x}},{key:"getDraggingPoints",value:function(f,y,b,x,k){var I=k.map(function(de){return de}),H=this.getAfterAnchor(f,b,x),J=this.getCrossPoint(f,b,H);return y==="start"?(I.unshift(J),I.unshift(H)):(I.push(J),I.push(H)),I}},{key:"updateCrossPoints",value:function(f){var y=f.map(function($t){return $t}),b=f[0],x=f[1],k=f[y.length-2],I=f[y.length-1],H=this.sourceNode,J=this.targetNode,de=H.modelType,Se=J.modelType,ke=Oo(b,x),Ke=y[0];switch(de){case xr.RECT_NODE:H.radius!==0&&(Ws(b,H)||(Ke=nf(b,ke,H)));break;case xr.CIRCLE_NODE:Ke=os(b,ke,H);break;case xr.ELLIPSE_NODE:Ke=rf(b,ke,H);break;case xr.DIAMOND_NODE:case xr.POLYGON_NODE:Ke=of(b,ke,H)}Ke&&(y[0]=Ke);var Ze=Oo(k,I),ht=y[y.length-1];switch(Se){case xr.RECT_NODE:J.radius!==0&&(Ws(I,J)||(ht=nf(I,Ze,J)));break;case xr.CIRCLE_NODE:ht=os(I,Ze,J);break;case xr.ELLIPSE_NODE:ht=rf(I,Ze,J);break;case xr.DIAMOND_NODE:case xr.POLYGON_NODE:ht=of(I,Ze,J)}return ht&&(y[y.length-1]=ht),y}},{key:"getData",value:function(){var f=La(Jr(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(b){return{x:b.x,y:b.y}});return Object.assign({},f,{pointsList:y})}},{key:"initPoints",value:function(){this.pointsList.length>0?this.points=this.pointsList.map(function(f){return"".concat(f.x,",").concat(f.y)}).join(" "):this.updatePoints()}},{key:"updatePoints",value:function(){var f=cr({x:this.startPoint.x,y:this.startPoint.y},{x:this.endPoint.x,y:this.endPoint.y},this.sourceNode,this.targetNode,this.offset||0);this.pointsList=f,this.points=f.map(function(y){return"".concat(y.x,",").concat(y.y)}).join(" ")}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y,this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y,this.updatePoints()}},{key:"updatePointsList",value:function(f,y){this.pointsList.forEach(function(k){k.x+=f,k.y+=y});var b=this.pointsList[0];this.startPoint=Object.assign({},b);var x=this.pointsList[this.pointsList.length-1];this.endPoint=Object.assign({},x),this.initPoints()}},{key:"dragAppendStart",value:function(){this.draggingPointList=this.pointsList.map(function(f){return f})}},{key:"dragAppendSimple",value:function(f,y){this.isDragging=!0;var b=f.start,x=f.end,k=f.startIndex,I=f.endIndex,H=f.direction,J=this.pointsList,de=J;return H===ao.HORIZONTAL?(J[k]={x:b.x,y:b.y+y.y},J[I]={x:x.x,y:x.y+y.y},de=this.pointsList.map(function(Se){return Se})):H===ao.VERTICAL&&(J[k]={x:b.x+y.x,y:b.y},J[I]={x:x.x+y.x,y:x.y},de=this.pointsList.map(function(Se){return Se})),this.updatePointsAfterDrag(de),this.draggingPointList=de,this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},J[k]),end:Object.assign({},J[I]),startIndex:k,endIndex:I,direction:H}}},{key:"dragAppend",value:function(f,y){this.isDragging=!0;var b=f.start,x=f.end,k=f.startIndex,I=f.endIndex,H=f.direction,J=this.pointsList;if(H===ao.HORIZONTAL){J[k]={x:b.x,y:b.y+y.y},J[I]={x:x.x,y:x.y+y.y};var de=this.pointsList.map(function(sn){return sn});if(k!==0&&I!==this.pointsList.length-1&&(de=this.removeCrossPoints(k,I,de)),k===0){var Se={x:b.x,y:b.y+y.y};if(!Da(Se,this.sourceNode)){var ke=this.sourceNode.anchors;de=this.getDraggingPoints(H,"start",Se,ke,de)}}if(I===this.pointsList.length-1){var Ke={x:x.x,y:x.y+y.y};if(!Da(Ke,this.targetNode)){var Ze=this.targetNode.anchors;de=this.getDraggingPoints(H,"end",Ke,Ze,de)}}this.updatePointsAfterDrag(de),this.draggingPointList=de}else if(H===ao.VERTICAL){J[k]={x:b.x+y.x,y:b.y},J[I]={x:x.x+y.x,y:x.y};var ht=this.pointsList.map(function(sn){return sn});if(k!==0&&I!==this.pointsList.length-1&&(ht=this.removeCrossPoints(k,I,ht)),k===0){var $t={x:b.x+y.x,y:b.y};if(!Da($t,this.sourceNode)){var hn=this.sourceNode.anchors;ht=this.getDraggingPoints(H,"start",$t,hn,ht)}}if(I===this.pointsList.length-1){var dn={x:x.x+y.x,y:x.y};if(!Da(dn,this.targetNode)){var zn=this.targetNode.anchors;ht=this.getDraggingPoints(H,"end",dn,zn,ht)}}this.updatePointsAfterDrag(ht),this.draggingPointList=ht}return this.setText(Object.assign({},this.text,this.textPosition)),{start:Object.assign({},J[k]),end:Object.assign({},J[I]),startIndex:k,endIndex:I,direction:H}}},{key:"dragAppendEnd",value:function(){if(this.draggingPointList){var f=Fo(mo(this.points));this.pointsList=f.map(function(x){return x}),this.draggingPointList=[];var y=f[0];this.startPoint=Object.assign({},y);var b=f[f.length-1];this.endPoint=Object.assign({},b)}this.isDragging=!1}},{key:"updatePointsAfterDrag",value:function(f){var y=this.updateCrossPoints(f);this.points=y.map(function(b){return"".concat(b.x,",").concat(b.y)}).join(" ")}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,b=f.endPoint,x=f.sourceNode,k=f.targetNode,I=cr({x:y.x,y:y.y},{x:b.x,y:b.y},x,k,this.offset||0);this.pointsList=I,this.initPoints()}}])&&Qo(i.prototype,l),p}(as),To=_i(Un.prototype,"dbClickPosition",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i(Un.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"initPoints"),Un.prototype),_i(Un.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePoints"),Un.prototype),_i(Un.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateStartPoint"),Un.prototype),_i(Un.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"moveStartPoint"),Un.prototype),_i(Un.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateEndPoint"),Un.prototype),_i(Un.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"moveEndPoint"),Un.prototype),_i(Un.prototype,"updatePointsList",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePointsList"),Un.prototype),_i(Un.prototype,"dragAppendStart",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendStart"),Un.prototype),_i(Un.prototype,"dragAppendSimple",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendSimple"),Un.prototype),_i(Un.prototype,"dragAppend",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppend"),Un.prototype),_i(Un.prototype,"dragAppendEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"dragAppendEnd"),Un.prototype),_i(Un.prototype,"updatePointsAfterDrag",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updatePointsAfterDrag"),Un.prototype),_i(Un.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"getAdjustStart"),Un.prototype),_i(Un.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"getAdjustEnd"),Un.prototype),_i(Un.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(Un.prototype,"updateAfterAdjustStartAndEnd"),Un.prototype),Un),L=function(a){var i=a.start,l=a.end,u=a.offset,p=a.verticalLength,f=a.type,y={leftX:0,leftY:0,rightX:0,rightY:0},b=Math.atan((l.y-i.y)/(l.x-i.x)),x=Math.atan(u/p),k=Math.sqrt(p*p+u*u);return f==="start"?l.x>=i.x?(y.leftX=i.x+k*Math.sin(b+x),y.leftY=i.y-k*Math.cos(b+x),y.rightX=i.x-k*Math.sin(b-x),y.rightY=i.y+k*Math.cos(b-x)):(y.leftX=i.x-k*Math.sin(b+x),y.leftY=i.y+k*Math.cos(b+x),y.rightX=i.x+k*Math.sin(b-x),y.rightY=i.y-k*Math.cos(b-x)):f==="end"&&(l.x>=i.x?(y.leftX=l.x+k*Math.sin(b-x),y.leftY=l.y-k*Math.cos(b-x),y.rightX=l.x-k*Math.sin(b+x),y.rightY=l.y+k*Math.cos(b+x)):(y.leftX=l.x-k*Math.sin(b-x),y.leftY=l.y+k*Math.cos(b-x),y.rightX=l.x+k*Math.sin(b+x),y.rightY=l.y-k*Math.cos(b+x))),y},ie={x:1,y:0,z:0};function be(a,i,l,u,p){for(var f=function(Se){if(Se<0||Se>1)throw new RangeError('The value range of parameter "t" is [0,1]');return{x:a.x*Math.pow(1-Se,3)+3*i.x*Se*Math.pow(1-Se,2)+3*l.x*Math.pow(Se,2)*(1-Se)+u.x*Math.pow(Se,3),y:a.y*Math.pow(1-Se,3)+3*i.y*Se*Math.pow(1-Se,2)+3*l.y*Math.pow(Se,2)*(1-Se)+u.y*Math.pow(Se,3)}},y=0,b=2,x=u.x,k=u.y,I=u;y<p&&b<50;){var H=I=f(1-b/100),J=H.x,de=H.y;y=la(x,k,J,de),b++}return I}function Je(a){var i=Math.hypot(a.x,a.y);return{x:a.x/i,y:a.y/i,z:0}}function ct(a){return u=function(f,y){return f.x*y.y-f.y*y.x}(i=ie,l=a),p=Math.acos(function(f,y){var b=[f.x,f.y,f.z];return[y.x,y.y,y.z].reduce(function(x,k,I){return x+k*b[I]})}(Je(i),Je(l))),u>=0?p:-p;var i,l,u,p}function qe(a){return a*(180/Math.PI)}function at(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Pt(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?at(Object(l),!0).forEach(function(u){Dt(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):at(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Dt(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Rt(a){return function(i){if(Array.isArray(i))return kt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||Ut(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lt(a){return lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lt(a)}function Vt(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||Ut(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ut(a,i){if(a){if(typeof a=="string")return kt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?kt(a,i):void 0}}function kt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var mt=function(a,i){var l;switch(a.type){case"line":default:l=new Pi(a,i);break;case"polyline":l=new sf(a,i)}return l},Ve=function(a,i){return 2*Math.abs(a.centerX-i.centerX)<a.width+i.width&&2*Math.abs(a.centerY-i.centerY)<a.height+i.height},ot=function(a){var i=[],l={};return a.forEach(function(u){var p="".concat(u.x,"-").concat(u.y);u.id=p,l[p]=u}),Object.keys(l).forEach(function(u){i.push(l[u])}),i},Lt=function(a,i){var l=[a,{x:a.x,y:i.y},i];return ot(l)},qt=function(a,i){return a.width===0&&a.height===0?a:{centerX:a.centerX,centerY:a.centerY,minX:a.minX-i,minY:a.minY-i,maxX:a.maxX+i,maxY:a.maxY+i,height:a.height+2*i,width:a.width+2*i}},Ot=function(a,i){var l=Math.abs(a.x-i.centerX),u=Math.abs(a.y-i.centerY);return l/i.width>u/i.height?ao.HORIZONTAL:ao.VERTICAL},Zt=function(a,i,l){return Ot(l,i)===ao.HORIZONTAL?{x:l.x>a.centerX?a.maxX:a.minX,y:l.y}:{x:l.x,y:l.y>a.centerY?a.maxY:a.minY}},xt=function(a,i){var l=Math.min(a.minX,i.minX),u=Math.min(a.minY,i.minY),p=Math.max(a.maxX,i.maxX),f=Math.max(a.maxY,i.maxY);return{centerX:(l+p)/2,centerY:(u+f)/2,minX:l,minY:u,maxX:p,maxY:f,height:f-u,width:p-l}},Wt=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,l=[],u=[];a.forEach(function(I){l.push(I.x),u.push(I.y)});var p=Math.min.apply(Math,l),f=Math.max.apply(Math,l),y=Math.min.apply(Math,u),b=Math.max.apply(Math,u),x=f-p,k=b-y;return i&&(x+=i,k+=i),{centerX:(p+f)/2,centerY:(y+b)/2,maxX:f,maxY:b,minX:p,minY:y,x:(p+f)/2,y:(y+b)/2,height:k,width:x}},_t=function(a){var i=a.minX,l=a.minY,u=a.maxX,p=a.maxY;return[{x:i,y:l},{x:u,y:l},{x:u,y:p},{x:i,y:p}]},Xt=function(a,i){var l=a.x,u=a.y;return l<i.minX||l>i.maxX||u<i.minY||u>i.maxY},Mn=function(a,i){return i<a.minX||i>a.maxX?[]:[{x:i,y:a.minY},{x:i,y:a.maxY}]},Vn=function(a,i){return i<a.minY||i>a.maxY?[]:[{x:a.minX,y:i},{x:a.maxX,y:i}]},It=function(a,i){return Mn(a,i.x).concat(Vn(a,i.y))},St=function(a,i){return Math.abs(a.x-i.x)+Math.abs(a.y-i.y)},wt=function(a,i){var l=0;return i.forEach(function(u){u&&(a.x===u.x&&(l+=-2),a.y===u.y&&(l+=-2))}),l},Cn=function(a,i,l,u,p){return St(a,i)+St(a,l)+wt(a,[i,l,u,p])},tr=function a(i,l,u,p,f){f||(f=0),i.unshift(l[p]),u[p]&&u[p]!==p&&f<=100&&a(i,l,u,u[p],f+1)},un=function(a,i){var l=a.indexOf(i);l>-1&&a.splice(l,1)},Qn=function(a,i,l,u){var p=i.x-a.x,f=i.y-a.y,y=u.x-l.x,b=u.y-l.y,x=(-f*(a.x-l.x)+p*(a.y-l.y))/(-y*f+p*b),k=(y*(a.y-l.y)-b*(a.x-l.x))/(-y*f+p*b);return x>=0&&x<=1&&k>=0&&k<=1},Gn=function(a,i,l){if(l.width===0&&l.height===0)return!1;var u=Vt(_t(l),4),p=u[0],f=u[1],y=u[2],b=u[3];return Qn(a,i,p,f)||Qn(a,i,p,b)||Qn(a,i,f,y)||Qn(a,i,y,b)},rr=function(a,i,l,u){var p=[];return a.forEach(function(f){f!==i&&(f.x!==i.x&&f.y!==i.y||Gn(f,i,l)||Gn(f,i,u)||p.push(f))}),ot(p)},_r=function(a,i,l,u,p,f,y){var b=[],x=[i],k={},I={},H={};I[i.id]=0,H[i.id]=Cn(i,l,i);var J={};a.forEach(function(ke){J[ke.id]=ke});for(var de=function(){var ke=void 0,Ke=1/0;if(x.forEach(function(ht){H[ht.id]<Ke&&(Ke=H[ht.id],ke=ht)}),ke===l){var Ze=[];return tr(Ze,J,k,l.id),{v:Ze}}un(x,ke),b.push(ke),rr(a,ke,u,p).forEach(function(ht){if(b.indexOf(ht)===-1){x.indexOf(ht)===-1&&x.push(ht);var $t=H[ke.id]+St(ke,ht);I[ht.id]&&$t>=I[ht.id]||(k[ht.id]=ke.id,I[ht.id]=$t,H[ht.id]=I[ht.id]+Cn(ht,l,i,f,y))}})};x.length;){var Se=de();if(lt(Se)==="object")return Se.v}return[i,l]},Po=function(a){return Bi(a)},Fo=function(a){for(var i=1;i<a.length-1;){var l=a[i-1],u=a[i],p=a[i+1];l.x===u.x&&u.x===p.x||l.y===u.y&&u.y===p.y?a.splice(i,1):i++}return a},cr=function(a,i,l,u,p){var f=Po(l),y=Po(u),b=qt(f,p),x=qt(y,p),k=Zt(b,f,a),I=Zt(x,y,i);if(Ve(b,x)){var H=ei(a,i,k,I);return[a,k].concat(Rt(H),[I,i])}var J=Wt([k,I]),de=xt(b,J),Se=xt(x,J),ke=[];ke=(ke=ke.concat(_t(de))).concat(_t(Se));var Ke={x:(a.x+i.x)/2,y:(a.y+i.y)/2};[J,de,Se].forEach(function(ht){ke=ke.concat(It(ht,Ke).filter(function($t){return Xt($t,b)&&Xt($t,x)}))}),[{x:k.x,y:I.y},{x:I.x,y:k.y}].forEach(function(ht){Xt(ht,b)&&Xt(ht,x)&&ke.push(ht)}),ke.unshift(k),ke.push(I),ke=ot(ke);var Ze=_r(ke,k,I,f,y,a,i);return Ze.unshift(a),Ze.push(i),Ze.length>2&&(Ze=Fo(Ze)),ot(Ze)},Wo=function(a){var i;if(a.length===1)i=[a[0],a[0]];else if(a.length>=2){for(var l=a[0],u=a[1],p=la(l.x,l.y,u.x,u.y),f=1;f<a.length-1;f++){var y=a[f],b=a[f+1],x=la(y.x,y.y,b.x,b.y);x>p&&(p=x,l=y,u=b)}i=[l,u]}return i},Qr=function(a,i,l){var u=Da(a,l),p=Da(i,l);return u&&p},ko=function(a,i,l){var u=Da(a,l),p=Da(i,l);return!(u&&p)&&(u||p)},$o=function(a,i,l){for(var u,p,f=Bi(l),y=_t(f),b=0;b<y.length;b++)Qn(a,i,y[b],y[(b+1)%y.length])&&(p=[y[b],y[(b+1)%y.length]]);return p&&(u=function(x,k,I,H){var J=(k.y-x.y)*(H.x-I.x)-(x.x-k.x)*(I.y-H.y);if(J===0)return!1;var de=((k.x-x.x)*(H.x-I.x)*(I.y-x.y)+(k.y-x.y)*(H.x-I.x)*x.x-(H.y-I.y)*(k.x-x.x)*I.x)/J,Se=-((k.y-x.y)*(H.y-I.y)*(I.x-x.x)+(k.x-x.x)*(H.y-I.y)*x.y-(H.x-I.x)*(k.y-x.y)*I.y)/J;return(de-x.x)*(de-k.x)<=0&&(Se-x.y)*(Se-k.y)<=0&&(de-I.x)*(de-H.x)<=0&&(Se-I.y)*(Se-H.y)<=0&&{x:de,y:Se}}(a,i,p[0],p[1])),u},Oo=function(a,i){var l;return a.x===i.x?l=ao.VERTICAL:a.y===i.y&&(l=ao.HORIZONTAL),l},mo=function(a){var i=a.split(" "),l=[];return i&&i.forEach(function(u){var p=Vt(u.split(","),2),f=p[0],y=p[1];l.push({x:Number(f),y:Number(y)})}),l},ei=function(a,i,l,u){var p=[];if(Oo(a,l)===Oo(i,u))a.y===l.y?(p.push({x:l.x,y:(l.y+u.y)/2}),p.push({x:u.x,y:(l.y+u.y)/2})):(p.push({x:(l.x+u.x)/2,y:l.y}),p.push({x:(l.x+u.x)/2,y:u.y}));else{var f={x:l.x,y:u.y},y=Ol(f,a,l),b=Ol(f,i,u);if(y||b)f={x:u.x,y:l.y};else{var x=xo(f,a,l),k=xo(f,i,u);x&&k&&(f={x:u.x,y:l.y})}p.push(f)}return p},xo=function(a,i,l){return a.x===i.x&&a.x===l.x||a.y===i.y&&a.y===l.y},Zn=function(a){if(!a)return 0;for(var i=0,l=0;l<a.length;l++){var u=a.charCodeAt(l);a.match(/[A-Z]/)?i+=1.5:i+=u>=1&&u<=126||u>=65376&&u<=65439?1:2}return i},ai=null,Nr=function(a,i){ai||(ai=document.createElement("canvas"));var l=ai.getContext("2d");return l.font=i,l.measureText(a).width},jn=function(a){var i,l=a.start,u=a.end;if(l.x===u.x&&l.y===u.y)i="";else{var p={start:l,end:u,offset:10,verticalLength:5},f=L(Pt(Pt({},p),{},{type:"start"})),y=L(Pt(Pt({},p),{},{type:"end"}));i="M".concat(f.leftX," ").concat(f.leftY,` 
    L`).concat(f.rightX," ").concat(f.rightY,` 
    L`).concat(y.rightX," ").concat(y.rightY,`
    L`).concat(y.leftX," ").concat(y.leftY," z")}return{d:i,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}},fr=function(a){var i=a.start,l=a.end,u=a.sourceNode,p=a.targetNode,f=a.offset,y=Bi(u),b=Bi(p),x=qt(y,f),k=qt(b,f);return{sNext:Zt(x,y,i),ePre:Zt(k,b,l)}},Wn=function(a){var i=a.replace(/M/g,"").replace(/C/g,",").split(",");return[lo(i[0]),lo(i[1]),lo(i[2]),lo(i[3])]},lo=function(a){var i=Vt(a.replace(/(^\s*)/g,"").split(" "),2);return{x:+i[0],y:+i[1]}},Fa=function(a,i){var l=Vt(a,4);return[be(l[0],l[1],l[2],l[3],i),a[3]]},Zl=function(a,i){for(var l,u=a.x,p=a.y,f=mo(i),y=Number.MAX_SAFE_INTEGER,b=[],x=0;x<f.length;x++)b.push({start:f[x],end:f[(x+1)%f.length]});if(b.forEach(function(J){var de=J.start,Se=J.end;if(de.x===Se.x){var ke={x:de.x,y:p};if(Ol(ke,de,Se)){var Ke=Math.abs(de.x-u);Ke<y&&(y=Ke,l=ke)}}else if(de.y===Se.y){var Ze={x:u,y:de.y};if(Ol(Ze,de,Se)){var ht=Math.abs(de.y-p);ht<y&&(y=ht,l=Ze)}}}),!l){var k=b[0],I=k.start,H=k.end;l={x:I.x+(H.x-I.x)/2,y:I.y+(H.y-I.y)/2}}return l},pe=function(a){return Ka(a,["id","type","sourceNodeId","sourceAnchorId","targetNodeId","targetAnchorId","pointsList","startPoint","endPoint","properties"])},et=function(a,i){return Math.sqrt(Math.pow(a.x-i.x,2)+Math.pow(a.y-i.y,2))};function Ye(a,i){return typeof i!="function"?function(l,u,p){return Object.assign({type:a.edgeType},p)}:function(l,u,p){var f=i(l,u,p);return f?typeof f=="string"?Object.assign({},p,{type:f}):Object.assign({type:f},p):{type:a.edgeType}}}r(208);var tn=function(){};function hr(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ue(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ee=function(){function a(u){var p=this,f=u.onDragStart,y=f===void 0?tn:f,b=u.onDragging,x=b===void 0?tn:b,k=u.onDragEnd,I=k===void 0?tn:k,H=u.eventType,J=H===void 0?"":H,de=u.eventCenter,Se=de===void 0?null:de,ke=u.step,Ke=ke===void 0?1:ke,Ze=u.isStopPropagation,ht=Ze===void 0||Ze,$t=u.model,hn=$t===void 0?null:$t,dn=u.data,zn=dn===void 0?null:dn;(function(sn,Dn){if(!(sn instanceof Dn))throw new TypeError("Cannot call a class as a function")})(this,a),ue(this,"onDragStart",void 0),ue(this,"onDragging",void 0),ue(this,"onDragEnd",void 0),ue(this,"step",void 0),ue(this,"isStopPropagation",void 0),ue(this,"isDragging",!1),ue(this,"isStartDragging",!1),ue(this,"startX",0),ue(this,"startY",0),ue(this,"sumDeltaX",0),ue(this,"sumDeltaY",0),ue(this,"eventType",void 0),ue(this,"eventCenter",void 0),ue(this,"model",void 0),ue(this,"data",void 0),ue(this,"startTime",void 0),ue(this,"handleMouseDown",function(sn){var Dn,bn,jr,Br=(Dn=window)===null||Dn===void 0?void 0:Dn.document;if(sn.button===0){p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging=!0,p.startX=sn.clientX,p.startY=sn.clientY,Br.addEventListener("mousemove",p.handleMouseMove,!1),Br.addEventListener("mouseup",p.handleMouseUp,!1);var sr=(bn=p.model)===null||bn===void 0?void 0:bn.getData();(jr=p.eventCenter)===null||jr===void 0||jr.emit(Nn["".concat(p.eventType,"_MOUSEDOWN")],{e:sn,data:p.data||sr}),p.startTime=new Date().getTime()}}),ue(this,"handleMouseMove",function(sn){if(p.isStopPropagation&&sn.stopPropagation(),p.isStartDragging&&(p.sumDeltaX+=sn.clientX-p.startX,p.sumDeltaY+=sn.clientY-p.startY,p.startX=sn.clientX,p.startY=sn.clientY,p.step<=1||Math.abs(p.sumDeltaX)>p.step||Math.abs(p.sumDeltaY)>p.step)){var Dn,bn=p.sumDeltaX%p.step,jr=p.sumDeltaY%p.step,Br=p.sumDeltaX-bn,sr=p.sumDeltaY-jr;p.sumDeltaX=bn,p.sumDeltaY=jr;var Xr,pi=(Dn=p.model)===null||Dn===void 0?void 0:Dn.getData();p.isDragging||((Xr=p.eventCenter)===null||Xr===void 0||Xr.emit(Nn["".concat(p.eventType,"_DRAGSTART")],{e:sn,data:p.data||pi}),p.onDragStart({event:sn})),p.isDragging=!0,Promise.resolve().then(function(){var hi,ba;p.onDragging({deltaX:Br,deltaY:sr,event:sn}),(hi=p.eventCenter)===null||hi===void 0||hi.emit(Nn["".concat(p.eventType,"_MOUSEMOVE")],{e:sn,data:p.data||pi}),(ba=p.eventCenter)===null||ba===void 0||ba.emit(Nn["".concat(p.eventType,"_DRAG")],{e:sn,data:p.data||pi})})}}),ue(this,"handleMouseUp",function(sn){var Dn=window.document;p.isStartDragging=!1,p.isStopPropagation&&sn.stopPropagation(),Promise.resolve().then(function(){var bn,jr,Br;Dn.removeEventListener("mousemove",p.handleMouseMove,!1),Dn.removeEventListener("mouseup",p.handleMouseUp,!1);var sr=(bn=p.model)===null||bn===void 0?void 0:bn.getData();(jr=p.eventCenter)===null||jr===void 0||jr.emit(Nn["".concat(p.eventType,"_MOUSEUP")],{e:sn,data:p.data||sr}),p.isDragging&&(p.isDragging=!1,p.onDragEnd({event:sn}),(Br=p.eventCenter)===null||Br===void 0||Br.emit(Nn["".concat(p.eventType,"_DROP")],{e:sn,data:p.data||sr}))})}),ue(this,"cancelDrag",function(){var sn,Dn=(sn=window)===null||sn===void 0?void 0:sn.document;Dn.removeEventListener("mousemove",p.handleMouseMove,!1),Dn.removeEventListener("mouseup",p.handleMouseUp,!1),p.onDragEnd({event:null}),p.isDragging=!1}),this.onDragStart=y,this.onDragging=x,this.onDragEnd=I,this.step=Ke,this.isStopPropagation=ht,this.eventType=J,this.eventCenter=Se,this.model=hn,this.data=zn}var i,l;return i=a,(l=[{key:"setStep",value:function(u){this.step=u}},{key:"setModel",value:function(u){this.model=u}}])&&hr(i.prototype,l),a}();function Ae(a){return Ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ae(a)}function Ue(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function We(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Pe(a,i,l){return i&&We(a.prototype,i),l&&We(a,l),a}function Te(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&d(a,i)}function De(a){var i=He();return function(){var l,u=m(a);if(i){var p=m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ce(this,l)}}function ce(a,i){if(i&&(Ae(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xe(a)}function xe(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function se(a){var i=typeof Map=="function"?new Map:void 0;return se=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return Fe(l,arguments,m(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),d(p,l)},se(a)}function Fe(a,i,l){return Fe=He()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(u,y));return f&&d(b,f.prototype),b},Fe.apply(null,arguments)}function He(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function d(a,i){return d=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},d(a,i)}function m(a){return m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},m(a)}function E(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function j(a,i){return a instanceof Q&&i instanceof Q}var V=function(a){Te(l,a);var i=De(l);function l(u,p,f){var y;return Ue(this,l),E(xe(y=i.call(this,3)),"x",void 0),E(xe(y),"y",void 0),E(xe(y),"z",void 0),y[0]=u,y[1]=p,y[2]=f,y.x=u,y.y=p,y.z=f,Object.setPrototypeOf(xe(y),l.prototype),y}return Pe(l,[{key:"add",value:function(u){if(j(this,u))return new Q(this.x+u.x,this.y+u.y);var p=this.z+u.z;return new fe((this.x+u.x)/p,(this.y+u.y)/p)}},{key:"subtract",value:function(u){if(j(this,u))return new Q(this.x-u.x,this.y-u.y);var p=this.z-u.z;return p===0?new Q(this.x-u.x,this.y-u.y):new fe((this.x-u.x)/p,(this.y-u.y)/p)}}]),l}(se(Array)),Q=function(a){Te(l,a);var i=De(l);function l(u,p,f){var y;return Ue(this,l),y=i.call(this,u,p,f??0),Object.setPrototypeOf(xe(y),l.prototype),y}return Pe(l,[{key:"toString",value:function(){return"Vector"}},{key:"dot",value:function(u){var p=this;return u.reduce(function(f,y,b){return f+y*p[b]})}},{key:"cross",value:function(u){return new l(this.y*u.z-this.z*u.y,this.z*u.x-this.x*u.z,this.x*u.y-this.y*u.x)}},{key:"getLength",value:function(){return Math.hypot(this.x,this.y)}},{key:"normalize",value:function(){var u=this.getLength();return new l(this.x/u,this.y/u)}},{key:"crossZ",value:function(u){return this.x*u.y-this.y*u.x}},{key:"angle",value:function(u){var p=this.crossZ(u),f=Math.acos(this.normalize().dot(u.normalize()));return p>=0?f:-f}}]),l}(V),fe=function(a){Te(l,a);var i=De(l);function l(u,p){var f;return Ue(this,l),f=i.call(this,u,p,1),Object.setPrototypeOf(xe(f),l.prototype),f}return Pe(l,[{key:"toString",value:function(){return"Point"}}]),l}(V);r(67),r(218);function Ee(a){return Ee=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ee(a)}function Ie(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||vt(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ft(a){return function(i){if(Array.isArray(i))return Gt(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||vt(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function vt(a,i){if(a){if(typeof a=="string")return Gt(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?Gt(a,i):void 0}}function Gt(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function An(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function On(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Xn(a,i,l){return i&&On(a.prototype,i),l&&On(a,l),a}function Mt(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&Bn(a,i)}function Jt(a){var i=Dr();return function(){var l,u=er(a);if(i){var p=er(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dr(this,l)}}function dr(a,i){if(i&&(Ee(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gn(a)}function gn(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ar(a){var i=typeof Map=="function"?new Map:void 0;return ar=function(l){if(l===null||(u=l,Function.toString.call(u).indexOf("[native code]")===-1))return l;var u;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(i!==void 0){if(i.has(l))return i.get(l);i.set(l,p)}function p(){return or(l,arguments,er(this).constructor)}return p.prototype=Object.create(l.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),Bn(p,l)},ar(a)}function or(a,i,l){return or=Dr()?Reflect.construct:function(u,p,f){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(u,y));return f&&Bn(b,f.prototype),b},or.apply(null,arguments)}function Dr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bn(a,i){return Bn=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Bn(a,i)}function er(a){return er=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},er(a)}function zo(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var nt,Jl,bi,Pu,us,wd,Ep,cf,qs,Jv,Qv,Op,Mh,Ks=function(a){Mt(l,a);var i=Jt(l);function l(){var u;An(this,l);for(var p=arguments.length,f=new Array(p),y=0;y<p;y++)f[y]=arguments[y];return zo(gn(u=i.call(this,f.length)),"rows",void 0),zo(gn(u),"columns",void 0),u.fill(new Array(3)),f.forEach(function(b,x){u[x]=b}),u.columns=f[0].length,u.rows=f.length,Object.setPrototypeOf(gn(u),l.prototype),u}return Xn(l,[{key:"getRow",value:function(u){return this[u]}},{key:"getColumn",value:function(u){return ft(this.map(function(p){return p[u]}))}},{key:"transpose",value:function(){for(var u=[],p=0;p<this.columns;p++)u.push(this.getColumn(p));return or(l,u)}},{key:"cross",value:function(u){var p=new Array(this.rows).fill("").map(function(){return[]});if(this.columns===u.rows)for(var f=0;f<this.rows;f++)for(var y=this.getRow(f),b=function(k){var I=u.getColumn(k);p[f][k]=y.reduce(function(H,J,de){return H+J*I[de]},0)},x=0;x<u.columns;x++)b(x);return or(l,ft(p))}},{key:"to2D",value:function(){return this.map(function(u){return[u[0],u[1]]})}},{key:"toPoints",value:function(){return this.map(function(u){return new fe(u[0],u[1])})}},{key:"toString",value:function(){var u=Ie(this[0],2),p=u[0],f=u[1],y=Ie(this[1],2),b=y[0],x=y[1],k=Ie(this[2],2),I=k[0],H=k[1];return"matrix(".concat(p," ").concat(f," ").concat(b," ").concat(x," ").concat(I," ").concat(H,")")}},{key:"translate",value:function(u,p){return this.cross(new Zs(u,p))}},{key:"rotate",value:function(u){return this.cross(new xp(u))}},{key:"scale",value:function(u,p){return this.cross(new ey(u,p))}}]),l}(ar(Array)),xp=function(a){Mt(l,a);var i=Jt(l);function l(u){var p;return An(this,l),p=i.call(this,new Q(+Math.cos(u).toFixed(2),+Math.sin(u).toFixed(2),0),new Q(-Math.sin(u).toFixed(2),+Math.cos(u).toFixed(2),0),new Q(0,0,1)),Object.setPrototypeOf(gn(p),l.prototype),p}return Xn(l,[{key:"inverse",value:function(){return this.transpose()}}]),l}(Ks),ey=function(a){Mt(l,a);var i=Jt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new Q(u,0,0),new Q(0,p,0),new Q(0,0,1))),"sx",void 0),zo(gn(f),"sy",void 0),f.sx=u,f.sy=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Xn(l,[{key:"inverse",value:function(){return new l(1/this.sx,1/this.sy)}}]),l}(Ks),Zs=function(a){Mt(l,a);var i=Jt(l);function l(u,p){var f;return An(this,l),zo(gn(f=i.call(this,new Q(1,0,0),new Q(0,1,0),new Q(u,p,1))),"tx",void 0),zo(gn(f),"ty",void 0),f.tx=u,f.ty=p,Object.setPrototypeOf(gn(f),l.prototype),f}return Xn(l,[{key:"inverse",value:function(){return new l(-this.tx,-this.ty)}}]),l}(Ks),Sp={node:!1,edge:!1},uR={node:!0,edge:!0};function VE(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function am(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?VE(Object(l),!0).forEach(function(u){ss(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):VE(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Ph(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||WE(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function kh(a){return function(i){if(Array.isArray(i))return G_(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||WE(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function WE(a,i){if(a){if(typeof a=="string")return G_(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?G_(a,i):void 0}}function G_(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lm(a){return lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},lm(a)}function ku(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function sR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ss(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Yn(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var zE,HE=200,XE=(nt=function(){function a(u){(function(de,Se){if(!(de instanceof Se))throw new TypeError("Cannot call a class as a function")})(this,a),ss(this,"rootEl",void 0),ku(this,"width",Jl,this),ku(this,"height",bi,this),ss(this,"theme",void 0),ss(this,"eventCenter",void 0),ss(this,"modelMap",new Map),ss(this,"topElement",void 0),ss(this,"animation",void 0),ss(this,"idGenerator",void 0),ss(this,"edgeGenerator",void 0),ss(this,"nodeMoveRules",[]),ss(this,"customTrajectory",void 0),ku(this,"edgeType",Pu,this),ku(this,"nodes",us,this),ku(this,"edges",wd,this),ku(this,"overlapMode",Ep,this),ku(this,"background",cf,this),ku(this,"transformModel",qs,this),ku(this,"editConfigModel",Jv,this),ku(this,"gridSize",Qv,this),ku(this,"partial",Op,this),ku(this,"fakerNode",Mh,this);var p,f=u.container,y=u.background,b=y===void 0?{}:y,x=u.grid,k=u.idGenerator,I=u.edgeGenerator,H=u.animation,J=u.customTrajectory;this.background=b,lm(x)==="object"&&(this.gridSize=x.size),this.rootEl=f,this.editConfigModel=new Jf(u),this.eventCenter=new Xc,this.transformModel=new ep(this.eventCenter,u),this.theme=Ds(u.style),this.edgeType=u.edgeType||"polyline",this.width=u.width,this.height=u.height,this.animation=(p=H)&&typeof p!="boolean"?Eu(Eo(Sp),p):Eo(p===!0?uR:Sp),this.partial=u.partial,this.overlapMode=u.overlapMode||0,this.idGenerator=k,this.customTrajectory=J,this.edgeGenerator=Ye(this,I),this.width=u.width||this.rootEl.getBoundingClientRect().width,this.height=u.height||this.rootEl.getBoundingClientRect().height,this.flowId=el()}var i,l;return i=a,l=[{key:"nodesMap",get:function(){return this.nodes.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"edgesMap",get:function(){return this.edges.reduce(function(u,p,f){return u[p.id]={index:f,model:p},u},{})}},{key:"modelsMap",get:function(){return[].concat(kh(this.nodes),kh(this.edges)).reduce(function(u,p){return u[p.id]=p,u},{})}},{key:"sortElements",get:function(){var u=[];this.nodes.forEach(function(k){return u.push(k)}),this.edges.forEach(function(k){return u.push(k)}),u=u.sort(function(k,I){return k.zIndex-I.zIndex});for(var p=[],f=[-200,-200],y=[this.width+HE,this.height+HE],b=0;b<u.length;b++){var x=u[b];x.visible&&(!this.partial||x.isSelected||this.isElementInArea(x,f,y,!1,!1))&&p.push(x)}return p}},{key:"textEditElement",get:function(){var u=this.nodes.find(function(f){return f.state===Hr.TEXT_EDIT}),p=this.edges.find(function(f){return f.state===Hr.TEXT_EDIT});return u||p}},{key:"selectElements",get:function(){var u=new Map;return this.nodes.forEach(function(p){p.isSelected&&u.set(p.id,p)}),this.edges.forEach(function(p){p.isSelected&&u.set(p.id,p)}),u}},{key:"selectNodes",get:function(){var u=[];return this.nodes.forEach(function(p){p.isSelected&&u.push(p)}),u}},{key:"getAreaElement",value:function(u,p){var f=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4],x=[],k=[];this.nodes.forEach(function(J){return k.push(J)}),this.edges.forEach(function(J){return k.push(J)});for(var I=0;I<k.length;I++){var H=k[I];b&&!H.visible||!this.isElementInArea(H,u,p,f,y)||x.push(H)}return x}},{key:"getModel",value:function(u){return this.modelMap.get(u)}},{key:"getNodeModelById",value:function(u){var p;return this.fakerNode&&u===this.fakerNode.id?this.fakerNode:(p=this.nodesMap[u])===null||p===void 0?void 0:p.model}},{key:"getPointByClient",value:function(u){var p=u.x,f=u.y,y=this.rootEl.getBoundingClientRect(),b={x:p-y.left,y:f-y.top},x=Ph(this.transformModel.HtmlPointToCanvasPoint([b.x,b.y]),2);return{domOverlayPosition:b,canvasOverlayPosition:{x:x[0],y:x[1]}}}},{key:"isElementInArea",value:function(u,p,f){var y=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],b=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4];if(u.BaseType===io.NODE){for(var x=Bi(u=u),k=x.minX,I=x.minY,H=x.maxX,J=x.maxY,de=[{x:k,y:I},{x:H,y:I},{x:H,y:J},{x:k,y:J}],Se=b,ke=0;ke<de.length;ke++){var Ke=de[ke],Ze=Ke.x,ht=Ke.y,$t=this.transformModel.CanvasPointToHtmlPoint([Ze,ht]),hn=Ph($t,2);if(Ze=hn[0],ht=hn[1],fd([Ze,ht],p,f)!==b){Se=!b;break}}return Se}if(u.BaseType===io.EDGE){var dn=u=u,zn=dn.startPoint,sn=dn.endPoint,Dn=this.transformModel.CanvasPointToHtmlPoint([zn.x,zn.y]),bn=this.transformModel.CanvasPointToHtmlPoint([sn.x,sn.y]),jr=fd(Dn,p,f),Br=fd(bn,p,f);return y?jr&&Br:jr||Br}return!1}},{key:"graphDataToModel",value:function(u){var p=this;if(this.width&&this.height||this.resize(),!u)return this.nodes=[],void(this.edges=[]);u.nodes?this.nodes=Xf(u.nodes,function(f){return p.getModelAfterSnapToGrid(f)}):this.nodes=[],u.edges?this.edges=Xf(u.edges,function(f){var y=p.getModel(f.type);if(!y)throw new Error("找不到".concat(f.type,"对应的边。"));return new y(f,p)}):this.edges=[]}},{key:"modelToGraphData",value:function(){var u=[];this.edges.forEach(function(f){var y=f.getData();y&&!f.virtual&&u.push(y)});var p=[];return this.nodes.forEach(function(f){var y=f.getData();y&&!f.virtual&&p.push(y)}),{nodes:p,edges:u}}},{key:"modelToHistoryData",value:function(){for(var u=!1,p=[],f=0;f<this.nodes.length;f++){var y=this.nodes[f];if(y.isDragging){u=!0;break}p.push(y.getHistoryData())}if(u)return!1;for(var b=!1,x=[],k=0;k<this.edges.length;k++){var I=this.edges[k];if(I.isDragging){b=!0;break}x.push(I.getHistoryData())}return!b&&{nodes:p,edges:x}}},{key:"getEdgeModelById",value:function(u){var p;return(p=this.edgesMap[u])===null||p===void 0?void 0:p.model}},{key:"getElement",value:function(u){return this.modelsMap[u]}},{key:"getNodeEdges",value:function(u){for(var p=[],f=0;f<this.edges.length;f++){var y=this.edges[f],b=this.edges[f].sourceNodeId===u,x=this.edges[f].targetNodeId===u;(b||x)&&p.push(y)}return p}},{key:"getSelectElements",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],p=this.selectElements,f={nodes:[],edges:[]};return p.forEach(function(y){if(y.BaseType===io.NODE&&f.nodes.push(y.getData()),y.BaseType===io.EDGE){var b=y.getData(),x=p.get(b.sourceNodeId)&&p.get(b.targetNodeId);(u||x)&&f.edges.push(b)}}),f}},{key:"updateAttributes",value:function(u,p){this.getElement(u).updateAttributes(p)}},{key:"changeNodeId",value:function(u,p){return p||(p=el()),this.nodesMap[p]?"":this.nodesMap[u]?(this.edges.forEach(function(f){f.sourceNodeId===u&&(f.sourceNodeId=p),f.targetNodeId===u&&(f.targetNodeId=p)}),this.nodesMap[u].model.id=p,this.nodesMap[p]=this.nodesMap[u],p):""}},{key:"changeEdgeId",value:function(u,p){return p||(p=el()),this.edgesMap[p]?"":this.edgesMap[u]?(this.edges.forEach(function(f){f.id===u&&f.changeEdgeId(p)}),p):""}},{key:"setFakerNode",value:function(u){this.fakerNode=u}},{key:"removeFakerNode",value:function(){this.fakerNode=null}},{key:"setModel",value:function(u,p){return this.modelMap.set(u,p)}},{key:"toFront",value:function(u){var p,f,y,b=((p=this.nodesMap[u])===null||p===void 0?void 0:p.model)||((f=this.edgesMap[u])===null||f===void 0?void 0:f.model);b&&(this.overlapMode===wo.DEFAULT&&((y=this.topElement)===null||y===void 0||y.setZIndex(),b.setZIndex(9999),this.topElement=b),this.overlapMode===wo.INCREASE&&this.setElementZIndex(u,"top"))}},{key:"setElementZIndex",value:function(u,p){var f,y,b,x=((f=this.nodesMap[u])===null||f===void 0?void 0:f.model)||((y=this.edgesMap[u])===null||y===void 0?void 0:y.model);x&&(typeof p=="number"&&(b=p),p==="top"&&(b=ql()),p==="bottom"&&(b=--lf),x.setZIndex(b))}},{key:"deleteNode",value:function(u){var p=this.nodesMap[u].model.getData();this.deleteEdgeBySource(u),this.deleteEdgeByTarget(u),this.nodes.splice(this.nodesMap[u].index,1),this.eventCenter.emit(Nn.NODE_DELETE,{data:p})}},{key:"addNode",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.NODE_ADD,f=arguments.length>2?arguments[2]:void 0,y=Zo(u);y.id&&this.nodesMap[u.id]&&delete y.id;var b=this.getModelAfterSnapToGrid(y);this.nodes.push(b);var x=b.getData(),k={data:x};return f&&(k.e=f),this.eventCenter.emit(p,k),b}},{key:"getModelAfterSnapToGrid",value:function(u){var p=this.getModel(u.type);if(!p)throw new Error("找不到".concat(u.type,"对应的节点，请确认是否已注册此类型节点。"));var f=u.x,y=u.y;return f&&y&&(u.x=wl(f,this.gridSize),u.y=wl(y,this.gridSize),lm(u.text)==="object"&&(u.text.x+=u.x-f,u.text.y+=u.y-y)),new p(u,this)}},{key:"cloneNode",value:function(u){var p=this.getNodeModelById(u),f=p.getData();f.x+=30,f.y+=30,delete f.id,f.text&&(f.text.x+=30,f.text.y+=30);var y=this.addNode(f);return y.setSelected(!0),p.setSelected(!1),y.getData()}},{key:"moveNode",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=this.nodesMap[u];if(b){var x=b.model,k=x.getMoveDistance(p,f,y),I=Ph(k,2);p=I[0],f=I[1],this.moveEdge(u,p,f)}}},{key:"moveNode2Coordinate",value:function(u,p,f){var y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=this.nodesMap[u];if(b){var x=b.model,k=x.x,I=x.y,H=p-k,J=f-I;this.moveNode(u,H,J,y)}}},{key:"editText",value:function(u){this.setElementStateById(u,Hr.TEXT_EDIT)}},{key:"addEdge",value:function(u){var p=Zo(u),f=p.type;f||(f=this.edgeType),p.id&&this.edgesMap[p.id]&&delete p.id;var y=this.getModel(f);if(!y)throw new Error("找不到".concat(f,"对应的边，请确认是否已注册此类型边。"));var b=new y(am(am({},p),{},{type:f}),this),x=b.getData();return this.edges.push(b),this.eventCenter.emit(Nn.EDGE_ADD,{data:x}),b}},{key:"moveEdge",value:function(u,p,f){for(var y=0;y<this.edges.length;y++){var b=this.edges[y],x=b.textPosition,k=x.x,I=x.y,H=this.edges[y].sourceNodeId===u,J=this.edges[y].targetNodeId===u;H&&b.moveStartPoint(p,f),J&&b.moveEndPoint(p,f),(H||J)&&this.handleEdgeTextMove(b,k,I)}}},{key:"handleEdgeTextMove",value:function(u,p,f){var y;if(u.customTextPosition===!0)u.resetTextPosition();else if(u.modelType===xr.POLYLINE_EDGE&&(y=u.text)!==null&&y!==void 0&&y.value){var b=u.text,x=Zl(b,u.points);u.moveText(x.x-b.x,x.y-b.y)}else{var k=u.textPosition,I=k.x,H=k.y;u.moveText(I-p,H-f)}}},{key:"deleteEdgeBySourceAndTarget",value:function(u,p){for(var f=0;f<this.edges.length;f++)if(this.edges[f].sourceNodeId===u&&this.edges[f].targetNodeId===p){var y=this.edges[f].getData();this.edges.splice(f,1),f--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:y})}}},{key:"deleteEdgeById",value:function(u){if(this.edgesMap[u]){var p=this.edgesMap[u].index,f=this.edgesMap[u].model.getData();this.edges.splice(p,1),this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeBySource",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].sourceNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"deleteEdgeByTarget",value:function(u){for(var p=0;p<this.edges.length;p++)if(this.edges[p].targetNodeId===u){var f=this.edges[p].getData();this.edges.splice(p,1),p--,this.eventCenter.emit(Nn.EDGE_DELETE,{data:f})}}},{key:"setElementStateById",value:function(u,p,f){this.nodes.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(Hr.DEFAULT)}),this.edges.forEach(function(y){y.id===u?y.setElementState(p,f):y.setElementState(Hr.DEFAULT)})}},{key:"updateText",value:function(u,p){this.nodes.forEach(function(f){f.id===u&&f.updateText(p)}),this.edges.forEach(function(f){f.id===u&&f.updateText(p)})}},{key:"selectNodeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.nodesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectEdgeById",value:function(u){var p,f=arguments.length>1&&arguments[1]!==void 0&&arguments[1];f||this.clearSelectElements();var y=(p=this.edgesMap[u])===null||p===void 0?void 0:p.model;y==null||y.setSelected(!0)}},{key:"selectElementById",value:function(u){var p=arguments.length>1&&arguments[1]!==void 0&&arguments[1];p||this.clearSelectElements();var f=this.getElement(u);f==null||f.setSelected(!0)}},{key:"clearSelectElements",value:function(){var u;this.selectElements.forEach(function(p){p==null||p.setSelected(!1)}),this.selectElements.clear(),this.overlapMode===wo.DEFAULT&&((u=this.topElement)===null||u===void 0||u.setZIndex())}},{key:"moveNodes",value:function(u,p,f){for(var y=this,b=arguments.length>3&&arguments[3]!==void 0&&arguments[3],x=u.reduce(function(dn,zn){var sn=y.nodesMap[zn].model.getMoveDistance(p,f,b);return dn[zn]=sn,dn},{}),k=0;k<this.edges.length;k++){var I=this.edges[k],H=I.textPosition,J=H.x,de=H.y,Se=x[I.sourceNodeId],ke=x[I.targetNodeId],Ke=void 0,Ze=void 0;if(Se&&ke&&I.modelType===xr.POLYLINE_EDGE){var ht=Ph(Se,2);Ke=ht[0],Ze=ht[1],I.updatePointsList(Ke,Ze)}else{if(Se){var $t=Ph(Se,2);Ke=$t[0],Ze=$t[1],I.moveStartPoint(Ke,Ze)}if(ke){var hn=Ph(ke,2);Ke=hn[0],Ze=hn[1],I.moveEndPoint(Ke,Ze)}}(Se||ke)&&this.handleEdgeTextMove(I,J,de)}}},{key:"addNodeMoveRules",value:function(u){this.nodeMoveRules.includes(u)||this.nodeMoveRules.push(u)}},{key:"setDefaultEdgeType",value:function(u){this.edgeType=u}},{key:"changeNodeType",value:function(u,p){var f=this.getNodeModelById(u);if(f){var y=f.getData();y.type=p;var b=this.getModel(p);if(!b)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));var x=new b(y,this);this.nodes.splice(this.nodesMap[u].index,1,x),this.getNodeEdges(u).forEach(function(k){if(k.sourceNodeId===u){var I=zs(x,k.startPoint,x.width,x.height);k.updateStartPoint(I)}if(k.targetNodeId===u){var H=zs(x,k.endPoint,x.width,x.height);k.updateEndPoint(H)}})}}},{key:"changeEdgeType",value:function(u,p){var f=this.getEdgeModelById(u);if(f&&f.type!==p){var y=f.getData();y.type=p;var b=this.getModel(p);if(!b)throw new Error("找不到".concat(p,"对应的节点，请确认是否已注册此类型节点。"));delete y.pointsList;var x=new b(y,this);this.edges.splice(this.edgesMap[u].index,1,x)}}},{key:"getNodeIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetNodeId===u&&p.push(f)}),p}},{key:"getNodeOutgoingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceNodeId===u&&p.push(f)}),p}},{key:"getAnchorIncomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.targetAnchorId===u&&p.push(f)}),p}},{key:"getAnchorOutcomingEdge",value:function(u){var p=[];return this.edges.forEach(function(f){f.sourceAnchorId===u&&p.push(f)}),p}},{key:"getNodeIncomingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.targetNodeId===u&&f.push(p.nodesMap[y.sourceNodeId].model)}),f}},{key:"getNodeOutgoingNode",value:function(u){var p=this,f=[];return this.edges.forEach(function(y){y.sourceNodeId===u&&f.push(p.nodesMap[y.targetNodeId].model)}),f}},{key:"setTheme",value:function(u){this.theme=Ds(am(am({},this.theme),u))}},{key:"resize",value:function(u,p){this.width=u||this.rootEl.getBoundingClientRect().width,this.height=p||this.rootEl.getBoundingClientRect().height,!this.width||this.height}},{key:"clearData",value:function(){this.nodes=[],this.edges=[]}},{key:"getVirtualRectSize",value:function(){var u=this.nodes,p=[],f=[];u.forEach(function(H){var J=H.x,de=H.y,Se=H.width,ke=H.height,Ke=H.getNodeStyle().strokeWidth,Ze=Ke===void 0?0:Ke,ht=J+Se/2+Ze,$t=J-Se/2-Ze,hn=de+ke/2+Ze,dn=de-ke/2-Ze;p=p.concat([ht,$t].filter(function(zn){return!Number.isNaN(zn)})),f=f.concat([hn,dn].filter(function(zn){return!Number.isNaN(zn)}))});var y=Math.min.apply(Math,kh(p)),b=Math.max.apply(Math,kh(p)),x=Math.min.apply(Math,kh(f)),k=b-y||0,I=Math.max.apply(Math,kh(f))-x||0;return{virtualRectWidth:k,virtualRectHeight:I,virtualRectCenterPositionX:y+k/2,virtualRectCenterPositionY:x+I/2}}},{key:"translateCenter",value:function(){var u=this.nodes,p=this.width,f=this.height,y=this.rootEl,b=this.transformModel;if(u.length){var x=p||y.clientWidth,k=f||y.clientHeight,I=this.getVirtualRectSize(),H=I.virtualRectCenterPositionX,J=I.virtualRectCenterPositionY;b.focusOn(H,J,x,k)}}},{key:"fitView",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:20,f=this.nodes,y=this.width,b=this.height,x=this.rootEl,k=this.transformModel;if(f.length){var I=y||x.clientWidth,H=b||x.clientHeight,J=this.getVirtualRectSize(),de=J.virtualRectWidth,Se=J.virtualRectHeight,ke=J.virtualRectCenterPositionX,Ke=J.virtualRectCenterPositionY,Ze=(de+p)/I,ht=(Se+u)/H,$t=0;$t=1/Math.max(Ze,ht);var hn=[I/2,H/2];k.zoom($t,hn),k.focusOn(ke,Ke,I,H)}}},{key:"openEdgeAnimation",value:function(u){this.getEdgeModelById(u).openEdgeAnimation()}},{key:"closeEdgeAnimation",value:function(u){this.getEdgeModelById(u).closeEdgeAnimation()}}],l&&sR(i.prototype,l),a}(),Jl=Yn(nt.prototype,"width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bi=Yn(nt.prototype,"height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pu=Yn(nt.prototype,"edgeType",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),us=Yn(nt.prototype,"nodes",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wd=Yn(nt.prototype,"edges",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ep=Yn(nt.prototype,"overlapMode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return wo.DEFAULT}}),cf=Yn(nt.prototype,"background",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qs=Yn(nt.prototype,"transformModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jv=Yn(nt.prototype,"editConfigModel",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qv=Yn(nt.prototype,"gridSize",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Op=Yn(nt.prototype,"partial",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mh=Yn(nt.prototype,"fakerNode",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yn(nt.prototype,"nodesMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"nodesMap"),nt.prototype),Yn(nt.prototype,"edgesMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"edgesMap"),nt.prototype),Yn(nt.prototype,"modelsMap",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"modelsMap"),nt.prototype),Yn(nt.prototype,"sortElements",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"sortElements"),nt.prototype),Yn(nt.prototype,"textEditElement",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"textEditElement"),nt.prototype),Yn(nt.prototype,"selectElements",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"selectElements"),nt.prototype),Yn(nt.prototype,"selectNodes",[c.m],Object.getOwnPropertyDescriptor(nt.prototype,"selectNodes"),nt.prototype),Yn(nt.prototype,"setFakerNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setFakerNode"),nt.prototype),Yn(nt.prototype,"removeFakerNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"removeFakerNode"),nt.prototype),Yn(nt.prototype,"setModel",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setModel"),nt.prototype),Yn(nt.prototype,"toFront",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"toFront"),nt.prototype),Yn(nt.prototype,"setElementZIndex",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementZIndex"),nt.prototype),Yn(nt.prototype,"deleteNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteNode"),nt.prototype),Yn(nt.prototype,"addNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"addNode"),nt.prototype),Yn(nt.prototype,"cloneNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"cloneNode"),nt.prototype),Yn(nt.prototype,"moveNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNode"),nt.prototype),Yn(nt.prototype,"moveNode2Coordinate",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNode2Coordinate"),nt.prototype),Yn(nt.prototype,"editText",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"editText"),nt.prototype),Yn(nt.prototype,"addEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"addEdge"),nt.prototype),Yn(nt.prototype,"moveEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveEdge"),nt.prototype),Yn(nt.prototype,"deleteEdgeBySourceAndTarget",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeBySourceAndTarget"),nt.prototype),Yn(nt.prototype,"deleteEdgeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeById"),nt.prototype),Yn(nt.prototype,"deleteEdgeBySource",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeBySource"),nt.prototype),Yn(nt.prototype,"deleteEdgeByTarget",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"deleteEdgeByTarget"),nt.prototype),Yn(nt.prototype,"setElementStateById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setElementStateById"),nt.prototype),Yn(nt.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"updateText"),nt.prototype),Yn(nt.prototype,"selectNodeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectNodeById"),nt.prototype),Yn(nt.prototype,"selectEdgeById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectEdgeById"),nt.prototype),Yn(nt.prototype,"selectElementById",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"selectElementById"),nt.prototype),Yn(nt.prototype,"clearSelectElements",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"clearSelectElements"),nt.prototype),Yn(nt.prototype,"moveNodes",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"moveNodes"),nt.prototype),Yn(nt.prototype,"setDefaultEdgeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setDefaultEdgeType"),nt.prototype),Yn(nt.prototype,"changeNodeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeNodeType"),nt.prototype),Yn(nt.prototype,"changeEdgeType",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"changeEdgeType"),nt.prototype),Yn(nt.prototype,"getNodeIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeIncomingEdge"),nt.prototype),Yn(nt.prototype,"getNodeOutgoingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeOutgoingEdge"),nt.prototype),Yn(nt.prototype,"getAnchorIncomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAnchorIncomingEdge"),nt.prototype),Yn(nt.prototype,"getAnchorOutcomingEdge",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getAnchorOutcomingEdge"),nt.prototype),Yn(nt.prototype,"getNodeIncomingNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeIncomingNode"),nt.prototype),Yn(nt.prototype,"getNodeOutgoingNode",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"getNodeOutgoingNode"),nt.prototype),Yn(nt.prototype,"setTheme",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"setTheme"),nt.prototype),Yn(nt.prototype,"resize",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"resize"),nt.prototype),Yn(nt.prototype,"clearData",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"clearData"),nt.prototype),Yn(nt.prototype,"translateCenter",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"translateCenter"),nt.prototype),Yn(nt.prototype,"fitView",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"fitView"),nt.prototype),Yn(nt.prototype,"openEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"openEdgeAnimation"),nt.prototype),Yn(nt.prototype,"closeEdgeAnimation",[c.k],Object.getOwnPropertyDescriptor(nt.prototype,"closeEdgeAnimation"),nt.prototype),nt),cR=XE;function V_(a){return V_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V_(a)}function W_(){return W_=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},W_.apply(this,arguments)}function fR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function z_(a,i){return z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},z_(a,i)}function dR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=um(a);if(i){var p=um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return pR(this,l)}}function pR(a,i){if(i&&(V_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Js(a)}function Js(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function um(a){return um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},um(a)}function ff(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var YE,hR=ps(zE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&z_(f,y)})(p,a);var i,l,u=dR(p);function p(f){var y;(function(I,H){if(!(I instanceof H))throw new TypeError("Cannot call a class as a function")})(this,p),ff(Js(y=u.call(this)),"stepDrag",void 0),ff(Js(y),"stepScrollX",0),ff(Js(y),"stepScrollY",0),ff(Js(y),"onDragging",function(I){var H=I.deltaX,J=I.deltaY;y.setState({isDragging:!0});var de=y.props.graphModel,Se=de.transformModel;de.editConfigModel.stopMoveGraph!==!0&&Se.translate(H,J)}),ff(Js(y),"onDragEnd",function(){y.setState({isDragging:!1})}),ff(Js(y),"zoomHandler",function(I){var H=y.props,J=H.graphModel,de=J.editConfigModel,Se=J.transformModel,ke=J.gridSize,Ke=H.graphModel,Ze=I.deltaX,ht=I.deltaY;if(de.stopScrollGraph||I.ctrlKey===!0){if(!de.stopZoomGraph){I.preventDefault();var $t=Ke.getPointByClient({x:I.clientX,y:I.clientY}).canvasOverlayPosition,hn=$t.x,dn=$t.y;Se.zoom(I.deltaY<0,[hn,dn])}}else{if(I.preventDefault(),y.stepScrollX+=Ze,y.stepScrollY+=ht,Math.abs(y.stepScrollX)>=ke){var zn=y.stepScrollX%ke,sn=y.stepScrollX-zn;Se.translate(-sn*Se.SCALE_X,0),y.stepScrollX=zn}if(Math.abs(y.stepScrollY)>=ke){var Dn=y.stepScrollY%ke,bn=y.stepScrollY-Dn;Se.translate(0,-bn*Se.SCALE_Y),y.stepScrollY=Dn}}}),ff(Js(y),"clickHandler",function(I){if(I.target.getAttribute("name")==="canvas-overlay"){var H=y.props.graphModel;H.selectElements.size>0&&H.clearSelectElements(),H.eventCenter.emit(Nn.BLANK_CLICK,{e:I})}}),ff(Js(y),"handleContextMenu",function(I){if(I.target.getAttribute("name")==="canvas-overlay"){I.preventDefault();var H=y.props.graphModel,J=H.getPointByClient({x:I.clientX,y:I.clientY});H.eventCenter.emit(Nn.BLANK_CONTEXTMENU,{e:I,position:J})}}),ff(Js(y),"mouseDownHandler",function(I){var H=y.props.graphModel,J=H.eventCenter,de=H.editConfigModel,Se=H.transformModel.SCALE_X,ke=H.gridSize,Ke=I.target,Ze=!de.adjustEdge&&!de.adjustNodePosition;(Ke.getAttribute("name")==="canvas-overlay"||Ze)&&(de.stopMoveGraph!==!0?(y.stepDrag.setStep(ke*Se),y.stepDrag.handleMouseDown(I)):J.emit(Nn.BLANK_MOUSEDOWN,{e:I}),y.clickHandler(I))});var b=f.graphModel,x=b.gridSize,k=b.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,onDragEnd:y.onDragEnd,step:x,eventType:"BLANK",isStopPropagation:!1,eventCenter:k,model:null}),y.state={isDragging:!1},y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props,b=y.children,x=y.dnd,k=this.state.isDragging;return Object(Le.g)("svg",W_({xmlns:"http://www.w3.org/2000/svg",width:"100%",height:"100%",name:"canvas-overlay",onWheel:this.zoomHandler,onMouseDown:this.mouseDownHandler,onContextMenu:this.handleContextMenu,className:k?"lf-canvas-overlay lf-dragging":"lf-canvas-overlay lf-drag-able"},x.eventMap()),Object(Le.g)("g",{transform:f},b))}}])&&fR(i.prototype,l),p}(Le.a))||zE;function H_(a){return H_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H_(a)}function vR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function yR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function X_(a,i){return X_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},X_(a,i)}function mR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=sm(a);if(i){var p=sm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return gR(this,l)}}function gR(a,i){if(i&&(H_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function sm(a){return sm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},sm(a)}var _R=ps(YE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&X_(f,y)})(p,a);var i,l,u=mR(p);function p(){return vR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"componentDidMount",value:function(){this.triggerToolRender()}},{key:"componentDidUpdate",value:function(){this.triggerToolRender()}},{key:"getTools",value:function(){var f=this.props,y=f.tool,b=f.graphModel,x=y.getTools().map(function(k){return Object(Le.g)(k,{graphModel:b,logicFlow:y.instance})});return y.components=x,x}},{key:"triggerToolRender",value:function(){var f=this.props,y=f.tool,b=f.graphModel,x=document.querySelector("#ToolOverlay_".concat(b.flowId)),k=y.getInstance();k.components.forEach(function(I){return I(k,x)}),k.components=[]}},{key:"render",value:function(){var f=this.props.graphModel;return Object(Le.g)("div",{className:"lf-tool-overlay",id:"ToolOverlay_".concat(f.flowId)},this.getTools())}}])&&yR(i.prototype,l),p}(Le.a))||YE;function Y_(a){return Y_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Y_(a)}function bR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function wR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function q_(a,i){return q_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},q_(a,i)}function ER(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=cm(a);if(i){var p=cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return OR(this,l)}}function OR(a,i){if(i&&(Y_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function cm(a){return cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},cm(a)}var qE,xR=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&q_(f,y)})(p,a);var i,l,u=ER(p);function p(){return bR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.background;return Object(Le.g)("div",{className:"lf-background"},Object(Le.g)("div",{style:f,className:"lf-background-area"}))}}])&&wR(i.prototype,l),p}(Le.a);function K_(a){return K_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K_(a)}function SR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function AR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Z_(a,i){return Z_=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Z_(a,i)}function TR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=fm(a);if(i){var p=fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return MR(this,l)}}function MR(a,i){if(i&&(K_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return KE(a)}function KE(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function fm(a){return fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},fm(a)}function PR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var ZE=ps(qE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Z_(f,y)})(p,a);var i,l,u=TR(p);function p(){var f;SR(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return PR(KE(f=u.call.apply(u,[this].concat(b))),"id",el()),f}return i=p,(l=[{key:"renderDot",value:function(){var f=this.props,y=f.config,b=y.color,x=y.thickness,k=x===void 0?2:x,I=f.size,H=f.visible,J=Math.min(Math.max(2,k),I/2),de=1;return H||(de=0),Object(Le.g)("rect",{width:J,height:J,rx:J/2,ry:J/2,fill:b,opacity:de})}},{key:"renderMesh",value:function(){var f=this.props,y=f.config,b=y.color,x=y.thickness,k=x===void 0?1:x,I=f.size,H=f.visible,J=Math.min(Math.max(1,k),I/2),de="M ".concat(I," 0 H0 M0 0 V0 ").concat(I),Se=1;return H||(Se=0),Object(Le.g)("path",{d:de,stroke:b,strokeWidth:J,opacity:Se})}},{key:"render",value:function(){var f=this.props,y=f.type,b=f.size,x=f.graphModel.transformModel,k=[x.SCALE_X,x.SKEW_Y,x.SKEW_X,x.SCALE_Y,x.TRANSLATE_X,x.TRANSLATE_Y].join(","),I="matrix(".concat(k,")");return Object(Le.g)("div",{className:"lf-grid"},Object(Le.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%"},Object(Le.g)("defs",null,Object(Le.g)("pattern",{id:this.id,patternUnits:"userSpaceOnUse",patternTransform:I,x:"0",y:"0",width:b,height:b},y==="dot"&&this.renderDot(),y==="mesh"&&this.renderMesh())),Object(Le.g)("rect",{width:"100%",height:"100%",fill:"url(#".concat(this.id,")")})))}}])&&AR(i.prototype,l),p}(Le.a))||qE;ZE.defaultProps={size:20,visible:!0,type:"dot",config:{color:"#ababab",thickness:1}},r(53);function J_(a){return J_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},J_(a)}function kR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return JE(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return JE(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function JE(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var QE,Nh=function(a){var i={x1:10,y1:10,x2:20,y2:20,stroke:"black"};return Object.entries(a).forEach(function(l){var u=kR(l,2),p=u[0],f=u[1];(p==="style"||J_(f)!=="object")&&(i[p]=f)}),Object(Le.g)("line",i)};function Q_(a){return Q_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Q_(a)}function eO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function dm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?eO(Object(l),!0).forEach(function(u){NR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):eO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function NR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function RR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function eb(a,i){return eb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},eb(a,i)}function CR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=pm(a);if(i){var p=pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return DR(this,l)}}function DR(a,i){if(i&&(Q_(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function pm(a){return pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},pm(a)}var tO,IR=ps(QE=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&eb(f,y)})(p,a);var i,l,u=CR(p);function p(){return RR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.snaplineModel,y=f.position,b=f.isShowHorizontal,x=f.isShowVertical,k=f.getStyle(),I=y.x,H=I===void 0?0:I,J=y.y,de=J===void 0?0:J,Se=dm(dm({x1:-1e5,y1:de,x2:1e5,y2:de},k),{},{stroke:b?k.stroke:"none"}),ke=dm(dm({x1:H,y1:-1e5,x2:H,y2:1e5},k),{},{stroke:x?k.stroke:"none"});return Object(Le.g)("g",{className:"lf-snapline"},Object(Le.g)(Nh,Se),Object(Le.g)(Nh,ke))}}])&&jR(i.prototype,l),p}(Le.a))||QE;function tb(a){return tb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},tb(a)}function LR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return nO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Ed(a){var i=a.x,l=a.y,u=a.width,p=a.height,f=a.className,y=a.radius,b=i-u/2,x=l-p/2,k={};return Object.entries(a).forEach(function(I){var H=LR(I,2),J=H[0],de=H[1];tb(de)!=="object"&&(k[J]=de)}),k.className=f?"lf-basic-shape ".concat(f):"lf-basic-shape",y&&(k.rx=y,k.ry=y),k.x=b,k.y=x,Object(Le.g)("rect",k)}function nb(a){return nb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},nb(a)}function Rh(){return Rh=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rh.apply(this,arguments)}function rO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function oO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?rO(Object(l),!0).forEach(function(u){FR(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):rO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function FR(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function $R(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function BR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function rb(a,i){return rb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},rb(a,i)}function UR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=hm(a);if(i){var p=hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return GR(this,l)}}function GR(a,i){if(i&&(nb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function hm(a){return hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},hm(a)}Ed.defaultProps={className:"",radius:""};var iO,VR=ps(tO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&rb(f,y)})(p,a);var i,l,u=UR(p);function p(){return $R(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getNodesOutline",value:function(){var f=this.props.graphModel,y=f.nodes,b=f.editConfigModel,x=b.hoverOutline,k=b.nodeSelectedOutline,I=[];return y.forEach(function(H){if(H.isHovered||H.isSelected){var J=H.isHovered,de=H.isSelected,Se=H.x,ke=H.y,Ke=H.width,Ze=H.height;if(k&&de||x&&J){var ht=H.getOutlineStyle(),$t={};if(Object.keys(ht).forEach(function(dn){dn!=="hover"&&($t[dn]=ht[dn])}),J){var hn=ht.hover;$t=oO(oO({},$t),hn)}I.push(Object(Le.g)(Ed,Rh({transform:H.transform,className:"lf-outline-node",x:Se,y:ke,width:Ke+10,height:Ze+10},$t)))}}}),I}},{key:"getEdgeOutline",value:function(){for(var f=this.props.graphModel,y=f.edges,b=f.editConfigModel,x=b.edgeSelectedOutline,k=b.hoverOutline,I=[],H=0;H<y.length;H++){var J=y[H];(x&&J.isSelected||k&&J.isHovered)&&(J.modelType===xr.LINE_EDGE?I.push(this.getLineOutline(J)):J.modelType===xr.POLYLINE_EDGE?I.push(this.getPolylineOutline(J)):J.modelType===xr.BEZIER_EDGE&&I.push(this.getBezierOutline(J)))}return I}},{key:"getLineOutline",value:function(f){var y=f.startPoint,b=f.endPoint,x=(y.x+b.x)/2,k=(y.y+b.y)/2,I=Math.abs(y.x-b.x)+10,H=Math.abs(y.y-b.y)+10,J=f.getOutlineStyle();return Object(Le.g)(Ed,Rh({className:"lf-outline-edge",x,y:k,width:I,height:H},J))}},{key:"getPolylineOutline",value:function(f){var y=f.points,b=mo(y),x=Wt(b,8),k=x.x,I=x.y,H=x.width,J=x.height,de=f.getOutlineStyle();return Object(Le.g)(Ed,Rh({className:"lf-outline",x:k,y:I,width:H,height:J},de))}},{key:"getBezierOutline",value:function(f){var y=f.path,b=Wn(y),x=Wt(b,8),k=x.x,I=x.y,H=x.width,J=x.height,de=f.getOutlineStyle();return Object(Le.g)(Ed,Rh({className:"lf-outline",x:k,y:I,width:H,height:J},de))}},{key:"render",value:function(){return Object(Le.g)("g",{className:"lf-outline"},this.getNodesOutline(),this.getEdgeOutline())}}])&&BR(i.prototype,l),p}(Le.a))||tO;function ob(a){return ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ob(a)}function WR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return aO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return aO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function aO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function jh(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.r,y=f===void 0?4:f,b=a.className,x={cx:l,cy:p,r:y,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(k){var I=WR(k,2),H=I[0],J=I[1];ob(J)!=="object"&&(x[H]=J)}),x.className=b?"lf-basic-shape ".concat(b):"lf-basic-shape",Object(Le.g)("circle",x)}function ib(a){return ib=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ib(a)}function zR(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return lO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return lO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function lO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function ty(){return ty=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},ty.apply(this,arguments)}function uO(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sO(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function cO(a,i,l){return i&&sO(a.prototype,i),l&&sO(a,l),a}function fO(a,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(i&&i.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),i&&ab(a,i)}function ab(a,i){return ab=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},ab(a,i)}function dO(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=ym(a);if(i){var p=ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return HR(this,l)}}function HR(a,i){if(i&&(ib(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vm(a)}function vm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function ym(a){return ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},ym(a)}function lb(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var pO,hO=function(a){fO(l,a);var i=dO(l);function l(){var u;return uO(this,l),lb(vm(u=i.call(this)),"dragHandler",void 0),lb(vm(u),"onDragging",function(p){var f=p.event,y=u.props,b=y.graphModel,x=y.bezierModel,k=y.type,I=b.getPointByClient({x:f.clientX,y:f.clientY}).canvasOverlayPosition,H=I.x,J=I.y;x.updateAdjustAnchor({x:H,y:J},k),b.eventCenter.emit(Nn.EDGE_ADJUST,{data:x.getData()})}),lb(vm(u),"onDragEnd",function(){u.props.bezierModel.isDragging=!1}),u.dragHandler=new ee({onDragging:u.onDragging,onDragEnd:u.onDragEnd}),u}return cO(l,[{key:"render",value:function(){var u=this,p=this.props.position,f=p.x,y=p.y,b=this.props.bezierModel.getEdgeStyle().adjustAnchor;return Object(Le.g)(jh,ty({className:"lf-bezier-adjust-anchor",x:f,y},b,{onMouseDown:function(x){u.dragHandler.handleMouseDown(x)}}))}}]),l}(Le.a),XR=ps(iO=function(a){fO(l,a);var i=dO(l);function l(){return uO(this,l),i.apply(this,arguments)}return cO(l,[{key:"getBezierAdjust",value:function(u,p){var f=u.path,y=u.id,b=zR(Wn(f),4),x=b[0],k=b[1],I=b[2],H=b[3],J=u.getEdgeStyle().adjustLine,de=[];return de.push(Object(Le.g)(Nh,ty({x1:x.x,y1:x.y,x2:k.x,y2:k.y},J))),de.push(Object(Le.g)(hO,{position:k,bezierModel:u,graphModel:p,key:"".concat(y,"_ePre"),type:"sNext"})),de.push(Object(Le.g)(Nh,ty({x1:H.x,y1:H.y,x2:I.x,y2:I.y},J))),de.push(Object(Le.g)(hO,{position:I,bezierModel:u,graphModel:p,key:"".concat(y,"_sNext"),type:"ePre"})),de}},{key:"selectedBezierEdge",value:function(){for(var u=this.props.graphModel,p=u.edges,f=[],y=0;y<p.length;y++){var b=p[y];b.isSelected&&b.modelType===xr.BEZIER_EDGE&&b.draggable&&f.push(this.getBezierAdjust(b,u))}return f}},{key:"render",value:function(){return Object(Le.g)("g",{className:"lf-bezier-adjust"},this.selectedBezierEdge())}}]),l}(Le.a))||iO;function ub(a){return ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ub(a)}function YR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function qR(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function sb(a,i){return sb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},sb(a,i)}function KR(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=mm(a);if(i){var p=mm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ZR(this,l)}}function ZR(a,i){if(i&&(ub(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function mm(a){return mm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},mm(a)}var vO,JR=ps(pO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&sb(f,y)})(p,a);var i,l,u=KR(p);function p(){return YR(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel.transformModel.getTransformStyle().transform,y=this.props.children;return Object(Le.g)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"100%",height:"100%",className:"modification-overlay"},Object(Le.g)("g",{transform:f},y))}}])&&qR(i.prototype,l),p}(Le.a))||pO;function cb(a){return cb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},cb(a)}function fb(){return fb=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},fb.apply(this,arguments)}function QR(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ej(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function db(a,i){return db=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},db(a,i)}function tj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=gm(a);if(i){var p=gm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return nj(this,l)}}function nj(a,i){if(i&&(cb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function gm(a){return gm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},gm(a)}var rj=ps(vO=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&db(f,y)})(p,a);var i,l,u=tj(p);function p(){return QR(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getComponent",value:function(f,y){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"canvas-overlay",x=this.props.getView,k=x(f.type);return Object(Le.g)(k,{key:f.id,model:f,graphModel:y,overlay:b})}},{key:"render",value:function(){var f=this,y=this.props,b=y.graphModel,x=y.tool,k=y.options,I=y.dnd,H=y.snaplineModel,J={};k.width&&(J.width="".concat(b.width,"px")),k.height&&(J.height="".concat(b.height,"px"));var de=k.grid,Se=b.fakerNode,ke=b.editConfigModel.adjustEdge;return Object(Le.g)("div",{className:"lf-graph","flow-id":b.flowId,style:J},Object(Le.g)(hR,{graphModel:b,dnd:I},Object(Le.g)("g",{className:"lf-base"},Xf(b.sortElements,function(Ke){return f.getComponent(Ke,b)})),Se?this.getComponent(Se,b):""),Object(Le.g)(JR,{graphModel:b},Object(Le.g)(VR,{graphModel:b}),ke?Object(Le.g)(XR,{graphModel:b}):"",k.snapline!==!1?Object(Le.g)(IR,{snaplineModel:H}):""),Object(Le.g)(_R,{graphModel:b,tool:x}),k.background&&Object(Le.g)(xR,{background:k.background}),k.grid&&Object(Le.g)(ZE,fb({},de,{graphModel:b})))}}],l&&ej(i.prototype,l),p}(Le.a))||vO,oj=rj;function yO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function _m(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?yO(Object(l),!0).forEach(function(u){df(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):yO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function ij(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function df(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var aj=function(){function a(u){var p=this;(function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),df(this,"nodeConfig",void 0),df(this,"lf",void 0),df(this,"fakerNode",void 0),df(this,"stopDrag",function(){p.nodeConfig=null,window.document.removeEventListener("mouseup",p.stopDrag)}),df(this,"dragEnter",function(y){p.nodeConfig&&!p.fakerNode&&(p.fakerNode=p.lf.createFakerNode(_m(_m({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY}))))}),df(this,"onDragOver",function(y){if(y.preventDefault(),p.fakerNode){var b=p.clientToLocalPoint({x:y.clientX,y:y.clientY}),x=b.x,k=b.y;p.fakerNode.moveTo(x,k);var I=p.fakerNode.getData();p.lf.setNodeSnapLine(I),p.lf.graphModel.eventCenter.emit(Nn.NODE_DND_DRAG,{data:I})}return!1}),df(this,"onDragLeave",function(){p.fakerNode&&(p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)}),df(this,"onDrop",function(y){p.lf.graphModel&&y&&p.nodeConfig&&(p.lf.addNode(_m(_m({},p.nodeConfig),p.clientToLocalPoint({x:y.clientX,y:y.clientY})),Nn.NODE_DND_ADD,y),y.preventDefault(),y.stopPropagation(),p.nodeConfig=null,p.lf.removeNodeSnapLine(),p.lf.graphModel.removeFakerNode(),p.fakerNode=null)});var f=u.lf;this.lf=f}var i,l;return i=a,(l=[{key:"clientToLocalPoint",value:function(u){var p=u.x,f=u.y,y=Xu(this.lf.options,["grid","size"]),b=this.lf.graphModel.getPointByClient({x:p,y:f}).canvasOverlayPosition,x=b.x,k=b.y;return{x:wl(x,y),y:wl(k,y)}}},{key:"startDrag",value:function(u){var p=this.lf.graphModel.editConfigModel;p!=null&&p.isSilentMode||(this.nodeConfig=u,window.document.addEventListener("mouseup",this.stopDrag))}},{key:"eventMap",value:function(){return{onMouseEnter:this.dragEnter,onMouseOver:this.dragEnter,onMouseMove:this.onDragOver,onMouseLeave:this.onDragLeave,onMouseUp:this.onDrop}}}])&&ij(i.prototype,l),a}();function mO(a){var i=a.container,l=a.grid,u=a.width,p=a.height;if(!i)throw new Error("请检查 container 参数是否有效");if(typeof u=="string"||typeof p=="string")throw new Error("width或height不支持传入字符串，请传数字");return l&&(a.grid=Eu({size:20,type:"dot",visible:!0,config:{color:"#ababab",thickness:1}},l)),Eu({},_O,a)}var ro,gO,_O={background:!1,grid:!1,textEdit:!0,disabledTools:[]};function pb(a){return pb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},pb(a)}function hb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return bO(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return bO(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function bO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function wO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function bm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?wO(Object(l),!0).forEach(function(u){EO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):wO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function uj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function sj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function ny(){return ny=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=cj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},ny.apply(this,arguments)}function cj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Od(a))!==null;);return a}function vb(a,i){return vb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},vb(a,i)}function fj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Od(a);if(i){var p=Od(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dj(this,l)}}function dj(a,i){if(i&&(pb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wm(a)}function wm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Od(a){return Od=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Od(a)}function EO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function cs(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var yb=(ro=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&vb(f,y)})(p,a);var i,l,u=fj(p);function p(){var f;uj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return EO(wm(f=u.call.apply(u,[this].concat(b))),"modelType",xr.BEZIER_EDGE),lj(wm(f),"path",gO,wm(f)),f}return i=p,(l=[{key:"initEdgeData",value:function(f){this.offset=100,ny(Od(p.prototype),"initEdgeData",this).call(this,f)}},{key:"getEdgeStyle",value:function(){var f=this.graphModel.theme.bezier;return bm(bm({},ny(Od(p.prototype),"getEdgeStyle",this).call(this)),Eo(f))}},{key:"getTextPosition",value:function(){if(this.pointsList&&this.pointsList.length>0){var f=0,y=0;return this.pointsList.forEach(function(b){var x=b.x,k=b.y;f+=x,y+=k}),{x:f/this.pointsList.length,y:y/this.pointsList.length}}return{x:(this.startPoint.x+this.endPoint.x)/2,y:(this.startPoint.y+this.endPoint.y)/2}}},{key:"getData",value:function(){var f=ny(Od(p.prototype),"getData",this).call(this),y=this.pointsList.map(function(b){return{x:b.x,y:b.y}});return bm(bm({},f),{},{pointsList:y})}},{key:"getControls",value:function(){var f=this.startPoint,y=this.endPoint;return fr({start:f,end:y,sourceNode:this.sourceNode,targetNode:this.targetNode,offset:this.offset})}},{key:"getPath",value:function(f){var y=hb(f,4),b=y[0],x=y[1],k=y[2],I=y[3];return"M ".concat(b.x," ").concat(b.y,`
    C `).concat(x.x," ").concat(x.y,`,
    `).concat(k.x," ").concat(k.y,`,
    `).concat(I.x," ").concat(I.y)}},{key:"initPoints",value:function(){this.pointsList.length>0?this.path=this.getPath(this.pointsList):this.updatePoints()}},{key:"updatePoints",value:function(){var f=this.getControls(),y=f.sNext,b=f.ePre;this.updatePath(y,b)}},{key:"updatePath",value:function(f,y){f=Eo(f),y=Eo(y);var b={x:this.startPoint.x,y:this.startPoint.y},x={x:this.endPoint.x,y:this.endPoint.y};if(!f||!y){var k=this.getControls();f=k.sNext,y=k.ePre}this.pointsList=[b,f,y,x],this.path=this.getPath(this.pointsList)}},{key:"updateStartPoint",value:function(f){this.startPoint=Object.assign({},f),this.updatePoints()}},{key:"updateEndPoint",value:function(f){this.endPoint=Object.assign({},f),this.updatePoints()}},{key:"moveStartPoint",value:function(f,y){this.startPoint.x+=f,this.startPoint.y+=y;var b=hb(this.pointsList,3),x=b[1],k=b[2];x.x+=f,x.y+=y,this.updatePath(x,k)}},{key:"moveEndPoint",value:function(f,y){this.endPoint.x+=f,this.endPoint.y+=y;var b=hb(this.pointsList,3),x=b[1],k=b[2];k.x+=f,k.y+=y,this.updatePath(x,k)}},{key:"updateAdjustAnchor",value:function(f,y){y==="sNext"?this.pointsList[1]=f:y==="ePre"&&(this.pointsList[2]=f),this.path=this.getPath(this.pointsList),this.setText(Object.assign({},this.text,this.textPosition))}},{key:"getAdjustStart",value:function(){return this.pointsList[0]||this.startPoint}},{key:"getAdjustEnd",value:function(){var f=this.pointsList;return f[f.length-1]||this.endPoint}},{key:"updateAfterAdjustStartAndEnd",value:function(f){var y=f.startPoint,b=f.endPoint,x=f.sourceNode,k=f.targetNode,I=fr({start:y,end:b,sourceNode:x,targetNode:k,offset:this.offset}),H=I.sNext,J=I.ePre;this.pointsList=[y,H,J,b],this.initPoints()}}])&&sj(i.prototype,l),p}(as),gO=cs(ro.prototype,"path",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),cs(ro.prototype,"initPoints",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"initPoints"),ro.prototype),cs(ro.prototype,"updatePoints",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updatePoints"),ro.prototype),cs(ro.prototype,"updateStartPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateStartPoint"),ro.prototype),cs(ro.prototype,"updateEndPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateEndPoint"),ro.prototype),cs(ro.prototype,"moveStartPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"moveStartPoint"),ro.prototype),cs(ro.prototype,"moveEndPoint",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"moveEndPoint"),ro.prototype),cs(ro.prototype,"updateAdjustAnchor",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateAdjustAnchor"),ro.prototype),cs(ro.prototype,"getAdjustStart",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"getAdjustStart"),ro.prototype),cs(ro.prototype,"getAdjustEnd",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"getAdjustEnd"),ro.prototype),cs(ro.prototype,"updateAfterAdjustStartAndEnd",[c.k],Object.getOwnPropertyDescriptor(ro.prototype,"updateAfterAdjustStartAndEnd"),ro.prototype),ro),nn,OO,xO,SO,AO,TO,MO,PO,kO,NO,RO,jO,CO,DO,IO,LO,FO,$O,BO,UO,GO,VO,WO,pj=function(a){return a==null};function hj(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||zO(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function mb(a){return mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},mb(a)}function zO(a,i){if(a){if(typeof a=="string")return HO(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?HO(a,i):void 0}}function HO(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function XO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ol(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?XO(Object(l),!0).forEach(function(u){Tl(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):XO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function wi(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function vj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Tl(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Ar(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var pf,YO,hf=(nn=function(){function a(u,p){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Tl(this,"id",""),wi(this,"type",OO,this),wi(this,"x",xO,this),wi(this,"y",SO,this),wi(this,"text",AO,this),wi(this,"properties",TO,this),wi(this,"_width",MO,this),wi(this,"_height",PO,this),wi(this,"anchorsOffset",kO,this),wi(this,"isSelected",NO,this),wi(this,"isHovered",RO,this),wi(this,"isShowAnchor",jO,this),wi(this,"isDragging",CO,this),wi(this,"isHitable",DO,this),wi(this,"draggable",IO,this),wi(this,"visible",LO,this),wi(this,"enableRotate",FO,this),Tl(this,"virtual",!1),Tl(this,"graphModel",void 0),wi(this,"zIndex",$O,this),wi(this,"state",BO,this),wi(this,"autoToFront",UO,this),wi(this,"style",GO,this),wi(this,"transform",VO,this),wi(this,"_rotate",WO,this),Tl(this,"BaseType",io.NODE),Tl(this,"modelType",xr.NODE),Tl(this,"additionStateData",void 0),Tl(this,"targetRules",[]),Tl(this,"sourceRules",[]),Tl(this,"moveRules",[]),Tl(this,"hasSetTargetRules",!1),Tl(this,"hasSetSourceRules",!1),this.graphModel=p,this.initNodeData(u),this.setAttributes()}var i,l;return i=a,l=[{key:"width",get:function(){return this._width},set:function(u){this._width=u}},{key:"height",get:function(){return this._height},set:function(u){this._height=u}},{key:"rotate",get:function(){return this._rotate},set:function(u){this._rotate=u;var p=this.x,f=p===void 0?0:p,y=this.y,b=y===void 0?0:y;this.transform=new Zs(-f,-b).rotate(u).translate(f,b).toString()}},{key:"incoming",get:function(){return{nodes:this.graphModel.getNodeIncomingNode(this.id),edges:this.graphModel.getNodeIncomingEdge(this.id)}}},{key:"outgoing",get:function(){return{nodes:this.graphModel.getNodeOutgoingNode(this.id),edges:this.graphModel.getNodeOutgoingEdge(this.id)}}},{key:"initNodeData",value:function(u){if(u.properties||(u.properties={}),!u.id){var p=this.graphModel.idGenerator,f=p&&p(u.type),y=this.createId();u.id=y||f||el()}this.formatText(u),Mi(this,function(b){return Ka(b,["id","type","x","y","text","properties","virtual","rotate"])}(u)),this.graphModel.overlapMode===wo.INCREASE&&(this.zIndex=u.zIndex||ql())}},{key:"setAttributes",value:function(){}},{key:"createId",value:function(){return null}},{key:"formatText",value:function(u){u.text||(u.text={value:"",x:u.x,y:u.y,draggable:!1,editable:!0}),u.text&&typeof u.text=="string"?u.text={value:u.text,x:u.x,y:u.y,draggable:!1,editable:!0}:u.text&&u.text.editable===void 0&&(u.text.editable=!0)}},{key:"getData",value:function(){var u=this.text,p=u.x,f=u.y,y=u.value,b=this.properties;Object(c.x)(b)&&(b=Object(c.I)(b));var x={id:this.id,type:this.type,x:this.x,y:this.y,properties:b};return this.rotate&&(x.rotate=this.rotate),this.graphModel.overlapMode===wo.INCREASE&&(x.zIndex=this.zIndex),y&&(x.text={x:p,y:f,value:y}),x}},{key:"getHistoryData",value:function(){return this.getData()}},{key:"getProperties",value:function(){return Object(c.I)(this.properties)}},{key:"getOuterGAttributes",value:function(){return{className:""}}},{key:"getNodeStyle",value:function(){return ol(ol({},this.graphModel.theme.baseNode),this.style)}},{key:"getTextStyle",value:function(){var u=this.graphModel.theme.nodeText;return Eo(u)}},{key:"getRotateControlStyle",value:function(){var u=this.graphModel.theme.rotateControl;return Eo(u)}},{key:"getAnchorStyle",value:function(u){var p=this.graphModel.theme.anchor;return Eo(p)}},{key:"getAnchorLineStyle",value:function(u){var p=this.graphModel.theme.anchorLine;return Eo(p)}},{key:"getOutlineStyle",value:function(){var u=this.graphModel.theme.outline;return Eo(u)}},{key:"isAllowConnectedAsSource",value:function(u,p,f,y){var b=this.hasSetSourceRules?this.sourceRules:this.getConnectedSourceRules();this.hasSetSourceRules=!0;for(var x,k=!0,I=0;I<b.length;I++){var H=b[I];if(!H.validate.call(this,this,u,p,f,y)){k=!1,x=H.message;break}}return{isAllPass:k,msg:x}}},{key:"getConnectedSourceRules",value:function(){return this.sourceRules}},{key:"isAllowConnectedAsTarget",value:function(u,p,f,y){var b=this.hasSetTargetRules?this.targetRules:this.getConnectedTargetRules();this.hasSetTargetRules=!0;for(var x,k=!0,I=0;I<b.length;I++){var H=b[I];if(!H.validate.call(this,u,this,p,f,y)){k=!1,x=H.message;break}}return{isAllPass:k,msg:x}}},{key:"isAllowMoveNode",value:function(u,p){var f,y=!0,b=!0,x=function(H,J){var de=typeof Symbol<"u"&&H[Symbol.iterator]||H["@@iterator"];if(!de){if(Array.isArray(H)||(de=zO(H))||J&&H&&typeof H.length=="number"){de&&(H=de);var Se=0,ke=function(){};return{s:ke,n:function(){return Se>=H.length?{done:!0}:{done:!1,value:H[Se++]}},e:function($t){throw $t},f:ke}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ke,Ze=!0,ht=!1;return{s:function(){de=de.call(H)},n:function(){var $t=de.next();return Ze=$t.done,$t},e:function($t){ht=!0,Ke=$t},f:function(){try{Ze||de.return==null||de.return()}finally{if(ht)throw Ke}}}}(this.moveRules.concat(this.graphModel.nodeMoveRules));try{for(x.s();!(f=x.n()).done;){var k=(0,f.value)(this,u,p);if(!k)return!1;if(mb(k)==="object"){var I=k;if(I.x===!1&&I.y===!1)return!1;y=y&&I.x,b=b&&I.y}}}catch(H){x.e(H)}finally{x.f()}return{x:y,y:b}}},{key:"getConnectedTargetRules",value:function(){return this.targetRules}},{key:"getAnchorsByOffset",value:function(){var u=this.anchorsOffset,p=this.id,f=this.x,y=this.y;return u&&u.length>0?u.map(function(b,x){return b.length?(b=b,{id:"".concat(p,"_").concat(x),x:f+b[0],y:y+b[1]}):ol(ol({},b=b),{},{x:f+b.x,y:y+b.y,id:b.id||"".concat(p,"_").concat(x)})}):this.getDefaultAnchor()}},{key:"getDefaultAnchor",value:function(){return[]}},{key:"getTargetAnchor",value:function(u){return function(p,f){for(var y,b=$i(f),x=Number.MAX_SAFE_INTEGER,k=0;k<b.length;k++){var I=la(p.x,p.y,b[k].x,b[k].y);I<x&&(x=I,y={index:k,anchor:Su(Su({},b[k]),{},{x:b[k].x,y:b[k].y,id:b[k].id})})}return y}(u,this)}},{key:"getBounds",value:function(){return{x1:this.x-this.width/2,y1:this.y-this.height/2,x2:this.x+this.width/2,y2:this.y+this.height/2}}},{key:"anchors",get:function(){var u=this.getAnchorsByOffset(),p=this.x,f=this.y,y=this.rotate;return u.forEach(function(b){var x=b.x,k=b.y,I=hj(new Ks([x,k,1]).translate(-p,-f).rotate(y).translate(p,f)[0],2),H=I[0],J=I[1];b.x=H,b.y=J}),u}},{key:"getAnchorInfo",value:function(u){if(!pj(u))for(var p=0;p<this.anchors.length;p++){var f=this.anchors[p];if(f.id===u)return f}}},{key:"addNodeMoveRules",value:function(u){this.moveRules.includes(u)||this.moveRules.push(u)}},{key:"move",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,b=!1;if(f)y=!0,b=!0;else{var x=this.isAllowMoveNode(u,p);typeof x=="boolean"?(y=x,b=x):(y=x.x,b=x.y)}if(y){var k=this.x+u;this.x=k,this.text&&this.moveText(u,0)}if(b){var I=this.y+p;this.y=I,this.text&&this.moveText(0,p)}return y||b}},{key:"getMoveDistance",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=!1,b=!1,x=0,k=0;if(f)y=!0,b=!0;else{var I=this.isAllowMoveNode(u,p);typeof I=="boolean"?(y=I,b=I):(y=I.x,b=I.y)}if(y&&u){var H=this.x+u;this.x=H,this.text&&this.moveText(u,0),x=u}if(b&&p){var J=this.y+p;this.y=J,this.text&&this.moveText(0,p),k=p}return[x,k]}},{key:"moveTo",value:function(u,p){var f=arguments.length>2&&arguments[2]!==void 0&&arguments[2],y=u-this.x,b=p-this.y;return!(!f&&!this.isAllowMoveNode(y,b)||(this.text&&this.text&&this.moveText(y,b),this.x=u,this.y=p,0))}},{key:"moveText",value:function(u,p){var f=this.text,y=f.x,b=f.y,x=f.value,k=f.draggable,I=f.editable;this.text={value:x,editable:I,draggable:k,x:y+u,y:b+p}}},{key:"updateText",value:function(u){this.text=ol(ol({},Object(c.I)(this.text)),{},{value:u})}},{key:"setSelected",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isSelected=u}},{key:"setHovered",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHovered=u,this.setIsShowAnchor(u)}},{key:"setIsShowAnchor",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isShowAnchor=u}},{key:"setEnableRotate",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.enableRotate=u}},{key:"setHitable",value:function(){var u=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];this.isHitable=u}},{key:"setElementState",value:function(u,p){this.state=u,this.additionStateData=p}},{key:"setProperty",value:function(u,p){this.properties=ol(ol({},Object(c.I)(this.properties)),{},Tl({},u,Zo(p))),this.setAttributes()}},{key:"setProperties",value:function(u){this.properties=ol(ol({},Object(c.I)(this.properties)),Zo(u)),this.setAttributes()}},{key:"deleteProperty",value:function(u){delete this.properties[u],this.setAttributes()}},{key:"setStyle",value:function(u,p){this.style=ol(ol({},this.style),{},Tl({},u,Zo(p)))}},{key:"setStyles",value:function(u){this.style=ol(ol({},this.style),Zo(u))}},{key:"updateStyles",value:function(u){this.style=ol({},Zo(u))}},{key:"setZIndex",value:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;this.zIndex=u}},{key:"updateAttributes",value:function(u){Mi(this,u)}}],l&&vj(i.prototype,l),a}(),OO=Ar(nn.prototype,"type",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),xO=Ar(nn.prototype,"x",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),SO=Ar(nn.prototype,"y",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),AO=Ar(nn.prototype,"text",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{value:"",x:0,y:0,draggable:!1,editable:!0}}}),TO=Ar(nn.prototype,"properties",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),MO=Ar(nn.prototype,"_width",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),PO=Ar(nn.prototype,"_height",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 80}}),kO=Ar(nn.prototype,"anchorsOffset",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),NO=Ar(nn.prototype,"isSelected",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),RO=Ar(nn.prototype,"isHovered",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),jO=Ar(nn.prototype,"isShowAnchor",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),CO=Ar(nn.prototype,"isDragging",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),DO=Ar(nn.prototype,"isHitable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),IO=Ar(nn.prototype,"draggable",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),LO=Ar(nn.prototype,"visible",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),FO=Ar(nn.prototype,"enableRotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$O=Ar(nn.prototype,"zIndex",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),BO=Ar(nn.prototype,"state",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),UO=Ar(nn.prototype,"autoToFront",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),GO=Ar(nn.prototype,"style",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),VO=Ar(nn.prototype,"transform",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),WO=Ar(nn.prototype,"_rotate",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ar(nn.prototype,"incoming",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"incoming"),nn.prototype),Ar(nn.prototype,"outgoing",[c.m],Object.getOwnPropertyDescriptor(nn.prototype,"outgoing"),nn.prototype),Ar(nn.prototype,"addNodeMoveRules",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"addNodeMoveRules"),nn.prototype),Ar(nn.prototype,"move",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"move"),nn.prototype),Ar(nn.prototype,"getMoveDistance",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"getMoveDistance"),nn.prototype),Ar(nn.prototype,"moveTo",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveTo"),nn.prototype),Ar(nn.prototype,"moveText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"moveText"),nn.prototype),Ar(nn.prototype,"updateText",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateText"),nn.prototype),Ar(nn.prototype,"setSelected",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setSelected"),nn.prototype),Ar(nn.prototype,"setHovered",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHovered"),nn.prototype),Ar(nn.prototype,"setIsShowAnchor",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setIsShowAnchor"),nn.prototype),Ar(nn.prototype,"setEnableRotate",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setEnableRotate"),nn.prototype),Ar(nn.prototype,"setHitable",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setHitable"),nn.prototype),Ar(nn.prototype,"setElementState",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setElementState"),nn.prototype),Ar(nn.prototype,"setProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperty"),nn.prototype),Ar(nn.prototype,"setProperties",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setProperties"),nn.prototype),Ar(nn.prototype,"deleteProperty",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"deleteProperty"),nn.prototype),Ar(nn.prototype,"setStyle",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyle"),nn.prototype),Ar(nn.prototype,"setStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setStyles"),nn.prototype),Ar(nn.prototype,"updateStyles",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateStyles"),nn.prototype),Ar(nn.prototype,"setZIndex",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"setZIndex"),nn.prototype),Ar(nn.prototype,"updateAttributes",[c.k],Object.getOwnPropertyDescriptor(nn.prototype,"updateAttributes"),nn.prototype),nn);function gb(a){return gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},gb(a)}function qO(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function KO(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?qO(Object(l),!0).forEach(function(u){ZO(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):qO(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function yj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function mj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function gj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function _b(){return _b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=_j(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},_b.apply(this,arguments)}function _j(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ch(a))!==null;);return a}function bb(a,i){return bb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},bb(a,i)}function bj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ch(a);if(i){var p=Ch(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wj(this,l)}}function wj(a,i){if(i&&(gb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Em(a)}function Em(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ch(a){return Ch=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ch(a)}function ZO(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function wb(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var $a,JO,QO,Eb=(pf=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&bb(f,y)})(p,a);var i,l,u=bj(p);function p(){var f;mj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return ZO(Em(f=u.call.apply(u,[this].concat(b))),"modelType",xr.CIRCLE_NODE),yj(Em(f),"r",YO,Em(f)),f}return i=p,(l=[{key:"width",get:function(){return 2*this.r}},{key:"height",get:function(){return 2*this.r}},{key:"getNodeStyle",value:function(){var f=_b(Ch(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.circle;return KO(KO({},f),Eo(y))}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.r;return[{x:f,y:y-b,id:"".concat(this.id,"_0")},{x:f+b,y,id:"".concat(this.id,"_1")},{x:f,y:y+b,id:"".concat(this.id,"_2")},{x:f-b,y,id:"".concat(this.id,"_3")}]}}])&&gj(i.prototype,l),p}(hf),YO=wb(pf.prototype,"r",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),wb(pf.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"width"),pf.prototype),wb(pf.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(pf.prototype,"height"),pf.prototype),pf);r(129);function Ob(a){return Ob=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Ob(a)}function xb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return ex(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return ex(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ex(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function tx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function nx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?tx(Object(l),!0).forEach(function(u){ox(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):tx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function rx(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Ej(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Oj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Sb(){return Sb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=xj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Sb.apply(this,arguments)}function xj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Ih(a))!==null;);return a}function Ab(a,i){return Ab=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Ab(a,i)}function Sj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ih(a);if(i){var p=Ih(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Aj(this,l)}}function Aj(a,i){if(i&&(Ob(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dh(a)}function Dh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ih(a){return Ih=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ih(a)}function ox(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Lh(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Qs,ix,ax,Tb=($a=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Ab(f,y)})(p,a);var i,l,u=Sj(p);function p(){var f;Ej(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return ox(Dh(f=u.call.apply(u,[this].concat(b))),"modelType",xr.DIAMOND_NODE),rx(Dh(f),"rx",JO,Dh(f)),rx(Dh(f),"ry",QO,Dh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=Sb(Ih(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.diamond;return nx(nx({},f),Eo(y))}},{key:"points",get:function(){var f=this.x,y=this.y,b=this.rx,x=this.ry;return[[f,y-x],[f+b,y],[f,y+x],[f-b,y]]}},{key:"pointsPosition",get:function(){return this.points.map(function(f){return{x:f[0],y:f[1]}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=xb(b,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=xb(b,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this;return this.points.map(function(y,b){var x=xb(y,2);return{x:x[0],y:x[1],id:"".concat(f.id,"_").concat(b)}})}}])&&Oj(i.prototype,l),p}(hf),JO=Lh($a.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),QO=Lh($a.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),Lh($a.prototype,"points",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"points"),$a.prototype),Lh($a.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"pointsPosition"),$a.prototype),Lh($a.prototype,"width",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"width"),$a.prototype),Lh($a.prototype,"height",[c.m],Object.getOwnPropertyDescriptor($a.prototype,"height"),$a.prototype),$a);function Mb(a){return Mb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Mb(a)}function lx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ux(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?lx(Object(l),!0).forEach(function(u){cx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):lx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function sx(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function Tj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Mj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Pb(){return Pb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Pj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Pb.apply(this,arguments)}function Pj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=$h(a))!==null;);return a}function kb(a,i){return kb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},kb(a,i)}function kj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$h(a);if(i){var p=$h(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Nj(this,l)}}function Nj(a,i){if(i&&(Mb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fh(a)}function Fh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function $h(a){return $h=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$h(a)}function cx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Om(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Nu,fx,Nb=(Qs=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&kb(f,y)})(p,a);var i,l,u=kj(p);function p(){var f;Tj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return cx(Fh(f=u.call.apply(u,[this].concat(b))),"modelType",xr.ELLIPSE_NODE),sx(Fh(f),"rx",ix,Fh(f)),sx(Fh(f),"ry",ax,Fh(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=Pb($h(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.ellipse;return ux(ux({},f),Eo(y))}},{key:"width",get:function(){return 2*this.rx}},{key:"height",get:function(){return 2*this.ry}},{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.rx,x=this.ry;return[{x:f,y:y-x,id:"".concat(this.id,"_0")},{x:f+b,y,id:"".concat(this.id,"_1")},{x:f,y:y+x,id:"".concat(this.id,"_2")},{x:f-b,y,id:"".concat(this.id,"_3")}]}}])&&Mj(i.prototype,l),p}(hf),ix=Om(Qs.prototype,"rx",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),ax=Om(Qs.prototype,"ry",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 45}}),Om(Qs.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"width"),Qs.prototype),Om(Qs.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Qs.prototype,"height"),Qs.prototype),Qs);function Rb(a){return Rb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Rb(a)}function jb(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return dx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return dx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function px(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function hx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?px(Object(l),!0).forEach(function(u){vx(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):px(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Rj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function jj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Cj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Cb(){return Cb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Dj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Cb.apply(this,arguments)}function Dj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Bh(a))!==null;);return a}function Db(a,i){return Db=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Db(a,i)}function Ij(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bh(a);if(i){var p=Bh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Lj(this,l)}}function Lj(a,i){if(i&&(Rb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xm(a)}function xm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bh(a){return Bh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bh(a)}function vx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Sm(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Ib,yx,Lb=(Nu=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Db(f,y)})(p,a);var i,l,u=Ij(p);function p(){var f;jj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return vx(xm(f=u.call.apply(u,[this].concat(b))),"modelType",xr.POLYGON_NODE),Rj(xm(f),"points",fx,xm(f)),f}return i=p,(l=[{key:"getNodeStyle",value:function(){var f=Cb(Bh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.polygon;return hx(hx({},f),Eo(y))}},{key:"pointsPosition",get:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return this.points.map(function(k){return{x:k[0]+f-b/2,y:k[1]+y-x/2}})}},{key:"width",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=jb(b,1)[0];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"height",get:function(){var f=Number.MAX_SAFE_INTEGER,y=Number.MIN_SAFE_INTEGER;return this.points.forEach(function(b){var x=jb(b,2)[1];x<f&&(f=x),x>y&&(y=x)}),y-f}},{key:"getDefaultAnchor",value:function(){var f=this,y=this.x,b=this.y,x=this.width,k=this.height;return this.points.map(function(I,H){var J=jb(I,2),de=J[0],Se=J[1];return{x:y+de-x/2,y:b+Se-k/2,id:"".concat(f.id,"_").concat(H)}})}}])&&Cj(i.prototype,l),p}(hf),fx=Sm(Nu.prototype,"points",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[[50,0],[100,50],[50,100],[0,50]]}}),Sm(Nu.prototype,"pointsPosition",[c.m],Object.getOwnPropertyDescriptor(Nu.prototype,"pointsPosition"),Nu.prototype),Sm(Nu.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(Nu.prototype,"width"),Nu.prototype),Sm(Nu.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(Nu.prototype,"height"),Nu.prototype),Nu);function Fb(a){return Fb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Fb(a)}function mx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function gx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?mx(Object(l),!0).forEach(function(u){_x(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):mx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Fj(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function $j(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Bj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function $b(){return $b=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Uj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},$b.apply(this,arguments)}function Uj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Uh(a))!==null;);return a}function Bb(a,i){return Bb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Bb(a,i)}function Gj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Uh(a);if(i){var p=Uh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Vj(this,l)}}function Vj(a,i){if(i&&(Fb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Am(a)}function Am(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Uh(a){return Uh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Uh(a)}function _x(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var xd,Ub=(Ib=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Bb(f,y)})(p,a);var i,l,u=Gj(p);function p(){var f;$j(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return _x(Am(f=u.call.apply(u,[this].concat(b))),"modelType",xr.RECT_NODE),Fj(Am(f),"radius",yx,Am(f)),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+b/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-b/2,y,id:"".concat(this.id,"_3")}]}},{key:"getNodeStyle",value:function(){var f=$b(Uh(p.prototype),"getNodeStyle",this).call(this),y=this.graphModel.theme.rect;return gx(gx({},f),Eo(y))}}])&&Bj(i.prototype,l),p}(hf),yx=function(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}(Ib.prototype,"radius",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ib);function Gb(a){return Gb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Gb(a)}function bx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function wx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?bx(Object(l),!0).forEach(function(u){Ox(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):bx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function Wj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function zj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Vb(){return Vb=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(a,i,l){var u=Hj(a,i);if(u){var p=Object.getOwnPropertyDescriptor(u,i);return p.get?p.get.call(arguments.length<3?a:l):p.value}},Vb.apply(this,arguments)}function Hj(a,i){for(;!Object.prototype.hasOwnProperty.call(a,i)&&(a=Gh(a))!==null;);return a}function Wb(a,i){return Wb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Wb(a,i)}function Xj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Gh(a);if(i){var p=Gh(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Yj(this,l)}}function Yj(a,i){if(i&&(Gb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ex(a)}function Ex(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Gh(a){return Gh=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Gh(a)}function Ox(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function xx(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var zb=(xd=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Wb(f,y)})(p,a);var i,l,u=Xj(p);function p(){var f;Wj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Ox(Ex(f=u.call.apply(u,[this].concat(b))),"modelType",xr.TEXT_NODE),f}return i=p,(l=[{key:"getTextStyle",value:function(){var f=Vb(Gh(p.prototype),"getTextStyle",this).call(this),y=this.graphModel.theme.text;return wx(wx({},f),Eo(y))}},{key:"width",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).width}},{key:"height",get:function(){var f=String(this.text.value).split(/[\r\n]/g),y=this.getTextStyle().fontSize;return is({rows:f,fontSize:y,rowsLength:f.length}).height}}])&&zj(i.prototype,l),p}(hf),xx(xd.prototype,"width",[c.m],Object.getOwnPropertyDescriptor(xd.prototype,"width"),xd.prototype),xx(xd.prototype,"height",[c.m],Object.getOwnPropertyDescriptor(xd.prototype,"height"),xd.prototype),xd);function Hb(a){return Hb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hb(a)}function qj(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function Kj(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Xb(a,i){return Xb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Xb(a,i)}function Zj(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Tm(a);if(i){var p=Tm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return Jj(this,l)}}function Jj(a,i){if(i&&(Hb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sx(a)}function Sx(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Tm(a){return Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Tm(a)}function Qj(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var fs,Ax,Tx,Mx,Yb=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Xb(f,y)})(p,a);var i,l,u=Zj(p);function p(){var f;qj(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Qj(Sx(f=u.call.apply(u,[this].concat(b))),"modelType",xr.HTML_NODE),f}return i=p,(l=[{key:"getDefaultAnchor",value:function(){var f=this.x,y=this.y,b=this.width,x=this.height;return[{x:f,y:y-x/2,id:"".concat(this.id,"_0")},{x:f+b/2,y,id:"".concat(this.id,"_1")},{x:f,y:y+x/2,id:"".concat(this.id,"_2")},{x:f-b/2,y,id:"".concat(this.id,"_3")}]}}])&&Kj(i.prototype,l),p}(hf);function Px(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function qb(a,i,l,u){l&&Object.defineProperty(a,i,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(u):void 0})}function eC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function kx(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function ry(a,i,l,u,p){var f={};return Object.keys(u).forEach(function(y){f[y]=u[y]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=l.slice().reverse().reduce(function(y,b){return b(a,i,y)||y},f),p&&f.initializer!==void 0&&(f.value=f.initializer?f.initializer.call(p):void 0,f.initializer=void 0),f.initializer===void 0&&(Object.defineProperty(a,i,f),f=null),f}var Nx=(fs=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),kx(this,"graphModel",void 0),qb(this,"isShowHorizontal",Ax,this),qb(this,"isShowVertical",Tx,this),qb(this,"position",Mx,this),this.isShowHorizontal=!1,this.isShowVertical=!1,this.position={x:0,y:0},this.graphModel=u}var i,l;return i=a,l=[{key:"getStyle",value:function(){return function(u){for(var p=1;p<arguments.length;p++){var f=arguments[p]!=null?arguments[p]:{};p%2?Px(Object(f),!0).forEach(function(y){kx(u,y,f[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(f)):Px(Object(f)).forEach(function(y){Object.defineProperty(u,y,Object.getOwnPropertyDescriptor(f,y))})}return u}({},this.graphModel.theme.snapline)}},{key:"getCenterSnapLine",value:function(u,p){for(var f=u.x,y=u.y,b=!1,x=!1,k=0;k<p.length;k++){var I=p[k];if(I.id!==u.id&&(f===I.x&&(b=!0),y===I.y&&(x=!0),b&&x))break}return{isShowVertical:b,isShowHorizontal:x,position:{x:f,y}}}},{key:"getHorizontalSnapline",value:function(u,p){var f,y,b=!1,x=u.id;if(x){var k=this.graphModel.fakerNode;if(k&&k.id===x)y=Bi(k);else{var I=this.graphModel.getNodeModelById(x);y=Bi(I)}}for(var H=0;H<p.length;H++){var J=p[H];if(J.id!==u.id){var de=Bi(J);if(de.minY===y.minY||de.maxY===y.minY){b=!0,f=y.minY;break}if(de.minY===y.maxY||de.maxY===y.maxY){b=!0,f=y.maxY;break}}}return Mi({isShowHorizontal:b,position:{y:f}})}},{key:"getVerticalSnapline",value:function(u,p){var f,y,b=!1,x=u.id;if(x){var k=this.graphModel.fakerNode;if(k&&k.id===x)y=Bi(k);else{var I=this.graphModel.getNodeModelById(x);y=Bi(I)}}for(var H=0;H<p.length;H++){var J=p[H];if(J.id!==u.id){var de=Bi(J);if(de.minX===y.minX||de.maxX===y.minX){b=!0,f=y.minX;break}if(de.minX===y.maxX||de.maxX===y.maxX){b=!0,f=y.maxX;break}}}return Mi({isShowVertical:b,position:{x:f}})}},{key:"getSnapLinePosition",value:function(u,p){var f=this.getCenterSnapLine(u,p),y=f.isShowHorizontal,b=f.isShowVertical;if(!y){var x=this.getHorizontalSnapline(u,p);x.isShowHorizontal&&(f.isShowHorizontal=x.isShowHorizontal,f.position.y=x.position.y)}if(!b){var k=this.getVerticalSnapline(u,p);k.isShowVertical&&(f.isShowVertical=k.isShowVertical,f.position.x=k.position.x)}return f}},{key:"setSnaplineInfo",value:function(u){var p=u.isShowHorizontal,f=u.isShowVertical,y=u.position;this.position=y,this.isShowHorizontal=p,this.isShowVertical=f}},{key:"clearSnapline",value:function(){this.position={x:0,y:0},this.isShowHorizontal=!1,this.isShowVertical=!1}},{key:"setNodeSnapLine",value:function(u){var p=this.graphModel.nodes,f=this.getSnapLinePosition(u,p);this.setSnaplineInfo(f)}}],l&&eC(i.prototype,l),a}(),Ax=ry(fs.prototype,"isShowHorizontal",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tx=ry(fs.prototype,"isShowVertical",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mx=ry(fs.prototype,"position",[c.C],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ry(fs.prototype,"clearSnapline",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"clearSnapline"),fs.prototype),ry(fs.prototype,"setNodeSnapLine",[c.k],Object.getOwnPropertyDescriptor(fs.prototype,"setNodeSnapLine"),fs.prototype),fs),oy=new Map,Rx=function(a){var i=el(),l=window.requestAnimationFrame(function u(){if(a(),oy.get(i)){var p=window.requestAnimationFrame(u);oy.set(i,p)}});return oy.set(i,l),i},Mm=function(a){var i=oy.get(a);i&&(window.cancelAnimationFrame(i),oy.delete(a))};function Kb(a){return Kb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Kb(a)}function iy(){return iy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},iy.apply(this,arguments)}function jx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ay(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?jx(Object(l),!0).forEach(function(u){tc(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):jx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function tC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Cx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Cx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Cx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function nC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Zb(a,i){return Zb=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Zb(a,i)}function rC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Pm(a);if(i){var p=Pm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return oC(this,l)}}function oC(a,i){if(i&&(Kb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ec(a)}function ec(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Pm(a){return Pm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Pm(a)}function tc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var iC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Zb(f,y)})(p,a);var i,l,u=rC(p);function p(){var f;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,p),tc(ec(f=u.call(this)),"preTargetNode",void 0),tc(ec(f),"sourceRuleResults",void 0),tc(ec(f),"targetRuleResults",void 0),tc(ec(f),"dragHandler",void 0),tc(ec(f),"t",void 0),tc(ec(f),"onDragStart",function(y){var b=y.event,x=f.props,k=x.anchorData,I=x.nodeModel,H=x.graphModel;H.overlapMode,H.selectNodeById(I.id),I.autoToFront&&H.toFront(I.id),H.eventCenter.emit(Nn.ANCHOR_DRAGSTART,{data:k,e:b,nodeModel:I}),f.setState({startX:k.x,startY:k.y,endX:k.x,endY:k.y})}),tc(ec(f),"onDragging",function(y){var b=y.event,x=f.props,k=x.graphModel,I=x.nodeModel,H=x.anchorData,J=k.transformModel,de=k.eventCenter,Se=k.width,ke=k.height,Ke=k.editConfigModel,Ze=Ke.autoExpand,ht=Ke.stopMoveGraph,$t=b.clientX,hn=b.clientY,dn=k.getPointByClient({x:$t,y:hn}),zn=dn.domOverlayPosition,sn=zn.x,Dn=zn.y,bn=dn.canvasOverlayPosition,jr=bn.x,Br=bn.y;f.t&&Mm(f.t);var sr=[];sn<10?sr=[10,0]:sn+10>Se?sr=[-10,0]:Dn<10?sr=[0,10]:Dn+10>ke&&(sr=[0,-10]),f.setState({endX:jr,endY:Br,dragging:!0}),f.moveAnchorEnd(jr,Br),sr.length>0&&!ht&&Ze&&(f.t=Rx(function(){var Xr=tC(sr,2),pi=Xr[0],hi=Xr[1];J.translate(pi,hi);var ba=f.state,tu=ba.endX,nu=ba.endY;f.setState({endX:tu-pi,endY:nu-hi}),f.moveAnchorEnd(tu-pi,nu-hi)})),de.emit(Nn.ANCHOR_DRAG,{data:H,e:b,nodeModel:I})}),tc(ec(f),"onDragEnd",function(y){var b=y.event;f.t&&Mm(f.t);var x=f.checkEnd(b);f.setState({startX:0,startY:0,endX:0,endY:0,dragging:!1}),f.sourceRuleResults.clear(),f.targetRuleResults.clear();var k=f.props,I=k.graphModel,H=k.nodeModel,J=k.anchorData;I.eventCenter.emit(Nn.ANCHOR_DRAGEND,{data:J,e:b,nodeModel:H,edgeModel:x})}),tc(ec(f),"checkEnd",function(y){var b=f.props,x=b.graphModel,k=b.nodeModel,I=b.anchorData,H=I.x,J=I.y,de=I.id,Se=(x.edgeType,f.state),ke=Se.endX,Ke=Se.endY,Ze=Se.dragging,ht=rs({x:ke,y:Ke},x);if(f.preTargetNode&&f.preTargetNode.state!==Hr.DEFAULT&&f.preTargetNode.setElementState(Hr.DEFAULT),Ze&&ht&&ht.node){var $t=ht.node,hn=ht.anchor.id,dn="".concat(k.id,"_").concat($t.id,"_").concat(hn,"_").concat(de),zn=f.sourceRuleResults.get(dn)||{},sn=zn.isAllPass,Dn=zn.msg,bn=f.targetRuleResults.get(dn)||{},jr=bn.isAllPass,Br=bn.msg;if(sn&&jr){$t.setElementState(Hr.DEFAULT);var sr=x.edgeGenerator(k.getData(),x.getNodeModelById(ht.node.id).getData()),Xr=x.addEdge(ay(ay({},sr),{},{sourceNodeId:k.id,sourceAnchorId:de,startPoint:{x:H,y:J},targetNodeId:ht.node.id,targetAnchorId:ht.anchor.id,endPoint:{x:ht.anchor.x,y:ht.anchor.y}})),pi=f.props.anchorData;return x.eventCenter.emit(Nn.ANCHOR_DROP,{data:pi,e:y,nodeModel:k,edgeModel:Xr}),Xr}var hi=$t.getData();return x.eventCenter.emit(Nn.CONNECTION_NOT_ALLOWED,{data:hi,msg:Br||Dn||"不允许添加连线"}),null}}),f.sourceRuleResults=new Map,f.targetRuleResults=new Map,f.state={startX:0,startY:0,endX:0,endY:0,dragging:!1},f.dragHandler=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd}),f}return i=p,(l=[{key:"getAnchorShape",value:function(){var f=this.props,y=f.anchorData,b=f.style,x=f.node.getAnchorShape(y);if(x)return x;var k=y.x,I=y.y,H=ay(ay({},b),b.hover);return Object(Le.g)("g",null,Object(Le.g)(jh,iy({className:"lf-node-anchor-hover"},H,{x:k,y:I})),Object(Le.g)(jh,iy({className:"lf-node-anchor"},b,{x:k,y:I})))}},{key:"customTrajectory",get:function(){return this.props.graphModel.customTrajectory}},{key:"relateEdges",get:function(){var f=this.props,y=f.graphModel,b=y.getAnchorIncomingEdge,x=y.getAnchorOutcomingEdge,k=f.anchorData.id;return{incomingEdgeList:b(k),outcomingEdgeList:x(k)}}},{key:"moveAnchorEnd",value:function(f,y){var b=this.props,x=b.graphModel,k=b.nodeModel,I=b.anchorData,H=rs({x:f,y},x);if(H){var J=H.node,de=H.anchor.id;if(this.preTargetNode&&this.preTargetNode!==H.node&&this.preTargetNode.setElementState(Hr.DEFAULT),I.id===de)return;this.preTargetNode=J;var Se="".concat(k.id,"_").concat(J.id,"_").concat(de,"_").concat(I.id);if(!this.targetRuleResults.has(Se)){var ke=H.anchor,Ke=k.isAllowConnectedAsSource(J,I,ke),Ze=J.isAllowConnectedAsTarget(k,I,ke);this.sourceRuleResults.set(Se,Yl(Ke)),this.targetRuleResults.set(Se,Yl(Ze))}var ht=this.sourceRuleResults.get(Se).isAllPass,$t=this.targetRuleResults.get(Se).isAllPass;ht&&$t?J.setElementState(Hr.ALLOW_CONNECT):J.setElementState(Hr.NOT_ALLOW_CONNECT)}else this.preTargetNode&&this.preTargetNode.state!==Hr.DEFAULT&&this.preTargetNode.setElementState(Hr.DEFAULT)}},{key:"isShowLine",value:function(){var f=this.state,y=f.startX,b=f.startY,x=f.endX,k=f.endY;return la(y,b,x,k)>10}},{key:"render",value:function(){var f=this,y=this.state,b=y.startX,x=y.startY,k=y.endX,I=y.endY,H=this.props,J=H.anchorData.edgeAddable,de=H.edgeStyle;return Object(Le.g)("g",{className:"lf-anchor"},Object(Le.g)("g",{onMouseDown:function(Se){J!==!1&&f.dragHandler.handleMouseDown(Se)}},this.getAnchorShape()),this.isShowLine()&&(this.customTrajectory?this.customTrajectory(ay({sourcePoint:{x:b,y:x},targetPoint:{x:k,y:I}},de)):Object(Le.g)(Nh,iy({x1:b,y1:x,x2:k,y2:I},de,{"pointer-events":"none"}))))}}])&&nC(i.prototype,l),p}(Le.a);function Dx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function aC(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Dx(Object(l),!0).forEach(function(u){lC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Dx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function lC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function Jb(a){return Jb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Jb(a)}function uC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Ix(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Ix(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ix(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Lx(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.value,y=a.fontSize,b=a.fill,x=b===void 0?"currentColor":b,k=a.overflowMode,I=k===void 0?"default":k,H=a.textWidth,J=H===void 0?"":H,de=a.model,Se={textAnchor:"middle","dominant-baseline":"middle",x:l,y:p,fill:x};if(Object.entries(a).forEach(function(hn){var dn=uC(hn,2),zn=dn[0],sn=dn[1];Jb(sn)!=="object"&&(Se[zn]=sn)}),f){var ke=String(f).split(/[\r\n]/g),Ke=ke.length;if(I!=="default"){var Ze=de.BaseType,ht=de.modelType;if(Ze===io.NODE&&ht!==xr.TEXT_NODE||Ze===io.EDGE&&J)return function(hn){var dn=hn.value,zn=hn.fontSize,sn=hn.model,Dn=hn.fontFamily,bn=Dn===void 0?"":Dn,jr=hn.lineHeight,Br=hn.wrapPadding,sr=Br===void 0?"0, 0":Br,Xr=hn.overflowMode,pi=hn.x,hi=hn.y,ba=sn.width,tu=sn.textHeight,nu=hn.textWidth||ba,oc=String(dn).split(/[\r\n]/g),kp=oc.length,eg=Hs({rows:oc,style:{fontSize:"".concat(zn,"px"),width:"".concat(nu,"px"),fontFamily:bn,lineHeight:jr,padding:sr},rowsLength:kp,className:"lf-get-text-height"}),Np=sn.height>eg?sn.height:eg;tu&&(Np=tu);var Td=Xr==="ellipsis";return Td&&(Np=zn+2),Object(Le.g)("g",null,Object(Le.g)("foreignObject",{width:nu,height:Np,x:pi-nu/2,y:hi-Np/2},Object(Le.g)("div",{className:"lf-node-text-auto-wrap",style:{minHeight:Np,width:nu,padding:sr}},Object(Le.g)("div",{className:Td?"lf-node-text-ellipsis-content":"lf-node-text-auto-wrap-content",title:Td?oc.join(""):"",style:aC({},hn)},oc.map(function(Md){return Object(Le.g)("div",{className:"lf-node-text--auto-wrap-inner"},Md)})))))}(a)}if(Ke>1){var $t=ke.map(function(hn,dn){var zn=(dn-(Ke-1)/2)*(y+2);return Object(Le.g)("tspan",{className:"lf-text-tspan",x:l,y:p+zn},hn)});return Object(Le.g)("text",Se,$t)}return Object(Le.g)("text",Se,f)}}function Qb(a){return Qb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Qb(a)}function e0(){return e0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},e0.apply(this,arguments)}function sC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Fx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Fx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Fx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function cC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function t0(a,i){return t0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},t0(a,i)}function fC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=km(a);if(i){var p=km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return dC(this,l)}}function dC(a,i){if(i&&(Qb(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sd(a)}function Sd(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function km(a){return km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},km(a)}function Ap(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var $x=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&t0(f,y)})(p,a);var i,l,u=fC(p);function p(f){var y;(function(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")})(this,p),Ap(Sd(y=u.call(this)),"dragHandler",void 0),Ap(Sd(y),"sumDeltaX",0),Ap(Sd(y),"sumDeltaY",0),Ap(Sd(y),"stepDrag",void 0),Ap(Sd(y),"onDragging",function(x){var k=x.deltaX,I=x.deltaY,H=y.props,J=H.model,de=sC(H.graphModel.transformModel.fixDeltaXY(k,I),2),Se=de[0],ke=de[1];J.moveText(Se,ke)}),Ap(Sd(y),"dblClickHandler",function(){y.props.editable&&y.props.model.setElementState(Hr.TEXT_EDIT)}),Ap(Sd(y),"mouseDownHandle",function(x){var k=y.props,I=k.draggable,H=k.model,J=k.graphModel.editConfigModel.nodeTextDraggable;(I||J)&&(y.stepDrag.model=H,y.stepDrag.handleMouseDown(x))}),f.model;var b=f.draggable;return y.stepDrag=new ee({onDragging:y.onDragging,step:1,isStopPropagation:b}),y}return i=p,(l=[{key:"getShape",value:function(){var f=this.props,y=f.model,b=f.graphModel,x=y.text,k=b.editConfigModel,I=x.value,H=x.x,J=x.y,de=x.editable,Se=x.draggable,ke={x:H,y:J,className:"",value:I};de?ke.className="lf-element-text":Se||k.nodeTextDraggable?ke.className="lf-text-draggable":ke.className="lf-text-disabled";var Ke=y.getTextStyle();return Object(Le.g)(Lx,e0({},ke,Ke,{model:y}))}},{key:"render",value:function(){if(this.props.model.text)return Object(Le.g)("g",{onMouseDown:this.mouseDownHandle,onDblClick:this.dblClickHandler},this.getShape())}}])&&cC(i.prototype,l),p}(Le.a),pC=Xu(window,"navigator.userAgent","").match(/MSIE|Trident/)!==null,Bx=r(130);function n0(a){return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},n0(a)}function r0(){return r0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},r0.apply(this,arguments)}function hC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function o0(a,i){return o0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},o0(a,i)}function vC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Nm(a);if(i){var p=Nm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return yC(this,l)}}function yC(a,i){if(i&&(n0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vh(a)}function Vh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Nm(a){return Nm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Nm(a)}function ly(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var mC=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&o0(f,y)})(p,a);var i,l,u=vC(p);function p(f){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),ly(Vh(y=u.call(this,f)),"style",{}),ly(Vh(y),"defaultAngle",void 0),ly(Vh(y),"normal",void 0),ly(Vh(y),"stepperDrag",void 0),ly(Vh(y),"onDragging",function(b){var x,k=b.event,I=y.props,H=I.graphModel,J=I.nodeModel,de=I.eventCenter,Se=H.selectNodes,ke=J.x,Ke=J.y,Ze=k.clientX,ht=k.clientY,$t=H.getPointByClient({x:Ze,y:ht}).canvasOverlayPosition,hn=$t.x,dn=$t.y,zn=new Q(hn-ke,dn-Ke),sn=((x=y.normal)===null||x===void 0?void 0:x.angle(zn))-y.defaultAngle,Dn=new Zs(-ke,-Ke).rotate(sn).translate(ke,Ke).toString();J.transform=Dn,J.rotate=sn;var bn=Object(Bx.map)(Se,function(Br){return Br.id});bn.indexOf(J.id)===-1&&(bn=[J.id]);var jr=Object(Bx.reduce)(bn,function(Br,sr){var Xr=H.getNodeModelById(sr);return Br[sr]=Xr==null?void 0:Xr.getMoveDistance(0,0,!1),Br},{});bn.forEach(function(Br){H.getNodeEdges(Br).forEach(function(sr){if(jr[sr.sourceNodeId]){var Xr=H.getNodeModelById(sr.sourceNodeId).anchors.find(function(hi){return hi.id===sr.sourceAnchorId});sr.updateStartPoint(Xr)}if(jr[sr.targetNodeId]){var pi=H.getNodeModelById(sr.targetNodeId).anchors.find(function(hi){return hi.id===sr.targetAnchorId});sr.updateEndPoint(pi)}})}),de.emit(Nn.NODE_ROTATE,{e:k,nodeModel:J})}),y.style=f.style,y.stepperDrag=new ee({onDragging:y.onDragging}),y}return i=p,(l=[{key:"render",value:function(){var f=this,y=this.props.nodeModel,b=y.x,x=y.y,k=b+y.width/2+20,I=x-y.height/2-20;return this.normal=new Q(1,0),this.defaultAngle=this.normal.angle(new Q(k-b,I-x)),y.defaultAngle=this.defaultAngle,Object(Le.g)("g",{className:"lf-rotate-control"},Object(Le.g)("g",{onMouseDown:function(H){f.stepperDrag.handleMouseDown(H)}},Object(Le.g)(jh,r0({},this.style,{cx:k,cy:I}))))}}])&&hC(i.prototype,l),p}(Le.a);function i0(a){return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i0(a)}var gC=["className"];function Rm(){return Rm=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},Rm.apply(this,arguments)}function _C(a,i){if(a==null)return{};var l,u,p=function(y,b){if(y==null)return{};var x,k,I={},H=Object.keys(y);for(k=0;k<H.length;k++)x=H[k],b.indexOf(x)>=0||(I[x]=y[x]);return I}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function jm(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Ux(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Ux(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ux(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Gx(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a0(a,i){return a0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a0(a,i)}function bC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Cm(a);if(i){var p=Cm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return wC(this,l)}}function wC(a,i){if(i&&(i0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ki(a)}function Ki(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Cm(a){return Cm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Cm(a)}function ca(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var vf=function(a){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&a0(y,b)})(f,a);var i,l,u,p=bC(f);function f(y){var b;(function(J,de){if(!(J instanceof de))throw new TypeError("Cannot call a class as a function")})(this,f),ca(Ki(b=p.call(this)),"t",void 0),ca(Ki(b),"moveOffset",void 0),ca(Ki(b),"stepDrag",void 0),ca(Ki(b),"contextMenuTime",void 0),ca(Ki(b),"mouseUpDrag",void 0),ca(Ki(b),"startTime",void 0),ca(Ki(b),"clickTimer",void 0),ca(Ki(b),"modelDisposer",void 0),ca(Ki(b),"onDragStart",function(J){var de=J.event,Se=de.clientX,ke=de.clientY,Ke=b.props,Ze=Ke.model,ht=Ke.graphModel.getPointByClient({x:Se,y:ke}).canvasOverlayPosition,$t=ht.x,hn=ht.y;b.moveOffset={x:Ze.x-$t,y:Ze.y-hn}}),ca(Ki(b),"onDragging",function(J){var de=J.event,Se=b.props,ke=Se.model,Ke=Se.graphModel,Ze=Ke.editConfigModel,ht=Ze.stopMoveGraph,$t=Ze.autoExpand,hn=Ke.transformModel,dn=Ke.selectNodes,zn=Ke.width,sn=Ke.height,Dn=Ke.gridSize;ke.isDragging=!0;var bn=de.clientX,jr=de.clientY,Br=Ke.getPointByClient({x:bn,y:jr}).canvasOverlayPosition,sr=Br.x,Xr=Br.y,pi=jm(hn.CanvasPointToHtmlPoint([sr,Xr]),2),hi=pi[0],ba=pi[1];if(sr+=b.moveOffset.x,Xr+=b.moveOffset.y,sr=wl(sr,Dn),Xr=wl(Xr,Dn),zn&&sn){if(!$t||ht||!(hi<0||ba<0||hi>zn||ba>sn)){var tu=jm(hn.CanvasPointToHtmlPoint([sr-ke.width/2,Xr-ke.height/2]),2),nu=tu[0],oc=tu[1],kp=jm(hn.CanvasPointToHtmlPoint([sr+ke.width/2,Xr+ke.height/2]),2),eg=kp[0],Np=kp[1],Td=Math.max(Dn,20),Md=[];nu<0?Md=[Td,0]:eg>Ke.width?Md=[-Td,0]:oc<0?Md=[0,Td]:Np>Ke.height&&(Md=[0,-Td]),b.t&&Mm(b.t);var oI=new Zs(-sr,-Xr).rotate(ke.rotate).translate(sr,Xr).toString();ke.transform=oI;var tg=dn.map(function(ng){return ng.id});tg.indexOf(ke.id)===-1&&(tg=[ke.id]),Md.length>0&&!ht&&$t?b.t=Rx(function(){var ng=jm(Md,2),ES=ng[0],OS=ng[1];hn.translate(ES,OS);var iI=-ES/hn.SCALE_X,aI=-OS/hn.SCALE_X;Ke.moveNodes(tg,iI,aI)}):Ke.moveNodes(tg,sr-ke.x,Xr-ke.y)}}else Ke.moveNode2Coordinate(ke.id,sr,Xr)}),ca(Ki(b),"onDragEnd",function(){b.t&&Mm(b.t),b.props.model.isDragging=!1}),ca(Ki(b),"handleMouseUp",function(){var J=b.props.model;b.mouseUpDrag=J.isDragging}),ca(Ki(b),"handleClick",function(J){var de=b.mouseUpDrag===!1;if(b.startTime){var Se=b.props,ke=Se.model,Ke=Se.graphModel;if(de){var Ze={data:ke.getData(),e:J,position:Ke.getPointByClient({x:J.clientX,y:J.clientY}),isSelected:!1,isMultiple:!1},ht=J.button===2,$t=J.detail===2;if(!ht){var hn=Ke.editConfigModel,dn=dd(J,hn);Ze.isMultiple=dn,ke.isSelected&&!$t&&dn?(Ze.isSelected=!1,ke.setSelected(!1)):(Ke.selectNodeById(ke.id,dn),Ze.isSelected=!0,b.toFront()),$t?(hn.nodeTextEdit&&ke.text.editable&&(ke.setSelected(!1),Ke.setElementStateById(ke.id,Hr.TEXT_EDIT)),Ke.eventCenter.emit(Nn.NODE_DBCLICK,Ze)):(Ke.eventCenter.emit(Nn.ELEMENT_CLICK,Ze),Ke.eventCenter.emit(Nn.NODE_CLICK,Ze))}}}}),ca(Ki(b),"handleContextMenu",function(J){J.preventDefault();var de=b.props,Se=de.model,ke=de.graphModel,Ke=Se.getData(),Ze=ke.getPointByClient({x:J.clientX,y:J.clientY});ke.setElementStateById(Se.id,Hr.SHOW_MENU,Ze.domOverlayPosition),Se.isSelected||ke.selectNodeById(Se.id),ke.eventCenter.emit(Nn.NODE_CONTEXTMENU,{data:Ke,e:J,position:Ze}),b.toFront()}),ca(Ki(b),"handleMouseDown",function(J){var de=b.props,Se=de.model,ke=de.graphModel;b.startTime=new Date().getTime(),ke.editConfigModel.adjustNodePosition&&Se.draggable&&b.stepDrag&&b.stepDrag.handleMouseDown(J)}),ca(Ki(b),"setHoverON",function(J){var de=b.props,Se=de.model,ke=de.graphModel;if(!Se.isHovered){var Ke=Se.getData();Se.setHovered(!0),ke.eventCenter.emit(Nn.NODE_MOUSEENTER,{data:Ke,e:J})}}),ca(Ki(b),"setHoverOFF",function(J){var de=b.props,Se=de.model,ke=de.graphModel,Ke=Se.getData();Se.isHovered&&(Se.setHovered(!1),ke.eventCenter.emit(Nn.NODE_MOUSELEAVE,{data:Ke,e:J}))}),ca(Ki(b),"onMouseOut",function(J){pC&&b.setHoverOFF(J)});var x=y.graphModel,k=x.gridSize,I=x.eventCenter,H=y.model;return b.stepDrag=new ee({onDragStart:b.onDragStart,onDragging:b.onDragging,onDragEnd:b.onDragEnd,step:k,eventType:"NODE",isStopPropagation:!1,eventCenter:I,model:H}),b.modelDisposer=Object(c.F)(function(){return b.props},function(J){J&&J.model&&b.stepDrag.setModel(J.model)}),b}return i=f,u=[{key:"getModel",value:function(y){return y}}],(l=[{key:"componentWillUnmount",value:function(){this.modelDisposer&&this.modelDisposer()}},{key:"getAnchorShape",value:function(y){return null}},{key:"getAnchors",value:function(){var y=this,b=this.props,x=b.model,k=b.graphModel,I=x.isSelected,H=x.isHitable,J=x.isDragging,de=x.isShowAnchor;return H&&(I||de)&&!J?Xf(x.anchors,function(Se,ke){var Ke=x.getAnchorLineStyle(Se),Ze=x.getAnchorStyle(Se);return Object(Le.g)(iC,{anchorData:Se,node:y,style:Ze,edgeStyle:Ke,anchorIndex:ke,nodeModel:x,graphModel:k,setHoverOFF:y.setHoverOFF})}):[]}},{key:"getRotateControl",value:function(){var y=this.props,b=y.model,x=y.graphModel,k=b.isSelected,I=b.isHitable,H=b.enableRotate,J=b.isHovered,de=b.getRotateControlStyle().style;if(I&&(k||J)&&H)return Object(Le.g)(mC,{graphModel:x,nodeModel:b,eventCenter:x.eventCenter,style:de})}},{key:"getText",value:function(){var y=this.props,b=y.model,x=y.graphModel;if(b.state===Hr.TEXT_EDIT)return"";if(b.text){var k=x.editConfigModel,I=!1;return(b.text.draggable||k.nodeTextDraggable)&&(I=!0),Object(Le.g)($x,{editable:k.nodeTextEdit&&b.text.editable,model:b,graphModel:x,draggable:I})}}},{key:"getStateClassName",value:function(){var y=this.props.model,b=y.state,x=y.isDragging,k=y.isSelected,I="lf-node";switch(b){case Hr.ALLOW_CONNECT:I+=" lf-node-allow";break;case Hr.NOT_ALLOW_CONNECT:I+=" lf-node-not-allow";break;default:I+=" lf-node-default"}return x&&(I+=" lf-isDragging"),k&&(I+=" lf-node-selected"),I}},{key:"toFront",value:function(){var y=this.props,b=y.model,x=y.graphModel;b.autoToFront&&x.toFront(b.id)}},{key:"render",value:function(){var y,b=this.props,x=b.model,k=b.graphModel,I=k.editConfigModel,H=I.hideAnchors,J=I.adjustNodePosition,de=I.allowRotation,Se=k.gridSize,ke=k.transformModel.SCALE_X,Ke=x.isHitable,Ze=x.draggable,ht=x.transform,$t=x.getOuterGAttributes(),hn=$t.className,dn=hn===void 0?"":hn,zn=_C($t,gC),sn=Object(Le.g)("g",{className:"lf-node-content"},Object(Le.g)("g",{transform:ht},this.getShape(),this.getText(),de&&this.getRotateControl()),!H&&this.getAnchors());return Ke?(J&&Ze&&this.stepDrag.setStep(Se*ke),y=Object(Le.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onClick:this.handleClick,onMouseEnter:this.setHoverON,onMouseOver:this.setHoverON,onMouseLeave:this.setHoverOFF,onMouseOut:this.onMouseOut,onContextMenu:this.handleContextMenu},zn),sn)):y=Object(Le.g)("g",Rm({className:"".concat(this.getStateClassName()," ").concat(dn)},zn),sn),y}}])&&Gx(i.prototype,l),u&&Gx(i,u),f}(Le.a);function l0(a){return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},l0(a)}function u0(){return u0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},u0.apply(this,arguments)}function EC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function OC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s0(a,i){return s0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s0(a,i)}function xC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Dm(a);if(i){var p=Dm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SC(this,l)}}function SC(a,i){if(i&&(l0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Dm(a){return Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Dm(a)}var c0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&s0(f,y)})(p,a);var i,l,u=xC(p);function p(){return EC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Le.g)(Ed,u0({},y,{x:f.x,y:f.y,width:f.width,height:f.height,radius:f.radius}))}}])&&OC(i.prototype,l),p}(vf);function f0(a){return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f0(a)}function d0(){return d0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},d0.apply(this,arguments)}function AC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function TC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p0(a,i){return p0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},p0(a,i)}function MC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Im(a);if(i){var p=Im(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return PC(this,l)}}function PC(a,i){if(i&&(f0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Im(a){return Im=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Im(a)}var h0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&p0(f,y)})(p,a);var i,l,u=MC(p);function p(){return AC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.r,k=f.getNodeStyle();return Object(Le.g)(jh,d0({},k,{x:y,y:b,r:x}))}}])&&TC(i.prototype,l),p}(vf);function v0(a){return v0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},v0(a)}function kC(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Vx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Vx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Vx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function Wx(a){var i=a.points,l=a.className,u={fill:"transparent",fillOpacity:1,strokeWidth:1,stroke:"#000",strokeOpacity:1,points:""};return Object.entries(a).forEach(function(p){var f=kC(p,2),y=f[0],b=f[1];v0(b)!=="object"&&(u[y]=b)}),u.className=l?"lf-basic-shape ".concat(l):"lf-basic-shape",u.points=i.map(function(p){return p.join(",")}).join(" "),Object(Le.g)("polygon",u)}function y0(a){return y0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},y0(a)}function m0(){return m0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},m0.apply(this,arguments)}function NC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function RC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function g0(a,i){return g0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},g0(a,i)}function jC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Lm(a);if(i){var p=Lm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return CC(this,l)}}function CC(a,i){if(i&&(y0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Lm(a){return Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Lm(a)}var _0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&g0(f,y)})(p,a);var i,l,u=jC(p);function p(){return NC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.width,k=f.height,I=f.points,H=f.getNodeStyle(),J={transform:"matrix(1 0 0 1 ".concat(y-x/2," ").concat(b-k/2,")")};return Object(Le.g)("g",J,Object(Le.g)(Wx,m0({},H,{points:I,x:y,y:b})))}}])&&RC(i.prototype,l),p}(vf);function b0(a){return b0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},b0(a)}function w0(){return w0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},w0.apply(this,arguments)}function DC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function IC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function E0(a,i){return E0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},E0(a,i)}function LC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Fm(a);if(i){var p=Fm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return FC(this,l)}}function FC(a,i){if(i&&(b0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Fm(a){return Fm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Fm(a)}var O0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&E0(f,y)})(p,a);var i,l,u=LC(p);function p(){return DC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Le.g)("g",null,Object(Le.g)(Wx,w0({},y,{points:f.points,x:f.x,y:f.y})))}}])&&IC(i.prototype,l),p}(vf);function x0(a){return x0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},x0(a)}function $C(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return zx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return zx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function zx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function BC(a){var i=a.x,l=i===void 0?0:i,u=a.y,p=u===void 0?0:u,f=a.rx,y=f===void 0?4:f,b=a.ry,x=b===void 0?4:b,k=a.className,I={cx:l,cy:p,rx:y,ry:x,fill:"transparent",fillOpacity:1,strokeWidth:"1",stroke:"#000",strokeOpacity:1};return Object.entries(a).forEach(function(H){var J=$C(H,2),de=J[0],Se=J[1];x0(Se)!=="object"&&(I[de]=Se)}),I.className=k?"lf-basic-shape ".concat(k):"lf-basic-shape",Object(Le.g)("ellipse",I)}function S0(a){return S0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},S0(a)}function A0(){return A0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},A0.apply(this,arguments)}function UC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function GC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function T0(a,i){return T0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},T0(a,i)}function VC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=$m(a);if(i){var p=$m(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return WC(this,l)}}function WC(a,i){if(i&&(S0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function $m(a){return $m=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},$m(a)}var M0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&T0(f,y)})(p,a);var i,l,u=VC(p);function p(){return UC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getShape",value:function(){var f=this.props.model,y=f.getNodeStyle();return Object(Le.g)(BC,A0({},y,{x:f.x,y:f.y,rx:f.rx,ry:f.ry}))}}])&&GC(i.prototype,l),p}(vf);function P0(a){return P0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},P0(a)}function Hx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xx(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Hx(Object(l),!0).forEach(function(u){zC(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Hx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function zC(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function HC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function XC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function k0(a,i){return k0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},k0(a,i)}function YC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Bm(a);if(i){var p=Bm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return qC(this,l)}}function qC(a,i){if(i&&(P0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Bm(a){return Bm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Bm(a)}var N0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&k0(f,y)})(p,a);var i,l,u=YC(p);function p(){return HC(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),b=f.width,x=f.height,k=f.x,I=f.y,H=Xx(Xx({},y.background),{},{x:k,y:I-1,width:b,height:x});return Object(Le.g)(Ed,H)}},{key:"getShape",value:function(){return Object(Le.g)("g",null,this.getBackground())}}])&&XC(i.prototype,l),p}(vf);function R0(a){return R0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},R0(a)}function j0(){return j0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},j0.apply(this,arguments)}function KC(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function ZC(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function C0(a,i){return C0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},C0(a,i)}function JC(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Um(a);if(i){var p=Um(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return QC(this,l)}}function QC(a,i){if(i&&(R0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uy(a)}function uy(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function Gm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var D0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&C0(f,y)})(p,a);var i,l,u=JC(p);function p(){var f;KC(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return Gm(uy(f=u.call.apply(u,[this].concat(b))),"ref",void 0),Gm(uy(f),"currentProperties",void 0),Gm(uy(f),"preProperties",void 0),Gm(uy(f),"setRef",function(k){f.ref=k}),f}return i=p,(l=[{key:"rootEl",get:function(){return this.ref}},{key:"setHtml",value:function(f){f.appendChild(document.createElement("div"))}},{key:"shouldUpdate",value:function(){if(!this.preProperties||this.preProperties!==this.currentProperties)return this.preProperties=this.currentProperties,!0}},{key:"componentDidMount",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"componentDidUpdate",value:function(){this.shouldUpdate()&&this.setHtml(this.rootEl)}},{key:"getShape",value:function(){var f=this.props.model,y=f.x,b=f.y,x=f.height,k=f.width,I=f.getNodeStyle();return this.currentProperties=JSON.stringify(f.properties),Object(Le.g)("foreignObject",j0({},I,{x:y-k/2,y:b-x/2,width:k,height:x,ref:this.setRef}))}}])&&ZC(i.prototype,l),p}(vf);function I0(a){return I0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},I0(a)}function L0(){return L0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},L0.apply(this,arguments)}function Yx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Tp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?Yx(Object(l),!0).forEach(function(u){B0(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):Yx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function eD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function F0(a,i){return F0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},F0(a,i)}function tD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Vm(a);if(i){var p=Vm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return nD(this,l)}}function nD(a,i){if(i&&(I0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $0(a)}function $0(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Vm(a){return Vm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Vm(a)}function B0(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var rD=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&F0(f,y)})(p,a);var i,l,u=tD(p);function p(f){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,p),B0($0(y=u.call(this,f)),"setHoverON",function(){y.setState({isHovered:!0})}),B0($0(y),"setHoverOFF",function(){y.setState({isHovered:!1})}),y.state={isHovered:!1},y}return i=p,(l=[{key:"getBackground",value:function(){var f=this.props.model,y=f.getTextStyle(),b=f.text,x=f.width,k=y.background||{};if(this.state.isHovered&&y.hover&&y.hover.background&&(k=Tp(Tp({},k),y.hover.background)),b&&b.value&&k.fill!=="transparent"){var I,H=y.fontSize,J=y.overflowMode,de=y.lineHeight,Se=y.wrapPadding,ke=y.textWidth,Ke=b.value,Ze=b.x,ht=b.y,$t=String(Ke).split(/[\r\n]/g),hn=$t.length;if(J==="autoWrap"&&ke){var dn=Hs({rows:$t,style:{fontSize:"".concat(H,"px"),width:"".concat(ke,"px"),lineHeight:de,padding:Se},rowsLength:hn,className:"lf-get-text-height"});I=Tp(Tp({},k),{},{x:Ze-1,y:ht-1,width:ke,height:dn})}else{$t&&$t.forEach(function(jr){Zn(jr)});var zn=is({rows:$t,fontSize:H,rowsLength:hn}),sn=zn.width,Dn=zn.height;if(J==="ellipsis"&&(sn=ke||x,Dn=H+2),typeof k.wrapPadding=="string"){var bn=k.wrapPadding.split(",").filter(function(jr){return jr.trim()}).map(function(jr){return parseFloat(jr.trim())});bn.length>0&&bn.length<=4&&(bn.length===1?bn=[bn[0],bn[0],bn[0],bn[0]]:bn.length===2?bn=[bn[0],bn[1],bn[0],bn[1]]:bn.length===3&&(bn=[bn[0],bn[1],bn[2],bn[1]]),sn+=bn[1]+bn[3],Dn+=bn[0]+bn[2],Ze+=(bn[1]-bn[3])/2,ht+=(bn[2]-bn[0])/2)}I=Tp(Tp({},k),{},{x:Ze-1,y:ht-1,width:sn,height:Dn})}return Object(Le.g)(Ed,I)}}},{key:"getShape",value:function(){var f=this.props.model,y=f.text,b=y.value,x=y.x,k=y.y;if(b){var I=Tp({x,y:k,className:"lf-element-text",value:b},f.getTextStyle());return Object(Le.g)("g",{className:"lf-line-text",onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getBackground(),Object(Le.g)(Lx,L0({},I,{model:f})))}}}])&&eD(i.prototype,l),p}($x);function U0(a){return U0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},U0(a)}var nc,oD=["text","sourceAnchorId","targetAnchorId"];function qx(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function yf(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?qx(Object(l),!0).forEach(function(u){eu(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):qx(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function iD(a,i){if(a==null)return{};var l,u,p=function(y,b){if(y==null)return{};var x,k,I={},H=Object.keys(y);for(k=0;k<H.length;k++)x=H[k],b.indexOf(x)>=0||(I[x]=y[x]);return I}(a,i);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(u=0;u<f.length;u++)l=f[u],i.indexOf(l)>=0||Object.prototype.propertyIsEnumerable.call(a,l)&&(p[l]=a[l])}return p}function aD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Kx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Kx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Kx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function lD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function G0(a,i){return G0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},G0(a,i)}function uD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Wm(a);if(i){var p=Wm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return sD(this,l)}}function sD(a,i){if(i&&(U0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ql(a)}function Ql(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Wm(a){return Wm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Wm(a)}function eu(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}(function(a){a.SOURCE="SOURCE",a.TARGET="TARGET"})(nc||(nc={}));var Zx=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&G0(f,y)})(p,a);var i,l,u=uD(p);function p(f){var y;(function(I,H){if(!(I instanceof H))throw new TypeError("Cannot call a class as a function")})(this,p),eu(Ql(y=u.call(this)),"stepDragData",void 0),eu(Ql(y),"stepDrag",void 0),eu(Ql(y),"oldEdge",void 0),eu(Ql(y),"preTargetNode",void 0),eu(Ql(y),"targetRuleResults",void 0),eu(Ql(y),"sourceRuleResults",void 0),eu(Ql(y),"handleMouseDown",function(I){y.stepDrag&&y.stepDrag.handleMouseDown(I)}),eu(Ql(y),"onDragStart",function(){var I=y.props,H=I.x,J=I.y,de=I.edgeModel,Se=de.startPoint,ke=de.endPoint,Ke=de.pointsList;y.oldEdge={startPoint:Se,endPoint:ke,pointsList:Ke},y.setState({endX:H,endY:J,dragging:!0})}),eu(Ql(y),"onDragging",function(I){var H=I.deltaX,J=I.deltaY,de=y.state,Se=de.endX,ke=de.endY,Ke=y.props,Ze=Ke.graphModel,ht=Ke.type,$t=Ze.transformModel,hn=Ze.editConfigModel,dn=aD($t.moveCanvasPointByHtml([Se,ke],H,J),2),zn=dn[0],sn=dn[1];y.setState({endX:zn,endY:sn,dragging:!0});var Dn=y.props.edgeModel,bn=rs({x:Se,y:ke},Ze);if(bn&&bn.node&&y.isAllowAdjust(bn).pass){var jr,Br=Dn.startPoint,sr=Dn.endPoint,Xr=Dn.sourceNode,pi=Dn.targetNode;ht===nc.SOURCE?jr={startPoint:{x:bn.anchor.x,y:bn.anchor.y},endPoint:{x:sr.x,y:sr.y},sourceNode:bn.node,targetNode:pi}:ht===nc.TARGET&&(jr={startPoint:{x:Br.x,y:Br.y},endPoint:{x:bn.anchor.x,y:bn.anchor.y},sourceNode:Xr,targetNode:bn.node}),Dn.updateAfterAdjustStartAndEnd(jr)}else ht===nc.SOURCE?Dn.updateStartPoint({x:zn,y:sn}):ht===nc.TARGET&&Dn.updateEndPoint({x:zn,y:sn});Dn.text.value&&hn.adjustEdge&&Dn.setText(Object.assign({},Dn.text,Dn.textPosition))}),eu(Ql(y),"onDragEnd",function(I){var H=I.event;try{var J;y.setState({dragging:!1});var de=y.props,Se=de.graphModel,ke=de.edgeModel,Ke=de.type,Ze=y.state,ht=Ze.endX,$t=Ze.endY,hn=Ze.dragging,dn=rs({x:ht,y:$t},Se);if(!hn)return;var zn,sn=!1;if(dn&&dn.node){var Dn=y.isAllowAdjust(dn),bn=Dn.pass,jr=Dn.msg,Br=Dn.newTargetNode;if(bn){var sr=ke.getData(),Xr=sr.text,pi=sr.sourceAnchorId,hi=pi===void 0?"":pi,ba=sr.targetAnchorId;zn=yf(yf({sourceAnchorId:hi,targetAnchorId:ba===void 0?"":ba},iD(sr,oD)),{},{text:(Xr==null?void 0:Xr.value)||""}),Ke===nc.SOURCE?(zn=yf(yf({},Se.edgeGenerator(Se.getNodeModelById(dn.node.id).getData(),Se.getNodeModelById(ke.targetNodeId).getData(),zn)),{},{sourceNodeId:dn.node.id,sourceAnchorId:dn.anchor.id,startPoint:{x:dn.anchor.x,y:dn.anchor.y},targetNodeId:ke.targetNodeId,endPoint:yf({},ke.endPoint)}),ke.sourceNodeId===dn.node.id&&ke.sourceAnchorId===dn.anchor.id&&(sn=!0)):Ke===nc.TARGET&&(zn=yf(yf({},Se.edgeGenerator(Se.getNodeModelById(ke.sourceNodeId).getData(),Se.getNodeModelById(dn.node.id).getData(),zn)),{},{sourceNodeId:ke.sourceNodeId,startPoint:yf({},ke.startPoint),targetNodeId:dn.node.id,targetAnchorId:dn.anchor.id,endPoint:{x:dn.anchor.x,y:dn.anchor.y}}),ke.targetNodeId===dn.node.id&&ke.targetAnchorId===dn.anchor.id&&(sn=!0))}else{sn=!0;var tu=Br.getData();Se.eventCenter.emit(Nn.CONNECTION_NOT_ALLOWED,{data:tu,msg:jr})}}else sn=!0;if(sn)y.recoveryEdge();else{var nu=ke.getData();Se.deleteEdgeById(ke.id);var oc=Se.addEdge(yf({},zn));Se.eventCenter.emit(Nn.EDGE_EXCHANGE_NODE,{data:{newEdge:oc.getData(),oldEdge:nu}})}(J=y.preTargetNode)===null||J===void 0||J.setElementState(Hr.DEFAULT)}finally{y.props.graphModel.eventCenter.emit(Nn.ADJUST_POINT_DRAGEND,{e:H,data:y.stepDragData})}}),eu(Ql(y),"recoveryEdge",function(){var I=y.props.edgeModel,H=y.oldEdge,J=H.startPoint,de=H.endPoint,Se=H.pointsList;I.updateStartPoint(J),I.updateEndPoint(de),I.modelType!==xr.LINE_EDGE&&(I.pointsList=Se,I.initPoints())}),eu(Ql(y),"getAdjustPointStyle",function(){var I=y.props,H=I.graphModel.theme;return I.edgeModel,H.edgeAdjust}),y.state={dragging:!1,endX:0,endY:0},y.targetRuleResults=new Map,y.sourceRuleResults=new Map;var b=f.type,x=f.edgeModel,k=f.graphModel.eventCenter;return y.stepDragData={type:b,edgeData:x.getData()},y.stepDrag=new ee({onDragStart:y.onDragStart,onDragging:y.onDragging,onDragEnd:y.onDragEnd,eventType:"ADJUST_POINT",isStopPropagation:!1,eventCenter:k,data:y.stepDragData}),y}return i=p,(l=[{key:"isAllowAdjust",value:function(f){var y=this.props,b=y.edgeModel,x=b.id,k=b.sourceNode,I=b.targetNode,H=b.sourceAnchorId,J=b.targetAnchorId,de=y.type,Se=null,ke=null,Ke=null,Ze=null;if(de===nc.SOURCE?(Se=f.node,ke=I,Ke=f.anchor,Ze=I.getAnchorInfo(J)):(Se=k,ke=f.node,Ze=f.anchor,Ke=k.getAnchorInfo(H)),this.preTargetNode&&this.preTargetNode!==f.node&&this.preTargetNode.setElementState(Hr.DEFAULT),this.preTargetNode=f.node,Ze.id===Ke.id)return{pass:!1,msg:"",newTargetNode:ke};var ht="".concat(Se.id,"_").concat(ke.id,"_").concat(Ke.id,"_").concat(Ze.id);if(!this.targetRuleResults.has(ht)){var $t=Se.isAllowConnectedAsSource(ke,Ke,Ze,x),hn=ke.isAllowConnectedAsTarget(Se,Ke,Ze,x);this.sourceRuleResults.set(ht,Yl($t)),this.targetRuleResults.set(ht,Yl(hn))}var dn=this.sourceRuleResults.get(ht),zn=dn.isAllPass,sn=dn.msg,Dn=this.targetRuleResults.get(ht),bn=Dn.isAllPass,jr=Dn.msg,Br=zn&&bn?Hr.ALLOW_CONNECT:Hr.NOT_ALLOW_CONNECT;return de===nc.SOURCE?Se.setElementState(Br):ke.setElementState(Br),{pass:zn&&bn,msg:jr||sn,newTargetNode:ke}}},{key:"render",value:function(){var f=this.props,y=f.x,b=f.y,x=f.getAdjustPointShape,k=f.edgeModel,I=this.state.dragging;return Object(Le.g)("g",{pointerEvents:I?"none":"",onMouseDown:this.handleMouseDown},I?"":x(y,b,k))}}])&&lD(i.prototype,l),p}(Le.a);function V0(a){return V0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},V0(a)}function sy(){return sy=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},sy.apply(this,arguments)}function cD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Jx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Jx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Jx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function fD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function dD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function W0(a,i){return W0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},W0(a,i)}function pD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=zm(a);if(i){var p=zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return hD(this,l)}}function hD(a,i){if(i&&(V0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ds(a)}function ds(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function zm(a){return zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},zm(a)}function rc(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var cy=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&W0(f,y)})(p,a);var i,l,u=pD(p);function p(){var f;fD(this,p);for(var y=arguments.length,b=new Array(y),x=0;x<y;x++)b[x]=arguments[x];return rc(ds(f=u.call.apply(u,[this].concat(b))),"startTime",void 0),rc(ds(f),"contextMenuTime",void 0),rc(ds(f),"clickTimer",void 0),rc(ds(f),"textRef",Object(Le.f)()),rc(ds(f),"handleHover",function(k,I){var H=f.props,J=H.model,de=H.graphModel.eventCenter;J.setHovered(k);var Se=k?Nn.EDGE_MOUSEENTER:Nn.EDGE_MOUSELEAVE,ke=J.getData();de.emit(Se,{data:ke,e:I})}),rc(ds(f),"setHoverON",function(k){f.props.model.isHovered||(f.textRef&&f.textRef.current&&f.textRef.current.setHoverON(),f.handleHover(!0,k))}),rc(ds(f),"setHoverOFF",function(k){f.props.model.isHovered&&(f.textRef&&f.textRef.current&&f.textRef.current.setHoverOFF(),f.handleHover(!1,k))}),rc(ds(f),"handleContextMenu",function(k){k.preventDefault(),f.contextMenuTime=new Date().getTime(),f.clickTimer&&clearTimeout(f.clickTimer);var I=f.props,H=I.model,J=I.graphModel,de=J.getPointByClient({x:k.clientX,y:k.clientY});J.setElementStateById(H.id,Hr.SHOW_MENU,de.domOverlayPosition),f.toFront(),H.isSelected||J.selectEdgeById(H.id);var Se=H==null?void 0:H.getData();J.eventCenter.emit(Nn.EDGE_CONTEXTMENU,{data:Se,e:k,position:de})}),rc(ds(f),"handleMouseDown",function(k){k.stopPropagation(),f.startTime=new Date().getTime()}),rc(ds(f),"handleMouseUp",function(k){if(f.startTime&&!(new Date().getTime()-f.startTime>200||k.button===2)){var I=k.detail===2,H=f.props,J=H.model,de=H.graphModel,Se=J==null?void 0:J.getData(),ke=de.getPointByClient({x:k.clientX,y:k.clientY});if(I){var Ke=de.editConfigModel,Ze=de.textEditElement;if(Ze&&Ze.id===J.id&&de.setElementStateById(J.id,Hr.DEFAULT),Ke.edgeTextEdit&&J.text.editable&&de.setElementStateById(J.id,Hr.TEXT_EDIT),J.modelType===xr.POLYLINE_EDGE){var ht=J,$t=de.getPointByClient({x:k.x,y:k.y}).canvasOverlayPosition,hn=$t.x,dn=$t.y,zn=Zl({x:hn,y:dn},ht.points);ht.dbClickPosition=zn}de.eventCenter.emit(Nn.EDGE_DBCLICK,{data:Se,e:k,position:ke})}else de.eventCenter.emit(Nn.ELEMENT_CLICK,{data:Se,e:k,position:ke}),de.eventCenter.emit(Nn.EDGE_CLICK,{data:Se,e:k,position:ke});var sn=de.editConfigModel;de.selectEdgeById(J.id,dd(k,sn)),f.toFront()}}),f}return i=p,(l=[{key:"getShape",value:function(){return Object(Le.g)("g",null,this.getEdge())}},{key:"getTextStyle",value:function(){}},{key:"getText",value:function(){var f=this.props,y=f.model,b=f.graphModel;if(y.state===Hr.TEXT_EDIT)return null;var x=!1,k=b.editConfigModel;return(y.text.draggable||k.edgeTextDraggable)&&(x=!0),Object(Le.g)(rD,{ref:this.textRef,editable:k.edgeTextEdit&&y.text.editable,model:y,graphModel:b,draggable:x})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=f.isSelected;return{start:y,end:b,hover:this.state.hover,isSelected:x}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model;return[f.startPoint,f.endPoint]}},{key:"getArrowStyle",value:function(){return null}},{key:"getArrow",value:function(){var f=this.props.model,y=f.id,b=f.getArrowStyle(),x=b.refY,k=x===void 0?0:x,I=b.refX,H=I===void 0?2:I,J=cD(this.getLastTwoPoints(),2),de=J[0],Se=J[1],ke="auto";return de!==null&&Se!==null&&(ke=qe(ct({x:Se.x-de.x,y:Se.y-de.y,z:0}))),Object(Le.g)("g",null,Object(Le.g)("defs",null,Object(Le.g)("marker",{id:"marker-start-".concat(y),refX:-H,refY:k,overflow:"visible",orient:"auto",markerUnits:"userSpaceOnUse"},this.getStartArrow()),Object(Le.g)("marker",{id:"marker-end-".concat(y),refX:H,refY:k,overflow:"visible",orient:ke,markerUnits:"userSpaceOnUse"},this.getEndArrow())))}},{key:"getStartArrow",value:function(){var f=this.props.model.getArrowStyle();return f.stroke,f.strokeWidth,f.offset,f.verticalLength,Object(Le.g)("path",null)}},{key:"getEndArrow",value:function(){var f=this.props.model.getArrowStyle(),y=f.stroke,b=f.strokeWidth,x=f.offset,k=f.verticalLength;return Object(Le.g)("path",{stroke:y,fill:y,strokeWidth:b,transform:"rotate(180)",d:"M 0 0 L ".concat(x," -").concat(k," L ").concat(x," ").concat(k," Z")})}},{key:"getAdjustPointShape",value:function(f,y,b){var x=b.getAdjustPointStyle();return Object(Le.g)(jh,sy({className:"lf-edge-adjust-point"},x,{x:f,y}))}},{key:"getAdjustPoints",value:function(){var f=this.props,y=f.model,b=f.graphModel,x=y.getAdjustStart(),k=y.getAdjustEnd();return Object(Le.g)("g",null,Object(Le.g)(Zx,sy({type:"SOURCE"},x,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:b})),Object(Le.g)(Zx,sy({type:"TARGET"},k,{getAdjustPointShape:this.getAdjustPointShape,edgeModel:y,graphModel:b})))}},{key:"getAnimation",value:function(){}},{key:"getAppendWidth",value:function(){return Object(Le.g)("g",null)}},{key:"getAppend",value:function(){return Object(Le.g)("g",{className:"lf-edge-append"},this.getAppendWidth())}},{key:"getEdge",value:function(){return null}},{key:"toFront",value:function(){var f=this.props,y=f.graphModel,b=f.model;y.toFront(b.id)}},{key:"render",value:function(){var f=this.props,y=f.model,b=y.isSelected,x=y.isHitable,k=y.isShowAdjustPoint;return f.graphModel.animation,Object(Le.g)("g",null,Object(Le.g)("g",{className:["lf-edge",!x&&"pointer-none",b&&"lf-edge-selected"].filter(Boolean).join(" "),onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onContextMenu:this.handleContextMenu,onMouseOver:this.setHoverON,onMouseEnter:this.setHoverON,onMouseLeave:this.setHoverOFF},this.getShape(),this.getAppend(),this.getText(),this.getArrow()),k&&b?this.getAdjustPoints():"")}}])&&dD(i.prototype,l),p}(Le.a);function z0(a){return z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},z0(a)}function vD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return Qx(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return Qx(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Qx(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var fy=function(a){var i={d:""};return Object.entries(a).forEach(function(l){var u=vD(l,2),p=u[0],f=u[1],y=z0(f);p!=="style"&&y==="object"||(i[p]=f)}),Object(Le.g)("path",i)};function H0(a){return H0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},H0(a)}function X0(){return X0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},X0.apply(this,arguments)}function yD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function mD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Y0(a,i){return Y0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Y0(a,i)}function gD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Hm(a);if(i){var p=Hm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return _D(this,l)}}function _D(a,i){if(i&&(H0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Hm(a){return Hm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Hm(a)}var q0=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Y0(f,y)})(p,a);var i,l,u=gD(p);function p(){return yD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=f.isAnimation,k=f.arrowConfig,I=f.getEdgeStyle(),H=f.getEdgeAnimationStyle(),J=H.strokeDasharray,de=H.stroke,Se=H.strokeDashoffset,ke=H.animationName,Ke=H.animationDuration,Ze=H.animationIterationCount,ht=H.animationTimingFunction,$t=H.animationDirection;return Object(Le.g)(Nh,X0({},I,{x1:y.x,y1:y.y,x2:b.x,y2:b.y},k,x?{strokeDasharray:J,stroke:de,style:{strokeDashoffset:Se,animationName:ke,animationDuration:Ke,animationIterationCount:Ze,animationTimingFunction:ht,animationDirection:$t}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model,y=f.startPoint,b=f.endPoint,x=jn({start:y,end:b}),k=x.d,I=x.strokeWidth,H=x.fill,J=x.strokeDasharray,de=x.stroke;return Object(Le.g)(fy,{d:k,fill:H,strokeWidth:I,stroke:de,strokeDasharray:J})}}])&&mD(i.prototype,l),p}(cy);function K0(a){return K0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},K0(a)}function bD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return eS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return eS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function eS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}var wD=function(a){var i={points:"",fill:"none"};return Object.entries(a).forEach(function(l){var u=bD(l,2),p=u[0],f=u[1];(p==="style"||K0(f)!=="object")&&(i[p]=f)}),Object(Le.g)("polyline",i)};function Z0(a){return Z0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Z0(a)}function tS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Xm(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?tS(Object(l),!0).forEach(function(u){gf(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):tS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function J0(){return J0=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},J0.apply(this,arguments)}function ED(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return nS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return nS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function nS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function OD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Q0(a,i){return Q0=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},Q0(a,i)}function xD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Ym(a);if(i){var p=Ym(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return SD(this,l)}}function SD(a,i){if(i&&(Z0(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mf(a)}function mf(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Ym(a){return Ym=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Ym(a)}function gf(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var e1=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&Q0(f,y)})(p,a);var i,l,u=xD(p);function p(){var f;return function(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}(this,p),gf(mf(f=u.call(this)),"drag",void 0),gf(mf(f),"isDragging",void 0),gf(mf(f),"isShowAdjustPointTemp",void 0),gf(mf(f),"appendInfo",void 0),gf(mf(f),"onDragStart",function(){var y=f.props.model;y.dragAppendStart(),f.isShowAdjustPointTemp=y.isShowAdjustPoint,y.isShowAdjustPoint=!1}),gf(mf(f),"onDragging",function(y){var b=y.deltaX,x=y.deltaY,k=f.props,I=k.model,H=k.graphModel;f.isDragging=!0;var J=H.transformModel,de=H.editConfigModel,Se=ED(J.fixDeltaXY(b,x),2),ke=Se[0],Ke=Se[1],Ze=I,ht=de.adjustEdgeMiddle;f.appendInfo=ht?Ze.dragAppendSimple(f.appendInfo,{x:ke,y:Ke}):Ze.dragAppend(f.appendInfo,{x:ke,y:Ke})}),gf(mf(f),"onDragEnd",function(){var y=f.props,b=y.model,x=y.graphModel.eventCenter,k=b;k.dragAppendEnd(),f.isDragging=!1,k.isShowAdjustPoint=f.isShowAdjustPointTemp,f.appendInfo=void 0,x.emit(Nn.EDGE_ADJUST,{data:k.getData()})}),gf(mf(f),"beforeDragStart",function(y,b){b.dragAble&&f.drag.handleMouseDown(y),f.appendInfo=b}),f.drag=new ee({onDragStart:f.onDragStart,onDragging:f.onDragging,onDragEnd:f.onDragEnd,isStopPropagation:!1}),f}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.points,b=f.isAnimation,x=f.arrowConfig,k=f.getEdgeStyle(),I=f.getEdgeAnimationStyle(),H=I.strokeDasharray,J=I.stroke,de=I.strokeDashoffset,Se=I.animationName,ke=I.animationDuration,Ke=I.animationIterationCount,Ze=I.animationTimingFunction,ht=I.animationDirection;return Object(Le.g)(wD,J0({points:y},k,x,b?{strokeDasharray:H,stroke:J,style:{strokeDashoffset:de,animationName:Se,animationDuration:ke,animationIterationCount:Ke,animationTimingFunction:Ze,animationDirection:ht}}:{}))}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=f.points,b=f.isSelected,x={start:null,end:null,hover:this.state.hover,isSelected:b},k=mo(y);return k.length>=2&&(x.start=k[k.length-2],x.end=k[k.length-1]),x}},{key:"getLastTwoPoints",value:function(){var f=this.props.model.points,y=mo(f);return y.length>=2?[y[y.length-2],y[y.length-1]]:[null,null]}},{key:"getAppendAttributes",value:function(f){var y,b=f.start,x=f.end;if(b.x===x.x&&b.y===x.y)y="";else{var k={start:b,end:x,offset:10,verticalLength:5},I=L(Xm(Xm({},k),{},{type:"start"})),H=L(Xm(Xm({},k),{},{type:"end"}));y="M".concat(I.leftX," ").concat(I.leftY,` 
      L`).concat(I.rightX," ").concat(I.rightY,` 
      L`).concat(H.rightX," ").concat(H.rightY,`
      L`).concat(H.leftX," ").concat(H.leftY," z")}return{d:y,fill:"transparent",stroke:"transparent",strokeWidth:1,strokeDasharray:"4, 4"}}},{key:"getAppendShape",value:function(f){var y=this.getAppendAttributes(f),b=y.d,x=y.strokeWidth,k=y.fill,I=y.strokeDasharray,H=y.stroke;return Object(Le.g)(fy,{d:b,fill:k,strokeWidth:x,stroke:H,strokeDasharray:I})}},{key:"getAppendWidth",value:function(){for(var f=this,y=this.props,b=y.model,x=y.graphModel,k=b.pointsList,I=b.draggable,H=[],J=k.length,de=function(ke){var Ke="lf-polyline-append",Ze={start:{x:k[ke].x,y:k[ke].y},end:{x:k[ke+1].x,y:k[ke+1].y},startIndex:ke,endIndex:ke+1,direction:"",dragAble:!0},ht=Object(Le.g)("g",{className:Ke},f.getAppendShape(Ze)),$t=x.editConfigModel,hn=$t.adjustEdge,dn=$t.adjustEdgeMiddle;if(hn&&I){var zn=Ze.startIndex,sn=Ze.endIndex,Dn=dn&&(zn===0||sn===J-1);Ze.dragAble=!Dn,Ze.start.x===Ze.end.x?(Ze.dragAble&&(Ke+="-ew-resize"),Ze.direction=ao.VERTICAL):Ze.start.y===Ze.end.y&&(Ze.dragAble&&(Ke+="-ns-resize"),Ze.direction=ao.HORIZONTAL),ht=Object(Le.g)("g",{className:f.isDragging?"lf-dragging":"lf-drag-able",onMouseDown:function(bn){return f.beforeDragStart(bn,Ze)}},Object(Le.g)("g",{className:Ke},f.getAppendShape(Ze)))}H.push(ht)},Se=0;Se<J-1;Se++)de(Se);return Object(Le.g)("g",null,H)}}])&&OD(i.prototype,l),p}(cy);function t1(a){return t1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},t1(a)}function AD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return rS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return rS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function n1(){return n1=Object.assign||function(a){for(var i=1;i<arguments.length;i++){var l=arguments[i];for(var u in l)Object.prototype.hasOwnProperty.call(l,u)&&(a[u]=l[u])}return a},n1.apply(this,arguments)}function TD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function MD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function r1(a,i){return r1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},r1(a,i)}function PD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=qm(a);if(i){var p=qm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return kD(this,l)}}function kD(a,i){if(i&&(t1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function qm(a){return qm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},qm(a)}var o1=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&r1(f,y)})(p,a);var i,l,u=PD(p);function p(){return TD(this,p),u.apply(this,arguments)}return i=p,(l=[{key:"getEdge",value:function(){var f=this.props.model,y=f.getEdgeStyle(),b=f.path,x=f.isAnimation,k=f.arrowConfig,I=f.getEdgeAnimationStyle(),H=I.strokeDasharray,J=I.stroke,de=I.strokeDashoffset,Se=I.animationName,ke=I.animationDuration,Ke=I.animationIterationCount,Ze=I.animationTimingFunction,ht=I.animationDirection;return Object(Le.g)(fy,n1({d:b},y,k,x?{strokeDasharray:H,stroke:J,style:{strokeDashoffset:de,animationName:Se,animationDuration:ke,animationIterationCount:Ke,animationTimingFunction:Ze,animationDirection:ht}}:{}))}},{key:"getAppendWidth",value:function(){var f=this.props.model.path;return Object(Le.g)(fy,{d:f,strokeWidth:10,stroke:"transparent",fill:"none"})}},{key:"getArrowInfo",value:function(){var f=this.props.model,y=this.state.hover,b=f.isSelected,x=f.getArrowStyle().offset,k=f.pointsList.map(function(H){return{x:H.x,y:H.y}}),I=AD(Fa(k,x),2);return{start:I[0],end:I[1],hover:y,isSelected:b}}},{key:"getLastTwoPoints",value:function(){var f=this.props.model,y=f.getArrowStyle().offset,b=f.pointsList.map(function(x){return{x:x.x,y:x.y}});return Fa(b,y)}}])&&MD(i.prototype,l),p}(cy);function i1(a){return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},i1(a)}function oS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function ND(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}function RD(a,i){if(!(a instanceof i))throw new TypeError("Cannot call a class as a function")}function jD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function a1(a,i){return a1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},a1(a,i)}function CD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Km(a);if(i){var p=Km(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return DD(this,l)}}function DD(a,i){if(i&&(i1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}(a)}function Km(a){return Km=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Km(a)}var ID=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&a1(f,y)})(p,a);var i,l,u=CD(p);function p(){return RD(this,p),u.apply(this,arguments)}return i=p,l=[{key:"getArrowAttributes",value:function(){var f=this.props,y=f.arrowInfo,b=f.style,x=y.start,k=y.end,I={start:x,end:k,offset:b.offset,verticalLength:b.verticalLength,type:"end"},H=L(I),J=H.leftX,de=H.leftY,Se=H.rightX,ke=H.rightY;return function(Ke){for(var Ze=1;Ze<arguments.length;Ze++){var ht=arguments[Ze]!=null?arguments[Ze]:{};Ze%2?oS(Object(ht),!0).forEach(function($t){ND(Ke,$t,ht[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ke,Object.getOwnPropertyDescriptors(ht)):oS(Object(ht)).forEach(function($t){Object.defineProperty(Ke,$t,Object.getOwnPropertyDescriptor(ht,$t))})}return Ke}({d:"M".concat(J," ").concat(de," L").concat(k.x," ").concat(k.y," L").concat(Se," ").concat(ke," z")},b)}},{key:"getShape",value:function(){var f=this.getArrowAttributes(),y=f.d,b=f.strokeWidth,x=f.stroke,k=f.fill;return Object(Le.g)(fy,{d:y,fill:k,strokeWidth:b,stroke:x})}},{key:"render",value:function(){return Object(Le.g)("g",{className:"lf-arrow"},this.getShape())}}],l&&jD(i.prototype,l),p}(Le.a),iS=function(a,i){return pt(a,i)},LD=function(a){var i=a==null?0:a.length;return i?a[i-1]:void 0},l1=function(){return kn.a.Date.now()},FD=Math.max,$D=Math.min,BD=function(a,i,l){var u,p,f,y,b,x,k=0,I=!1,H=!1,J=!0;if(typeof a!="function")throw new TypeError("Expected a function");function de($t){var hn=u,dn=p;return u=p=void 0,k=$t,y=a.apply(dn,hn)}function Se($t){return k=$t,b=setTimeout(Ke,i),I?de($t):y}function ke($t){var hn=$t-x;return x===void 0||hn>=i||hn<0||H&&$t-k>=f}function Ke(){var $t=l1();if(ke($t))return Ze($t);b=setTimeout(Ke,function(hn){var dn=i-(hn-x);return H?$D(dn,f-(hn-k)):dn}($t))}function Ze($t){return b=void 0,J&&u?de($t):(u=p=void 0,y)}function ht(){var $t=l1(),hn=ke($t);if(u=arguments,p=this,x=$t,hn){if(b===void 0)return Se(x);if(H)return clearTimeout(b),b=setTimeout(Ke,i),de(x)}return b===void 0&&(b=setTimeout(Ke,i)),y}return i=Hl(i)||0,Rr(l)&&(I=!!l.leading,f=(H="maxWait"in l)?FD(Hl(l.maxWait)||0,i):f,J="trailing"in l?!!l.trailing:J),ht.cancel=function(){b!==void 0&&clearTimeout(b),k=0,u=x=p=b=void 0},ht.flush=function(){return b===void 0?y:Ze(l1())},ht},UD=r(172);function GD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Ad(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var aS,lS,uS,VD=function(){function a(u){(function(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")})(this,a),Ad(this,"undos",[]),Ad(this,"redos",[]),Ad(this,"callbacks",[]),Ad(this,"stopWatch",null),Ad(this,"curData",null),Ad(this,"maxSize",50),Ad(this,"waitTime",100),Ad(this,"eventCenter",void 0),this.eventCenter=u}var i,l;return i=a,(l=[{key:"add",value:function(u){iS(LD(this.undos),u)||(this.undos.push(u),iS(this.curData,u)||(this.redos=[]),this.eventCenter.emit(Nn.HISTORY_CHANGE,{data:{undos:this.undos,redos:this.redos,undoAble:this.undos.length>1,redoAble:this.redos.length>0}}),this.undos.length>this.maxSize&&this.undos.shift())}},{key:"undoAble",value:function(){return this.undos.length>1}},{key:"undo",value:function(){if(this.undoAble()){var u=this.undos.pop();this.redos.push(u);var p=this.undos.pop();return this.curData=Eo(p),p}}},{key:"redoAble",value:function(){return this.redos.length>0}},{key:"redo",value:function(){if(this.redoAble()){var u=this.redos.pop();return this.curData=Eo(u),u}}},{key:"watch",value:function(u){var p=this;this.stopWatch&&this.stopWatch(),this.undos.push(u.modelToGraphData()),this.stopWatch=Object(UD.a)(u,BD(function(){var f=u.modelToHistoryData();f&&p.add(f)},this.waitTime))}}])&&GD(i.prototype,l),a}();function u1(a){return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},u1(a)}function WD(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||function(l,u){if(l){if(typeof l=="string")return sS(l,u);var p=Object.prototype.toString.call(l).slice(8,-1);if(p==="Object"&&l.constructor&&(p=l.constructor.name),p==="Map"||p==="Set")return Array.from(l);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return sS(l,u)}}(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function sS(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function cS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function Mp(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?cS(Object(l),!0).forEach(function(u){Pp(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):cS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function fS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function s1(a,i){return s1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},s1(a,i)}function zD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Zm(a);if(i){var p=Zm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return HD(this,l)}}function HD(a,i){if(i&&(u1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wh(a)}function Wh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Zm(a){return Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Zm(a)}function Pp(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var dS,pS,hS,c1=ps((uS=lS=function(a){(function(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),b&&s1(y,b)})(f,a);var i,l,u,p=zD(f);function f(){var y;return function(b,x){if(!(b instanceof x))throw new TypeError("Cannot call a class as a function")}(this,f),Pp(Wh(y=p.call(this)),"ref",Object(Le.f)()),Pp(Wh(y),"__prevText",{type:"",text:"",id:""}),Pp(Wh(y),"keyupHandler",function(b){var x=y.props.graphModel.textEditElement;b.key==="Enter"&&b.altKey&&x.setElementState(0)}),Pp(Wh(y),"inputHandler",function(b){var x=b.target.innerText,k=y.props.graphModel.textEditElement;y.__prevText={type:k.type,text:x.replace(/(\r\n)+$|(\n)+$/,""),id:k.id}}),Pp(Wh(y),"keydownHandler",function(b){b.stopPropagation()}),y.state={style:{left:0,top:0}},y}return i=f,u=[{key:"getDerivedStateFromProps",value:function(y){var b,x=y.graphModel,k=x.transformModel,I=x.theme,H=I.inputText,J=x.textEditElement;if(J){var de;if((de=J.text)===null||de===void 0||!de.value)if(J.BaseType===io.EDGE){var Se=(J=J).text,ke=J.textPosition,Ke=ke.x,Ze=ke.y;Se.x=Ke,Se.y=Ze,J.setText(Se)}else J=J;var ht={resize:"auto",whiteSpace:"normal",wordBreak:"break-all"};if(J.BaseType===io.EDGE){var $t=I.edgeText,hn=$t.overflowMode,dn=$t.lineHeight,zn=$t.wrapPadding,sn=$t.textWidth;sn&&hn==="autoWrap"&&(b=Mp(Mp({},ht),{},{width:sn,minWidth:sn,lineHeight:dn,padding:zn}))}else if(J.BaseType===io.NODE){var Dn=I.nodeText,bn=Dn.overflowMode,jr=Dn.lineHeight,Br=Dn.wrapPadding,sr=Dn.textWidth,Xr=J,pi=Xr.width,hi=Xr.modelType,ba=Xr.textWidth||sr||pi;(hi!==xr.TEXT_NODE&&bn==="autoWrap"||hi===xr.TEXT_NODE&&sr)&&(b=Mp(Mp({},ht),{},{width:ba,minWidth:ba,lineHeight:jr,padding:Br}))}var tu=J.text,nu=tu.x,oc=tu.y,kp=WD(k.CanvasPointToHtmlPoint([nu,oc]),2);return{style:Mp(Mp({left:kp[0],top:kp[1]},b),H)}}}}],(l=[{key:"componentDidUpdate",value:function(){var y=this.props.graphModel;if(this.ref.current&&(this.ref.current.focus(),this.placeCaretAtEnd(this.ref.current)),this.__prevText.id!==""){var b=this.__prevText,x=b.text,k=b.id;y.updateText(k,x),y.eventCenter.emit(Nn.TEXT_UPDATE,Mp({},this.__prevText)),this.__prevText.id="",this.__prevText.text="",this.__prevText.type=""}}},{key:"placeCaretAtEnd",value:function(y){if(window.getSelection!==void 0&&document.createRange!==void 0){var b=document.createRange();b.selectNodeContents(y),b.collapse(!1);var x=window.getSelection();x.removeAllRanges(),x.addRange(b)}}},{key:"render",value:function(){var y,b=this.props.graphModel.textEditElement,x=this.state.style;return b?Object(Le.g)("div",{contentEditable:!0,className:"lf-text-input",style:x,ref:this.ref,key:b.id,onKeyUp:this.keyupHandler,onKeyDown:this.keydownHandler,onKeyPress:this.keydownHandler,onInput:this.inputHandler},(y=b.text)===null||y===void 0?void 0:y.value):null}}])&&fS(i.prototype,l),u&&fS(i,u),f}(Le.a),Pp(lS,"toolName","textEdit"),aS=uS))||aS,XD=function(a){return a.modelType===xr.LINE_EDGE?function(i){var l=i.startPoint,u=i.endPoint,p=(l.x+u.x)/2,f=(l.y+u.y)/2,y=Math.abs(l.x-u.x)+10,b=Math.abs(l.y-u.y)+10;return{x:p-y/2,y:f-b/2,x1:p+y/2,y1:f+b/2}}(a):a.modelType===xr.POLYLINE_EDGE?function(i){var l=i.points,u=mo(l),p=Wt(u,8),f=p.x,y=p.y,b=p.width,x=p.height;return{x:f-b/2,y:y-x/2,x1:f+b/2,y1:y+x/2}}(a):a.modelType===xr.BEZIER_EDGE?function(i){var l=i.path,u=Wn(l),p=Wt(u,8),f=p.x,y=p.y,b=p.width,x=p.height;return{x:f-b/2,y:y-x/2,x1:f+b/2,y1:y+x/2}}(a):void 0};function f1(a){return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},f1(a)}function vS(a,i){return function(l){if(Array.isArray(l))return l}(a)||function(l,u){var p=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(p!=null){var f,y,b=[],x=!0,k=!1;try{for(p=p.call(l);!(x=(f=p.next()).done)&&(b.push(f.value),!u||b.length!==u);x=!0);}catch(I){k=!0,y=I}finally{try{x||p.return==null||p.return()}finally{if(k)throw y}}return b}}(a,i)||yS(a,i)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function YD(a){return function(i){if(Array.isArray(i))return d1(i)}(a)||function(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}(a)||yS(a)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function yS(a,i){if(a){if(typeof a=="string")return d1(a,i);var l=Object.prototype.toString.call(a).slice(8,-1);return l==="Object"&&a.constructor&&(l=a.constructor.name),l==="Map"||l==="Set"?Array.from(a):l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l)?d1(a,i):void 0}}function d1(a,i){(i==null||i>a.length)&&(i=a.length);for(var l=0,u=new Array(i);l<i;l++)u[l]=a[l];return u}function qD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function p1(a,i){return p1=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},p1(a,i)}function KD(a){var i=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var l,u=Jm(a);if(i){var p=Jm(this).constructor;l=Reflect.construct(u,arguments,p)}else l=u.apply(this,arguments);return ZD(this,l)}}function ZD(a,i){if(i&&(f1(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zh(a)}function zh(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Jm(a){return Jm=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},Jm(a)}function Hh(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var h1=ps((hS=pS=function(a){(function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(y&&y.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),y&&p1(f,y)})(p,a);var i,l,u=KD(p);function p(f){var y;(function(I,H){if(!(I instanceof H))throw new TypeError("Cannot call a class as a function")})(this,p),Hh(zh(y=u.call(this)),"stepDrag",void 0),Hh(zh(y),"handleMouseDown",function(I){y.stepDrag.handleMouseDown(I)}),Hh(zh(y),"handleWheelEvent",function(I){var H,J;I.preventDefault();var de=I.deltaX,Se=I.deltaY,ke=I.clientX,Ke=I.clientY,Ze=I.ctrlKey,ht=new WheelEvent("wheel",{deltaX:de,deltaY:Se,clientX:ke,clientY:Ke,ctrlKey:Ze});(H=y.props.logicFlow.container)===null||H===void 0||(J=H.querySelector('.lf-canvas-overlay[name="canvas-overlay"]'))===null||J===void 0||J.dispatchEvent(ht)}),Hh(zh(y),"onDragging",function(I){var H=I.deltaX,J=I.deltaY,de=y.props.graphModel,Se=de.getSelectElements(!0);de.moveNodes(Se.nodes.map(function(ke){return ke.id}),H,J)}),Hh(zh(y),"handleContextMenu",function(I){I.preventDefault();var H=y.props,J=H.graphModel,de=H.graphModel,Se=de.eventCenter,ke=de.selectElements,Ke=J.getPointByClient({x:I.clientX,y:I.clientY}),Ze={nodes:[],edges:[]};YD(ke.values()).forEach(function(ht){ht.BaseType===io.NODE&&Ze.nodes.push(ht.getData()),ht.BaseType===io.EDGE&&Ze.edges.push(ht.getData())}),Se.emit(Nn.SELECTION_CONTEXTMENU,{data:Ze,e:I,position:Ke})});var b=f.graphModel,x=b.gridSize,k=b.eventCenter;return y.stepDrag=new ee({onDragging:y.onDragging,step:x,eventType:"SELECTION",eventCenter:k}),y}return i=p,(l=[{key:"render",value:function(){var f=this.props.graphModel,y=f.selectElements,b=f.transformModel;if(!(y.size<=1)){var x=Number.MAX_SAFE_INTEGER,k=Number.MAX_SAFE_INTEGER,I=Number.MIN_SAFE_INTEGER,H=Number.MIN_SAFE_INTEGER;y.forEach(function(ke){var Ke={x:0,y:0,x1:0,y1:0};ke.BaseType===io.NODE&&(Ke=function(Ze){var ht=Ze.x,$t=Ze.y,hn=Ze.width,dn=Ze.height;return{x:ht-hn/2,y:$t-dn/2,x1:ht+hn/2,y1:$t+dn/2}}(ke)),ke.BaseType===io.EDGE&&(Ke=XD(ke)),x=Math.min(x,Ke.x),k=Math.min(k,Ke.y),I=Math.max(I,Ke.x1),H=Math.max(H,Ke.y1)});var J=vS(b.CanvasPointToHtmlPoint([x,k]),2);x=J[0],k=J[1];var de=vS(b.CanvasPointToHtmlPoint([I,H]),2);I=de[0],H=de[1];var Se={left:"".concat(x-10,"px"),top:"".concat(k-10,"px"),width:"".concat(I-x+20,"px"),height:"".concat(H-k+20,"px")};return Object(Le.g)("div",{className:"lf-multiple-select",style:Se,onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onWheel:this.handleWheelEvent})}}}])&&qD(i.prototype,l),p}(Le.a),Hh(pS,"toolName","multipleSelect"),dS=hS))||dS;function JD(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function Qm(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var QD=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),Qm(this,"tools",void 0),Qm(this,"components",void 0),Qm(this,"toolMap",new Map),Qm(this,"instance",void 0),this.instance=u,this.isDisabledTool(c1.toolName)||this.registerTool(c1.toolName,c1),this.isDisabledTool(h1.toolName)||this.registerTool(h1.toolName,h1);var p=u.graphModel;p.eventCenter.on("".concat(Nn.GRAPH_TRANSFORM,",").concat(Nn.NODE_CLICK,",").concat(Nn.BLANK_CLICK," "),function(){var f=p.textEditElement,y=p.editConfigModel,b=y.edgeTextEdit,x=y.nodeTextEdit;(b||x)&&f&&p.textEditElement.setElementState(Hr.DEFAULT)})}var i,l;return i=a,(l=[{key:"isDisabledTool",value:function(u){return this.instance.options.disabledTools.indexOf(u)!==-1}},{key:"registerTool",value:function(u,p){this.toolMap.set(u,p)}},{key:"getTools",value:function(){return Array.from(this.toolMap.values())}},{key:"getInstance",value:function(){return this.instance}}])&&JD(i.prototype,l),a}(),eI=r(173),tI=r.n(eI);function nI(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function v1(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var mS=function(){function a(u){(function(f,y){if(!(f instanceof y))throw new TypeError("Cannot call a class as a function")})(this,a),v1(this,"mousetrap",void 0),v1(this,"options",void 0),v1(this,"target",void 0),u.keyboard||(u.keyboard={enabled:!1}),this.options=u;var p=u.lf;this.target=p.container,this.mousetrap=new tI.a(this.target),u.keyboard.enabled&&!p.options.isSilentMode&&this.enable(!0)}var i,l;return i=a,(l=[{key:"initShortcuts",value:function(){var u=this,p=this.options.keyboard.shortcuts;if(p)if(to(p))p.forEach(function(x){var k=x.keys,I=x.callback,H=x.action;return u.on(k,I,H)});else{var f=p.keys,y=p.callback,b=p.action;this.on(f,y,b)}}},{key:"on",value:function(u,p,f){this.mousetrap.bind(this.getKeys(u),p,f)}},{key:"disabled",get:function(){return this.options.keyboard.enabled!==!0}},{key:"off",value:function(u,p){this.mousetrap.unbind(this.getKeys(u),p)}},{key:"enable",value:function(u){(this.disabled||u)&&(this.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&(this.target.setAttribute("tabindex","-1"),this.target.style.outline="none"))}},{key:"disable",value:function(){this.disabled||(this.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}},{key:"getKeys",value:function(u){var p=this;return(Array.isArray(u)?u:[u]).map(function(f){return p.formatKey(f)})}},{key:"formatKey",value:function(u){return u.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command")}}])&&nI(i.prototype,l),a}(),rI=mS,_f=null;function gS(a,i){return a.x+=i,a.y+=i,a.text&&(a.text.x+=i,a.text.y+=i),a}function _S(a,i){return a.startPoint&&(a.startPoint.x+=i,a.startPoint.y+=i),a.endPoint&&(a.endPoint.x+=i,a.endPoint.y+=i),a.pointsList&&a.pointsList.length>0&&a.pointsList.forEach(function(l){l.x+=i,l.y+=i}),a.text&&(a.text.x+=i,a.text.y+=i),a}var Xh=40,y1=40;function m1(a){return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},m1(a)}function bS(a,i){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(p){return Object.getOwnPropertyDescriptor(a,p).enumerable})),l.push.apply(l,u)}return l}function dy(a){for(var i=1;i<arguments.length;i++){var l=arguments[i]!=null?arguments[i]:{};i%2?bS(Object(l),!0).forEach(function(u){li(a,u,l[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):bS(Object(l)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(l,u))})}return a}function wS(a,i){for(var l=0;l<i.length;l++){var u=i[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(a,u.key,u)}}function li(a,i,l){return i in a?Object.defineProperty(a,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[i]=l,a}var g1=Symbol("plugin register by Logicflow.use"),_1=function(){function a(p){var f,y,b=this;(function(x,k){if(!(x instanceof k))throw new TypeError("Cannot call a class as a function")})(this,a),li(this,"container",void 0),li(this,"width",void 0),li(this,"height",void 0),li(this,"graphModel",void 0),li(this,"history",void 0),li(this,"viewMap",new Map),li(this,"tool",void 0),li(this,"keyboard",void 0),li(this,"dnd",void 0),li(this,"options",void 0),li(this,"snaplineModel",void 0),li(this,"components",[]),li(this,"plugins",void 0),li(this,"extension",{}),li(this,"adapterIn",void 0),li(this,"adapterOut",void 0),li(this,"getView",function(x){return b.viewMap.get(x)}),p=mO(p),this.options=p,this.container=this.initContainer(p.container),this.plugins=p.plugins,this.graphModel=new cR(dy({},p)),this.tool=new QD(this),this.history=new VD(this.graphModel.eventCenter),this.dnd=new aj({lf:this}),this.keyboard=new rI({lf:this,keyboard:p.keyboard}),p.snapline!==!1&&(this.snaplineModel=new Nx(this.graphModel),f=this.graphModel.eventCenter,y=this.snaplineModel,f.on("node:mousemove",function(x){var k=x.data;y.setNodeSnapLine(k)}),f.on("node:mouseup",function(){y.clearSnapline()})),function(x,k){var I=x.keyboard,H=I.options.keyboard;I.on(["cmd + c","ctrl + c"],function(){if(y1=Xh,!H.enabled||k.textEditElement)return!0;var J=x.options.guards,de=k.getSelectElements(!1);return J&&J.beforeClone&&!J.beforeClone(de)||de.nodes.length===0&&de.edges.length===0?(_f=null,!0):((_f=de).nodes.forEach(function(Se){return gS(Se,Xh)}),_f.edges.forEach(function(Se){return _S(Se,Xh)}),!1)}),I.on(["cmd + v","ctrl + v"],function(){if(!H.enabled||k.textEditElement)return!0;if(_f&&(_f.nodes||_f.edges)){x.clearSelectElements();var J=x.addElements(_f,y1);if(!J)return!0;J.nodes.forEach(function(de){return x.selectElementById(de.id,!0)}),J.edges.forEach(function(de){return x.selectElementById(de.id,!0)}),_f.nodes.forEach(function(de){return gS(de,Xh)}),_f.edges.forEach(function(de){return _S(de,Xh)}),y1+=Xh}return!1}),I.on(["cmd + z","ctrl + z"],function(){return!H.enabled||!!k.textEditElement||(x.undo(),!1)}),I.on(["cmd + y","ctrl + y"],function(){return!H.enabled||!!k.textEditElement||(x.redo(),!1)}),I.on(["backspace"],function(){if(!H.enabled||k.textEditElement)return!0;var J=k.getSelectElements(!0);return x.clearSelectElements(),J.edges.forEach(function(de){return x.deleteEdge(de.id)}),J.nodes.forEach(function(de){return x.deleteNode(de.id)}),!1})}(this,this.graphModel),this.keyboard.initShortcuts(),this.defaultRegister(),this.installPlugins(p.disabledPlugins)}var i,l,u;return i=a,l=[{key:"register",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(typeof p=="string"){var b={BaseEdge:cy,BaseEdgeModel:_d,BaseNode:vf,BaseNodeModel:hf,RectNode:c0,RectNodeModel:Ub,CircleNode:h0,CircleNodeModel:Eb,PolygonNode:_0,PolygonNodeModel:Lb,TextNode:N0,TextNodeModel:zb,LineEdge:q0,LineEdgeModel:Pi,DiamondNode:O0,DiamondNodeModel:Tb,PolylineEdge:e1,PolylineEdgeModel:sf,BezierEdge:o1,BezierEdgeModel:yb,EllipseNode:M0,EllipseNodeModel:Nb,HtmlNode:D0,HtmlNodeModel:Yb,h:Le.g,type:p};this.viewMap.forEach(function(J){var de=J.extendKey;de&&(b[de]=J)}),this.graphModel.modelMap.forEach(function(J){var de=J.extendKey;de&&(b[de]=J)});var x=f(b),k=x.view,I=x.model,H=k;y&&!H.isObervered&&(H.isObervered=!0,H=xn(H)),this.setView(p,H),this.graphModel.setModel(p,I)}else this.registerElement(p)}},{key:"registerElement",value:function(p){var f=p.view;p.isObserverView===!1||f.isObervered||(f.isObervered=!0,f=xn(f)),this.setView(p.type,f),this.graphModel.setModel(p.type,p.model)}},{key:"batchRegister",value:function(){var p=this,f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];f.forEach(function(y){p.registerElement(y)})}},{key:"defaultRegister",value:function(){this.registerElement({view:c0,model:Ub,type:"rect"}),this.registerElement({type:"circle",view:h0,model:Eb}),this.registerElement({type:"polygon",view:_0,model:Lb}),this.registerElement({type:"line",view:q0,model:Pi}),this.registerElement({type:"polyline",view:e1,model:sf}),this.registerElement({type:"bezier",view:o1,model:yb}),this.registerElement({type:"text",view:N0,model:zb}),this.registerElement({type:"ellipse",view:M0,model:Nb}),this.registerElement({type:"diamond",view:O0,model:Tb}),this.registerElement({type:"html",view:D0,model:Yb})}},{key:"selectElementById",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0&&arguments[1],y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];this.graphModel.selectElementById(p,f),!f&&y&&this.graphModel.toFront(p)}},{key:"focusOn",value:function(p){var f=this.graphModel.transformModel,y=p.coordinate,b=p.id;if(!y){var x=this.getNodeModelById(b);x&&(y=x.getData());var k=this.getEdgeModelById(b);k&&(y=k.textPosition)}var I=y,H=I.x,J=I.y;f.focusOn(H,J,this.graphModel.width,this.graphModel.height)}},{key:"setTheme",value:function(p){this.graphModel.setTheme(p)}},{key:"resize",value:function(p,f){this.graphModel.resize(p,f),this.options.width=this.graphModel.width,this.options.height=this.graphModel.height}},{key:"setDefaultEdgeType",value:function(p){this.graphModel.setDefaultEdgeType(p)}},{key:"updateText",value:function(p,f){this.graphModel.updateText(p,f)}},{key:"deleteElement",value:function(p){var f,y,b,x=this.getModelById(p);return!!x&&(y=(b=(li(f={},io.NODE,this.deleteNode),li(f,io.EDGE,this.deleteEdge),f)[x.BaseType])===null||b===void 0?void 0:b.call(this,p))!==null&&y!==void 0&&y}},{key:"getModelById",value:function(p){return this.graphModel.getElement(p)}},{key:"getDataById",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getData()}},{key:"changeNodeType",value:function(p,f){this.graphModel.changeNodeType(p,f)}},{key:"changeEdgeType",value:function(p,f){this.graphModel.changeEdgeType(p,f)}},{key:"getNodeEdges",value:function(p){return this.graphModel.getNodeEdges(p)}},{key:"addNode",value:function(p){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Nn.NODE_ADD,y=arguments.length>2?arguments[2]:void 0;return this.graphModel.addNode(p,f,y)}},{key:"deleteNode",value:function(p){var f=this.graphModel.getNodeModelById(p);if(!f)return!1;var y=f.getData(),b=this.options.guards,x=!b||!b.beforeDelete||b.beforeDelete(y);return x&&this.graphModel.deleteNode(p),x}},{key:"cloneNode",value:function(p){var f=this.graphModel.getNodeModelById(p).getData(),y=this.options.guards;if(!y||!y.beforeClone||y.beforeClone(f))return this.graphModel.cloneNode(p)}},{key:"changeNodeId",value:function(p,f){return this.graphModel.changeNodeId(p,f)}},{key:"getNodeModelById",value:function(p){return this.graphModel.getNodeModelById(p)}},{key:"getNodeDataById",value:function(p){var f;return(f=this.graphModel.getNodeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"addEdge",value:function(p){return this.graphModel.addEdge(p)}},{key:"deleteEdge",value:function(p){var f=this.options.guards,y=this.graphModel.edgesMap[p];if(!y)return!1;var b=y.model.getData(),x=!f||!f.beforeDelete||f.beforeDelete(b);return x&&this.graphModel.deleteEdgeById(p),x}},{key:"deleteEdgeByNodeId",value:function(p){var f=p.sourceNodeId,y=p.targetNodeId;f&&y?this.graphModel.deleteEdgeBySourceAndTarget(f,y):f?this.graphModel.deleteEdgeBySource(f):y&&this.graphModel.deleteEdgeByTarget(y)}},{key:"changeEdgeId",value:function(p,f){return this.graphModel.changeEdgeId(p,f)}},{key:"getEdgeModelById",value:function(p){var f;return(f=this.graphModel.edgesMap[p])===null||f===void 0?void 0:f.model}},{key:"getEdgeModels",value:function(p){var f=this.graphModel.edges,y=p.sourceNodeId,b=p.targetNodeId;if(y&&b){var x=[];return f.forEach(function(H){H.sourceNodeId===y&&H.targetNodeId===b&&x.push(H)}),x}if(y){var k=[];return f.forEach(function(H){H.sourceNodeId===y&&k.push(H)}),k}if(b){var I=[];return f.forEach(function(H){H.targetNodeId===b&&I.push(H)}),I}return[]}},{key:"getEdgeDataById",value:function(p){var f;return(f=this.getEdgeModelById(p))===null||f===void 0?void 0:f.getData()}},{key:"getNodeIncomingEdge",value:function(p){return this.graphModel.getNodeIncomingEdge(p)}},{key:"getNodeOutgoingEdge",value:function(p){return this.graphModel.getNodeOutgoingEdge(p)}},{key:"getNodeIncomingNode",value:function(p){return this.graphModel.getNodeIncomingNode(p)}},{key:"getNodeOutgoingNode",value:function(p){return this.graphModel.getNodeOutgoingNode(p)}},{key:"editText",value:function(p){this.graphModel.editText(p)}},{key:"setProperties",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.setProperties(Zo(f))}},{key:"deleteProperty",value:function(p,f){var y;(y=this.graphModel.getElement(p))===null||y===void 0||y.deleteProperty(f)}},{key:"getProperties",value:function(p){var f;return(f=this.graphModel.getElement(p))===null||f===void 0?void 0:f.getProperties()}},{key:"toFront",value:function(p){this.graphModel.toFront(p)}},{key:"setElementZIndex",value:function(p,f){return this.graphModel.setElementZIndex(p,f)}},{key:"addElements",value:function(p){for(var f=this,y=p.nodes,b=p.edges,x={},k={nodes:[],edges:[]},I=0;I<y.length;I++){var H=y[I],J=H.id,de=this.addNode(H);if(!de)return;J&&(x[J]=de.id),k.nodes.push(de)}return b.forEach(function(Se){var ke=Se.sourceNodeId,Ke=Se.targetNodeId;x[ke]&&(ke=x[ke]),x[Ke]&&(Ke=x[Ke]);var Ze=f.graphModel.addEdge(dy(dy({},Se),{},{sourceNodeId:ke,targetNodeId:Ke}));k.edges.push(Ze)}),k}},{key:"getAreaElement",value:function(p,f){var y=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],b=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],x=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return this.graphModel.getAreaElement(p,f,y,b,x).map(function(k){return k.getData()})}},{key:"getSelectElements",value:function(){var p=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];return this.graphModel.getSelectElements(p)}},{key:"clearSelectElements",value:function(){this.graphModel.clearSelectElements()}},{key:"getGraphData",value:function(){var p=this.graphModel.modelToGraphData();if(this.adapterOut){for(var f=arguments.length,y=new Array(f),b=0;b<f;b++)y[b]=arguments[b];return this.adapterOut.apply(this,[p].concat(y))}return p}},{key:"getGraphRawData",value:function(){return this.graphModel.modelToGraphData()}},{key:"clearData",value:function(){this.graphModel.clearData()}},{key:"updateEditConfig",value:function(p){var f=this.graphModel,y=f.editConfigModel,b=f.transformModel;y.updateEditConfig(p),(p==null?void 0:p.stopMoveGraph)!==void 0&&b.updateTranslateLimits(p.stopMoveGraph),p!=null&&p.isSilentMode?this.keyboard.disable():this.keyboard.enable(!0)}},{key:"getEditConfig",value:function(){return this.graphModel.editConfigModel.getConfig()}},{key:"getPointByClient",value:function(p,f){return this.graphModel.getPointByClient({x:p,y:f})}},{key:"undo",value:function(){if(this.history.undoAble()){var p=Zo(this.history.undo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"redo",value:function(){if(this.history.redoAble()){var p=Zo(this.history.redo());this.clearSelectElements(),this.graphModel.graphDataToModel(p)}}},{key:"zoom",value:function(p,f){return this.graphModel.transformModel.zoom(p,f)}},{key:"resetZoom",value:function(){this.graphModel.transformModel.resetZoom()}},{key:"setZoomMiniSize",value:function(p){this.graphModel.transformModel.setZoomMiniSize(p)}},{key:"setZoomMaxSize",value:function(p){this.graphModel.transformModel.setZoomMaxSize(p)}},{key:"getTransform",value:function(){var p=this.graphModel.transformModel;return{SCALE_X:p.SCALE_X,SCALE_Y:p.SCALE_Y,TRANSLATE_X:p.TRANSLATE_X,TRANSLATE_Y:p.TRANSLATE_Y}}},{key:"translate",value:function(p,f){this.graphModel.transformModel.translate(p,f)}},{key:"resetTranslate",value:function(){var p=this.graphModel.transformModel,f=p.TRANSLATE_X,y=p.TRANSLATE_Y;this.translate(-f,-y)}},{key:"translateCenter",value:function(){this.graphModel.translateCenter()}},{key:"fitView",value:function(p,f){f===void 0&&(f=p),this.graphModel.fitView(p,f)}},{key:"openEdgeAnimation",value:function(p){this.graphModel.openEdgeAnimation(p)}},{key:"closeEdgeAnimation",value:function(p){this.graphModel.closeEdgeAnimation(p)}},{key:"on",value:function(p,f){this.graphModel.eventCenter.on(p,f)}},{key:"off",value:function(p,f){this.graphModel.eventCenter.off(p,f)}},{key:"once",value:function(p,f){this.graphModel.eventCenter.once(p,f)}},{key:"emit",value:function(p,f){this.graphModel.eventCenter.emit(p,f)}},{key:"initContainer",value:function(p){var f=document.createElement("div");return f.style.position="relative",f.style.width="100%",f.style.height="100%",p.innerHTML="",p.appendChild(f),f}},{key:"installPlugins",value:function(){var p,f=this,y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=(p=this.plugins)!==null&&p!==void 0?p:a.extensions;b.forEach(function(x){var k=null,I=null;x[g1]?(k=x.extension,I=x.props):k=x;var H=k.pluginName||k.name;y.indexOf(H)===-1&&f.installPlugin(k,I)})}},{key:"installPlugin",value:function(p,f){if(m1(p)==="object"){var y=p.install,b=p.render;return y&&y.call(p,this,a),b&&this.components.push(b.bind(p)),void(this.extension[p.pluginName]=p)}var x=p,k=new x({lf:this,LogicFlow:a,options:this.options.pluginsOptions,props:f});k.render&&this.components.push(k.render.bind(k)),this.extension[x.pluginName]=k}},{key:"updateAttributes",value:function(p,f){this.graphModel.updateAttributes(p,f)}},{key:"createFakerNode",value:function(p){var f=this.graphModel.modelMap.get(p.type);if(f){var y=new f(dy(dy({},p),{},{virtual:!0}),this.graphModel);return this.graphModel.setFakerNode(y),y}}},{key:"removeFakerNode",value:function(){this.graphModel.removeFakerNode()}},{key:"setNodeSnapLine",value:function(p){this.snaplineModel&&this.snaplineModel.setNodeSnapLine(p)}},{key:"removeNodeSnapLine",value:function(){this.snaplineModel&&this.snaplineModel.clearSnapline()}},{key:"setView",value:function(p,f){this.viewMap.set(p,f)}},{key:"renderRawData",value:function(p){this.graphModel.graphDataToModel(Zo(p)),this.options.history!==!1&&this.history.watch(this.graphModel),Object(Le.j)(Object(Le.g)(oj,{getView:this.getView,tool:this.tool,options:this.options,dnd:this.dnd,snaplineModel:this.snaplineModel,graphModel:this.graphModel}),this.container),this.emit(Nn.GRAPH_RENDERED,this.graphModel.modelToGraphData())}},{key:"render",value:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.adapterIn&&(p=this.adapterIn(p)),this.renderRawData(p)}}],u=[{key:"use",value:function(p,f){var y,b,x=p.pluginName;x||(x=p.name);var k=(y=this.extensions.get(x))===null||y===void 0?void 0:y.extension;k&&k.destroy&&k.destroy(),this.extensions.set(x,(li(b={},g1,g1),li(b,"extension",p),li(b,"props",f),b))}}],l&&wS(i.prototype,l),u&&wS(i,u),a}();function ps(a){return xn(a)}li(_1,"extensions",new Map),o.default=_1}])})})(sw,sw.exports);var cn=sw.exports;const L9=sL(cn);var F9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),$9=(globalThis==null?void 0:globalThis._ids)||new F9;function Fv(){return $9.next()}var TP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){TP(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Fv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedTargetRules=function(){var n=e.prototype.getConnectedTargetRules.call(this),o={message:"起始节点不能作为边的终点",validate:function(){return!1}};return n.push(o),n},t.extendKey="StartEventModel",t})(cn.CircleNodeModel);(function(e){TP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="StartEventNode",t})(cn.CircleNode);var MP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Rg=globalThis&&globalThis.__assign||function(){return Rg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Rg.apply(this,arguments)};(function(e){MP(t,e);function t(n,o){var r=this;return n.id||(n.id="Event_"+Fv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r}return t.prototype.setAttributes=function(){this.r=18},t.prototype.getConnectedSourceRules=function(){var n=e.prototype.getConnectedSourceRules.call(this),o={message:"结束节点不能作为边的起点",validate:function(){return!1}};return n.push(o),n},t.extendKey="EndEventModel",t})(cn.CircleNodeModel);(function(e){MP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getAnchorStyle=function(){return{visibility:"hidden"}},t.prototype.getShape=function(){var n=this.props.model,o=n.getNodeStyle(),r=n.x,s=n.y,c=n.r,v=e.prototype.getShape.call(this);return cn.h("g",{},v,cn.h("circle",Rg(Rg({},o),{cx:r,cy:s,r:c-5})))},t.extendKey="EndEventView",t})(cn.CircleNode);var PP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),xy=globalThis&&globalThis.__assign||function(){return xy=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xy.apply(this,arguments)};(function(e){PP(t,e);function t(n,o){var r=this;return n.id||(n.id="Gateway_"+Fv()),n.text||(n.text=""),n.text&&typeof n.text=="string"&&(n.text={value:n.text,x:n.x,y:n.y+40}),r=e.call(this,n,o)||this,r.points=[[25,0],[50,25],[25,50],[0,25]],r}return t.extendKey="ExclusiveGatewayModel",t})(cn.PolygonNodeModel);(function(e){PP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.points,h=n.getNodeStyle();return cn.h("g",{transform:"matrix(1 0 0 1 "+(o-s/2)+" "+(r-c/2)+")"},cn.h("polygon",xy(xy({},h),{x:o,y:r,points:v})),cn.h("path",xy({d:"m 16,15 7.42857142857143,9.714285714285715 -7.42857142857143,9.714285714285715 3.428571428571429,0 5.714285714285715,-7.464228571428572 5.714285714285715,7.464228571428572 3.428571428571429,0 -7.42857142857143,-9.714285714285715 7.42857142857143,-9.714285714285715 -3.428571428571429,0 -5.714285714285715,7.464228571428572 -5.714285714285715,-7.464228571428572 -3.428571428571429,0 z"},h)))},t.extendKey="ExclusiveGatewayNode",t})(cn.PolygonNode);var kP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),jg=globalThis&&globalThis.__assign||function(){return jg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jg.apply(this,arguments)};(function(e){kP(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Fv()),r=e.call(this,n,o)||this,r}return t.extendKey="UserTaskModel",t})(cn.RectNodeModel);(function(e){kP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:25,height:25,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M655.807326 287.35973m-223.989415 0a218.879 218.879 0 1 0 447.978829 0 218.879 218.879 0 1 0-447.978829 0ZM1039.955839 895.482975c-0.490184-212.177424-172.287821-384.030443-384.148513-384.030443-211.862739 0-383.660376 171.85302-384.15056 384.030443L1039.955839 895.482975z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",jg(jg({},h),{x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c})),this.getLabelShape()])},t.extendKey="UserTaskNode",t})(cn.RectNode);var NP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),cw=globalThis&&globalThis.__assign||function(){return cw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)};(function(e){NP(t,e);function t(n,o){var r=this;return n.id||(n.id="Activity_"+Fv()),r=e.call(this,n,o)||this,r}return t.extendKey="ServiceTaskModel",t})(cn.RectNodeModel);(function(e){NP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getLabelShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getNodeStyle();return cn.h("svg",{x:o-s/2+5,y:r-c/2+5,width:30,height:30,viewBox:"0 0 1274 1024"},cn.h("path",{fill:v.stroke,d:"M882.527918 434.149934c-2.234901-5.303796-7.311523-8.853645-13.059434-9.138124l-61.390185-3.009544c-6.635117-20.973684-15.521508-41.175795-26.513864-60.282968l42.051745-47.743374c4.308119-4.889357 4.955872-12.004405 1.602498-17.59268-46.384423-77.30362-103.969956-101.422947-106.400309-102.410438-5.332449-2.170432-11.432377-1.090844-15.693424 2.77009L654.674467 240.664222c-17.004279-8.654101-35.092239-15.756869-53.995775-21.210068l-3.26537-66.490344c-0.280386-5.747911-3.833305-10.824533-9.134031-13.059434-1.683339-0.709151-30.193673-12.391215-76.866668-12.051477-46.672996-0.339738-75.18333 11.342326-76.866668 12.051477-5.300726 2.234901-8.853645 7.311523-9.134031 13.059434l-3.26537 66.490344c-18.903535 5.453199-36.991496 12.555967-53.995775 21.210068l-48.450479-43.922349c-4.261047-3.860934-10.360975-4.940522-15.693424-2.77009-2.430352 0.98749-60.015885 25.106818-106.400309 102.410438-3.353374 5.588275-2.705622 12.703323 1.602498 17.59268l42.051745 47.743374c-10.992355 19.107173-19.878746 39.309284-26.513864 60.282968l-61.390185 3.009544c-5.747911 0.284479-10.824533 3.834328-13.059434 9.138124-1.01512 2.415003-24.687262 60.190871-2.822278 147.651828 1.583055 6.324032 7.072069 10.893094 13.57518 11.308557 5.892197 0.37146 11.751648 0.523933 17.419741 0.667196 14.498202 0.372483 28.193109 0.723477 40.908712 4.63353 4.212952 1.294482 6.435573 8.270361 9.349949 18.763342 1.287319 4.640694 2.617617 9.43693 4.484128 14.010085 1.794879 4.393054 3.75758 8.570189 5.66093 12.607132 1.302669 2.765997 2.529613 5.380544 3.689019 8.018627 2.986007 6.803963 2.682086 9.773598 2.578732 10.349719-3.061732 3.672646-6.391571 7.238868-9.91379 11.015891-1.810229 1.943258-3.680832 3.949962-5.523807 5.980201l-22.560832 24.8909c-3.865028 4.261047-4.940522 10.365068-2.774183 15.693424 0.991584 2.426259 25.102724 60.011792 102.414531 106.400309 5.588275 3.353374 12.703323 2.701528 17.591657-1.603521l23.476691-20.682042c2.346441-2.061962 4.64888-4.336772 6.875594-6.534833 9.05319-8.93858 14.018272-12.95608 17.73185-11.576663 3.305279 1.222851 6.907317 3.166109 10.720156 5.228071 3.325745 1.794879 6.764054 3.650133 10.465352 5.288446 6.016017 2.662643 12.120039 4.688789 18.019399 6.65149 6.827499 2.266623 13.279445 4.409426 18.819624 7.275707 1.518586 0.782829 1.926886 0.994654 2.358721 7.830339 0.726547 11.496845 1.25048 23.276123 1.753947 34.672684 0.264013 5.900384 0.528026 11.803837 0.815575 17.700127 0.284479 5.743818 3.833305 10.82044 9.138124 13.05534 1.654686 0.698918 29.371958 12.063757 74.869175 12.063757 0.328481 0 3.65832 0 3.986801 0 45.497217 0 73.214489-11.364839 74.869175-12.063757 5.304819-2.234901 8.853645-7.311523 9.138124-13.05534 0.287549-5.89629 0.551562-11.799744 0.815575-17.700127 0.503467-11.396561 1.027399-23.175839 1.753947-34.672684 0.431835-6.835685 0.840134-7.04751 2.358721-7.830339 5.54018-2.866281 11.992125-5.009084 18.819624-7.275707 5.89936-1.962701 12.003382-3.988848 18.019399-6.65149 3.701299-1.638313 7.139607-3.493567 10.465352-5.288446 3.812839-2.061962 7.414877-4.00522 10.720156-5.228071 3.713578-1.379417 8.67866 2.638083 17.73185 11.576663 2.226714 2.198062 4.529153 4.472871 6.875594 6.534833l23.476691 20.682042c4.888334 4.305049 12.003382 4.956895 17.591657 1.603521 77.311807-46.388517 101.422947-103.97405 102.414531-106.400309 2.166339-5.328355 1.090844-11.432377-2.774183-15.693424l-22.560832-24.8909c-1.842974-2.030239-3.713578-4.036943-5.523807-5.980201-3.52222-3.777023-6.852058-7.343245-9.91379-11.015891-0.103354-0.576121-0.407276-3.545756 2.578732-10.349719 1.159406-2.638083 2.38635-5.252631 3.689019-8.018627 1.90335-4.036943 3.866051-8.214079 5.66093-12.607132 1.866511-4.573155 3.196809-9.369392 4.484128-14.010085 2.914376-10.492982 5.136997-17.46886 9.349949-18.763342 12.715603-3.910053 26.41051-4.261047 40.908712-4.63353 5.668093-0.143263 11.527544-0.295735 17.419741-0.667196 6.503111-0.415462 11.992125-4.984524 13.57518-11.308557C907.21518 494.340805 883.543038 436.564937 882.527918 434.149934zM643.49894 643.761929c-35.280528 35.280528-82.191954 54.711066-132.086317 54.711066s-96.806813-19.430538-132.086317-54.711066c-35.280528-35.279504-54.711066-82.191954-54.711066-132.086317 0-49.894364 19.430538-96.80272 54.711066-132.082224 35.283598-35.284621 82.191954-54.711066 132.086317-54.711066s96.80579 19.426445 132.086317 54.711066c35.279504 35.279504 54.711066 82.187861 54.711066 132.082224C698.210006 561.569976 678.782537 608.482425 643.49894 643.761929z"}))},t.prototype.getShape=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.radius,h=n.getNodeStyle();return cn.h("g",{},[cn.h("rect",cw({x:o-s/2,y:r-c/2,rx:v,ry:v,width:s,height:c},h)),this.getLabelShape()])},t.extendKey="ServiceTaskNode",t})(cn.RectNode);var RP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){RP(t,e);function t(n,o){var r=this;return n.id||(n.id="Flow_"+Fv()),r=e.call(this,n,o)||this,r}return t.extendKey="SequenceFlowModel",t})(cn.PolylineEdgeModel);(function(e){RP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.extendKey="SequenceFlowEdge",t})(cn.PolylineEdge);var iA={width:40,height:40},aA={width:40,height:40},lA={width:40,height:40},uA={width:100,height:80},sA={width:100,height:80},B9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),U9=(globalThis==null?void 0:globalThis._ids)||new B9;function cA(){return U9.next()}function jP(e){return Object.prototype.toString.call(e)}function G9(e){return"  ".repeat(e)}function Cg(e){var t=e;return jP(e)==="[object Object]"?(t={},Object.keys(e).forEach(function(n){var o=n;n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Cg(e[n])})):Array.isArray(e)&&(t=[],e.forEach(function(n,o){t[o]=Cg(n)})),t}function V9(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Cg(e)).replace(/"/g,"'")}return t}var Yh=`	
`;function mg(e,t,n){var o=G9(n),r="";if(t==="#text")return Yh+o+e;if(t==="#cdata-section")return Yh+o+"<![CDATA["+e+"]]>";if(t==="#comment")return Yh+o+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+V9(e)+'"';if(Array.isArray(e))e.forEach(function(h){r+=mg(h,t,n+1)});else if(jP(e)==="[object Object]"){var s=Object.keys(e),c="",v="";r+=(n===0?"":Yh+o)+"<"+t,s.forEach(function(h){h.charAt(0)==="-"?c+=mg(e[h],h,n+1):v+=mg(e[h],h,n+1)}),r+=c+(v!==""?">"+v+(Yh+o)+"</"+t+">":" />")}else r+=Yh+o+("<"+t+">"+e.toString()+"</"+t+">");return r}function W9(e){var t="";for(var n in e)t+=mg(e[n],n,0);return t}var ul=function(){};ul.ObjTree=function(){return this};ul.ObjTree.VERSION="0.23";ul.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;ul.ObjTree.prototype.attr_prefix="-";ul.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t)return this.parseDOM(t)};ul.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(_){var w;_&&_.responseXML&&_.responseXML.documentElement&&(w=s.parseDOM(_.responseXML.documentElement)),c(w,_),v&&v(_)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};ul.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!=11){var o={};o[e.nodeName]=n,n=o}return n}};ul.ObjTree.prototype.parseElement=function(e){if(e.nodeType!=7){if(e.nodeType==3||e.nodeType==4||e.nodeType==8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h==3||h==4||h==8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};ul.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n==1&&(e[t]=[]),e[t][e[t].length]=o):n==1?e[t]=o:n==2?e[t]=[e[t],o]:e[t][e[t].length]=o};ul.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};ul.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!=this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor==Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};ul.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor==Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};ul.ObjTree.prototype.scalar_to_xml=function(e,t){return e=="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};ul.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var z9=function(e){return new ul.ObjTree().parseXML(e)},H9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),fw=globalThis&&globalThis.__assign||function(){return fw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fw.apply(this,arguments)},O_=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},fc;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow"})(fc||(fc={}));var CP=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef"],fA=["properties","startPoint","endPoint","pointsList"];function dA(e){var t=e?fA.concat(e):fA;return function(n){function o(r){var s={};return typeof r=="string"?r:Array.isArray(r)?r.map(function(c){return o(c)}):(Object.entries(r).forEach(function(c){var v=O_(c,2),h=v[0],g=v[1];typeof g!="object"?h.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(h)?s[h]=g:s["-"+h]=g:t.includes(h)?s["-"+h]=o(g):s[h]=o(g)}),s)}return o(n)}}function Dg(e){var t={};return Object.entries(e).forEach(function(n){var o=O_(n,2),r=o[0],s=o[1];r.indexOf("-")===0?t[r.substring(1)]=Cg(s):typeof s=="string"?t[r]=s:Object.prototype.toString.call(s)==="[object Object]"?t[r]=Dg(s):Array.isArray(s)?t[r]=s.map(function(c){return Dg(c)}):t[r]=s}),t}function X9(e,t,n){var o=new Map;t.nodes.forEach(function(s){var c,v={"-id":s.id};if(!((c=s.text)===null||c===void 0)&&c.value&&(v["-name"]=s.text.value),s.properties){var h=dA(n)(s.properties);Object.assign(v,h)}o.set(s.id,v),e[s.type]?Array.isArray(e[s.type])?e[s.type].push(v):e[s.type]=[e[s.type],v]:e[s.type]=v});var r=t.edges.map(function(s){var c,v,h=o.get(s.targetNodeId);h["bpmn:incoming"]?Array.isArray(h["bpmn:incoming"])?h["bpmn:incoming"].push(s.id):h["bpmn:incoming"]=[h["bpmn:incoming"],s.id]:h["bpmn:incoming"]=s.id;var g={"-id":s.id,"-sourceRef":s.sourceNodeId,"-targetRef":s.targetNodeId};if(!((c=s.text)===null||c===void 0)&&c.value&&(g["-name"]=(v=s.text)===null||v===void 0?void 0:v.value),s.properties){var _=dA(n)(s.properties);Object.assign(g,_)}return g});t.edges.forEach(function(s){var c=o.get(s.sourceNodeId);c["bpmn:outgoing"]?Array.isArray(c["bpmn:outgoing"])?c["bpmn:outgoing"].push(s.id):c["bpmn:outgoing"]=[c["bpmn:outgoing"],s.id]:c["bpmn:outgoing"]=s.id}),e[fc.FLOW]=r}function Y9(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Fd.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}function q9(e){var t=[],n=[],o=e["bpmn:definitions"];if(o){var r=o["bpmn:process"];Object.keys(r).forEach(function(s){if(s.indexOf("bpmn:")===0){var c=r[s];if(s===fc.FLOW){var v=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];n=Z9(c,v)}else{var h=o["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];t=t.concat(K9(c,h,s))}}})}return{nodes:t,edges:n}}function K9(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=pA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=pA(r,n,e);o.push(s)}return o}function pA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-name"],c=Fd.shapeConfigMap.get(t);c&&(o+=c.width/2,r+=c.height/2);var v;Object.entries(n).forEach(function(w){var O=O_(w,2),S=O[0],P=O[1];CP.indexOf(S)===-1&&(v||(v={}),v[S]=P)}),v&&(v=Dg(v));var h;if(s&&(h={x:o,y:r,value:s},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var g=e["bpmndi:BPMNLabel"]["dc:Bounds"];h.x=Number(g["-x"])+Number(g["-width"])/2,h.y=Number(g["-y"])+Number(g["-height"])/2}var _={id:e["-bpmnElement"],type:t,x:o,y:r,properties:v};return h&&(_.text=h),_}function Z9(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(hA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(hA(o,e))}return n}function hA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(h){s<h.length&&(s=h.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c;Object.entries(t).forEach(function(h){var g=O_(h,2),_=g[0],w=g[1];CP.indexOf(_)===-1&&(c||(c={}),c[_]=w)}),c&&(c=Dg(c));var v={id:t["-id"],type:fc.FLOW,pointsList:e["di:waypoint"].map(function(h){return{x:Number(h["-x"]),y:Number(h["-y"])}}),sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(v.text=n),v}var Fd=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c=fw({},n.processAttributes);X9(c,r,s);var v={"-id":"BPMNPlane_1","-bpmnElement":c["-id"]};Y9(v,r);var h=n.definitionAttributes;h["bpmn:process"]=c,h["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":v};var g={"bpmn:definitions":h};return g},this.adapterIn=function(r){if(r)return q9(r)},o.adapterIn=function(r){return n.adapterIn(r)},o.adapterOut=function(r,s){return n.adapterOut(r,s)},this.processAttributes={"-isExecutable":"true","-id":"Process_"+cA()},this.definitionAttributes={"-id":"Definitions_"+cA(),"-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.0"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Fd.shapeConfigMap.set(fc.START,{width:iA.width,height:iA.height});Fd.shapeConfigMap.set(fc.END,{width:aA.width,height:aA.height});Fd.shapeConfigMap.set(fc.GATEWAY,{width:lA.width,height:lA.height});Fd.shapeConfigMap.set(fc.SYSTEM,{width:uA.width,height:uA.height});Fd.shapeConfigMap.set(fc.USER,{width:sA.width,height:sA.height});(function(e){H9(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(s){var c=z9(s);return o.adapterIn(c)},o.adapterXmlOut=function(s,c){var v=o.adapterOut(s,c);return W9(v)};var r=n.lf;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o}return t.pluginName="bpmnXmlAdapter",t})(Fd);var J9=function(){function e(){globalThis._ids=this,this._ids=new Set}return e.prototype.generateId=function(){var t="xxxxxxx".replace(/[x]/g,function(n){var o=Math.random()*16|0,r=n==="x"?o:o&3|8;return r.toString(16)});return t},e.prototype.next=function(){for(var t=this.generateId();this._ids.has(t);)t=this.generateId();return this._ids.add(t),t},e}(),Q9=(globalThis==null?void 0:globalThis._ids)||new J9;function eV(){return Q9.next()}globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var vA=globalThis&&globalThis.__assign||function(){return vA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vA.apply(this,arguments)},tV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var yA=globalThis&&globalThis.__assign||function(){return yA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yA.apply(this,arguments)},nV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var mA=globalThis&&globalThis.__assign||function(){return mA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mA.apply(this,arguments)},rV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var gA=globalThis&&globalThis.__assign||function(){return gA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gA.apply(this,arguments)},oV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var _A=globalThis&&globalThis.__assign||function(){return _A=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_A.apply(this,arguments)},iV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;cn.h("circle",{cx:18,cy:18,r:11,style:"stroke-linecap: round;stroke-linejoin: round;stroke: rgb(34, 36, 42);stroke-width: 2px;fill: white"}),cn.h("path",{d:"M 18,18 l 2.25,-7.5 m -2.25,7.5 l 5.25,1.5",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(0,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(30,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(60,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(90,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(120,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(150,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(180,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(210,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(240,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(270,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(300,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"}),cn.h("path",{d:"M 18,18 m 0,7.5 l -0,2.25",transform:"rotate(330,18,18)",style:"fill: none; stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 1px;"});cn.h("circle",{cx:18,cy:18,r:10,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 4px; fill: rgb(34, 36, 42);"});cn.h("circle",{cx:25,cy:25,r:13,style:"stroke-linecap: round; stroke-linejoin: round; stroke: rgb(34, 36, 42); stroke-width: 2.5px; fill: white;"});globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var bA=globalThis&&globalThis.__assign||function(){return bA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bA.apply(this,arguments)};globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var wA=globalThis&&globalThis.__assign||function(){return wA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wA.apply(this,arguments)},aV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var vE,Oi,DP,Lp,EA,IP,LP,FP,yE,dw,pw,hw={},$P=[],lV=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,x_=Array.isArray;function Ef(e,t){for(var n in t)e[n]=t[n];return e}function mE(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Sy(e,t,n){var o,r,s,c={};for(s in t)s=="key"?o=t[s]:s=="ref"?r=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?vE.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return gg(e,c,o,r,null)}function gg(e,t,n,o,r){var s={type:e,props:t,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:r??++DP,__i:-1,__u:0};return r==null&&Oi.vnode!=null&&Oi.vnode(s),s}function gE(e){return e.children}function dv(e,t){this.props=e,this.context=t}function xv(e,t){if(t==null)return e.__?xv(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?xv(e):null}function BP(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return BP(e)}}function OA(e){(!e.__d&&(e.__d=!0)&&Lp.push(e)&&!Ig.__r++||EA!=Oi.debounceRendering)&&((EA=Oi.debounceRendering)||IP)(Ig)}function Ig(){for(var e,t,n,o,r,s,c,v=1;Lp.length;)Lp.length>v&&Lp.sort(LP),e=Lp.shift(),v=Lp.length,e.__d&&(n=void 0,r=(o=(t=e).__v).__e,s=[],c=[],t.__P&&((n=Ef({},o)).__v=o.__v+1,Oi.vnode&&Oi.vnode(n),VP(t.__P,n,o,t.__n,t.__P.namespaceURI,32&o.__u?[r]:null,s,r??xv(o),!!(32&o.__u),c),n.__v=o.__v,n.__.__k[n.__i]=n,cV(s,n,c),n.__e!=r&&BP(n)));Ig.__r=0}function UP(e,t,n,o,r,s,c,v,h,g,_){var w,O,S,P,A,R,D,N=o&&o.__k||$P,$=t.length;for(h=uV(n,t,N,h,$),w=0;w<$;w++)(S=n.__k[w])!=null&&(O=S.__i==-1?hw:N[S.__i]||hw,S.__i=w,R=VP(e,S,O,r,s,c,v,h,g,_),P=S.__e,S.ref&&O.ref!=S.ref&&(O.ref&&_E(O.ref,null,S),_.push(S.ref,S.__c||P,S)),A==null&&P!=null&&(A=P),(D=!!(4&S.__u))||O.__k===S.__k?h=GP(S,h,e,D):typeof S.type=="function"&&R!==void 0?h=R:P&&(h=P.nextSibling),S.__u&=-7);return n.__e=A,h}function uV(e,t,n,o,r){var s,c,v,h,g,_=n.length,w=_,O=0;for(e.__k=new Array(r),s=0;s<r;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(h=s+O,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?gg(null,c,null,null,null):x_(c)?gg(gE,{children:c},null,null,null):c.constructor==null&&c.__b>0?gg(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,v=null,(g=c.__i=sV(c,n,h,w))!=-1&&(w--,(v=n[g])&&(v.__u|=2)),v==null||v.__v==null?(g==-1&&(r>_?O--:r<_&&O++),typeof c.type!="function"&&(c.__u|=4)):g!=h&&(g==h-1?O--:g==h+1?O++:(g>h?O--:O++,c.__u|=4))):e.__k[s]=null;if(w)for(s=0;s<_;s++)(v=n[s])!=null&&!(2&v.__u)&&(v.__e==o&&(o=xv(v)),zP(v,v));return o}function GP(e,t,n,o){var r,s;if(typeof e.type=="function"){for(r=e.__k,s=0;r&&s<r.length;s++)r[s]&&(r[s].__=e,t=GP(r[s],t,n,o));return t}e.__e!=t&&(o&&(t&&e.type&&!t.parentNode&&(t=xv(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function sV(e,t,n,o){var r,s,c,v=e.key,h=e.type,g=t[n],_=g!=null&&(2&g.__u)==0;if(g===null&&e.key==null||_&&v==g.key&&h==g.type)return n;if(o>(_?1:0)){for(r=n-1,s=n+1;r>=0||s<t.length;)if((g=t[c=r>=0?r--:s++])!=null&&!(2&g.__u)&&v==g.key&&h==g.type)return c}return-1}function xA(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||lV.test(t)?n:n+"px"}function ag(e,t,n,o,r){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof o=="string"&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||xA(e.style,t,"");if(n)for(t in n)o&&n[t]==o[t]||xA(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(FP,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?o?n.u=o.u:(n.u=yE,e.addEventListener(t,s?pw:dw,s)):e.removeEventListener(t,s?pw:dw,s);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function SA(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=yE++;else if(t.t<n.u)return;return n(Oi.event?Oi.event(t):t)}}}function VP(e,t,n,o,r,s,c,v,h,g){var _,w,O,S,P,A,R,D,N,$,Y,K,X,te,W,C,G,q=t.type;if(t.constructor!=null)return null;128&n.__u&&(h=!!(32&n.__u),s=[v=t.__e=n.__e]),(_=Oi.__b)&&_(t);e:if(typeof q=="function")try{if(D=t.props,N="prototype"in q&&q.prototype.render,$=(_=q.contextType)&&o[_.__c],Y=_?$?$.props.value:_.__:o,n.__c?R=(w=t.__c=n.__c).__=w.__E:(N?t.__c=w=new q(D,Y):(t.__c=w=new dv(D,Y),w.constructor=q,w.render=dV),$&&$.sub(w),w.props=D,w.state||(w.state={}),w.context=Y,w.__n=o,O=w.__d=!0,w.__h=[],w._sb=[]),N&&w.__s==null&&(w.__s=w.state),N&&q.getDerivedStateFromProps!=null&&(w.__s==w.state&&(w.__s=Ef({},w.__s)),Ef(w.__s,q.getDerivedStateFromProps(D,w.__s))),S=w.props,P=w.state,w.__v=t,O)N&&q.getDerivedStateFromProps==null&&w.componentWillMount!=null&&w.componentWillMount(),N&&w.componentDidMount!=null&&w.__h.push(w.componentDidMount);else{if(N&&q.getDerivedStateFromProps==null&&D!==S&&w.componentWillReceiveProps!=null&&w.componentWillReceiveProps(D,Y),!w.__e&&w.shouldComponentUpdate!=null&&w.shouldComponentUpdate(D,w.__s,Y)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(w.props=D,w.state=w.__s,w.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(z){z&&(z.__=t)}),K=0;K<w._sb.length;K++)w.__h.push(w._sb[K]);w._sb=[],w.__h.length&&c.push(w);break e}w.componentWillUpdate!=null&&w.componentWillUpdate(D,w.__s,Y),N&&w.componentDidUpdate!=null&&w.__h.push(function(){w.componentDidUpdate(S,P,A)})}if(w.context=Y,w.props=D,w.__P=e,w.__e=!1,X=Oi.__r,te=0,N){for(w.state=w.__s,w.__d=!1,X&&X(t),_=w.render(w.props,w.state,w.context),W=0;W<w._sb.length;W++)w.__h.push(w._sb[W]);w._sb=[]}else do w.__d=!1,X&&X(t),_=w.render(w.props,w.state,w.context),w.state=w.__s;while(w.__d&&++te<25);w.state=w.__s,w.getChildContext!=null&&(o=Ef(Ef({},o),w.getChildContext())),N&&!O&&w.getSnapshotBeforeUpdate!=null&&(A=w.getSnapshotBeforeUpdate(S,P)),C=_,_!=null&&_.type===gE&&_.key==null&&(C=WP(_.props.children)),v=UP(e,x_(C)?C:[C],t,n,o,r,s,c,v,h,g),w.base=t.__e,t.__u&=-161,w.__h.length&&c.push(w),R&&(w.__E=w.__=null)}catch(z){if(t.__v=null,h||s!=null)if(z.then){for(t.__u|=h?160:128;v&&v.nodeType==8&&v.nextSibling;)v=v.nextSibling;s[s.indexOf(v)]=null,t.__e=v}else{for(G=s.length;G--;)mE(s[G]);vw(t)}else t.__e=n.__e,t.__k=n.__k,z.then||vw(t);Oi.__e(z,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):v=t.__e=fV(n.__e,t,n,o,r,s,c,h,g);return(_=Oi.diffed)&&_(t),128&t.__u?void 0:v}function vw(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(vw)}function cV(e,t,n){for(var o=0;o<n.length;o++)_E(n[o],n[++o],n[++o]);Oi.__c&&Oi.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(s){s.call(r)})}catch(s){Oi.__e(s,r.__v)}})}function WP(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:x_(e)?e.map(WP):Ef({},e)}function fV(e,t,n,o,r,s,c,v,h){var g,_,w,O,S,P,A,R=n.props,D=t.props,N=t.type;if(N=="svg"?r="http://www.w3.org/2000/svg":N=="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),s!=null){for(g=0;g<s.length;g++)if((S=s[g])&&"setAttribute"in S==!!N&&(N?S.localName==N:S.nodeType==3)){e=S,s[g]=null;break}}if(e==null){if(N==null)return document.createTextNode(D);e=document.createElementNS(r,N,D.is&&D),v&&(Oi.__m&&Oi.__m(t,s),v=!1),s=null}if(N==null)R===D||v&&e.data==D||(e.data=D);else{if(s=s&&vE.call(e.childNodes),R=n.props||hw,!v&&s!=null)for(R={},g=0;g<e.attributes.length;g++)R[(S=e.attributes[g]).name]=S.value;for(g in R)if(S=R[g],g!="children"){if(g=="dangerouslySetInnerHTML")w=S;else if(!(g in D)){if(g=="value"&&"defaultValue"in D||g=="checked"&&"defaultChecked"in D)continue;ag(e,g,null,S,r)}}for(g in D)S=D[g],g=="children"?O=S:g=="dangerouslySetInnerHTML"?_=S:g=="value"?P=S:g=="checked"?A=S:v&&typeof S!="function"||R[g]===S||ag(e,g,S,R[g],r);if(_)v||w&&(_.__html==w.__html||_.__html==e.innerHTML)||(e.innerHTML=_.__html),t.__k=[];else if(w&&(e.innerHTML=""),UP(t.type=="template"?e.content:e,x_(O)?O:[O],t,n,o,N=="foreignObject"?"http://www.w3.org/1999/xhtml":r,s,c,s?s[0]:n.__k&&xv(n,0),v,h),s!=null)for(g=s.length;g--;)mE(s[g]);v||(g="value",N=="progress"&&P==null?e.removeAttribute("value"):P!=null&&(P!==e[g]||N=="progress"&&!P||N=="option"&&P!=R[g])&&ag(e,g,P,R[g],r),g="checked",A!=null&&A!=e[g]&&ag(e,g,A,R[g],r))}return e}function _E(e,t,n){try{if(typeof e=="function"){var o=typeof e.__u=="function";o&&e.__u(),o&&t==null||(e.__u=e(t))}else e.current=t}catch(r){Oi.__e(r,n)}}function zP(e,t,n){var o,r;if(Oi.unmount&&Oi.unmount(e),(o=e.ref)&&(o.current&&o.current!=e.__e||_E(o,null,t)),(o=e.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){Oi.__e(s,t)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&zP(o[r],t,n||typeof e.type!="function");n||mE(e.__e),e.__c=e.__=e.__e=void 0}function dV(e,t,n){return this.constructor(e,n)}vE=$P.slice,Oi={__e:function(e,t,n,o){for(var r,s,c;t=t.__;)if((r=t.__c)&&!r.__)try{if((s=r.constructor)&&s.getDerivedStateFromError!=null&&(r.setState(s.getDerivedStateFromError(e)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,o||{}),c=r.__d),c)return r.__E=r}catch(v){e=v}throw e}},DP=0,dv.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ef({},this.state),typeof e=="function"&&(e=e(Ef({},n),this.props)),e&&Ef(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),OA(this))},dv.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),OA(this))},dv.prototype.render=gE,Lp=[],IP=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,LP=function(e,t){return e.__v.__b-t.__v.__b},Ig.__r=0,FP=/(PointerCapture)$|Capture$/i,yE=0,dw=SA(!1),pw=SA(!0);var Ay=globalThis&&globalThis.__assign||function(){return Ay=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ay.apply(this,arguments)};function bE(e){var t=e.x,n=e.y,o=e.width,r=e.height,s=e.radius,c=e.className,v=t-o/2,h=n-r/2,g=Ay(Ay({width:10,height:10,cx:0,cy:0,rx:s||0,ry:s||0,fill:"transparent",fillOpacity:1,strokeWidth:"1px",stroke:"#000",strokeOpacity:1,className:"lf-basic-shape "+c},e),{x:v,y:h});return cn.h("rect",Ay({},g))}bE.defaultProps={radius:0,stroke:"",strokeDasharray:"",className:""};var lv;(function(e){e.NODE="node",e.CIRCLE_NODE="circle-node",e.POLYGON_NODE="polygon-node",e.RECT_NODE="rect-node",e.HTML_NODE="html-node",e.TEXT_NODE="text-node",e.ELLIPSE_NODE="ellipse-node",e.DIAMOND_NODE="diamond-node",e.EDGE="edge",e.LINE_EDGE="line-edge",e.POLYLINE_EDGE="polyline-edge",e.BEZIER_EDGE="bezier-edge",e.GRAPH="graph"})(lv||(lv={}));var pV=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fp=globalThis&&globalThis.__assign||function(){return Fp=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fp.apply(this,arguments)},hV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},vV=cn.LogicFlowUtil.StepDrag,yV=function(e){pV(t,e);function t(n){var o=e.call(this)||this;return o.updatePosition=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.x,g=v.y;o.nodeModel.x=h+s/2,o.nodeModel.y=g+c/2,o.nodeModel.moveText(s/2,c/2)},o.getResize=function(r){var s=r.index,c=r.deltaX,v=r.deltaY,h=r.width,g=r.height,_=r.PCTResizeInfo,w=r.pct,O=w===void 0?1:w,S=r.freezeWidth,P=S===void 0?!1:S,A=r.freezeHeight,R=A===void 0?!1:A,D={width:h,height:g,deltaX:c,deltaY:v};if(_){var N=4,$=0,Y=0;switch(s){case 0:Y=(c*-1-v)/N;break;case 1:Y=(c-v)/N;break;case 2:Y=(c+v)/N;break;case 3:Y=(c*-1+v)/N;break}Y!==0&&($=Math.round(Y/_.ResizeBasis.basisHeight*1e5)/1e3),_.ResizePCT.widthPCT=Math.max(Math.min(_.ResizePCT.widthPCT+$,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit),_.ResizePCT.hightPCT=Math.max(Math.min(_.ResizePCT.hightPCT+$,_.ScaleLimit.maxScaleLimit),_.ScaleLimit.minScaleLimit);var K=Math.round(_.ResizePCT.widthPCT*_.ResizeBasis.basisWidth/100),X=Math.round(_.ResizePCT.hightPCT*_.ResizeBasis.basisHeight/100);switch(s){case 0:c=h-K,v=g-X;break;case 1:c=K-h,v=g-X;break;case 2:c=K-h,v=X-g;break;case 3:c=h-K,v=X-g;break}return D.width=K,D.height=X,D.deltaX=c/O,D.deltaY=v/O,D}switch(s){case 0:D.width=P?h:h-c*O,D.height=R?g:g-v*O;break;case 1:D.width=P?h:h+c*O,D.height=R?g:g-v*O;break;case 2:D.width=P?h:h+c*O,D.height=R?g:g+v*O;break;case 3:D.width=P?h:h-c*O,D.height=R?g:g+v*O;break}return D},o.updateEdgePointByAnchors=function(){var r=o.nodeModel,s=r.id,c=r.anchors,v=o.getNodeEdges(s);v.sourceEdges.forEach(function(h){var g=c.find(function(_){return _.id===h.sourceAnchorId});h.updateStartPoint({x:g.x,y:g.y})}),v.targetEdges.forEach(function(h){var g=c.find(function(_){return _.id===h.targetAnchorId});h.updateEndPoint({x:g.x,y:g.y})})},o.updateRect=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.x,_=v.y,w=v.width,O=v.height,S=v.radius,P=v.PCTResizeInfo,A=o.nodeModel,R=A.minWidth,D=A.minHeight,N=A.maxWidth,$=A.maxHeight,Y=o.index,K=R===N,X=D===$,te=o.getResize({index:Y,deltaX:s,deltaY:c,width:w,height:O,PCTResizeInfo:P,pct:1,freezeWidth:K,freezeHeight:X});if(te.width<R||te.width>N||te.height<D||te.height>$){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:K?0:te.deltaX,deltaY:X?0:te.deltaY}),o.nodeModel.width=te.width,o.nodeModel.height=te.height,o.nodeModel.setProperties({nodeSize:{width:te.width,height:te.height}}),o.getNodeEdges(h);var W={x:g,y:_,width:w,height:O,radius:S},C={x:o.nodeModel.x,y:o.nodeModel.y,width:o.nodeModel.width,height:o.nodeModel.height,radius:S};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:W,afterNode:C})},o.updateEllipse=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel,h=v.id,g=v.rx,_=v.ry,w=v.x,O=v.y,S=v.PCTResizeInfo,P=o.index,A=o.nodeModel,R=A.minWidth,D=A.minHeight,N=A.maxWidth,$=A.maxHeight,Y=R===N,K=D===$,X=g,te=_,W=o.getResize({index:P,deltaX:s,deltaY:c,width:X,height:te,PCTResizeInfo:S,pct:1/2,freezeWidth:Y,freezeHeight:K});if(W.width<R/2||W.width>N/2||W.height<D/2||W.height>$/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:Y?0:W.deltaX,deltaY:K?0:W.deltaY}),o.nodeModel.rx=W.width,o.nodeModel.ry=W.height,o.nodeModel.setProperties({nodeSize:{rx:W.width,ry:W.height}}),o.getNodeEdges(h);var C={x:w,y:O},G={rx:W.width,ry:W.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:Fp(Fp({},C),{rx:g,ry:_}),afterNode:G})},o.updateDiamond=function(r){var s=r.deltaX,c=r.deltaY,v=o.nodeModel;v.id;var h=v.rx,g=v.ry,_=v.x,w=v.y,O=v.PCTResizeInfo,S=o.index,P=o.nodeModel,A=P.minWidth,R=P.minHeight,D=P.maxWidth,N=P.maxHeight,$=A===D,Y=R===N,K=h,X=g,te=o.getResize({index:S,deltaX:s,deltaY:c,width:K,height:X,PCTResizeInfo:O,pct:1/2,freezeWidth:$,freezeHeight:Y});if(te.width<A/2||te.width>D/2||te.height<R/2||te.height>N/2){o.dragHandler.cancelDrag();return}o.updatePosition({deltaX:$?0:te.deltaX,deltaY:Y?0:te.deltaY}),o.nodeModel.rx=te.width,o.nodeModel.ry=te.height,o.nodeModel.setProperties({nodeSize:{rx:te.width,ry:te.height}});var W={x:_,y:w,rx:h,ry:g},C={rx:te.width,ry:te.height,x:o.nodeModel.x,y:o.nodeModel.y};o.updateEdgePointByAnchors(),o.eventEmit({beforeNode:W,afterNode:C})},o.eventEmit=function(r){var s=r.beforeNode,c=r.afterNode,v=o.nodeModel,h=v.id,g=v.modelType,_=v.type,w=Fp({id:h,modelType:g,type:_},s),O=Fp({id:h,modelType:g,type:_},c);o.graphModel.eventCenter.emit("node:resize",{oldNodeSize:w,newNodeSize:O})},o.onDragging=function(r){var s,c=r.deltaX,v=r.deltaY,h=o.graphModel.transformModel,g=o.nodeModel.modelType;s=hV(h.fixDeltaXY(c,v),2),c=s[0],v=s[1],g===lv.RECT_NODE||g===lv.HTML_NODE?o.updateRect({deltaX:c,deltaY:v}):g===lv.ELLIPSE_NODE?o.updateEllipse({deltaX:c,deltaY:v}):g===lv.DIAMOND_NODE&&o.updateDiamond({deltaX:c,deltaY:v})},o.onDragEnd=function(){var r=o.graphModel.gridSize,s=r===void 0?1:r,c=s*Math.round(o.nodeModel.x/s),v=s*Math.round(o.nodeModel.y/s);o.nodeModel.moveTo(c,v),o.updateEdgePointByAnchors()},o.index=n.index,o.nodeModel=n.model,o.graphModel=n.graphModel,o.state={},o.dragHandler=new vV({onDragging:o.onDragging,onDragEnd:o.onDragEnd,step:1}),o}return t.prototype.getNodeEdges=function(n){for(var o=this.graphModel,r=o.edges,s=[],c=[],v=0;v<r.length;v++){var h=r[v];h.sourceNodeId===n?s.push(h):r[v].targetNodeId===n&&c.push(h)}return{sourceEdges:s,targetEdges:c}},t.prototype.render=function(){var n=this.props,o=n.x,r=n.y,s=n.index,c=n.model,v=c.getControlPointStyle();return Sy("g",{className:"lf-resize-control-"+s},Sy(bE,Fp({className:"lf-node-control"},{x:o,y:r},v,{onMouseDown:this.dragHandler.handleMouseDown})))},t}(dv),mV=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lg=globalThis&&globalThis.__assign||function(){return Lg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Lg.apply(this,arguments)},S_=function(e){mV(t,e);function t(){var n=e.call(this)||this;return n.state={},n}return t.prototype.getResizeControl=function(){var n=this.props,o=n.model,r=n.graphModel,s=o.x,c=o.y,v=o.width,h=o.height,g={minX:s-v/2,minY:c-h/2,maxX:s+v/2,maxY:c+h/2},_=g.minX,w=g.minY,O=g.maxX,S=g.maxY,P=[{x:_,y:w},{x:O,y:w},{x:O,y:S},{x:_,y:S}];return P.map(function(A,R){return Sy(yV,Lg({index:R},A,{model:o,graphModel:r}))})},t.prototype.getGroupSolid=function(){var n=this.props.model,o=n.x,r=n.y,s=n.width,c=n.height,v=n.getResizeOutlineStyle();return Sy(bE,Lg({fill:"none"},v,{x:o,y:r,width:s,height:c}))},t.prototype.render=function(){return Sy("g",{className:"lf-resize-control"},this.getGroupSolid(),this.getResizeControl())},t}(dv),HP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),gV=function(e){HP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{fill:"none",stroke:"transparent",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.resize=function(n,o){console.log(n,o)},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.RectNodeModel),_V=function(e){HP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.RectNode),XP={type:"rect",view:_V,model:gV},YP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();(function(e){YP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.EllipseNodeModel);(function(e){YP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o.isSelected&&!r?this.getControlGroup():"")},t})(cn.EllipseNode);var yw=globalThis&&globalThis.__assign||function(){return yw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yw.apply(this,arguments)};function bV(e){var t=e.fillOpacity,n=t===void 0?1:t,o=e.strokeWidth,r=o===void 0?1:o,s=e.strokeOpacity,c=s===void 0?1:s,v=e.fill,h=v===void 0?"transparent":v,g=e.stroke,_=g===void 0?"#000":g,w=e.points,O=e.className,S=O===void 0?"lf-basic-shape":O,P={fill:h,fillOpacity:n,strokeWidth:r,stroke:_,strokeOpacity:c,points:"",className:S};return P.points=w.map(function(A){return A.join(",")}).join(" "),cn.h("polygon",yw({},P))}var qP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mw=globalThis&&globalThis.__assign||function(){return mw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mw.apply(this,arguments)};(function(e){qP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.rx=s.rx,r.ry=s.ry),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3,this.gridSize=1},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.rx,basisHeight:this.ry},s={maxScaleLimit:Math.min(this.maxWidth/(this.rx*2)*100,this.maxHeight/(this.ry*2)*100),minScaleLimit:Math.max(this.minWidth/(this.rx*2)*100,this.minHeight/(this.ry*2)*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t})(cn.DiamondNodeModel);(function(e){qP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){var n=this.props.model,o=n.points,r=n.getNodeStyle();return cn.h("g",null,cn.h(bV,mw({},r,{points:o})))},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t})(cn.DiamondNode);var KP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),wV=function(e){KP(t,e);function t(n,o){var r=e.call(this,n,o)||this,s=r.properties.nodeSize;return s&&(r.width=s.width,r.height=s.height),r}return t.prototype.initNodeData=function(n){e.prototype.initNodeData.call(this,n),this.minWidth=30,this.minHeight=30,this.maxWidth=2e3,this.maxHeight=2e3},t.prototype.getOutlineStyle=function(){var n=e.prototype.getOutlineStyle.call(this),o=this.graphModel.editConfigModel.isSilentMode;return o||(n.stroke="none",n.hover&&(n.hover.stroke="none")),n},t.prototype.getResizeOutlineStyle=function(){return{stroke:"#000000",strokeWidth:1,strokeDasharray:"3,3"}},t.prototype.getControlPointStyle=function(){return{width:7,height:7,fill:"#FFFFFF",stroke:"#000000"}},t.prototype.enableProportionResize=function(n){if(n===void 0&&(n=!0),n){var o={widthPCT:100,hightPCT:100},r={basisWidth:this.width,basisHeight:this.height},s={maxScaleLimit:Math.min(this.maxWidth/this.width*100,this.maxHeight/this.height*100),minScaleLimit:Math.max(this.minWidth/this.width*100,this.minHeight/this.height*100)};this.PCTResizeInfo={ResizePCT:o,ResizeBasis:r,ScaleLimit:s}}else delete this.PCTResizeInfo},t}(cn.HtmlNodeModel),EV=function(e){KP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props,o=n.model,r=n.graphModel;return cn.h(S_,{model:o,graphModel:r})},t.prototype.getResizeShape=function(){return e.prototype.getShape.call(this)},t.prototype.getShape=function(){var n=this.props,o=n.model.isSelected,r=n.graphModel.editConfigModel.isSilentMode;return cn.h("g",null,this.getResizeShape(),o&&!r?this.getControlGroup():"")},t}(cn.HtmlNode),ZP={type:"html",view:EV,model:wV},JP=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fg=globalThis&&globalThis.__assign||function(){return Fg=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Fg.apply(this,arguments)},OV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},xV=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(OV(arguments[t]));return e},AA=500,TA=300,SV=-1e4;(function(e){JP(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.isGroup=!0,n.unfoldedWidth=AA,n.unfoldedHight=TA,n.childrenLastFoldStatus={},n}return t.prototype.initNodeData=function(n){var o=this;e.prototype.initNodeData.call(this,n);var r=[];Array.isArray(n.children)&&(r=n.children),this.children=new Set(r),this.width=AA,this.height=TA,this.foldedWidth=80,this.foldedHeight=60,this.zIndex=SV,this.radius=0,this.text.editable=!1,this.text.draggable=!1,this.isRestrict=!1,this.resizable=!1,this.autoToFront=!1,this.foldable=!1,this.properties.isFolded===void 0&&(this.properties.isFolded=!1),this.isFolded=this.properties.isFolded,setTimeout(function(){o.isFolded&&o.foldGroup(o.isFolded)})},t.prototype.getResizeOutlineStyle=function(){var n=e.prototype.getResizeOutlineStyle.call(this);return n.stroke="none",n},t.prototype.foldGroup=function(n){var o=this;if(n!==this.isFolded){this.setProperty("isFolded",n),this.isFolded=n,n?(this.x=this.x-this.width/2+this.foldedWidth/2,this.y=this.y-this.height/2+this.foldedHeight/2,this.unfoldedWidth=this.width,this.unfoldedHight=this.height,this.width=this.foldedWidth,this.height=this.foldedHeight):(this.width=this.unfoldedWidth,this.height=this.unfoldedHight,this.x=this.x+this.width/2-this.foldedWidth/2,this.y=this.y+this.height/2-this.foldedHeight/2);var r=this.incoming.edges.concat(this.outgoing.edges);this.children.forEach(function(s){var c=o.graphModel.getElement(s),v=c.isFolded;if(c.isGroup&&!c.isFolded&&c.foldGroup(n),c.isGroup&&!n){var h=o.childrenLastFoldStatus[s];h!==void 0&&h!==c.isFolded&&c.foldGroup(h)}o.childrenLastFoldStatus[s]=v,c.visible=!n,r=r.concat(c.incoming.edges.concat(c.outgoing.edges))}),this.foldEdge(n,r)}},t.prototype.getAnchorStyle=function(n){var o=e.prototype.getAnchorStyle.call(this,n);return o.stroke="transparent",o.fill="transparent",o.hover.fill="transparent",o.hover.stroke="transparent",o},t.prototype.foldEdge=function(n,o){var r=this;o.forEach(function(s,c){var v=s.id,h=s.sourceNodeId,g=s.targetNodeId,_=s.startPoint,w=s.endPoint,O=s.type,S=s.text,P=s.getProperties(),A={id:v+"__"+c,sourceNodeId:h,targetNodeId:g,startPoint:_,endPoint:w,type:O,properties:P,text:S==null?void 0:S.value};s.virtual&&r.graphModel.deleteEdgeById(s.id);var R=r.graphModel.group.getNodeGroup(g);R||(R=r.graphModel.getNodeModelById(g));var D=r.graphModel.group.getNodeGroup(h);D||(D=r.graphModel.getNodeModelById(h)),n&&s.visible!==!1&&(r.children.has(h)||r.id===h?(A.startPoint=void 0,A.sourceNodeId=r.id):(A.endPoint=void 0,A.targetNodeId=r.id),(R.id!==r.id||D.id!==r.id)&&r.createVirtualEdge(A),s.visible=!1),!n&&s.visible===!1&&(R&&R.isGroup&&R.isFolded?(A.targetNodeId=R.id,A.endPoint=void 0,r.createVirtualEdge(A)):D&&D.isGroup&&D.isFolded?(A.sourceNodeId=D.id,A.startPoint=void 0,r.createVirtualEdge(A)):s.visible=!0)})},t.prototype.createVirtualEdge=function(n){n.pointsList=void 0;var o=this.graphModel.addEdge(n);o.virtual=!0,o.text.editable=!1,o.isFoldedEdge=!0},t.prototype.isInRange=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return o>=this.x-this.width/2&&s<=this.x+this.width/2&&r>=this.y-this.height/2&&c<=this.y+this.height/2},t.prototype.isAllowMoveTo=function(n){var o=n.x1,r=n.y1,s=n.x2,c=n.y2;return{x:o>=this.x-this.width/2&&s<=this.x+this.width/2,y:r>=this.y-this.height/2&&c<=this.y+this.height/2}},t.prototype.setAllowAppendChild=function(n){this.setProperty("groupAddable",n)},t.prototype.addChild=function(n){this.children.add(n),this.graphModel.eventCenter.emit("group:add-node",{data:this.getData()})},t.prototype.removeChild=function(n){this.children.delete(n),this.graphModel.eventCenter.emit("group:remove-node",{data:this.getData()})},t.prototype.getAddableOutlineStyle=function(){return{stroke:"#FEB663",strokeWidth:2,strokeDasharray:"4 4",fill:"transparent"}},t.prototype.getData=function(){var n=this,o=e.prototype.getData.call(this);o.children=[],this.children.forEach(function(s){var c=n.graphModel.getNodeModelById(s);c&&!c.virtual&&o.children.push(s)});var r=o.properties;return delete r.groupAddable,delete r.isFolded,o},t.prototype.getHistoryData=function(){var n=e.prototype.getData.call(this);n.children=xV(this.children),n.isGroup=!0;var o=n.properties;return delete o.groupAddable,o.isFolded&&(n.x=n.x+this.unfoldedWidth/2-this.foldedWidth/2,n.y=n.y+this.unfoldedHight/2-this.foldedHeight/2),n},t.prototype.isAllowAppendIn=function(n){return!0},t.prototype.toBack=function(){this.zIndex--},t})(XP.model);(function(e){JP(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getControlGroup=function(){var n=this.props.model,o=n.resizable,r=n.properties;return o&&!r.isFolded?e.prototype.getControlGroup.call(this):null},t.prototype.getAddableShape=function(){var n=this.props.model,o=n.width,r=n.height,s=n.x,c=n.y,v=n.radius,h=n.properties;if(!h.groupAddable)return null;var g=this.props.model.getNodeStyle().strokeWidth,_=this.props.model.getAddableOutlineStyle(),w=o+g+8,O=r+g+8;return cn.h("rect",Fg(Fg({},_),{width:w,height:O,x:s-w/2,y:c-O/2,rx:v,ry:v}))},t.prototype.getFoldIcon=function(){var n=this.props.model,o=n.x-n.width/2+5,r=n.y-n.height/2+5;if(!n.foldable)return null;var s=cn.h("path",{fill:"none",stroke:"#818281",strokeWidth:2,"pointer-events":"none",d:n.properties.isFolded?"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" M"+(o+7)+","+(r+2)+" "+(o+7)+","+(r+10):"M "+(o+3)+","+(r+6)+" "+(o+11)+","+(r+6)+" "});return cn.h("g",{},[cn.h("rect",{height:12,width:14,rx:2,ry:2,strokeWidth:1,fill:"#F4F5F6",stroke:"#CECECE",cursor:"pointer",x:n.x-n.width/2+5,y:n.y-n.height/2+5,onClick:function(){n.foldGroup(!n.properties.isFolded)}}),s])},t.prototype.getResizeShape=function(){return cn.h("g",{},[this.getAddableShape(),e.prototype.getResizeShape.call(this),this.getFoldIcon()])},t})(XP.view);var MA=globalThis&&globalThis.__assign||function(){return MA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},MA.apply(this,arguments)};globalThis&&globalThis.__rest;var AV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}();var PA=globalThis&&globalThis.__assign||function(){return PA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},PA.apply(this,arguments)};globalThis&&globalThis.__values;var kA=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ty=globalThis&&globalThis.__assign||function(){return Ty=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ty.apply(this,arguments)};function TV(e){var t=function(o){kA(r,o);function r(s,c){var v=this;s.id||(s.id="Flow_"+eV());var h=Ty(Ty(Ty({},e||{}),s.properties),{isDefaultFlow:!1});return s.properties=h,v=o.call(this,s,c)||this,v}return r.extendKey="SequenceFlowModel",r}(cn.PolylineEdgeModel),n=function(o){kA(r,o);function r(){return o!==null&&o.apply(this,arguments)||this}return r.prototype.getStartArrow=function(){var s=this.props.model,c=s.properties.isDefaultFlow;return c?cn.h("path",{refX:15,stroke:"#000000",strokeWidth:2,d:"M 20 5 10 -5 z"}):cn.h("path",{d:""})},r.extendKey="SequenceFlowEdge",r}(cn.PolylineEdge);return{type:"bpmn:sequenceFlow",view:n,model:t}}TV();globalThis&&globalThis.__read;var NA={width:40,height:40},RA={width:40,height:40},jA={width:100,height:80},$g={width:100,height:80},CA={width:100,height:80},DA={width:100,height:80},IA={width:100,height:80},LA={width:100,height:80},FA={width:100,height:80},$A={width:100,height:80},sl=function(){};sl.ObjTree=function(){return this};sl.ObjTree.VERSION="0.23";sl.ObjTree.prototype.xmlDecl=`<?xml version="1.0" encoding="UTF-8" ?>
`;sl.ObjTree.prototype.attr_prefix="-";sl.ObjTree.prototype.parseXML=function(e){var t;if(window.DOMParser){var n=new DOMParser,o=n.parseFromString(e,"application/xml");if(!o)return;t=o.documentElement}else window.ActiveXObject&&(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e),t=n.documentElement);if(t){var r=this.parseDOM(t);return r}};sl.ObjTree.prototype.parseHTTP=function(e,t,n){var o={};for(var r in t)o[r]=t[r];if(o.method||(typeof o.postBody>"u"&&typeof o.postbody>"u"&&typeof o.parameters>"u"?o.method="get":o.method="post"),n){o.asynchronous=!0;var s=this,c=n,v=o.onComplete;o.onComplete=function(_){var w;_&&_.responseXML&&_.responseXML.documentElement&&(w=s.parseDOM(_.responseXML.documentElement)),c(w,_),v&&v(_)}}else o.asynchronous=!1;var h;if(typeof HTTP<"u"&&HTTP.Request){o.uri=e;var g=new HTTP.Request(o);g&&(h=g.transport)}else if(typeof Ajax<"u"&&Ajax.Request){var g=new Ajax.Request(e,o);g&&(h=g.transport)}if(n)return h;if(h&&h.responseXML&&h.responseXML.documentElement)return this.parseDOM(h.responseXML.documentElement)};sl.ObjTree.prototype.parseDOM=function(e){if(e){if(this.__force_array={},this.force_array)for(var t=0;t<this.force_array.length;t++)this.__force_array[this.force_array[t]]=1;var n=this.parseElement(e);if(this.__force_array[e.nodeName]&&(n=[n]),e.nodeType!==11){var o={};o[e.nodeName]=n,n=o}return n}};sl.ObjTree.prototype.parseElement=function(e){if(e.nodeType!==7){if(e.nodeType===3||e.nodeType===4||e.nodeType===8){var t=e.nodeValue.match(/[^\x00-\x20]/);return t==null?void 0:e.nodeValue}var n=null,o={};if(e.attributes&&e.attributes.length){n={};for(var r=0;r<e.attributes.length;r++){var s=e.attributes[r].nodeName;if(typeof s=="string"){var c=e.attributes[r].nodeValue;try{c=JSON.parse(e.attributes[r].nodeValue.replace(/'/g,'"'))}catch{c=e.attributes[r].nodeValue}c!=null&&(s=this.attr_prefix+s,typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}if(e.childNodes&&e.childNodes.length){var v=!0;n&&(v=!1);for(var r=0;r<e.childNodes.length&&v;r++){var h=e.childNodes[r].nodeType;h===3||h===4||h===8||(v=!1)}if(v){n||(n="");for(var r=0;r<e.childNodes.length;r++)n+=e.childNodes[r].nodeValue}else{n||(n={});for(var r=0;r<e.childNodes.length;r++){var s=e.childNodes[r].nodeName;if(typeof s=="string"){var c=this.parseElement(e.childNodes[r]);c&&(typeof o[s]>"u"&&(o[s]=0),o[s]++,this.addNode(n,s,o[s],c))}}}}else n===null&&(n={});return n}};sl.ObjTree.prototype.addNode=function(e,t,n,o){this.__force_array[t]?(n===1&&(e[t]=[]),e[t][e[t].length]=o):n===1?e[t]=o:n===2?e[t]=[e[t],o]:e[t][e[t].length]=o};sl.ObjTree.prototype.writeXML=function(e){var t=this.hash_to_xml(null,e);return this.xmlDecl+t};sl.ObjTree.prototype.hash_to_xml=function(e,t){var n=[],o=[];for(var r in t)if(t!=null&&t.hasOwnProperty(r)){var s=t[r];r.charAt(0)!==this.attr_prefix?typeof s>"u"||s==null?n[n.length]="<"+r+" />":typeof s=="object"&&s.constructor===Array?n[n.length]=this.array_to_xml(r,s):typeof s=="object"?n[n.length]=this.hash_to_xml(r,s):n[n.length]=this.scalar_to_xml(r,s):o[o.length]=" "+r.substring(1)+'="'+this.xml_escape(s)+'"'}var c=o.join(""),v=n.join("");return typeof e>"u"||e==null||(n.length>0?v.match(/\n/)?v="<"+e+c+`>
`+v+"</"+e+`>
`:v="<"+e+c+">"+v+"</"+e+`>
`:v="<"+e+c+` />
`),v};sl.ObjTree.prototype.array_to_xml=function(e,t){for(var n=[],o=0;o<t.length;o++){var r=t[o];typeof r>"u"||r==null?n[n.length]="<"+e+" />":typeof r=="object"&&r.constructor===Array?n[n.length]=this.array_to_xml(e,r):typeof r=="object"?n[n.length]=this.hash_to_xml(e,r):n[n.length]=this.scalar_to_xml(e,r)}return n.join("")};sl.ObjTree.prototype.scalar_to_xml=function(e,t){return e==="#text"?this.xml_escape(t):"<"+e+">"+this.xml_escape(t)+"</"+e+`>
`};sl.ObjTree.prototype.xml_escape=function(e){return e.replace(/&/g,"&").replace(/</g,"<").replace(/>/g,">").replace(/"/g,'"')};var MV=function(e){return new sl.ObjTree().parseXML(e)};function QP(e){return Object.prototype.toString.call(e)}function BA(e){return"  ".repeat(e)}function Bg(e){return QP(e)==="[object Object]"?Object.keys(e).reduce(function(t,n){var o=n;return n.charAt(0)==="-"&&(o=n.substring(1)),t[o]=Bg(e[n]),t},{}):Array.isArray(e)?e.map(function(t){return Bg(t)}):e}function PV(e){var t=e;try{typeof t!="string"&&(t=JSON.parse(e))}catch{t=JSON.stringify(Bg(e)).replace(/"/g,"'")}return t}var UA=`	
`;function _g(e,t,n){var o=BA(n),r="",s=UA+o;if(t==="-json")return"";if(t==="#text")return s+e;if(t==="#cdata-section")return s+"<![CDATA["+e+"]]>";if(t==="#comment")return s+"<!--"+e+"-->";if((""+t).charAt(0)==="-")return" "+t.substring(1)+'="'+PV(e)+'"';if(Array.isArray(e))r+=e.map(function(g){return _g(g,t,n+1)}).join("");else if(QP(e)==="[object Object]"){var c=Object.keys(e),v="",h=e["-json"]?UA+BA(n+1)+e["-json"]:"";r+=(n===0?"":s)+"<"+t,c.forEach(function(g){g.charAt(0)==="-"?v+=_g(e[g],g,n+1):h+=_g(e[g],g,n+1)}),r+=v+(h!==""?">"+h+s+"</"+t+">":" />")}else r+=s+"<"+t+">"+e.toString()+"</"+t+">";return r}function kV(e){var t="";for(var n in e)t+=_g(e[n],n,0);return t}var NV=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),gw=globalThis&&globalThis.__assign||function(){return gw=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gw.apply(this,arguments)},GA=globalThis&&globalThis.__rest||function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},wE=globalThis&&globalThis.__values||function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},$v=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},pv=globalThis&&globalThis.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat($v(arguments[t]));return e},al;(function(e){e.START="bpmn:startEvent",e.END="bpmn:endEvent",e.INTERMEDIATE_CATCH="bpmn:intermediateCatchEvent",e.INTERMEDIATE_THROW="bpmn:intermediateThrowEvent",e.BOUNDARY="bpmn:boundaryEvent",e.PARALLEL_GATEWAY="bpmn:parallelGateway",e.INCLUSIVE_GATEWAY="bpmn:inclusiveGateway",e.EXCLUSIVE_GATEWAY="bpmn:exclusiveGateway",e.USER="bpmn:userTask",e.SYSTEM="bpmn:serviceTask",e.FLOW="bpmn:sequenceFlow",e.SUBPROCESS="bpmn:subProcess"})(al||(al={}));var ek=["-name","-id","bpmn:incoming","bpmn:outgoing","-sourceRef","-targetRef","-children"],RV=["properties","startPoint","endPoint","pointsList"],Ug={in:[],out:["properties.panels","properties.nodeSize","properties.definitionId","properties.timerValue","properties.timerType","properties.definitionType","properties.parent","properties.isBoundaryEventTouchingTask"]},tk=function(e,t){var n=Object.keys(t||{});return n.forEach(function(o){if(e[o]){var r=t[o],s=r.in,c=r.out;s&&(e[o].in=s),c&&(e[o].out=c)}else e[o]=t[o]}),e},Du={"bpmn:startEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateCatchEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:intermediateThrowEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:boundaryEvent":{out:function(e){var t,n,o=e.properties;return((n=(t=Du[o.definitionType])===null||t===void 0?void 0:t.out)===null||n===void 0?void 0:n.call(t,e))||{}}},"bpmn:sequenceFlow":{out:function(e){var t=e.properties,n=t.expressionType,o=t.condition;return o?n==="cdata"?{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression"><![CDATA[${'+o+"}]]></bpmn:conditionExpression>"}:{json:'<bpmn:conditionExpression xsi:type="bpmn2:tFormalExpression">'+o+"</bpmn:conditionExpression>"}:{json:""}}},"bpmn:timerEventDefinition":{out:function(e){var t=e.properties,n=t.timerType,o=t.timerValue,r=t.definitionId,s=function(){return"<bpmn:"+n+' xsi:type="bpmn:tFormalExpression">'+o+"</bpmn:"+n+">"};return{json:'<bpmn:timerEventDefinition id="'+r+'"'+(n&&o?">"+s()+"</bpmn:timerEventDefinition>":"/>")}},in:function(e,t){var n,o,r,s,c=e,v=t["-id"],h="",g="";try{for(var _=wE(Object.keys(t)),w=_.next();!w.done;w=_.next()){var O=w.value;O.includes("bpmn:")&&(r=$v(O.split(":"),2),h=r[1],g=(s=t[O])===null||s===void 0?void 0:s["#text"])}}catch(S){n={error:S}}finally{try{w&&!w.done&&(o=_.return)&&o.call(_)}finally{if(n)throw n.error}}return{"-definitionId":v,"-definitionType":c,"-timerType":h,"-timerValue":g}}},"bpmn:conditionExpression":{in:function(e,t){var n,o="",r="";return t["#cdata-section"]?(r="cdata",o=((n=/^\$\{(.*)\}$/g.exec(t["#cdata-section"]))===null||n===void 0?void 0:n[1])||""):t["#text"]&&(r="normal",o=t["#text"]),{"-condition":o,"-expressionType":r}}}};function jV(e){var t=e??{},n=t.retainedAttrsFields,o=t.excludeFields,r=t.transformer,s=new Set(pv(RV,n||[])),c={in:new Set(pv(Ug.in,(o==null?void 0:o.in)||[])),out:new Set(pv(Ug.out,(o==null?void 0:o.out)||[]))};return Du=tk(Du,r),function(v){var h=v.nodes,g=v.edges;function _(w,O){var S,P,A;if((w==null?void 0:w.flag)!==1){var R;if((R=Du[w.type])&&R.out){var D=R.out(w),N=Object.keys(D);N.length>0&&N.forEach(function(G){w[G]=D[G]})}w!=null&&w.children&&(w.children=w.children.map(function(G){var q=h.find(function(z){return z.id===G})||g.find(function(z){return z.id===G});return q||{}}));var $={};if(typeof w=="string")return w;if(Array.isArray(w))return w.map(function(G){return _(G,"")}).filter(function(G){return G!=null});try{for(var Y=wE(Object.entries(w)),K=Y.next();!K.done;K=Y.next()){var X=$v(K.value,2),te=X[0],W=X[1];if(((A=W)===null||A===void 0?void 0:A.flag)===1)return;var C=[O,te].filter(function(G){return G}).join(".");c.out.has(C)||(typeof W!="object"?te.indexOf("-")===0||["#text","#cdata-section","#comment"].includes(te)?$[te]=W:$["-"+te]=W:s.has(C)?$["-"+te]=_(W,C):$[te]=_(W,C))}}catch(G){S={error:G}}finally{try{K&&!K.done&&(P=Y.return)&&P.call(Y)}finally{if(S)throw S.error}}return $}}return _(v,"")}}function Gg(e){var t,n,o={};try{for(var r=wE(Object.entries(e)),s=r.next();!s.done;s=r.next()){var c=$v(s.value,2),v=c[0],h=c[1];v.indexOf("-")===0?o[v.substring(1)]=Bg(h):typeof h=="string"?o[v]=h:Object.prototype.toString.call(h)==="[object Object]"?o[v]=Gg(h):Array.isArray(h)?o[v]=h.map(function(g){return Gg(g)}):o[v]=h}}catch(g){t={error:g}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return o}function CV(e,t,n){var o,r=new Map,s=jV(n)(t);s.nodes.forEach(function(v){var h=v["-id"],g=v["-type"],_=v.text,w=v.children,O=GA(v,["-id","-type","text","children"]),S={"-id":h};_!=null&&_["-value"]&&(S["-name"]=_["-value"]),O["-json"]&&(S["-json"]=O["-json"]),O["-properties"]&&Object.assign(S,O["-properties"]),w&&(S.children=w),e[g]||(e[g]=[]),e[g].push(S),r.set(h,S)});var c=s.edges.map(function(v){var h=v["-id"];v["-type"];var g=v["-sourceNodeId"],_=v["-targetNodeId"],w=v.text,O=GA(v,["-id","-type","-sourceNodeId","-targetNodeId","text"]),S=r.get(_);S["bpmn:incoming"]||(S["bpmn:incoming"]=[]),S["bpmn:incoming"].push(h);var P={"-id":h,"-sourceRef":g,"-targetRef":_};return w!=null&&w["-value"]&&(P["-name"]=w["-value"]),O["-json"]&&(P["-json"]=O["-json"]),O["-properties"]&&Object.assign(P,O["-properties"]),P});return t.edges.forEach(function(v){var h=v.sourceNodeId,g=v.id,_=r.get(h);_["bpmn:outgoing"]||(_["bpmn:outgoing"]=[]),_["bpmn:outgoing"].push(g)}),(o=e["bpmn:subProcess"])===null||o===void 0||o.forEach(function(v){var h={"bpmn:incoming":new Set,"bpmn:outgoing":new Set},g=[];v.children.forEach(function(A){var R,D=r.get(A["-id"]);["bpmn:incoming","bpmn:outgoing"].forEach(function($){D[$]&&D[$].forEach(function(Y){h[$].add(Y)})});var N=(R=e[A["-type"]])===null||R===void 0?void 0:R.findIndex(function($){return $["-id"]===A["-id"]});N>=0&&e[A["-type"]].splice(N,1),r.delete(A["-id"]),v[A["-type"]]||(v[A["-type"]]=[]),v[A["-type"]].push(D)});var _=h["bpmn:incoming"],w=h["bpmn:outgoing"];w.forEach(function(A){_.has(A)&&g.push(A)});for(var O=function(A){var R=c.findIndex(function(D){return D["-id"]===g[A]});R>=0?(v["bpmn:sequenceFlow"]||(v["bpmn:sequenceFlow"]=[]),v["bpmn:sequenceFlow"].push(c[R]),c.splice(R,1)):A++,S=A},S,P=0;P<g.length;)O(P),P=S;delete v.children}),e[al.FLOW]=c,e}function DV(e,t){e["bpmndi:BPMNEdge"]=t.edges.map(function(n){var o,r=n.id,s=n.pointsList.map(function(v){var h=v.x,g=v.y;return{"-x":h,"-y":g}}),c={"-id":r+"_di","-bpmnElement":r,"di:waypoint":s};return!((o=n.text)===null||o===void 0)&&o.value&&(c["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),c}),e["bpmndi:BPMNShape"]=t.nodes.map(function(n){var o,r=n.id,s=100,c=80,v=n.x,h=n.y,g=Nl.shapeConfigMap.get(n.type);g&&(s=g.width,c=g.height),v-=s/2,h-=c/2;var _={"-id":r+"_di","-bpmnElement":r,"dc:Bounds":{"-x":v,"-y":h,"-width":s,"-height":c}};return!((o=n.text)===null||o===void 0)&&o.value&&(_["bpmndi:BPMNLabel"]={"dc:Bounds":{"-x":n.text.x-n.text.value.length*10/2,"-y":n.text.y-7,"-width":n.text.value.length*10,"-height":14}}),_})}var IV=["bpmn:incoming","bpmn:outgoing"];function LV(e,t){var n=[],o=[],r=new Map,s=t??{},c=s.transformer,v=s.excludeFields,h={in:new Set(pv(Ug.in,(v==null?void 0:v.in)||[])),out:new Set(pv(Ug.out,(v==null?void 0:v.out)||[]))};Du=tk(Du,c);var g=e["bpmn:definitions"];if(g){var _=g["bpmn:process"];(function(O,S){S.forEach(function(P){try{Object.keys(O).forEach(function(A){try{P(A)}catch(R){console.error(R)}})}catch(A){console.error(A)}})})(_,[function(O){function S(A){A["-children"]||(A["-children"]=[]),Object.keys(A).forEach(function(R){var D;R.indexOf("bpmn:")===0&&!IV.includes(R)&&(_[R]||(_[R]=[]),!Array.isArray(_[R])&&(_[R]=[_[R]]),Array.isArray(A[R])?(D=_[R]).push.apply(D,pv(A[R])):_[R].push(A[R]),Array.isArray(A[R])?A[R].forEach(function(N){!R.includes("Flow")&&A["-children"].push(N["-id"])}):!R.includes("Flow")&&A["-children"].push(A[R]["-id"]),delete A[R])})}if(O==="bpmn:subProcess"){var P=_[O];Array.isArray(P)?P.forEach(function(A){O==="bpmn:subProcess"&&S(A)}):S(P)}},function(O){var S=function(A){Object.keys(A).forEach(function(R){var D,N;if(R.includes("bpmn:")){var $={};Du[R]&&Du[R].in?($=(N=(D=Du[R]).in)===null||N===void 0?void 0:N.call(D,R,ae.cloneDeep(A[R])),delete A[R]):P(A[R]);var Y=void 0;(Y=Reflect.ownKeys($)).length>0&&Y.forEach(function(K){Reflect.set(A,K,$[K])})}})};function P(A){r.set(A["-id"],A),Array.isArray(A)?A.forEach(function(R){P(R)}):typeof A=="object"&&S(A)}P(_[O])},function(O){if(O.indexOf("bpmn:")===0){var S=_[O];if(O==="bpmn:sequenceFlow"){var P=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNEdge"];o=$V(S,P)}else{var A=g["bpmndi:BPMNDiagram"]["bpmndi:BPMNPlane"]["bpmndi:BPMNShape"];if(O==="bpmn:boundaryEvent"){var R=_[O],D=function(N){var $=N["-attachedToRef"],Y=r.get($);Y["-boundaryEvents"]||(Y["-boundaryEvents"]=[]),Y["-boundaryEvents"].push(N["-id"])};Array.isArray(R)?R.forEach(function(N){D(N)}):D(R)}n=n.concat(FV(S,A,O))}}}])}var w=function(O,S,P){Object.keys(O).forEach(function(A){var R=P?P+"."+A:A;S.has(R)?delete O[A]:typeof O[A]=="object"&&w(O[A],S,R)})};return n.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,R=O.type;A[R]&&(O.type=A[R])}w(O,h.in,"")}),o.forEach(function(O){var S,P;if(!((S=t==null?void 0:t.mapping)===null||S===void 0)&&S.in){var A=(P=t==null?void 0:t.mapping)===null||P===void 0?void 0:P.in,R=O.type;A[R]&&(O.type=A[R])}w(O,h.in,"")}),{nodes:n,edges:o}}function FV(e,t,n){var o=[];if(Array.isArray(e))e.forEach(function(c){var v;Array.isArray(t)?v=t.find(function(g){return g["-bpmnElement"]===c["-id"]}):v=t;var h=VA(v,n,c);o.push(h)});else{var r=void 0;Array.isArray(t)?r=t.find(function(c){return c["-bpmnElement"]===e["-id"]}):r=t;var s=VA(r,n,e);o.push(s)}return o}function VA(e,t,n){var o=Number(e["dc:Bounds"]["-x"]),r=Number(e["dc:Bounds"]["-y"]),s=n["-children"],c=n["-name"],v=Nl.shapeConfigMap.get(t);v&&(o+=v.width/2,r+=v.height/2);var h={};Object.entries(n).forEach(function(O){var S=$v(O,2),P=S[0],A=S[1];ek.includes(P)||(h[P]=A)}),h=Gg(h);var g;if(c&&(g={x:o,y:r,value:c},e["bpmndi:BPMNLabel"]&&e["bpmndi:BPMNLabel"]["dc:Bounds"])){var _=e["bpmndi:BPMNLabel"]["dc:Bounds"];g.x=Number(_["-x"])+Number(_["-width"])/2,g.y=Number(_["-y"])+Number(_["-height"])/2}var w={id:e["-bpmnElement"],type:t,x:o,y:r,properties:h};return s&&(w.children=s),g&&(w.text=g),w}function $V(e,t){var n=[];if(Array.isArray(e))e.forEach(function(r){var s;Array.isArray(t)?s=t.find(function(c){return c["-bpmnElement"]===r["-id"]}):s=t,n.push(WA(s,r))});else{var o=void 0;Array.isArray(t)?o=t.find(function(r){return r["-bpmnElement"]===e["-id"]}):o=t,n.push(WA(o,e))}return n}function WA(e,t){var n,o=t["-name"];if(o){var r=e["bpmndi:BPMNLabel"]["dc:Bounds"],s=0;o.split(`
`).forEach(function(g){s<g.length&&(s=g.length)}),n={value:o,x:Number(r["-x"])+s*10/2,y:Number(r["-y"])+7}}var c={};Object.entries(t).forEach(function(g){var _=$v(g,2),w=_[0],O=_[1];ek.includes(w)||(c[w]=O)}),c=Gg(c);var v=e["di:waypoint"].map(function(g){return{x:Number(g["-x"]),y:Number(g["-y"])}}),h={id:t["-id"],type:al.FLOW,pointsList:v,sourceNodeId:t["-sourceRef"],targetNodeId:t["-targetRef"],properties:c};return n&&(h.text=n),h}var Nl=function(){function e(t){var n=this,o=t.lf;this.adapterOut=function(r,s){var c,v,h=gw({},n.processAttributes);CV(h,r,s);var g={"-id":"BPMNPlane_1","-bpmnElement":h["-id"]};DV(g,r);var _=n.definitionAttributes;_["bpmn:process"]=h,_["bpmndi:BPMNDiagram"]={"-id":"BPMNDiagram_1","bpmndi:BPMNPlane":g};var w={"bpmn:definitions":_};if(!((c=s==null?void 0:s.mapping)===null||c===void 0)&&c.out){var O=(v=s==null?void 0:s.mapping)===null||v===void 0?void 0:v.out,S=function(P){Array.isArray(P)&&P.forEach(function(A){return S(A)}),typeof P=="object"&&Object.keys(P).forEach(function(A){var R;(R=O[A])?(P[R]=ae.cloneDeep(P[A]),delete P[A],S(P[R])):S(P[A])})};S(w)}return w},this.adapterIn=function(r,s){if(r)return LV(r,s)},o.adapterIn=this.adapterIn,o.adapterOut=this.adapterOut,this.processAttributes={"-isExecutable":"true","-id":"Process"},this.definitionAttributes={"-id":"Definitions","-xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","-xmlns:bpmn":"http://www.omg.org/spec/BPMN/20100524/MODEL","-xmlns:bpmndi":"http://www.omg.org/spec/BPMN/20100524/DI","-xmlns:dc":"http://www.omg.org/spec/DD/20100524/DC","-xmlns:di":"http://www.omg.org/spec/DD/20100524/DI","-targetNamespace":"http://logic-flow.org","-exporter":"logicflow","-exporterVersion":"1.2.10"}}return e.prototype.setCustomShape=function(t,n){e.shapeConfigMap.set(t,n)},e.pluginName="bpmn-adapter",e.shapeConfigMap=new Map,e}();Nl.shapeConfigMap.set(al.START,{width:NA.width,height:NA.height});Nl.shapeConfigMap.set(al.END,{width:RA.width,height:RA.height});Nl.shapeConfigMap.set(al.INTERMEDIATE_CATCH,{width:$g.width,height:$g.height});Nl.shapeConfigMap.set(al.INTERMEDIATE_THROW,{width:$g.width,height:$g.height});Nl.shapeConfigMap.set(al.BOUNDARY,{width:jA.width,height:jA.height});Nl.shapeConfigMap.set(al.PARALLEL_GATEWAY,{width:CA.width,height:CA.height});Nl.shapeConfigMap.set(al.INCLUSIVE_GATEWAY,{width:DA.width,height:DA.height});Nl.shapeConfigMap.set(al.EXCLUSIVE_GATEWAY,{width:IA.width,height:IA.height});Nl.shapeConfigMap.set(al.SYSTEM,{width:LA.width,height:LA.height});Nl.shapeConfigMap.set(al.USER,{width:FA.width,height:FA.height});Nl.shapeConfigMap.set(al.SUBPROCESS,{width:$A.width,height:$A.height});(function(e){NV(t,e);function t(n){var o=e.call(this,n)||this;o.adapterXmlIn=function(c){var v=MV(c);return o.adapterIn(v,o.props)},o.adapterXmlOut=function(c){var v=o.adapterOut(c,o.props);return kV(v)};var r=n.lf,s=n.props;return r.adapterIn=o.adapterXmlIn,r.adapterOut=o.adapterXmlOut,o.props=s,o}return t.pluginName="BPMNAdapter",t})(Nl);var zA=globalThis&&globalThis.__assign||function(){return zA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zA.apply(this,arguments)};globalThis&&globalThis.__read;var HA;(function(e){e.HORIZONTAL="horizontal",e.VERTICAL="vertical"})(HA||(HA={}));var BV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var UV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var GV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;globalThis&&globalThis.__read;globalThis&&globalThis.__values;var nk=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,r){o.__proto__=r}||function(o,r){for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])},e(t,n)};return function(t,n){e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),uv=globalThis&&globalThis.__assign||function(){return uv=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},uv.apply(this,arguments)},My=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s},VV={tr:"tl",lb:"tl",tl:"tr",rb:"tr",br:"bl",lt:"bl",bl:"br",rt:"br"};function WV(e){for(var t=e,n=1;n<t.length-1;){var o=My(t[n-1],2),r=o[0],s=o[1],c=My(t[n],2),v=c[0],h=c[1],g=My(t[n+1],2),_=g[0],w=g[1];r===v&&v===_||s===h&&h===w?t.splice(n,1):n++}return t}function zV(e,t,n,o){var r=[e[0],e[1]],s=[e[0],e[1]];switch(n){case"tl":return t==="tr"?(r[1]+=o,s[0]+=o):t==="lb"&&(r[0]+=o,s[1]+=o),[r,s];case"tr":return t==="tl"?(r[1]+=o,s[0]-=o):t==="rb"&&(r[0]-=o,s[1]+=o),[r,s];case"bl":return t==="br"?(r[1]-=o,s[0]+=o):t==="lt"&&(r[0]+=o,s[1]-=o),[r,s];case"br":return t==="bl"?(r[1]-=o,s[0]-=o):t==="rt"&&(r[0]-=o,s[1]-=o),[r,s];default:return[]}}function HV(e,t,n,o){var r,s="",c="";e[0]===t[0]?s=e[1]>t[1]?"t":"b":e[1]===t[1]&&(s=e[0]>t[0]?"l":"r"),t[0]===n[0]?c=t[1]>n[1]?"t":"b":t[1]===n[1]&&(c=t[0]>n[0]?"l":"r");var v=Math.min(Math.hypot(t[0]-e[0],t[1]-e[1])/2,Math.hypot(n[0]-t[0],n[1]-t[1])/2,o)||1/5*o,h=""+s+c,g=VV[h]||"-",_="L "+e[0]+" "+e[1];if(g==="-")_+="L "+t[0]+" "+t[1]+" L "+n[0]+" "+n[1];else{var w=My(zV(t,h,g,v),2),O=w[0],S=w[1];O&&S&&(_+="L "+O[0]+" "+O[1]+" Q "+t[0]+" "+t[1]+" "+S[0]+" "+S[1],r=My(S,2),t[0]=r[0],t[1]=r[1])}return _}function XV(e,t){var n=0,o="";if(e.length===2)o+="M"+e[n][0]+" "+e[n++][1]+" L "+e[n][0]+" "+e[n][1];else{for(o+="M"+e[n][0]+" "+e[n++][1];n+1<e.length;){var r=e[n-1],s=e[n],c=e[n+++1];o+=HV(r,s,c,t)}o+="L "+e[n][0]+" "+e[n][1]}return o}(function(e){nk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getEdge=function(){var n=this.props.model,o=n.points,r=n.isAnimation,s=n.arrowConfig,c=n.radius,v=c===void 0?5:c,h=n.getEdgeStyle(),g=n.getEdgeAnimationStyle(),_=WV(o.split(" ").map(function(S){return S.split(",").map(function(P){return+P})})),w=XV(_,v),O=uv(uv(uv({style:r?g:{}},h),s),{fill:"none"});return cn.h("path",uv({d:w},O))},t})(cn.PolylineEdge);(function(e){nk(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(cn.PolylineEdgeModel);var YV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;var XA=globalThis&&globalThis.__assign||function(){return XA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},XA.apply(this,arguments)},YA=globalThis&&globalThis.__assign||function(){return YA=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},YA.apply(this,arguments)},qV=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),r,s=[],c;try{for(;(t===void 0||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(v){c={error:v}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return s};globalThis&&globalThis.__spread;let A_=!1;const Vg=f_({});function rk(e,t,n,o,r,s){s||(s=(c,v)=>({nodeModel:c,graph:v})),A_&&(Vg[e]=cL(Lr({render:()=>Bp(fL,{to:n},[Bp(t,s(o,r))]),provide:()=>({getNode:()=>o,getGraph:()=>r})})))}function ok(e){A_&&delete Vg[e]}function Wg(){return A_}function KV(){return A_=!0,Lr({props:{flowId:{type:String,required:!0}},setup(e){return()=>{const t=[];return Object.keys(Vg).forEach(n=>{n.startsWith(e.flowId)&&t.push(Vg[n])}),Bp(Bo,{},t.map(n=>Bp(n)))}}})}class Qi extends ZP.view{constructor(n,o){super(n);wa(this,"isMounted");wa(this,"r");wa(this,"component");wa(this,"app");wa(this,"root");wa(this,"VueNode");wa(this,"up_node_field_dict");if(this.component=o,this.isMounted=!1,n.model.clear_next_node_field=this.clear_next_node_field.bind(this),n.model.get_up_node_field_dict=this.get_up_node_field_dict.bind(this),n.model.get_node_field_list=this.get_node_field_list.bind(this),n.model.get_up_node_field_list=this.get_up_node_field_list.bind(this),n.model.properties.noRender)delete n.model.properties.noRender;else{const c=n.graphModel.nodes.filter(v=>v.type===n.model.type).filter(v=>v.properties.stepName===n.model.properties.stepName);c.length-1>0&&r(c.length-1)}function r(s){var h;const c=s,v=n.model.properties.stepName+c;(h=n.graphModel.nodes)!=null&&h.some(g=>g.properties.stepName===v.trim())?r(c+1):n.model.properties.stepName=v}n.model.properties.config=dL[n.model.type].properties.config,n.model.properties.height&&(n.model.height=n.model.properties.height)}get_node_field_list(){var o,r,s,c;const n=[];return this.props.model.type==="start-node"&&n.push({value:"global",label:Qt("views.applicationWorkflow.variable.global"),type:"global",children:((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.globalFields)||[]}),n.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:((c=(s=this.props.model.properties)==null?void 0:s.config)==null?void 0:c.fields)||[]}),n}get_up_node_field_dict(n,o){if(!this.up_node_field_dict||!o){const r=this.props.graphModel.getNodeIncomingNode(this.props.model.id);this.up_node_field_dict=r.filter(s=>s.id!="start-node").map(s=>s.get_up_node_field_dict(!0,o)).reduce((s,c)=>({...s,...c}),{})}return n?{...this.up_node_field_dict,[this.props.model.id]:this.get_node_field_list()}:this.up_node_field_dict?this.up_node_field_dict:{}}get_up_node_field_list(n,o){const r=Object.values(this.get_up_node_field_dict(n,o)).reduce((c,v)=>[...c,...v],[]);return[...this.props.graphModel.getNodeModelById("start-node").get_node_field_list(),...r]}clear_next_node_field(n){this.props.graphModel.getNodeOutgoingNode(this.props.model.id).forEach(r=>{r.clear_next_node_field(!0)}),n&&(this.up_node_field_dict=void 0)}getAnchorShape(n){const{x:o,y:r,type:s}=n;let c=!1;return s=="left"?c=this.props.graphModel.edges.some(v=>v.targetAnchorId==n.id):c=this.props.graphModel.edges.some(v=>v.sourceAnchorId==n.id),cn.h("foreignObject",{...n,x:o-10,y:r-12,width:30,height:30},[cn.h("div",{style:{zindex:0},onClick:()=>{s=="right"&&this.props.model.openNodeMenu(n)},dangerouslySetInnerHTML:{__html:c?`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
              <g filter="url(#filter0_d_5119_232585)">
              <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="white"/>
              <path fill-rule="evenodd" clip-rule="evenodd" d="M20.9998 27.5C26.7988 27.5 31.4998 22.799 31.4998 17C31.4998 11.201 26.7988 6.49996 20.9998 6.49996C15.2008 6.49996 10.4998 11.201 10.4998 17C10.4998 22.799 15.2008 27.5 20.9998 27.5ZM33.8332 17C33.8332 24.0876 28.0875 29.8333 20.9998 29.8333C13.9122 29.8333 8.1665 24.0876 8.1665 17C8.1665 9.91231 13.9122 4.16663 20.9998 4.16663C28.0875 4.16663 33.8332 9.91231 33.8332 17Z" fill="#3370FF"/>
              </g>
              <defs>
              <filter id="filter0_d_5119_232585" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
              <feFlood flood-opacity="0" result="BackgroundImageFix"/>
              <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
              <feOffset dy="4"/>
              <feGaussianBlur stdDeviation="4"/>
              <feComposite in2="hardAlpha" operator="out"/>
              <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
              <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5119_232585"/>
              <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5119_232585" result="shape"/>
              </filter>
              </defs>
              </svg>
              `:`<svg width="100%" height="100%" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g filter="url(#filter0_d_5199_166905)">
        <path d="M20.9998 29.8333C28.0875 29.8333 33.8332 24.0876 33.8332 17C33.8332 9.91231 28.0875 4.16663 20.9998 4.16663C13.9122 4.16663 8.1665 9.91231 8.1665 17C8.1665 24.0876 13.9122 29.8333 20.9998 29.8333Z" fill="#3370FF"/>
        <path d="M19.8332 11.75C19.8332 11.4278 20.0943 11.1666 20.4165 11.1666H21.5832C21.9053 11.1666 22.1665 11.4278 22.1665 11.75V15.8333H26.2498C26.572 15.8333 26.8332 16.0945 26.8332 16.4166V17.5833C26.8332 17.9055 26.572 18.1666 26.2498 18.1666H22.1665V22.25C22.1665 22.5721 21.9053 22.8333 21.5832 22.8333H20.4165C20.0943 22.8333 19.8332 22.5721 19.8332 22.25V18.1666H15.7498C15.4277 18.1666 15.1665 17.9055 15.1665 17.5833V16.4166C15.1665 16.0945 15.4277 15.8333 15.7498 15.8333H19.8332V11.75Z" fill="white"/>
        </g>
        <defs>
        <filter id="filter0_d_5199_166905" x="-1" y="-1" width="44" height="44" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
        <feFlood flood-opacity="0" result="BackgroundImageFix"/>
        <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
        <feOffset dy="4"/>
        <feGaussianBlur stdDeviation="4"/>
        <feComposite in2="hardAlpha" operator="out"/>
        <feColorMatrix type="matrix" values="0 0 0 0 0.2 0 0 0 0 0.439216 0 0 0 0 1 0 0 0 0.1 0"/>
        <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_5199_166905"/>
        <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_5199_166905" result="shape"/>
        </filter>
        </defs>
        </svg>`}})])}setHtml(n){if(this.isMounted)this.r&&this.r.component&&(this.r.component.props.properties=this.props.model.getProperties());else{this.isMounted=!0;const o=document.createElement("div");n.appendChild(o),this.renderVueComponent(o)}}componentWillUnmount(){super.componentWillUnmount(),this.unmount()}getComponentContainer(){return this.root}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}renderVueComponent(n){var s;this.unmountVueComponent(),this.root=n;const{model:o,graphModel:r}=this.props;if(n)if(Wg())rk(this.targetId(),this.component,n,o,r);else{this.r=Bp(this.component,{properties:this.props.model.properties,nodeModel:this.props.model}),this.app=YM({render(){return this.r},provide(){return{getNode:()=>o,getGraph:()=>r}}}),this.app.use(pL,{locale:hL}),this.app.use(vL),this.app.use(yL),this.app.use(XM);for(const[c,v]of Object.entries(mL))this.app.component(c,v);(s=this.app)==null||s.mount(n)}}unmountVueComponent(){return this.app&&(this.app.unmount(),this.app=null),this.root&&(this.root.innerHTML=""),this.root}unmount(){Wg()&&ok(this.targetId()),this.unmountVueComponent()}}class ea extends ZP.model{refreshDeges(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}set_position(t){const{x:n,y:o}=t;n&&(this.x=n),o&&(this.y=o),this.refreshDeges()}getResizeOutlineStyle(){const t=super.getResizeOutlineStyle();return t.stroke="none",t}getControlPointStyle(){const t=super.getControlPointStyle();return t.stroke="none",t.fill="none",t}getNodeStyle(){return{overflow:"visible"}}getOutlineStyle(){const t=super.getOutlineStyle();return t.stroke="none",t.hover&&(t.hover.stroke="none"),t}getAnchorStyle(t){const n=super.getAnchorStyle(t);return t.type==="left"?(n.fill="red",n.hover.fill="transparent",n.hover.stroke="transpanrent",n.className="lf-hide-default"):n.fill="green",n}setHeight(t){const n=this.height,o=t+100;this.height=o,this.properties.height=o,this.move(0,(o-n)/2),this.outgoing.edges.forEach(r=>{r.updatePathByAnchor()}),this.incoming.edges.forEach(r=>{r.updatePathByAnchor()})}get_width(){var t;return((t=this.properties)==null?void 0:t.width)||340}setAttributes(){const{t}=XM.global;this.width=this.get_width();const n=(r,s)=>{const c=this.graphModel.getNodeIncomingNode(r);for(const v in c){const h=c[v];if(h.id===s)return!0;if(n(h.id,s))return!0}return!1},o={message:t("views.applicationWorkflow.tip.onlyRight"),validate:(r,s,c)=>c.type==="right"};this.sourceRules.push({message:t("views.applicationWorkflow.tip.notRecyclable"),validate:(r,s,c,v)=>!n(r.id,s.id)}),this.sourceRules.push(o),this.targetRules.push({message:t("views.applicationWorkflow.tip.onlyLeft"),validate:(r,s,c,v)=>v.type==="left"})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r}=this,s=this.properties.showNode===void 0?!0:this.properties.showNode,c=[];return this.type!==si.Base&&(this.type!==si.Start&&c.push({x:n-r/2+10,y:s?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c.push({x:n+r/2-10,y:s?o:o-15,id:`${t}_right`,type:"right"})),c}}let ZV=class extends Qi{constructor(t){super(t,I9)}};const JV={type:"ai-chat-node",model:ea,view:ZV},QV=Object.freeze(Object.defineProperty({__proto__:null,default:JV},Symbol.toStringTag,{value:"Module"})),ki=Lr({__name:"NodeCascader",props:{nodeModel:{},modelValue:{},global:{}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const o=e,r=n,s=go({set:_=>{r("update:modelValue",_)},get:()=>o.modelValue}),c=bt([]),v=_=>_.ctrlKey===!0?(_.preventDefault(),!0):(_.stopPropagation(),!0);function h(_){_&&(c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(w=>w.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0))}return t({validate:()=>{const _=o.nodeModel.get_up_node_field_list(!1,!0);if(!s.value||s.value.length===0)return Promise.reject(Qt("views.applicationWorkflow.variable.ReferencingRequired"));if(s.value.length<2)return Promise.reject(Qt("views.applicationWorkflow.variable.ReferencingError"));const w=s.value[0],O=s.value[1],S=_.find(P=>P.value===w);return S?S.children.some(P=>P.value===O)?Promise.resolve(""):(s.value=[],Promise.reject(Qt("views.applicationWorkflow.variable.NoReferencing"))):(s.value=[],Promise.reject(Qt("views.applicationWorkflow.variable.NoReferencing")))}}),Uo(()=>{c.value=o.global?o.nodeModel.get_up_node_field_list(!1,!0).filter(_=>_.value==="global"):o.nodeModel.get_up_node_field_list(!1,!0)}),(_,w)=>{const O=le("el-cascader");return Xe(),Bt(O,gL({onWheel:v,teleported:!1,options:c.value,onVisibleChange:h},_.$attrs,{modelValue:s.value,"onUpdate:modelValue":w[0]||(w[0]=S=>s.value=S),separator:" > "}),{default:U(({node:S,data:P})=>[he("span",{class:"flex align-center",onWheel:v},[(Xe(),Bt(iv(yr(av)(`${P.type}-icon`)),{class:"mr-8",size:18})),Tt($e(P.label),1)],32)]),_:1},16,["options","modelValue"])}}}),eW={class:"title-decoration-1 mb-8"},tW={class:"flex align-center"},nW={class:"mr-4"},rW=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t={question_reference_address:["start-node","question"],api_input_field_list:[],user_input_field_list:[],document_list:["start-node","document"],image_list:["start-node","image"],audio_list:["start-node","audio"]},{params:{id:n}}=Vu.config.globalProperties.$route,o=bt(),r=go({get:()=>(v.nodeModel.properties.node_data||Qe.set(v.nodeModel.properties,"node_data",t),v.nodeModel.properties.node_data),set:g=>{Qe.set(v.nodeModel.properties,"node_data",g)}});function s(g,_){const w=`${g}_list`;_?v.nodeModel.properties.node_data[w]||Qe.set(v.nodeModel.properties.node_data,w,[]):delete v.nodeModel.properties.node_data[w]}const c=()=>{if(!v.nodeModel.properties.node_data.application_id){Qe.set(v.nodeModel.properties,"status",500);return}Aa.getApplicationById(n,v.nodeModel.properties.node_data.application_id).then(g=>{const _=Qe.cloneDeep(v.nodeModel.properties.node_data.api_input_field_list),w=Qe.cloneDeep(v.nodeModel.properties.node_data.user_input_field_list);if(vg(g.data.type)){const O=g.data.work_flow.nodes[0].properties.node_data,S=Qe.cloneDeep(g.data.work_flow.nodes[0].properties.api_input_field_list),P=Qe.cloneDeep(g.data.work_flow.nodes[0].properties.user_input_field_list),A=(S||[]).map($=>{const Y=_.find(K=>K.variable==$.variable);return Y?{...$,value:Y.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});Qe.set(v.nodeModel.properties.node_data,"api_input_field_list",A);const R=(P||[]).map($=>{const Y=w.find(K=>K.field==$.field);return Y?{...$,value:Y.value,label:typeof $.label=="object"&&$.label!=null?$.label.label:$.label}:$});Qe.set(v.nodeModel.properties.node_data,"user_input_field_list",R);const D=O.file_upload_enable,N=O.file_upload_setting;D?(s("document",N.document),s("image",N.image),s("audio",N.audio)):["document_list","image_list","audio_list"].forEach($=>{delete v.nodeModel.properties.node_data[$]}),Qe.set(v.nodeModel.properties,"status",g.data.id?200:500)}}).catch(g=>{console.log(g),Qe.set(v.nodeModel.properties,"status",500)})},v=e,h=()=>{var g;return(g=o.value)==null?void 0:g.validate().catch(_=>Promise.reject({node:v.nodeModel,errMessage:_}))};return Uo(()=>{c(),Qe.set(v.nodeModel,"validate",h)}),(g,_)=>{const w=le("el-form-item"),O=le("AppIcon"),S=le("el-tooltip"),P=le("el-switch"),A=le("el-form"),R=le("el-card");return Xe(),Bt(Ji,{nodeModel:g.nodeModel},{default:U(()=>[he("h5",eW,$e(g.$t("views.applicationWorkflow.nodeSetting")),1),F(R,{shadow:"never",class:"card-never"},{default:U(()=>[F(A,{onSubmit:_[6]||(_[6]=En(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"applicationNodeFormRef",ref:o},{default:U(()=>[F(w,{label:g.$t("views.applicationWorkflow.nodes.startNode.question"),prop:"question_reference_address",rules:{message:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(ki,{ref_key:"applicationNodeFormRef",ref:o,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.question_reference_address,"onUpdate:modelValue":_[0]||(_[0]=D=>r.value.question_reference_address=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),r.value.hasOwnProperty("document_list")||"document_list"in r.value?(Xe(),Bt(w,{key:0,label:g.$t("views.problem.relateParagraph.selectDocument"),prop:"document_list",rules:{message:g.$t("views.log.documentPlaceholder"),trigger:"blur",required:!1}},{default:U(()=>[F(ki,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.log.documentPlaceholder"),modelValue:r.value.document_list,"onUpdate:modelValue":_[1]||(_[1]=D=>r.value.document_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):nr("",!0),r.value.hasOwnProperty("image_list")||"image_list"in r.value?(Xe(),Bt(w,{key:1,label:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),prop:"image_list",rules:{message:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"blur",required:!1}},{default:U(()=>[F(ki,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:r.value.image_list,"onUpdate:modelValue":_[2]||(_[2]=D=>r.value.image_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):nr("",!0),r.value.hasOwnProperty("audio_list")||"audio_list"in r.value?(Xe(),Bt(w,{key:2,label:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),trigger:"blur",required:!1}},{default:U(()=>[F(ki,{ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:r.value.audio_list,"onUpdate:modelValue":_[3]||(_[3]=D=>r.value.audio_list=D)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])):nr("",!0),(Xe(!0),Rn(Bo,null,zi(r.value.api_input_field_list,(D,N)=>(Xe(),Rn("div",{key:"api-input-"+N},[F(w,{label:D.variable,prop:"api_input_field_list."+N+".value",rules:[{required:D.is_required,message:`${g.$t("common.inputPlaceholder")}${D.variable}`,trigger:"blur"}]},{default:U(()=>[F(ki,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.api_input_field_list[N].value,"onUpdate:modelValue":$=>r.value.api_input_field_list[N].value=$},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),(Xe(!0),Rn(Bo,null,zi(r.value.user_input_field_list,(D,N)=>(Xe(),Rn("div",{key:"user-input-"+N},[F(w,{label:D.label,prop:"user_input_field_list."+N+".value",rules:[{required:D.required,message:`${g.$t("common.inputPlaceholder")}${D.label}`,trigger:"blur"}]},{default:U(()=>[F(ki,{ref_for:!0,ref:"nodeCascaderRef",nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.user_input_field_list[N].value,"onUpdate:modelValue":$=>r.value.user_input_field_list[N].value=$},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["label","prop","rules"])]))),128)),F(w,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[5]||(_[5]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",tW,[he("div",nW,[he("span",null,$e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(S,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(P,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":_[4]||(_[4]=D=>r.value.is_result=D)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class oW extends Qi{constructor(t){super(t,rW)}}const iW={type:"application-node",model:ea,view:oW},aW=Object.freeze(Object.defineProperty({__proto__:null,default:iW},Symbol.toStringTag,{value:"Module"})),lW={class:"dialog-footer"},uW=Lr({__name:"ApiFieldFormDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=bt(),s=bt(!1),c=bt(!1),v=bt({name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""}),h=f_({name:[{required:!0,message:Qt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}],variable:[{required:!0,message:Qt("dynamicsForm.paramForm.field.requiredMessage"),trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:Qt("dynamicsForm.paramForm.field.requiredMessage2"),trigger:"blur"}]}),g=bt(!1);c_(g,S=>{S||(v.value={name:"",variable:"",type:"input",is_required:!0,assignment_method:"api_input",optionList:[""],default_value:""},c.value=!1)});const _=S=>{S&&(v.value=Qe.cloneDeep(S),c.value=!0),g.value=!0},w=()=>{g.value=!1,c.value=!1},O=async S=>{S&&await S.validate(P=>{P&&o("refresh",v.value)})};return t({open:_,close:w}),(S,P)=>{const A=le("el-input"),R=le("el-form-item"),D=le("el-switch"),N=le("el-form"),$=le("el-button"),Y=le("el-dialog");return Xe(),Bt(Y,{title:c.value?S.$t("views.template.templateForm.title.editParam"):S.$t("views.template.templateForm.title.addParam"),modelValue:g.value,"onUpdate:modelValue":P[8]||(P[8]=K=>g.value=K),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":w,"append-to-body":""},{footer:U(()=>[he("span",lW,[F($,{onClick:P[6]||(P[6]=En(K=>g.value=!1,["prevent"]))},{default:U(()=>[Tt($e(S.$t("common.cancel")),1)]),_:1}),F($,{type:"primary",onClick:P[7]||(P[7]=K=>O(r.value)),loading:s.value},{default:U(()=>[Tt($e(c.value?S.$t("common.save"):S.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(N,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:h,model:v.value,"require-asterisk-position":"right"},{default:U(()=>[F(R,{label:S.$t("dynamicsForm.paramForm.field.label"),prop:"variable"},{default:U(()=>[F(A,{modelValue:v.value.variable,"onUpdate:modelValue":P[0]||(P[0]=K=>v.value.variable=K),placeholder:S.$t("dynamicsForm.paramForm.field.placeholder"),maxlength:"64","show-word-limit":"",onBlur:P[1]||(P[1]=K=>v.value.variable=v.value.variable.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),F(R,{label:S.$t("dynamicsForm.paramForm.required.label"),onClick:P[3]||(P[3]=En(()=>{},["prevent"]))},{default:U(()=>[F(D,{size:"small",modelValue:v.value.is_required,"onUpdate:modelValue":P[2]||(P[2]=K=>v.value.is_required=K)},null,8,["modelValue"])]),_:1},8,["label"]),F(R,{label:S.$t("dynamicsForm.default.label"),prop:"default_value",rules:{required:v.value.is_required,message:S.$t("dynamicsForm.default.placeholder"),trigger:"blur"}},{default:U(()=>[F(A,{modelValue:v.value.default_value,"onUpdate:modelValue":P[4]||(P[4]=K=>v.value.default_value=K),placeholder:S.$t("dynamicsForm.default.placeholder"),onBlur:P[5]||(P[5]=K=>v.value.name=v.value.name.trim())},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),sW={class:"flex-between mb-16"},cW={class:"lighter"},fW=["title"],dW=["title"],pW={class:"mr-4"},hW=Lr({__name:"ApiInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=bt(),o=bt(null),r=bt(),s=bt([]);function c(_,w){typeof w<"u"&&(o.value=w),r.value.open(_)}function v(_){s.value.splice(_,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function h(_){for(let O=0;O<s.value.length;O++)if(s.value[O].variable===_.variable&&o.value!==O){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}let w=t.nodeModel.properties.user_input_field_list;for(let O=0;O<w.length;O++)if(w[O].field===_.variable){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+_.variable);return}o.value!==null?s.value.splice(o.value,1,_):s.value.push(_),o.value=null,r.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),g()}function g(){if(!n.value)return;const w=n.value.$el.querySelector(".el-table__body-wrapper tbody");w&&Vw.create(w,{animation:150,ghostClass:"ghost-row",onEnd:O=>{if(O.oldIndex===void 0||O.newIndex===void 0)return;const S=[...s.value],[P]=S.splice(O.oldIndex,1);S.splice(O.newIndex,0,P),s.value=S,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Uo(()=>{t.nodeModel.properties.api_input_field_list?s.value.push(...t.nodeModel.properties.api_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(_=>_.assignment_method==="api_input").forEach(_=>{s.value.push(_)}),Qe.set(t.nodeModel.properties,"api_input_field_list",s)}),(_,w)=>{var K;const O=le("Plus"),S=le("el-icon"),P=le("el-button"),A=le("el-table-column"),R=le("el-switch"),D=le("EditPen"),N=le("el-tooltip"),$=le("Delete"),Y=le("el-table");return Xe(),Rn(Bo,null,[he("div",sW,[he("h5",cW,$e(_.$t("views.template.templateForm.title.apiParamPassing")),1),F(P,{link:"",type:"primary",onClick:w[0]||(w[0]=X=>c())},{default:U(()=>[F(S,{class:"mr-4"},{default:U(()=>[F(O)]),_:1}),Tt(" "+$e(_.$t("common.add")),1)]),_:1})]),((K=t.nodeModel.properties.api_input_field_list)==null?void 0:K.length)>0?(Xe(),Bt(Y,{key:0,data:t.nodeModel.properties.api_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[F(A,{prop:"variable",label:_.$t("dynamicsForm.paramForm.field.label")},{default:U(({row:X})=>[he("span",{class:"ellipsis-1",title:X.variable},$e(X.variable),9,fW)]),_:1},8,["label"]),F(A,{prop:"default_value",label:_.$t("dynamicsForm.default.label")},{default:U(({row:X})=>[he("span",{class:"ellipsis-1",title:X.default_value},$e(X.default_value),9,dW)]),_:1},8,["label"]),F(A,{label:_.$t("common.required")},{default:U(({row:X})=>[he("div",{onClick:w[1]||(w[1]=En(()=>{},["stop"]))},[F(R,{disabled:"",size:"small",modelValue:X.is_required,"onUpdate:modelValue":te=>X.is_required=te},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(A,{label:_.$t("common.operation"),align:"left",width:"90"},{default:U(({row:X,$index:te})=>[he("span",pW,[F(N,{effect:"dark",content:_.$t("common.modify"),placement:"top"},{default:U(()=>[F(P,{type:"primary",text:"",onClick:En(W=>c(X,te),["stop"])},{default:U(()=>[F(S,null,{default:U(()=>[F(D)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(N,{effect:"dark",content:_.$t("common.delete"),placement:"top"},{default:U(()=>[F(P,{type:"primary",text:"",onClick:W=>v(te)},{default:U(()=>[F(S,null,{default:U(()=>[F($)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):nr("",!0),F(uW,{ref_key:"ApiFieldFormDialogRef",ref:r,onRefresh:h},null,512)],64)}}}),vW={class:"dialog-footer"},yW=Lr({__name:"UserInputTitleDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=bt(),s=bt(!1),c=bt({title:Qt("chat.userInput")}),v=f_({title:[{required:!0,message:Qt("dynamicsForm.paramForm.name.requiredMessage"),trigger:"blur"}]}),h=bt(!1),g=O=>{O&&(c.value=Qe.cloneDeep(O)),h.value=!0},_=()=>{h.value=!1},w=async O=>{O&&await O.validate(S=>{S&&o("refresh",c.value)})};return t({open:g,close:_}),(O,S)=>{const P=le("el-input"),A=le("el-form-item"),R=le("el-form"),D=le("el-button"),N=le("el-dialog");return Xe(),Bt(N,{title:O.$t("common.setting"),modelValue:h.value,"onUpdate:modelValue":S[4]||(S[4]=$=>h.value=$),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:U(()=>[he("span",vW,[F(D,{onClick:S[2]||(S[2]=En($=>h.value=!1,["prevent"]))},{default:U(()=>[Tt($e(O.$t("common.cancel")),1)]),_:1}),F(D,{type:"primary",onClick:S[3]||(S[3]=$=>w(r.value)),loading:s.value},{default:U(()=>[Tt($e(O.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(R,{"label-position":"top",ref_key:"fieldFormRef",ref:r,rules:v,model:c.value,"require-asterisk-position":"right"},{default:U(()=>[F(A,{label:O.$t("common.title"),prop:"title"},{default:U(()=>[F(P,{modelValue:c.value.title,"onUpdate:modelValue":S[0]||(S[0]=$=>c.value.title=$),maxlength:"64","show-word-limit":"",onBlur:S[1]||(S[1]=$=>c.value.title=c.value.title.trim())},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["rules","model"])]),_:1},8,["title","modelValue"])}}}),mW={class:"flex-between mb-16"},gW=["title"],_W={class:"ml-4"},bW=["title"],wW={key:0},EW=["title"],OW={key:1},xW=["title"],SW=["title"],AW={class:"mr-4"},TW=Lr({__name:"UserInputFieldTable",props:{nodeModel:{}},setup(e){const t=e,n=bt(),o=bt(),r=bt(),s=bt([]),c=bt({title:Qt("chat.userInput")});function v(P,A){o.value.open(P,A)}function h(){r.value.open(c.value)}function g(P){s.value.splice(P,1),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function _(P,A){for(let D=0;D<s.value.length;D++)if(s.value[D].field===P.field&&A!==D){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}let R=t.nodeModel.properties.api_input_field_list;for(let D=0;D<R.length;D++)if(R[D].variable===P.field){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+P.field);return}A!==null?s.value.splice(A,1,P):s.value.push(P),o.value.close(),t.nodeModel.graphModel.eventCenter.emit("refreshFieldList"),S()}function w(P){c.value=P,r.value.close()}const O=P=>{var A;if(P.input_type==="PasswordInput")return"******";if(P.default_value){const R=(A=P.option_list)==null?void 0:A.filter(D=>P.default_value.indexOf(D.value)>-1).map(D=>D.label).join(",");return R||P.default_value}if(P.default_value!==void 0)return P.default_value};function S(){if(!n.value)return;const A=n.value.$el.querySelector(".el-table__body-wrapper tbody");A&&Vw.create(A,{animation:150,ghostClass:"ghost-row",onEnd:R=>{if(R.oldIndex===void 0||R.newIndex===void 0)return;const D=[...s.value],[N]=D.splice(R.oldIndex,1);D.splice(R.newIndex,0,N),s.value=D,t.nodeModel.graphModel.eventCenter.emit("refreshFieldList")}})}return Uo(()=>{t.nodeModel.properties.user_input_field_list?s.value.push(...t.nodeModel.properties.user_input_field_list):t.nodeModel.properties.input_field_list&&t.nodeModel.properties.input_field_list.filter(P=>P.assignment_method==="user_input").forEach(P=>{s.value.push(P)}),s.value.forEach((P,A)=>{switch(P.label=P.label||P.name,P.field=P.field||P.variable,P.required=P.required||P.is_required,P.type){case"input":P.input_type="TextInput";break;case"select":P.input_type="SingleSelect";break;case"date":P.input_type="DatePicker";break}}),Qe.set(t.nodeModel.properties,"user_input_field_list",s),t.nodeModel.properties.user_input_config&&(c.value=t.nodeModel.properties.user_input_config),Qe.set(t.nodeModel.properties,"user_input_config",c),S()}),(P,A)=>{var q;const R=le("Setting"),D=le("el-icon"),N=le("el-button"),$=le("Plus"),Y=le("el-table-column"),K=le("el-tag"),X=le("el-switch"),te=le("EditPen"),W=le("el-tooltip"),C=le("Delete"),G=le("el-table");return Xe(),Rn(Bo,null,[he("div",mW,[he("h5",{class:"break-all ellipsis lighter",style:{"max-width":"80%"},title:c.value.title},$e(c.value.title),9,gW),he("div",null,[F(N,{type:"primary",link:"",onClick:h},{default:U(()=>[F(D,null,{default:U(()=>[F(R)]),_:1})]),_:1}),he("span",_W,[F(N,{link:"",type:"primary",onClick:A[0]||(A[0]=z=>v())},{default:U(()=>[F(D,{class:"mr-4"},{default:U(()=>[F($)]),_:1}),Tt(" "+$e(P.$t("common.add")),1)]),_:1})])])]),((q=t.nodeModel.properties.user_input_field_list)==null?void 0:q.length)>0?(Xe(),Bt(G,{key:0,data:t.nodeModel.properties.user_input_field_list,class:"mb-16",ref_key:"tableRef",ref:n,"row-key":"field"},{default:U(()=>[F(Y,{prop:"field",label:P.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:z})=>[he("span",{title:z.field,class:"ellipsis-1"},$e(z.field),9,bW)]),_:1},8,["label"]),F(Y,{prop:"label",label:P.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:z})=>[z.label&&z.label.input_type==="TooltipLabel"?(Xe(),Rn("span",wW,[he("span",{title:z.label.label,class:"ellipsis-1"},$e(z.label.label),9,EW)])):(Xe(),Rn("span",OW,[he("span",{title:z.label,class:"ellipsis-1"},$e(z.label),9,xW)]))]),_:1},8,["label"]),F(Y,{label:P.$t("dynamicsForm.paramForm.input_type.label"),width:"95"},{default:U(({row:z})=>[z.input_type==="TextInput"?(Xe(),Bt(K,{key:0,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.TextInput")),1)]),_:1})):nr("",!0),z.input_type==="PasswordInput"?(Xe(),Bt(K,{key:1,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.PasswordInput")),1)]),_:1})):nr("",!0),z.input_type==="Slider"?(Xe(),Bt(K,{key:2,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.Slider")),1)]),_:1})):nr("",!0),z.input_type==="SwitchInput"?(Xe(),Bt(K,{key:3,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.SwitchInput")),1)]),_:1})):nr("",!0),z.input_type==="SingleSelect"?(Xe(),Bt(K,{key:4,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.SingleSelect")),1)]),_:1})):nr("",!0),z.input_type==="MultiSelect"?(Xe(),Bt(K,{key:5,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.MultiSelect")),1)]),_:1})):nr("",!0),z.input_type==="RadioCard"?(Xe(),Bt(K,{key:6,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.RadioCard")),1)]),_:1})):nr("",!0),z.input_type==="DatePicker"?(Xe(),Bt(K,{key:7,type:"info",class:"info-tag"},{default:U(()=>[Tt($e(P.$t("dynamicsForm.input_type_list.DatePicker")),1)]),_:1})):nr("",!0)]),_:1},8,["label"]),F(Y,{prop:"default_value",label:P.$t("dynamicsForm.default.label")},{default:U(({row:z})=>[he("span",{title:z.default_value,class:"ellipsis-1"},$e(O(z)),9,SW)]),_:1},8,["label"]),F(Y,{label:P.$t("common.required")},{default:U(({row:z})=>[he("div",{onClick:A[1]||(A[1]=En(()=>{},["stop"]))},[F(X,{disabled:"",size:"small",modelValue:z.required,"onUpdate:modelValue":Z=>z.required=Z},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(Y,{label:P.$t("common.operation"),align:"left",width:"90"},{default:U(({row:z,$index:Z})=>[he("span",AW,[F(W,{effect:"dark",content:P.$t("common.modify"),placement:"top"},{default:U(()=>[F(N,{type:"primary",text:"",onClick:En(me=>v(z,Z),["stop"])},{default:U(()=>[F(D,null,{default:U(()=>[F(te)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(W,{effect:"dark",content:P.$t("common.delete"),placement:"top"},{default:U(()=>[F(N,{type:"primary",text:"",onClick:me=>g(Z)},{default:U(()=>[F(D,null,{default:U(()=>[F(C)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):nr("",!0),F(a3,{ref_key:"UserFieldFormDialogRef",ref:o,onRefresh:_},null,512),F(yW,{ref_key:"UserInputTitleDialogRef",ref:r,onRefresh:w},null,512)],64)}}}),MW="/ui/assets/icon_file-doc-e47b0d94.svg",PW="/ui/assets/icon_file-image-b904fbaa.svg",kW="/ui/assets/icon_file-audio-4b01d312.svg",NW="/ui/assets/unknown-icon-3564bdf1.svg",RW={class:"flex-between"},jW={class:"flex align-center"},CW={class:"line-height-22 mt-4"},DW={class:"flex-between"},IW={class:"flex align-center"},LW={class:"line-height-22 mt-4"},FW={class:"flex-between"},$W={class:"flex align-center"},BW={class:"line-height-22 mt-4"},UW={class:"flex-between"},GW={class:"flex align-center"},VW={class:"line-height-22 mt-4"},WW={class:"dialog-footer"},zW=Lr({__name:"FileUploadSettingDialog",props:{nodeModel:{}},emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=e,s=bt(!1),c=bt(!1),v=bt(""),h=bt(!1),g=bt(),_=bt(),w=["TXT","MD","DOCX","HTML","CSV","XLSX","XLS","PDF"],O=["JPG","JPEG","PNG","GIF"],S=["MP3","WAV","OGG","ACC","M4A"],P=bt({maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]});function A(K){s.value=!0,Ov(()=>{P.value={...P.value,...K}})}function R(){s.value=!1}const D=K=>{P.value.otherExtensions=P.value.otherExtensions.filter(X=>X!==K)},N=()=>{c.value=!0,Ov(()=>{_.value.input.focus()})},$=()=>{if(v.value){if(v.value=v.value.toUpperCase(),P.value.otherExtensions.includes(v.value)||w.includes(v.value)||O.includes(v.value)||S.includes(v.value)){c.value=!1,v.value="",bL(Qt("common.fileUpload.existingExtensionsTip"));return}P.value.otherExtensions.push(v.value)}c.value=!1,v.value=""};async function Y(){const K=g.value;K&&await K.validate().then(()=>{const X=Qe.cloneDeep(P.value);o("refresh",X),r.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig"),s.value=!1})}return t({open:A}),(K,X)=>{const te=le("el-slider"),W=le("el-form-item"),C=le("el-text"),G=le("el-checkbox"),q=le("el-card"),z=le("el-tag"),Z=le("el-input"),me=le("el-button"),ge=le("el-space"),Re=le("el-form"),Be=le("el-dialog");return Xe(),Bt(Be,{title:K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.title"),modelValue:s.value,"onUpdate:modelValue":X[16]||(X[16]=ve=>s.value=ve),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":R,"append-to-body":"",width:"800"},{footer:U(()=>[he("span",WW,[F(me,{onClick:En(R,["prevent"])},{default:U(()=>[Tt($e(K.$t("common.cancel")),1)]),_:1}),F(me,{type:"primary",onClick:X[15]||(X[15]=ve=>Y()),loading:h.value},{default:U(()=>[Tt($e(K.$t("common.confirm")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(Re,{"label-position":"top",ref_key:"fieldFormRef",ref:g,model:P.value,"require-asterisk-position":"right"},{default:U(()=>[F(W,{label:K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.maxFiles")},{default:U(()=>[F(te,{modelValue:P.value.maxFiles,"onUpdate:modelValue":X[0]||(X[0]=ve=>P.value.maxFiles=ve),"show-input":"","show-input-controls":!1,min:1,max:10},null,8,["modelValue"])]),_:1},8,["label"]),F(W,{label:K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileLimit")},{default:U(()=>[F(te,{modelValue:P.value.fileLimit,"onUpdate:modelValue":X[1]||(X[1]=ve=>P.value.fileLimit=ve),"show-input":"","show-input-controls":!1,min:1,max:100},null,8,["modelValue"])]),_:1},8,["label"]),F(W,{label:K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.label")},{default:U(()=>[F(q,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.document?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:X[4]||(X[4]=En(ve=>P.value.document=!P.value.document,["stop"]))},{default:U(()=>[he("div",RW,[he("div",jW,[X[17]||(X[17]=he("img",{class:"mr-12",src:MW,alt:""},null,-1)),he("div",null,[he("p",CW,[Tt($e(K.$t("common.fileUpload.document"))+" ",1),F(C,{class:"color-secondary"},{default:U(()=>[Tt($e(K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.documentText")),1)]),_:1})]),he("p",null,$e(w.join("、")),1)])]),F(G,{modelValue:P.value.document,"onUpdate:modelValue":X[2]||(X[2]=ve=>P.value.document=ve),onChange:X[3]||(X[3]=ve=>P.value.document=!P.value.document)},null,8,["modelValue"])])]),_:1},8,["class"]),F(q,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.image?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:X[7]||(X[7]=En(ve=>P.value.image=!P.value.image,["stop"]))},{default:U(()=>[he("div",DW,[he("div",IW,[X[18]||(X[18]=he("img",{class:"mr-12",src:PW,alt:""},null,-1)),he("div",null,[he("p",LW,[Tt($e(K.$t("common.fileUpload.image"))+" ",1),F(C,{class:"color-secondary"},{default:U(()=>[Tt($e(K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.imageText")),1)]),_:1})]),he("p",null,$e(O.join("、")),1)])]),F(G,{modelValue:P.value.image,"onUpdate:modelValue":X[5]||(X[5]=ve=>P.value.image=ve),onChange:X[6]||(X[6]=ve=>P.value.image=!P.value.image)},null,8,["modelValue"])])]),_:1},8,["class"]),F(q,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.audio?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:X[10]||(X[10]=En(ve=>P.value.audio=!P.value.audio,["stop"]))},{default:U(()=>[he("div",FW,[he("div",$W,[X[19]||(X[19]=he("img",{class:"mr-12",src:kW,alt:""},null,-1)),he("div",null,[he("p",BW,[Tt($e(K.$t("common.fileUpload.audio"))+" ",1),F(C,{class:"color-secondary"},{default:U(()=>[Tt($e(K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.audioText")),1)]),_:1})]),he("p",null,$e(S.join("、")),1)])]),F(G,{modelValue:P.value.audio,"onUpdate:modelValue":X[8]||(X[8]=ve=>P.value.audio=ve),onChange:X[9]||(X[9]=ve=>P.value.audio=!P.value.audio)},null,8,["modelValue"])])]),_:1},8,["class"]),F(q,{shadow:"hover",class:sc(["card-checkbox cursor w-full mb-8",P.value.other?"active":""]),style:{"--el-card-padding":"8px 16px"},onClick:X[14]||(X[14]=En(ve=>P.value.other=!P.value.other,["stop"]))},{default:U(()=>[he("div",UW,[he("div",GW,[X[20]||(X[20]=he("img",{class:"mr-12",width:32,src:NW,alt:""},null,-1)),he("div",null,[he("p",VW,[Tt($e(K.$t("common.fileUpload.other"))+" ",1),F(C,{class:"color-secondary"},{default:U(()=>[Tt($e(K.$t("views.applicationWorkflow.nodes.baseNode.FileUploadSetting.fileUploadType.otherText")),1)]),_:1})]),F(ge,{wrap:"",size:2,class:"mt-4"},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(P.value.otherExtensions,ve=>(Xe(),Bt(z,{key:ve,closable:"","disable-transitions":!1,onClose:_e=>D(ve),type:"info",class:"mr-4",effect:"plain",style:{"--el-tag-border-radius":"4px","--el-tag-border-color":"var(--el-border-color)"}},{default:U(()=>[Tt($e(ve),1)]),_:2},1032,["onClose"]))),128)),c.value?(Xe(),Bt(Z,{key:0,ref_key:"InputRef",ref:_,modelValue:v.value,"onUpdate:modelValue":X[11]||(X[11]=ve=>v.value=ve),size:"small",onKeyup:_L($,["enter"]),onBlur:$},null,8,["modelValue"])):(Xe(),Bt(me,{key:1,class:"button-new-tag",size:"small",onClick:En(N,["stop"])},{default:U(()=>[Tt(" + "+$e(K.$t("common.fileUpload.addExtensions")),1)]),_:1}))]),_:1})])]),F(G,{modelValue:P.value.other,"onUpdate:modelValue":X[12]||(X[12]=ve=>P.value.other=ve),onChange:X[13]||(X[13]=ve=>P.value.other=!P.value.other)},null,8,["modelValue"])])]),_:1},8,["class"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),HW={class:"flex-between"},XW={class:"flex align-center"},YW={class:"mr-4"},qW={class:"flex-between"},KW={class:"mr-4"},ZW={class:"flex"},JW={class:"flex-between"},QW={class:"mr-4"},ez={class:"flex"},tz={class:"w-full"},nz={class:"flex-between w-full"},rz=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{params:{id:t}}=Vu.config.globalProperties.$route,n=e,o=bt(null),r=bt(null),s=bt(),c=bt(),v=bt(),h=bt(),g={name:"",desc:"",prologue:Qt("views.application.applicationForm.form.defaultPrologue")},_=C=>C.ctrlKey===!0?(C.preventDefault(),!0):(C.stopPropagation(),!0);function w(C){Qe.set(n.nodeModel.properties.node_data,"prologue",C)}const O=go({get:()=>(n.nodeModel.properties.node_data||Qe.set(n.nodeModel.properties,"node_data",g),n.nodeModel.properties.node_data),set:C=>{Qe.set(n.nodeModel.properties,"node_data",C)}}),S=bt(),P=()=>{var C;return O.value.tts_model_enable&&!O.value.tts_model_id&&O.value.tts_type==="TTS"?Promise.reject({node:n.nodeModel,errMessage:Qt("views.application.applicationForm.form.voicePlay.requiredMessage")}):O.value.stt_model_enable&&!O.value.stt_model_id?Promise.reject({node:n.nodeModel,errMessage:Qt("views.application.applicationForm.form.voiceInput.requiredMessage")}):(C=S.value)==null?void 0:C.validate().catch(G=>Promise.reject({node:n.nodeModel,errMessage:G}))};function A(){Aa.getApplicationSTTModel(t).then(C=>{o.value=Qe.groupBy(C==null?void 0:C.data,"provider")})}function R(){Aa.getApplicationTTSModel(t).then(C=>{r.value=Qe.groupBy(C==null?void 0:C.data,"provider")})}function D(){var C;O.value.tts_model_id?(C=s.value)==null||C.reset_default(O.value.tts_model_id,t):K({})}function N(){O.value.tts_model_enable||(O.value.tts_model_id="",O.value.tts_type="BROWSER")}function $(){O.value.stt_model_enable||(O.value.stt_model_id="")}const Y=()=>{var G;const C=O.value.tts_model_id;if(!C){Up(Qt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(G=s.value)==null||G.open(C,t,O.value.tts_model_params_setting)},K=C=>{O.value.tts_model_params_setting=C},X=()=>{const C={maxFiles:3,fileLimit:50,document:!0,image:!1,audio:!1,video:!1,other:!1,otherExtensions:["PPT","DOC"]};O.value.file_upload_enable&&(O.value.file_upload_setting=O.value.file_upload_setting||C),n.nodeModel.graphModel.eventCenter.emit("refreshFileUploadConfig")},te=()=>{var C;(C=h.value)==null||C.open(O.value.file_upload_setting)},W=C=>{O.value.file_upload_setting=C};return Uo(()=>{Qe.set(n.nodeModel,"validate",P),n.nodeModel.properties.node_data.tts_type||Qe.set(n.nodeModel.properties.node_data,"tts_type","BROWSER"),R(),A()}),(C,G)=>{const q=le("el-input"),z=le("el-form-item"),Z=le("MdEditorMagnify"),me=le("AppIcon"),ge=le("el-tooltip"),Re=le("Setting"),Be=le("el-icon"),ve=le("el-button"),_e=le("el-switch"),Ce=le("el-checkbox"),tt=le("ModelSelect"),gt=le("el-radio"),st=le("el-radio-group"),At=le("Operation"),jt=le("el-form");return Xe(),Bt(Ji,{nodeModel:C.nodeModel},{default:U(()=>[F(jt,{onSubmit:G[13]||(G[13]=En(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"baseNodeFormRef",ref:S},{default:U(()=>[F(z,{label:C.$t("views.applicationWorkflow.nodes.baseNode.appName.label"),prop:"name",rules:{message:yr(Qt)("views.application.applicationForm.form.appName.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(q,{modelValue:O.value.name,"onUpdate:modelValue":G[0]||(G[0]=yt=>O.value.name=yt),maxlength:"64",placeholder:yr(Qt)("views.application.applicationForm.form.appName.placeholder"),"show-word-limit":"",onBlur:G[1]||(G[1]=yt=>{var Kt;return O.value.name=(Kt=O.value.name)==null?void 0:Kt.trim()})},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),F(z,{label:C.$t("views.applicationWorkflow.nodes.baseNode.appDescription.label")},{default:U(()=>[F(q,{modelValue:O.value.desc,"onUpdate:modelValue":G[2]||(G[2]=yt=>O.value.desc=yt),placeholder:C.$t("views.application.applicationForm.form.appDescription.placeholder"),rows:3,type:"textarea",maxlength:"256","show-word-limit":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),F(z,{label:C.$t("views.application.applicationForm.form.prologue")},{default:U(()=>[F(Z,{onWheel:_,title:C.$t("views.application.applicationForm.form.prologue"),modelValue:O.value.prologue,"onUpdate:modelValue":G[3]||(G[3]=yt=>O.value.prologue=yt),style:{height:"150px"},onSubmitDialog:w},null,8,["title","modelValue"])]),_:1},8,["label"]),F(z,null,{label:U(()=>[he("div",HW,[he("div",XW,[he("span",YW,$e(C.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.label")),1),F(ge,{effect:"dark",content:C.$t("views.applicationWorkflow.nodes.baseNode.fileUpload.tooltip"),placement:"right"},{default:U(()=>[F(me,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])]),he("div",null,[O.value.file_upload_enable?(Xe(),Bt(ve,{key:0,type:"primary",link:"",onClick:te,class:"mr-4"},{default:U(()=>[F(Be,{class:"mr-4"},{default:U(()=>[F(Re)]),_:1})]),_:1})):nr("",!0),F(_e,{size:"small",modelValue:O.value.file_upload_enable,"onUpdate:modelValue":G[4]||(G[4]=yt=>O.value.file_upload_enable=yt),onChange:X},null,8,["modelValue"])])])]),_:1}),F(TW,{ref_key:"UserInputFieldTableFef",ref:c,"node-model":C.nodeModel},null,8,["node-model"]),F(hW,{ref_key:"ApiInputFieldTableFef",ref:v,"node-model":C.nodeModel},null,8,["node-model"]),F(z,null,{label:U(()=>[he("div",qW,[he("span",KW,$e(C.$t("views.application.applicationForm.form.voiceInput.label")),1),he("div",ZW,[O.value.stt_model_enable?(Xe(),Bt(Ce,{key:0,modelValue:O.value.stt_autosend,"onUpdate:modelValue":G[5]||(G[5]=yt=>O.value.stt_autosend=yt)},{default:U(()=>[Tt($e(C.$t("views.application.applicationForm.form.voiceInput.autoSend")),1)]),_:1},8,["modelValue"])):nr("",!0),F(_e,{class:"ml-8",size:"small",modelValue:O.value.stt_model_enable,"onUpdate:modelValue":G[6]||(G[6]=yt=>O.value.stt_model_enable=yt),onChange:$},null,8,["modelValue"])])])]),default:U(()=>[Pl(F(tt,{onWheel:_,modelValue:O.value.stt_model_id,"onUpdate:modelValue":G[7]||(G[7]=yt=>O.value.stt_model_id=yt),placeholder:C.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:o.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"]),[[wv,O.value.stt_model_enable]])]),_:1}),F(z,null,{label:U(()=>[he("div",JW,[he("span",QW,$e(C.$t("views.application.applicationForm.form.voicePlay.label")),1),he("div",ez,[O.value.tts_model_enable?(Xe(),Bt(Ce,{key:0,modelValue:O.value.tts_autoplay,"onUpdate:modelValue":G[8]||(G[8]=yt=>O.value.tts_autoplay=yt)},{default:U(()=>[Tt($e(C.$t("views.application.applicationForm.form.voicePlay.autoPlay")),1)]),_:1},8,["modelValue"])):nr("",!0),F(_e,{class:"ml-8",size:"small",modelValue:O.value.tts_model_enable,"onUpdate:modelValue":G[9]||(G[9]=yt=>O.value.tts_model_enable=yt),onChange:N},null,8,["modelValue"])])])]),default:U(()=>[he("div",tz,[Pl(F(st,{modelValue:O.value.tts_type,"onUpdate:modelValue":G[10]||(G[10]=yt=>O.value.tts_type=yt)},{default:U(()=>[F(gt,{label:C.$t("views.application.applicationForm.form.voicePlay.browser"),value:"BROWSER"},null,8,["label"]),F(gt,{label:C.$t("views.application.applicationForm.form.voicePlay.tts"),value:"TTS"},null,8,["label"])]),_:1},8,["modelValue"]),[[wv,O.value.tts_model_enable]])]),he("div",nz,[O.value.tts_type==="TTS"&&O.value.tts_model_enable?(Xe(),Bt(tt,{key:0,onWheel:_,modelValue:O.value.tts_model_id,"onUpdate:modelValue":G[11]||(G[11]=yt=>O.value.tts_model_id=yt),placeholder:C.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:r.value,onChange:G[12]||(G[12]=yt=>D()),showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])):nr("",!0),O.value.tts_type==="TTS"&&O.value.tts_model_enable?(Xe(),Bt(ve,{key:1,onClick:Y,disabled:!O.value.tts_model_id,class:"ml-8"},{default:U(()=>[F(Be,null,{default:U(()=>[F(Be,null,{default:U(()=>[F(At)]),_:1})]),_:1})]),_:1},8,["disabled"])):nr("",!0)])]),_:1})]),_:1},8,["model"]),F(ZM,{ref_key:"TTSModeParamSettingDialogRef",ref:s,onRefresh:K},null,512),F(zW,{ref_key:"FileUploadSettingDialogRef",ref:h,"node-model":C.nodeModel,onRefresh:W},null,8,["node-model"])]),_:1},8,["nodeModel"])}}});const oz=Rv(rz,[["__scopeId","data-v-03a19435"]]);class iz extends Qi{constructor(t){super(t,oz)}}class az extends ea{constructor(t,n){super(t,n)}get_width(){return 600}}const lz={type:"base-node",model:az,view:iz},uz=Object.freeze(Object.defineProperty({__proto__:null,default:lz},Symbol.toStringTag,{value:"Module"})),sz="/ui/assets/sort-e73e69bf.svg";var cz=Object.defineProperty,zg=Object.getOwnPropertySymbols,ik=Object.prototype.hasOwnProperty,ak=Object.prototype.propertyIsEnumerable,qA=(e,t,n)=>t in e?cz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,sv=(e,t)=>{for(var n in t||(t={}))ik.call(t,n)&&qA(e,n,t[n]);if(zg)for(var n of zg(t))ak.call(t,n)&&qA(e,n,t[n]);return e},lk=(e,t)=>{var n={};for(var o in e)ik.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&zg)for(var o of zg(e))t.indexOf(o)<0&&ak.call(e,o)&&(n[o]=e[o]);return n};const uk="[vue-draggable-plus]: ";function fz(e){console.warn(uk+e)}function dz(e){console.error(uk+e)}function KA(e,t,n){return n>=0&&n<e.length&&e.splice(n,0,e.splice(t,1)[0]),e}function pz(e){return e.replace(/-(\w)/g,(t,n)=>n?n.toUpperCase():"")}function hz(e){return Object.keys(e).reduce((t,n)=>(typeof e[n]<"u"&&(t[pz(n)]=e[n]),t),{})}function ZA(e,t){return Array.isArray(e)&&e.splice(t,1),e}function JA(e,t,n){return Array.isArray(e)&&e.splice(t,0,n),e}function vz(e){return typeof e>"u"}function yz(e){return typeof e=="string"}function QA(e,t,n){const o=e.children[n];e.insertBefore(t,o)}function P1(e){e.parentNode&&e.parentNode.removeChild(e)}function mz(e,t=document){var n;let o=null;return typeof(t==null?void 0:t.querySelector)=="function"?o=(n=t==null?void 0:t.querySelector)==null?void 0:n.call(t,e):o=document.querySelector(e),o||fz(`Element not found: ${e}`),o}function gz(e,t,n=null){return function(...o){return e.apply(n,o),t.apply(n,o)}}function _z(e,t){const n=sv({},e);return Object.keys(t).forEach(o=>{n[o]?n[o]=gz(e[o],t[o]):n[o]=t[o]}),n}function bz(e){return e instanceof HTMLElement}function eT(e,t){Object.keys(e).forEach(n=>{t(n,e[n])})}function wz(e){return e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97)}const Ez=Object.assign;/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function tT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function dc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(n),!0).forEach(function(o){Oz(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tT(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function bg(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?bg=function(t){return typeof t}:bg=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bg(e)}function Oz(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tf(){return Tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Tf.apply(this,arguments)}function xz(e,t){if(e==null)return{};var n={},o=Object.keys(e),r,s;for(s=0;s<o.length;s++)r=o[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function Sz(e,t){if(e==null)return{};var n=xz(e,t),o,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)o=s[r],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var Az="1.15.2";function xf(e){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(e)}var Nf=xf(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),em=xf(/Edge/i),nT=xf(/firefox/i),Py=xf(/safari/i)&&!xf(/chrome/i)&&!xf(/android/i),sk=xf(/iP(ad|od|hone)/i),ck=xf(/chrome/i)&&xf(/android/i),fk={capture:!1,passive:!1};function fo(e,t,n){e.addEventListener(t,n,!Nf&&fk)}function oo(e,t,n){e.removeEventListener(t,n,!Nf&&fk)}function Hg(e,t){if(t){if(t[0]===">"&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Tz(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function vs(e,t,n,o){if(e){n=n||document;do{if(t!=null&&(t[0]===">"?e.parentNode===n&&Hg(e,t):Hg(e,t))||o&&e===n)return e;if(e===n)break}while(e=Tz(e))}return null}var rT=/\s+/g;function ru(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(rT," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(rT," ")}}function br(e,t,n){var o=e&&e.style;if(o){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in o)&&t.indexOf("webkit")===-1&&(t="-webkit-"+t),o[t]=n+(typeof n=="string"?"":"px")}}function hv(e,t){var n="";if(typeof e=="string")n=e;else do{var o=br(e,"transform");o&&o!=="none"&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function dk(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,s=o.length;if(n)for(;r<s;r++)n(o[r],r);return o}return[]}function cc(){var e=document.scrollingElement;return e||document.documentElement}function Wi(e,t,n,o,r){if(!(!e.getBoundingClientRect&&e!==window)){var s,c,v,h,g,_,w;if(e!==window&&e.parentNode&&e!==cc()?(s=e.getBoundingClientRect(),c=s.top,v=s.left,h=s.bottom,g=s.right,_=s.height,w=s.width):(c=0,v=0,h=window.innerHeight,g=window.innerWidth,_=window.innerHeight,w=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!Nf))do if(r&&r.getBoundingClientRect&&(br(r,"transform")!=="none"||n&&br(r,"position")!=="static")){var O=r.getBoundingClientRect();c-=O.top+parseInt(br(r,"border-top-width")),v-=O.left+parseInt(br(r,"border-left-width")),h=c+s.height,g=v+s.width;break}while(r=r.parentNode);if(o&&e!==window){var S=hv(r||e),P=S&&S.a,A=S&&S.d;S&&(c/=A,v/=P,w/=P,_/=A,h=c+_,g=v+w)}return{top:c,left:v,bottom:h,right:g,width:w,height:_}}}function oT(e,t,n){for(var o=Rd(e,!0),r=Wi(e)[t];o;){var s=Wi(o)[n],c=void 0;if(c=r>=s,!c)return o;if(o===cc())break;o=Rd(o,!1)}return!1}function Sv(e,t,n,o){for(var r=0,s=0,c=e.children;s<c.length;){if(c[s].style.display!=="none"&&c[s]!==wr.ghost&&(o||c[s]!==wr.dragged)&&vs(c[s],n.draggable,e,!1)){if(r===t)return c[s];r++}s++}return null}function EE(e,t){for(var n=e.lastElementChild;n&&(n===wr.ghost||br(n,"display")==="none"||t&&!Hg(n,t));)n=n.previousElementSibling;return n||null}function Cu(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!=="TEMPLATE"&&e!==wr.clone&&(!t||Hg(e,t))&&n++;return n}function iT(e){var t=0,n=0,o=cc();if(e)do{var r=hv(e),s=r.a,c=r.d;t+=e.scrollLeft*s,n+=e.scrollTop*c}while(e!==o&&(e=e.parentNode));return[t,n]}function Mz(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n)}return-1}function Rd(e,t){if(!e||!e.getBoundingClientRect)return cc();var n=e,o=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=br(n);if(n.clientWidth<n.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return cc();if(o||t)return n;o=!0}}while(n=n.parentNode);return cc()}function Pz(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function k1(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ky;function pk(e,t){return function(){if(!ky){var n=arguments,o=this;n.length===1?e.call(o,n[0]):e.apply(o,n),ky=setTimeout(function(){ky=void 0},t)}}}function kz(){clearTimeout(ky),ky=void 0}function hk(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function vk(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function yk(e,t,n){var o={};return Array.from(e.children).forEach(function(r){var s,c,v,h;if(!(!vs(r,t.draggable,e,!1)||r.animated||r===n)){var g=Wi(r);o.left=Math.min((s=o.left)!==null&&s!==void 0?s:1/0,g.left),o.top=Math.min((c=o.top)!==null&&c!==void 0?c:1/0,g.top),o.right=Math.max((v=o.right)!==null&&v!==void 0?v:-1/0,g.right),o.bottom=Math.max((h=o.bottom)!==null&&h!==void 0?h:-1/0,g.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var iu="Sortable"+new Date().getTime();function Nz(){var e=[],t;return{captureAnimationState:function(){if(e=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(o){if(!(br(o,"display")==="none"||o===wr.ghost)){e.push({target:o,rect:Wi(o)});var r=dc({},e[e.length-1].rect);if(o.thisAnimationDuration){var s=hv(o,!0);s&&(r.top-=s.f,r.left-=s.e)}o.fromRect=r}})}},addAnimationState:function(n){e.push(n)},removeAnimationState:function(n){e.splice(Mz(e,{target:n}),1)},animateAll:function(n){var o=this;if(!this.options.animation){clearTimeout(t),typeof n=="function"&&n();return}var r=!1,s=0;e.forEach(function(c){var v=0,h=c.target,g=h.fromRect,_=Wi(h),w=h.prevFromRect,O=h.prevToRect,S=c.rect,P=hv(h,!0);P&&(_.top-=P.f,_.left-=P.e),h.toRect=_,h.thisAnimationDuration&&k1(w,_)&&!k1(g,_)&&(S.top-_.top)/(S.left-_.left)===(g.top-_.top)/(g.left-_.left)&&(v=jz(S,w,O,o.options)),k1(_,g)||(h.prevFromRect=g,h.prevToRect=_,v||(v=o.options.animation),o.animate(h,S,_,v)),v&&(r=!0,s=Math.max(s,v),clearTimeout(h.animationResetTimer),h.animationResetTimer=setTimeout(function(){h.animationTime=0,h.prevFromRect=null,h.fromRect=null,h.prevToRect=null,h.thisAnimationDuration=null},v),h.thisAnimationDuration=v)}),clearTimeout(t),r?t=setTimeout(function(){typeof n=="function"&&n()},s):typeof n=="function"&&n(),e=[]},animate:function(n,o,r,s){if(s){br(n,"transition",""),br(n,"transform","");var c=hv(this.el),v=c&&c.a,h=c&&c.d,g=(o.left-r.left)/(v||1),_=(o.top-r.top)/(h||1);n.animatingX=!!g,n.animatingY=!!_,br(n,"transform","translate3d("+g+"px,"+_+"px,0)"),this.forRepaintDummy=Rz(n),br(n,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),br(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){br(n,"transition",""),br(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},s)}}}}function Rz(e){return e.offsetWidth}function jz(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}var qh=[],N1={initializeByDefault:!0},tm={mount:function(e){for(var t in N1)N1.hasOwnProperty(t)&&!(t in e)&&(e[t]=N1[t]);qh.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),qh.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=e+"Global";qh.forEach(function(s){t[s.pluginName]&&(t[s.pluginName][r]&&t[s.pluginName][r](dc({sortable:t},n)),t.options[s.pluginName]&&t[s.pluginName][e]&&t[s.pluginName][e](dc({sortable:t},n)))})},initializePlugins:function(e,t,n,o){qh.forEach(function(c){var v=c.pluginName;if(!(!e.options[v]&&!c.initializeByDefault)){var h=new c(e,t,e.options);h.sortable=e,h.options=e.options,e[v]=h,Tf(n,h.defaults)}});for(var r in e.options)if(e.options.hasOwnProperty(r)){var s=this.modifyOption(e,r,e.options[r]);typeof s<"u"&&(e.options[r]=s)}},getEventProperties:function(e,t){var n={};return qh.forEach(function(o){typeof o.eventProperties=="function"&&Tf(n,o.eventProperties.call(t[o.pluginName],e))}),n},modifyOption:function(e,t,n){var o;return qh.forEach(function(r){e[r.pluginName]&&r.optionListeners&&typeof r.optionListeners[t]=="function"&&(o=r.optionListeners[t].call(e[r.pluginName],n))}),o}};function Cz(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,s=e.cloneEl,c=e.toEl,v=e.fromEl,h=e.oldIndex,g=e.newIndex,_=e.oldDraggableIndex,w=e.newDraggableIndex,O=e.originalEvent,S=e.putSortable,P=e.extraEventProperties;if(t=t||n&&n[iu],!!t){var A,R=t.options,D="on"+o.charAt(0).toUpperCase()+o.substr(1);window.CustomEvent&&!Nf&&!em?A=new CustomEvent(o,{bubbles:!0,cancelable:!0}):(A=document.createEvent("Event"),A.initEvent(o,!0,!0)),A.to=c||n,A.from=v||n,A.item=r||n,A.clone=s,A.oldIndex=h,A.newIndex=g,A.oldDraggableIndex=_,A.newDraggableIndex=w,A.originalEvent=O,A.pullMode=S?S.lastPutMode:void 0;var N=dc(dc({},P),tm.getEventProperties(o,t));for(var $ in N)A[$]=N[$];n&&n.dispatchEvent(A),R[D]&&R[D].call(t,A)}}var Dz=["evt"],Ml=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=n.evt,r=Sz(n,Dz);tm.pluginEvent.bind(wr)(e,t,dc({dragEl:vn,parentEl:Ei,ghostEl:Tr,rootEl:ui,nextEl:Dp,lastDownEl:wg,cloneEl:vi,cloneHidden:Nd,dragStarted:_y,putSortable:Oa,activeSortable:wr.active,originalEvent:o,oldIndex:cv,oldDraggableIndex:Ny,newIndex:ou,newDraggableIndex:kd,hideGhostForTarget:bk,unhideGhostForTarget:wk,cloneNowHidden:function(){Nd=!0},cloneNowShown:function(){Nd=!1},dispatchSortableEvent:function(s){il({sortable:t,name:s,originalEvent:o})}},r))};function il(e){Cz(dc({putSortable:Oa,cloneEl:vi,targetEl:vn,rootEl:ui,oldIndex:cv,oldDraggableIndex:Ny,newIndex:ou,newDraggableIndex:kd},e))}var vn,Ei,Tr,ui,Dp,wg,vi,Nd,cv,ou,Ny,kd,lg,Oa,ev=!1,Xg=!1,Yg=[],Rp,hs,R1,j1,aT,lT,_y,Kh,Ry,jy=!1,ug=!1,Eg,Ba,C1=[],_w=!1,qg=[],T_=typeof document<"u",sg=sk,uT=em||Nf?"cssFloat":"float",Iz=T_&&!ck&&!sk&&"draggable"in document.createElement("div"),mk=function(){if(T_){if(Nf)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"}}(),gk=function(e,t){var n=br(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Sv(e,0,t),s=Sv(e,1,t),c=r&&br(r),v=s&&br(s),h=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+Wi(r).width,g=v&&parseInt(v.marginLeft)+parseInt(v.marginRight)+Wi(s).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&c.float&&c.float!=="none"){var _=c.float==="left"?"left":"right";return s&&(v.clear==="both"||v.clear===_)?"vertical":"horizontal"}return r&&(c.display==="block"||c.display==="flex"||c.display==="table"||c.display==="grid"||h>=o&&n[uT]==="none"||s&&n[uT]==="none"&&h+g>o)?"vertical":"horizontal"},Lz=function(e,t,n){var o=n?e.left:e.top,r=n?e.right:e.bottom,s=n?e.width:e.height,c=n?t.left:t.top,v=n?t.right:t.bottom,h=n?t.width:t.height;return o===c||r===v||o+s/2===c+h/2},Fz=function(e,t){var n;return Yg.some(function(o){var r=o[iu].options.emptyInsertThreshold;if(!(!r||EE(o))){var s=Wi(o),c=e>=s.left-r&&e<=s.right+r,v=t>=s.top-r&&t<=s.bottom+r;if(c&&v)return n=o}}),n},_k=function(e){function t(r,s){return function(c,v,h,g){var _=c.options.group.name&&v.options.group.name&&c.options.group.name===v.options.group.name;if(r==null&&(s||_))return!0;if(r==null||r===!1)return!1;if(s&&r==="clone")return r;if(typeof r=="function")return t(r(c,v,h,g),s)(c,v,h,g);var w=(s?c:v).options.group.name;return r===!0||typeof r=="string"&&r===w||r.join&&r.indexOf(w)>-1}}var n={},o=e.group;(!o||bg(o)!="object")&&(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},bk=function(){!mk&&Tr&&br(Tr,"display","none")},wk=function(){!mk&&Tr&&br(Tr,"display","")};T_&&!ck&&document.addEventListener("click",function(e){if(Xg)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Xg=!1,!1},!0);var jp=function(e){if(vn){e=e.touches?e.touches[0]:e;var t=Fz(e.clientX,e.clientY);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[iu]._onDragOver(n)}}},$z=function(e){vn&&vn.parentNode[iu]._isOutsideThisEl(e.target)};function wr(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Tf({},t),e[iu]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return gk(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(s,c){s.setData("Text",c.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:wr.supportPointer!==!1&&"PointerEvent"in window&&!Py,emptyInsertThreshold:5};tm.initializePlugins(this,e,n);for(var o in n)!(o in t)&&(t[o]=n[o]);_k(t);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=t.forceFallback?!1:Iz,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?fo(e,"pointerdown",this._onTapStart):(fo(e,"mousedown",this._onTapStart),fo(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(fo(e,"dragover",this),fo(e,"dragenter",this)),Yg.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Tf(this,Nz())}wr.prototype={constructor:wr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Kh=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,vn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,r=o.preventOnFilter,s=e.type,c=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,v=(c||e).target,h=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||v,g=o.filter;if(Xz(n),!vn&&!(/mousedown|pointerdown/.test(s)&&e.button!==0||o.disabled)&&!h.isContentEditable&&!(!this.nativeDraggable&&Py&&v&&v.tagName.toUpperCase()==="SELECT")&&(v=vs(v,o.draggable,n,!1),!(v&&v.animated)&&wg!==v)){if(cv=Cu(v),Ny=Cu(v,o.draggable),typeof g=="function"){if(g.call(this,e,v,this)){il({sortable:t,rootEl:h,name:"filter",targetEl:v,toEl:n,fromEl:n}),Ml("filter",t,{evt:e}),r&&e.cancelable&&e.preventDefault();return}}else if(g&&(g=g.split(",").some(function(_){if(_=vs(h,_.trim(),n,!1),_)return il({sortable:t,rootEl:_,name:"filter",targetEl:v,fromEl:n,toEl:n}),Ml("filter",t,{evt:e}),!0}),g)){r&&e.cancelable&&e.preventDefault();return}o.handle&&!vs(h,o.handle,n,!1)||this._prepareDragStart(e,c,v)}}},_prepareDragStart:function(e,t,n){var o=this,r=o.el,s=o.options,c=r.ownerDocument,v;if(n&&!vn&&n.parentNode===r){var h=Wi(n);if(ui=r,vn=n,Ei=vn.parentNode,Dp=vn.nextSibling,wg=n,lg=s.group,wr.dragged=vn,Rp={target:vn,clientX:(t||e).clientX,clientY:(t||e).clientY},aT=Rp.clientX-h.left,lT=Rp.clientY-h.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,vn.style["will-change"]="all",v=function(){if(Ml("delayEnded",o,{evt:e}),wr.eventCanceled){o._onDrop();return}o._disableDelayedDragEvents(),!nT&&o.nativeDraggable&&(vn.draggable=!0),o._triggerDragStart(e,t),il({sortable:o,name:"choose",originalEvent:e}),ru(vn,s.chosenClass,!0)},s.ignore.split(",").forEach(function(g){dk(vn,g.trim(),D1)}),fo(c,"dragover",jp),fo(c,"mousemove",jp),fo(c,"touchmove",jp),fo(c,"mouseup",o._onDrop),fo(c,"touchend",o._onDrop),fo(c,"touchcancel",o._onDrop),nT&&this.nativeDraggable&&(this.options.touchStartThreshold=4,vn.draggable=!0),Ml("delayStart",this,{evt:e}),s.delay&&(!s.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(em||Nf))){if(wr.eventCanceled){this._onDrop();return}fo(c,"mouseup",o._disableDelayedDrag),fo(c,"touchend",o._disableDelayedDrag),fo(c,"touchcancel",o._disableDelayedDrag),fo(c,"mousemove",o._delayedDragTouchMoveHandler),fo(c,"touchmove",o._delayedDragTouchMoveHandler),s.supportPointer&&fo(c,"pointermove",o._delayedDragTouchMoveHandler),o._dragStartTimer=setTimeout(v,s.delay)}else v()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){vn&&D1(vn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;oo(e,"mouseup",this._disableDelayedDrag),oo(e,"touchend",this._disableDelayedDrag),oo(e,"touchcancel",this._disableDelayedDrag),oo(e,"mousemove",this._delayedDragTouchMoveHandler),oo(e,"touchmove",this._delayedDragTouchMoveHandler),oo(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?fo(document,"pointermove",this._onTouchMove):t?fo(document,"touchmove",this._onTouchMove):fo(document,"mousemove",this._onTouchMove):(fo(vn,"dragend",this),fo(ui,"dragstart",this._onDragStart));try{document.selection?Og(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(ev=!1,ui&&vn){Ml("dragStarted",this,{evt:t}),this.nativeDraggable&&fo(document,"dragover",$z);var n=this.options;!e&&ru(vn,n.dragClass,!1),ru(vn,n.ghostClass,!0),wr.active=this,e&&this._appendGhost(),il({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(hs){this._lastX=hs.clientX,this._lastY=hs.clientY,bk();for(var e=document.elementFromPoint(hs.clientX,hs.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(hs.clientX,hs.clientY),e!==t);)t=e;if(vn.parentNode[iu]._isOutsideThisEl(e),t)do{if(t[iu]){var n=void 0;if(n=t[iu]._onDragOver({clientX:hs.clientX,clientY:hs.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);wk()}},_onTouchMove:function(e){if(Rp){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,s=Tr&&hv(Tr,!0),c=Tr&&s&&s.a,v=Tr&&s&&s.d,h=sg&&Ba&&iT(Ba),g=(r.clientX-Rp.clientX+o.x)/(c||1)+(h?h[0]-C1[0]:0)/(c||1),_=(r.clientY-Rp.clientY+o.y)/(v||1)+(h?h[1]-C1[1]:0)/(v||1);if(!wr.active&&!ev){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Tr){s?(s.e+=g-(R1||0),s.f+=_-(j1||0)):s={a:1,b:0,c:0,d:1,e:g,f:_};var w="matrix(".concat(s.a,",").concat(s.b,",").concat(s.c,",").concat(s.d,",").concat(s.e,",").concat(s.f,")");br(Tr,"webkitTransform",w),br(Tr,"mozTransform",w),br(Tr,"msTransform",w),br(Tr,"transform",w),R1=g,j1=_,hs=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Tr){var e=this.options.fallbackOnBody?document.body:ui,t=Wi(vn,!0,sg,!0,e),n=this.options;if(sg){for(Ba=e;br(Ba,"position")==="static"&&br(Ba,"transform")==="none"&&Ba!==document;)Ba=Ba.parentNode;Ba!==document.body&&Ba!==document.documentElement?(Ba===document&&(Ba=cc()),t.top+=Ba.scrollTop,t.left+=Ba.scrollLeft):Ba=cc(),C1=iT(Ba)}Tr=vn.cloneNode(!0),ru(Tr,n.ghostClass,!1),ru(Tr,n.fallbackClass,!0),ru(Tr,n.dragClass,!0),br(Tr,"transition",""),br(Tr,"transform",""),br(Tr,"box-sizing","border-box"),br(Tr,"margin",0),br(Tr,"top",t.top),br(Tr,"left",t.left),br(Tr,"width",t.width),br(Tr,"height",t.height),br(Tr,"opacity","0.8"),br(Tr,"position",sg?"absolute":"fixed"),br(Tr,"zIndex","100000"),br(Tr,"pointerEvents","none"),wr.ghost=Tr,e.appendChild(Tr),br(Tr,"transform-origin",aT/parseInt(Tr.style.width)*100+"% "+lT/parseInt(Tr.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,r=n.options;if(Ml("dragStart",this,{evt:e}),wr.eventCanceled){this._onDrop();return}Ml("setupClone",this),wr.eventCanceled||(vi=vk(vn),vi.removeAttribute("id"),vi.draggable=!1,vi.style["will-change"]="",this._hideClone(),ru(vi,this.options.chosenClass,!1),wr.clone=vi),n.cloneId=Og(function(){Ml("clone",n),!wr.eventCanceled&&(n.options.removeCloneOnHide||ui.insertBefore(vi,vn),n._hideClone(),il({sortable:n,name:"clone"}))}),!t&&ru(vn,r.dragClass,!0),t?(Xg=!0,n._loopId=setInterval(n._emulateDragOver,50)):(oo(document,"mouseup",n._onDrop),oo(document,"touchend",n._onDrop),oo(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,vn)),fo(document,"drop",n),br(vn,"transform","translateZ(0)")),ev=!0,n._dragStartId=Og(n._dragStarted.bind(n,t,e)),fo(document,"selectstart",n),_y=!0,Py&&br(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,o,r,s,c=this.options,v=c.group,h=wr.active,g=lg===v,_=c.sort,w=Oa||h,O,S=this,P=!1;if(_w)return;function A(Be,ve){Ml(Be,S,dc({evt:e,isOwner:g,axis:O?"vertical":"horizontal",revert:s,dragRect:o,targetRect:r,canSort:_,fromSortable:w,target:n,completed:D,onMove:function(_e,Ce){return cg(ui,t,vn,o,_e,Wi(_e),e,Ce)},changed:N},ve))}function R(){A("dragOverAnimationCapture"),S.captureAnimationState(),S!==w&&w.captureAnimationState()}function D(Be){return A("dragOverCompleted",{insertion:Be}),Be&&(g?h._hideClone():h._showClone(S),S!==w&&(ru(vn,Oa?Oa.options.ghostClass:h.options.ghostClass,!1),ru(vn,c.ghostClass,!0)),Oa!==S&&S!==wr.active?Oa=S:S===wr.active&&Oa&&(Oa=null),w===S&&(S._ignoreWhileAnimating=n),S.animateAll(function(){A("dragOverAnimationComplete"),S._ignoreWhileAnimating=null}),S!==w&&(w.animateAll(),w._ignoreWhileAnimating=null)),(n===vn&&!vn.animated||n===t&&!n.animated)&&(Kh=null),!c.dragoverBubble&&!e.rootEl&&n!==document&&(vn.parentNode[iu]._isOutsideThisEl(e.target),!Be&&jp(e)),!c.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),P=!0}function N(){ou=Cu(vn),kd=Cu(vn,c.draggable),il({sortable:S,name:"change",toEl:t,newIndex:ou,newDraggableIndex:kd,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=vs(n,c.draggable,t,!0),A("dragOver"),wr.eventCanceled)return P;if(vn.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||S._ignoreWhileAnimating===n)return D(!1);if(Xg=!1,h&&!c.disabled&&(g?_||(s=Ei!==ui):Oa===this||(this.lastPutMode=lg.checkPull(this,h,vn,e))&&v.checkPut(this,h,vn,e))){if(O=this._getDirection(e,n)==="vertical",o=Wi(vn),A("dragOverValid"),wr.eventCanceled)return P;if(s)return Ei=ui,R(),this._hideClone(),A("revert"),wr.eventCanceled||(Dp?ui.insertBefore(vn,Dp):ui.appendChild(vn)),D(!0);var $=EE(t,c.draggable);if(!$||Vz(e,O,this)&&!$.animated){if($===vn)return D(!1);if($&&t===e.target&&(n=$),n&&(r=Wi(n)),cg(ui,t,vn,o,n,r,e,!!n)!==!1)return R(),$&&$.nextSibling?t.insertBefore(vn,$.nextSibling):t.appendChild(vn),Ei=t,N(),D(!0)}else if($&&Gz(e,O,this)){var Y=Sv(t,0,c,!0);if(Y===vn)return D(!1);if(n=Y,r=Wi(n),cg(ui,t,vn,o,n,r,e,!1)!==!1)return R(),t.insertBefore(vn,Y),Ei=t,N(),D(!0)}else if(n.parentNode===t){r=Wi(n);var K=0,X,te=vn.parentNode!==t,W=!Lz(vn.animated&&vn.toRect||o,n.animated&&n.toRect||r,O),C=O?"top":"left",G=oT(n,"top","top")||oT(vn,"top","top"),q=G?G.scrollTop:void 0;Kh!==n&&(X=r[C],jy=!1,ug=!W&&c.invertSwap||te),K=Wz(e,n,r,O,W?1:c.swapThreshold,c.invertedSwapThreshold==null?c.swapThreshold:c.invertedSwapThreshold,ug,Kh===n);var z;if(K!==0){var Z=Cu(vn);do Z-=K,z=Ei.children[Z];while(z&&(br(z,"display")==="none"||z===Tr))}if(K===0||z===n)return D(!1);Kh=n,Ry=K;var me=n.nextElementSibling,ge=!1;ge=K===1;var Re=cg(ui,t,vn,o,n,r,e,ge);if(Re!==!1)return(Re===1||Re===-1)&&(ge=Re===1),_w=!0,setTimeout(Uz,30),R(),ge&&!me?t.appendChild(vn):n.parentNode.insertBefore(vn,ge?me:n),G&&hk(G,0,q-G.scrollTop),Ei=vn.parentNode,X!==void 0&&!ug&&(Eg=Math.abs(X-Wi(n)[C])),N(),D(!0)}if(t.contains(vn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){oo(document,"mousemove",this._onTouchMove),oo(document,"touchmove",this._onTouchMove),oo(document,"pointermove",this._onTouchMove),oo(document,"dragover",jp),oo(document,"mousemove",jp),oo(document,"touchmove",jp)},_offUpEvents:function(){var e=this.el.ownerDocument;oo(e,"mouseup",this._onDrop),oo(e,"touchend",this._onDrop),oo(e,"pointerup",this._onDrop),oo(e,"touchcancel",this._onDrop),oo(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(ou=Cu(vn),kd=Cu(vn,n.draggable),Ml("drop",this,{evt:e}),Ei=vn&&vn.parentNode,ou=Cu(vn),kd=Cu(vn,n.draggable),wr.eventCanceled){this._nulling();return}ev=!1,ug=!1,jy=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),bw(this.cloneId),bw(this._dragStartId),this.nativeDraggable&&(oo(document,"drop",this),oo(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Py&&br(document.body,"user-select",""),br(vn,"transform",""),e&&(_y&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Tr&&Tr.parentNode&&Tr.parentNode.removeChild(Tr),(ui===Ei||Oa&&Oa.lastPutMode!=="clone")&&vi&&vi.parentNode&&vi.parentNode.removeChild(vi),vn&&(this.nativeDraggable&&oo(vn,"dragend",this),D1(vn),vn.style["will-change"]="",_y&&!ev&&ru(vn,Oa?Oa.options.ghostClass:this.options.ghostClass,!1),ru(vn,this.options.chosenClass,!1),il({sortable:this,name:"unchoose",toEl:Ei,newIndex:null,newDraggableIndex:null,originalEvent:e}),ui!==Ei?(ou>=0&&(il({rootEl:Ei,name:"add",toEl:Ei,fromEl:ui,originalEvent:e}),il({sortable:this,name:"remove",toEl:Ei,originalEvent:e}),il({rootEl:Ei,name:"sort",toEl:Ei,fromEl:ui,originalEvent:e}),il({sortable:this,name:"sort",toEl:Ei,originalEvent:e})),Oa&&Oa.save()):ou!==cv&&ou>=0&&(il({sortable:this,name:"update",toEl:Ei,originalEvent:e}),il({sortable:this,name:"sort",toEl:Ei,originalEvent:e})),wr.active&&((ou==null||ou===-1)&&(ou=cv,kd=Ny),il({sortable:this,name:"end",toEl:Ei,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Ml("nulling",this),ui=vn=Ei=Tr=Dp=vi=wg=Nd=Rp=hs=_y=ou=kd=cv=Ny=Kh=Ry=Oa=lg=wr.dragged=wr.ghost=wr.clone=wr.active=null,qg.forEach(function(e){e.checked=!0}),qg.length=R1=j1=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":vn&&(this._onDragOver(e),Bz(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,o=0,r=n.length,s=this.options;o<r;o++)t=n[o],vs(t,s.draggable,this.el,!1)&&e.push(t.getAttribute(s.dataIdAttr)||Hz(t));return e},sort:function(e,t){var n={},o=this.el;this.toArray().forEach(function(r,s){var c=o.children[s];vs(c,this.options.draggable,o,!1)&&(n[r]=c)},this),t&&this.captureAnimationState(),e.forEach(function(r){n[r]&&(o.removeChild(n[r]),o.appendChild(n[r]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return vs(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var o=tm.modifyOption(this,e,t);typeof o<"u"?n[e]=o:n[e]=t,e==="group"&&_k(n)},destroy:function(){Ml("destroy",this);var e=this.el;e[iu]=null,oo(e,"mousedown",this._onTapStart),oo(e,"touchstart",this._onTapStart),oo(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(oo(e,"dragover",this),oo(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Yg.splice(Yg.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Nd){if(Ml("hideClone",this),wr.eventCanceled)return;br(vi,"display","none"),this.options.removeCloneOnHide&&vi.parentNode&&vi.parentNode.removeChild(vi),Nd=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(Nd){if(Ml("showClone",this),wr.eventCanceled)return;vn.parentNode==ui&&!this.options.group.revertClone?ui.insertBefore(vi,vn):Dp?ui.insertBefore(vi,Dp):ui.appendChild(vi),this.options.group.revertClone&&this.animate(vn,vi),br(vi,"display",""),Nd=!1}}};function Bz(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}function cg(e,t,n,o,r,s,c,v){var h,g=e[iu],_=g.options.onMove,w;return window.CustomEvent&&!Nf&&!em?h=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(h=document.createEvent("Event"),h.initEvent("move",!0,!0)),h.to=t,h.from=e,h.dragged=n,h.draggedRect=o,h.related=r||t,h.relatedRect=s||Wi(t),h.willInsertAfter=v,h.originalEvent=c,e.dispatchEvent(h),_&&(w=_.call(g,h,c)),w}function D1(e){e.draggable=!1}function Uz(){_w=!1}function Gz(e,t,n){var o=Wi(Sv(n.el,0,n.options,!0)),r=yk(n.el,n.options,Tr),s=10;return t?e.clientX<r.left-s||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-s||e.clientY<o.bottom&&e.clientX<o.left}function Vz(e,t,n){var o=Wi(EE(n.el,n.options.draggable)),r=yk(n.el,n.options,Tr),s=10;return t?e.clientX>r.right+s||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+s||e.clientX>o.right&&e.clientY>o.top}function Wz(e,t,n,o,r,s,c,v){var h=o?e.clientY:e.clientX,g=o?n.height:n.width,_=o?n.top:n.left,w=o?n.bottom:n.right,O=!1;if(!c){if(v&&Eg<g*r){if(!jy&&(Ry===1?h>_+g*s/2:h<w-g*s/2)&&(jy=!0),jy)O=!0;else if(Ry===1?h<_+Eg:h>w-Eg)return-Ry}else if(h>_+g*(1-r)/2&&h<w-g*(1-r)/2)return zz(t)}return O=O||c,O&&(h<_+g*s/2||h>w-g*s/2)?h>_+g/2?1:-1:0}function zz(e){return Cu(vn)<Cu(e)?1:-1}function Hz(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Xz(e){qg.length=0;for(var t=e.getElementsByTagName("input"),n=t.length;n--;){var o=t[n];o.checked&&qg.push(o)}}function Og(e){return setTimeout(e,0)}function bw(e){return clearTimeout(e)}T_&&fo(document,"touchmove",function(e){(wr.active||ev)&&e.cancelable&&e.preventDefault()});wr.utils={on:fo,off:oo,css:br,find:dk,is:function(e,t){return!!vs(e,t,e,!1)},extend:Pz,throttle:pk,closest:vs,toggleClass:ru,clone:vk,index:Cu,nextTick:Og,cancelNextTick:bw,detectDirection:gk,getChild:Sv};wr.get=function(e){return e[iu]};wr.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(wr.utils=dc(dc({},wr.utils),o.utils)),tm.mount(o)})};wr.create=function(e,t){return new wr(e,t)};wr.version=Az;var Vi=[],by,ww,Ew=!1,I1,L1,Kg,wy;function Yz(){function e(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var t in this)t.charAt(0)==="_"&&typeof this[t]=="function"&&(this[t]=this[t].bind(this))}return e.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?fo(document,"dragover",this._handleAutoScroll):this.options.supportPointer?fo(document,"pointermove",this._handleFallbackAutoScroll):n.touches?fo(document,"touchmove",this._handleFallbackAutoScroll):fo(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?oo(document,"dragover",this._handleAutoScroll):(oo(document,"pointermove",this._handleFallbackAutoScroll),oo(document,"touchmove",this._handleFallbackAutoScroll),oo(document,"mousemove",this._handleFallbackAutoScroll)),sT(),xg(),kz()},nulling:function(){Kg=ww=by=Ew=wy=I1=L1=null,Vi.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var o=this,r=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,c=document.elementFromPoint(r,s);if(Kg=t,n||this.options.forceAutoScrollFallback||em||Nf||Py){F1(t,this.options,c,n);var v=Rd(c,!0);Ew&&(!wy||r!==I1||s!==L1)&&(wy&&sT(),wy=setInterval(function(){var h=Rd(document.elementFromPoint(r,s),!0);h!==v&&(v=h,xg()),F1(t,o.options,h,n)},10),I1=r,L1=s)}else{if(!this.options.bubbleScroll||Rd(c,!0)===cc()){xg();return}F1(t,this.options,Rd(c,!1),!1)}}},Tf(e,{pluginName:"scroll",initializeByDefault:!0})}function xg(){Vi.forEach(function(e){clearInterval(e.pid)}),Vi=[]}function sT(){clearInterval(wy)}var F1=pk(function(e,t,n,o){if(t.scroll){var r=(e.touches?e.touches[0]:e).clientX,s=(e.touches?e.touches[0]:e).clientY,c=t.scrollSensitivity,v=t.scrollSpeed,h=cc(),g=!1,_;ww!==n&&(ww=n,xg(),by=t.scroll,_=t.scrollFn,by===!0&&(by=Rd(n,!0)));var w=0,O=by;do{var S=O,P=Wi(S),A=P.top,R=P.bottom,D=P.left,N=P.right,$=P.width,Y=P.height,K=void 0,X=void 0,te=S.scrollWidth,W=S.scrollHeight,C=br(S),G=S.scrollLeft,q=S.scrollTop;S===h?(K=$<te&&(C.overflowX==="auto"||C.overflowX==="scroll"||C.overflowX==="visible"),X=Y<W&&(C.overflowY==="auto"||C.overflowY==="scroll"||C.overflowY==="visible")):(K=$<te&&(C.overflowX==="auto"||C.overflowX==="scroll"),X=Y<W&&(C.overflowY==="auto"||C.overflowY==="scroll"));var z=K&&(Math.abs(N-r)<=c&&G+$<te)-(Math.abs(D-r)<=c&&!!G),Z=X&&(Math.abs(R-s)<=c&&q+Y<W)-(Math.abs(A-s)<=c&&!!q);if(!Vi[w])for(var me=0;me<=w;me++)Vi[me]||(Vi[me]={});(Vi[w].vx!=z||Vi[w].vy!=Z||Vi[w].el!==S)&&(Vi[w].el=S,Vi[w].vx=z,Vi[w].vy=Z,clearInterval(Vi[w].pid),(z!=0||Z!=0)&&(g=!0,Vi[w].pid=setInterval((function(){o&&this.layer===0&&wr.active._onTouchMove(Kg);var ge=Vi[this.layer].vy?Vi[this.layer].vy*v:0,Re=Vi[this.layer].vx?Vi[this.layer].vx*v:0;typeof _=="function"&&_.call(wr.dragged.parentNode[iu],Re,ge,e,Kg,Vi[this.layer].el)!=="continue"||hk(Vi[this.layer].el,Re,ge)}).bind({layer:w}),24))),w++}while(t.bubbleScroll&&O!==h&&(O=Rd(O,!1)));Ew=g}},30),Ek=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,r=e.activeSortable,s=e.dispatchSortableEvent,c=e.hideGhostForTarget,v=e.unhideGhostForTarget;if(t){var h=n||r;c();var g=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,_=document.elementFromPoint(g.clientX,g.clientY);v(),h&&!h.el.contains(_)&&(s("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function OE(){}OE.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Sv(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Ek};Tf(OE,{pluginName:"revertOnSpill"});function xE(){}xE.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,o=n||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:Ek};Tf(xE,{pluginName:"removeOnSpill"});wr.mount(new Yz);wr.mount(xE,OE);function qz(e){return e==null?e:JSON.parse(JSON.stringify(e))}function Kz(e){Gw()&&EL(e)}function Zz(e){Gw()?Uo(e):Ov(e)}let Ok=null,xk=null;function cT(e=null,t=null){Ok=e,xk=t}function Jz(){return{data:Ok,clonedData:xk}}const fT=Symbol("cloneElement");function Qz(...e){var t,n;const o=(t=Gw())==null?void 0:t.proxy;let r=null;const s=e[0];let[,c,v]=e;Array.isArray(yr(c))||(v=c,c=null);let h=null;const{immediate:g=!0,clone:_=qz,customUpdate:w}=(n=yr(v))!=null?n:{};function O(W){var C;const{from:G,oldIndex:q,item:z}=W;r=Array.from(G.childNodes);const Z=yr((C=yr(c))==null?void 0:C[q]),me=_(Z);cT(Z,me),z[fT]=me}function S(W){const C=W.item[fT];if(!vz(C)){if(P1(W.item),b1(c)){const G=[...yr(c)];c.value=JA(G,W.newDraggableIndex,C);return}JA(yr(c),W.newDraggableIndex,C)}}function P(W){const{from:C,item:G,oldIndex:q,oldDraggableIndex:z,pullMode:Z,clone:me}=W;if(QA(C,G,q),Z==="clone"){P1(me);return}if(b1(c)){const ge=[...yr(c)];c.value=ZA(ge,z);return}ZA(yr(c),z)}function A(W){if(w){w(W);return}const{from:C,item:G,oldIndex:q,oldDraggableIndex:z,newDraggableIndex:Z}=W;if(P1(G),QA(C,G,q),b1(c)){const me=[...yr(c)];c.value=KA(me,z,Z);return}KA(yr(c),z,Z)}function R(W){const{newIndex:C,oldIndex:G,from:q,to:z}=W;let Z=null;const me=C===G&&q===z;try{if(me){let ge=null;r==null||r.some((Re,Be)=>{if(ge&&(r==null?void 0:r.length)!==z.childNodes.length)return q.insertBefore(ge,Re.nextSibling),!0;const ve=z.childNodes[Be];ge=z==null?void 0:z.replaceChild(Re,ve)})}}catch(ge){Z=ge}finally{r=null}Ov(()=>{if(cT(),Z)throw Z})}const D={onUpdate:A,onStart:O,onAdd:S,onRemove:P,onEnd:R};function N(W){const C=yr(s);return W||(W=yz(C)?mz(C,o==null?void 0:o.$el):C),W&&!bz(W)&&(W=W.$el),W||dz("Root element not found"),W}function $(){var W;const C=(W=yr(v))!=null?W:{},G=lk(C,["immediate","clone"]);return eT(G,(q,z)=>{wz(q)&&(G[q]=(Z,...me)=>{const ge=Jz();return Ez(Z,ge),z(Z,...me)})}),_z(c===null?{}:D,G)}const Y=W=>{W=N(W),h&&K.destroy(),h=new wr(W,$())};c_(()=>v,()=>{h&&eT($(),(W,C)=>{h==null||h.option(W,C)})},{deep:!0});const K={option:(W,C)=>h==null?void 0:h.option(W,C),destroy:()=>{h==null||h.destroy(),h=null},save:()=>h==null?void 0:h.save(),toArray:()=>h==null?void 0:h.toArray(),closest:(...W)=>h==null?void 0:h.closest(...W)},X=()=>K==null?void 0:K.option("disabled",!0),te=()=>K==null?void 0:K.option("disabled",!1);return Zz(()=>{g&&Y()}),Kz(K.destroy),sv({start:Y,pause:X,resume:te},K)}const Ow=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],eH=["clone","animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...Ow.map(e=>`on${e.replace(/^\S/,t=>t.toUpperCase())}`)],tH=Lr({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:eH,emits:["update:modelValue",...Ow],setup(e,{slots:t,emit:n,expose:o,attrs:r}){const s=Ow.reduce((_,w)=>{const O=`on${w.replace(/^\S/,S=>S.toUpperCase())}`;return _[O]=(...S)=>n(w,...S),_},{}),c=go(()=>{const _=wL(e),w=lk(_,["modelValue"]),O=Object.entries(w).reduce((S,[P,A])=>{const R=yr(A);return R!==void 0&&(S[P]=R),S},{});return sv(sv({},s),hz(sv(sv({},r),O)))}),v=go({get:()=>e.modelValue,set:_=>n("update:modelValue",_)}),h=bt(),g=f_(Qz(e.target||h,v,c));return o(g),()=>{var _;return Bp(e.tag||"div",{ref:h},(_=t==null?void 0:t.default)==null?void 0:_.call(t,g))}}}),nH={class:"handle flex-between lighter"},rH={class:"flex align-center"},oH={key:0,class:"info"},iH={key:0,class:"mt-8"},aH=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={branch:[{conditions:[{field:[],compare:"",value:""}],id:Oy(),type:"IF",condition:"and"},{conditions:[],id:Oy(),type:"ELSE",condition:"and"}]},o=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),r=(A,R,D)=>{const $=Qe.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]).map(Y=>Y.id===R.id?{...Y,height:A.height,index:D}:Y);Qe.set(t.nodeModel.properties,"branch_condition_list",$),w(t.nodeModel.properties.node_data.branch,!0)},s=go({get:()=>(t.nodeModel.properties.node_data||(Qe.set(t.nodeModel.properties,"node_data",n),w(n.branch,!0)),t.nodeModel.properties.node_data),set:A=>{Qe.set(t.nodeModel.properties,"node_data",A)}}),c=bt(),v=bt(),h=()=>{var R;const A=[(R=c.value)==null?void 0:R.validate(),...v.value.map(D=>D.validate())];return Promise.all(A).catch(D=>Promise.reject({node:t.nodeModel,errMessage:D}))};function g(A){const{oldIndex:R,newIndex:D}=A;if(R===void 0||D===void 0)return;const N=Qe.cloneDeep(t.nodeModel.properties.node_data.branch);if(R===N.length-1||D===N.length-1)return;const $={...N[R],type:N[D].type,id:N[D].id},Y={...N[D],type:N[R].type,id:N[R].id};N[D]=$,N[R]=Y,Qe.set(t.nodeModel.properties.node_data,"branch",N)}function _(){const A=Qe.cloneDeep(t.nodeModel.properties.node_data.branch),R={conditions:[{field:[],compare:"",value:""}],type:"ELSE IF "+(A.length-1),id:Oy(),condition:"and"};A.splice(A.length-1,0,R),w(A,!0),Qe.set(t.nodeModel.properties.node_data,"branch",A)}function w(A,R){const D=Qe.cloneDeep(t.nodeModel.properties.branch_condition_list?t.nodeModel.properties.branch_condition_list:[]),N=A.map(($,Y)=>{const K=D.find(X=>X.id===$.id);if(K)return{index:Y,height:K.height,id:$.id};if(R)return{index:Y,height:12,id:$.id}}).filter($=>$);Qe.set(t.nodeModel.properties,"branch_condition_list",N),t.nodeModel.refreshBranch()}function O(A){const R=Qe.cloneDeep(t.nodeModel.properties.node_data.branch);R[A].conditions.push({field:[],compare:"",value:""}),Qe.set(t.nodeModel.properties.node_data,"branch",R)}function S(A,R){const D=Qe.cloneDeep(t.nodeModel.properties.node_data.branch);if(D[A].conditions.splice(R,1),D[A].conditions.length===0){const $=D.splice(A,1).map(Y=>t.nodeModel.id+"_"+Y.id+"_right");t.nodeModel.graphModel.eventCenter.emit("delete_edge",t.nodeModel.outgoing.edges.filter(Y=>$.includes(Y.sourceAnchorId)).map(Y=>Y.id)),w(D,!1),D.forEach((Y,K)=>{Y.type==="ELSE IF "+(K+1)&&(Y.type="ELSE IF "+K)})}Qe.set(t.nodeModel.properties.node_data,"branch",D)}function P(A,R,D){if(["is_null","is_not_null","is_true","is_not_true"].includes(A)){const N=Qe.cloneDeep(t.nodeModel.properties.node_data.branch);N[R].conditions[D].value=1,Qe.set(t.nodeModel.properties.node_data,"branch",N)}}return Uo(()=>{Qe.set(t.nodeModel,"validate",h)}),(A,R)=>{const D=le("el-option"),N=le("el-select"),$=le("el-form-item"),Y=le("el-col"),K=le("el-input"),X=le("Delete"),te=le("el-icon"),W=le("el-button"),C=le("el-row"),G=le("Plus"),q=le("el-card"),z=le("el-form"),Z=Ev("resize");return Xe(),Bt(Ji,{nodeModel:A.nodeModel},{default:U(()=>[F(z,{model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"ConditionNodeFormRef",ref:c,onSubmit:R[0]||(R[0]=En(()=>{},["prevent"]))},{default:U(()=>[F(yr(tH),{ref:"el",modelValue:s.value.branch,disabled:s.value.branch===2,handle:".handle",animation:150,ghostClass:"ghost",onEnd:g},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(s.value.branch,(me,ge)=>Pl((Xe(),Bt(q,{key:me.id,shadow:"never",class:sc(["drag-card card-never mb-8",{"no-drag":ge===s.value.branch.length-1||s.value.branch.length===2}]),style:{"--el-card-padding":"12px"}},{default:U(()=>[he("div",nH,[he("span",rH,[R[1]||(R[1]=he("img",{src:sz,alt:"",height:"15",class:"handle-img mr-4"},null,-1)),Tt(" "+$e(me.type),1)]),me.conditions.length>1?(Xe(),Rn("div",oH,[he("span",null,$e(A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.info")),1),F(N,{teleported:!1,modelValue:me.condition,"onUpdate:modelValue":Re=>me.condition=Re,size:"small",style:{width:"60px",margin:"0 8px"}},{default:U(()=>[F(D,{label:A.$t("views.applicationWorkflow.condition.AND"),value:"and"},null,8,["label"]),F(D,{label:A.$t("views.applicationWorkflow.condition.OR"),value:"or"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"]),he("span",null,$e(A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.label")),1)])):nr("",!0)]),ge!==s.value.branch.length-1?(Xe(),Rn("div",iH,[(Xe(!0),Rn(Bo,null,zi(me.conditions,(Re,Be)=>(Xe(),Bt(C,{key:Be,gutter:8},{default:U(()=>[F(Y,{span:11},{default:U(()=>[F($,{prop:"branch."+ge+".conditions."+Be+".field",rules:{type:"array",required:!0,message:A.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[F(ki,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.variable.placeholder"),modelValue:Re.field,"onUpdate:modelValue":ve=>Re.field=ve},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])]),_:2},1024),F(Y,{span:6},{default:U(()=>[F($,{prop:"branch."+ge+".conditions."+Be+".compare",rules:{required:!0,message:A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),trigger:"change"}},{default:U(()=>[F(N,{onWheel:o,teleported:!1,modelValue:Re.compare,"onUpdate:modelValue":ve=>Re.compare=ve,placeholder:A.$t("views.applicationWorkflow.nodes.conditionNode.conditions.requiredMessage"),clearable:"",onChange:ve=>P(ve,ge,Be)},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(yr(OL),(ve,_e)=>(Xe(),Bt(D,{key:_e,label:ve.label,value:ve.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","onChange"])]),_:2},1032,["prop","rules"])]),_:2},1024),F(Y,{span:6},{default:U(()=>[["is_null","is_not_null","is_true","is_not_true"].includes(Re.compare)?nr("",!0):(Xe(),Bt($,{key:0,prop:"branch."+ge+".conditions."+Be+".value",rules:{required:!0,message:A.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage"),trigger:"blur"}},{default:U(()=>[F(K,{modelValue:Re.value,"onUpdate:modelValue":ve=>Re.value=ve,placeholder:A.$t("views.applicationWorkflow.nodes.conditionNode.valueMessage")},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"]))]),_:2},1024),F(Y,{span:1},{default:U(()=>[F(W,{disabled:ge===0&&Be===0,link:"",type:"info",class:"mt-4",onClick:ve=>S(ge,Be)},{default:U(()=>[F(te,null,{default:U(()=>[F(X)]),_:1})]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024))),128))])):nr("",!0),ge!==s.value.branch.length-1?(Xe(),Bt(W,{key:1,link:"",type:"primary",onClick:Re=>O(ge)},{default:U(()=>[F(te,{class:"mr-4"},{default:U(()=>[F(G)]),_:1}),Tt(" "+$e(A.$t("views.applicationWorkflow.nodes.conditionNode.addCondition")),1)]),_:2},1032,["onClick"])):nr("",!0)]),_:2},1032,["class"])),[[Z,Re=>r(Re,me,ge)]])),128))]),_:1},8,["modelValue","disabled"]),F(W,{link:"",type:"primary",onClick:_},{default:U(()=>[F(te,{class:"mr-4"},{default:U(()=>[F(G)]),_:1}),Tt(" "+$e(A.$t("views.applicationWorkflow.nodes.conditionNode.addBranch")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});const lH=Rv(aH,[["__scopeId","data-v-ad1b10e1"]]);class uH extends Qi{constructor(t){super(t,lH)}}const sH=(e,t)=>e.filter((n,o)=>o<t).map(n=>n.height+8).reduce((n,o)=>n+o,0);class cH extends ea{refreshBranch(){this.incoming.edges.forEach(t=>{t.updatePathByAnchor()}),this.outgoing.edges.forEach(t=>{t.updatePathByAnchor()})}getDefaultAnchor(){const{id:t,x:n,y:o,width:r,height:s,properties:{branch_condition_list:c}}=this;this.height===void 0&&(this.height=200);const v=this.properties.showNode===void 0?!0:this.properties.showNode,h=[];if(h.push({x:n-r/2+10,y:v?o:o-15,id:`${t}_left`,edgeAddable:!1,type:"left"}),c)for(let g=0;g<c.length;g++){const _=c[g],w=sH(c,g);h.push({x:n+r/2-10,y:v?o-s/2+75+w+_.height/2:o-15,id:`${t}_${_.id}_right`,type:"right"})}return h}}const fH={type:"condition-node",model:cH,view:uH},dH=Object.freeze(Object.defineProperty({__proto__:null,default:fH},Symbol.toStringTag,{value:"Module"})),pH={class:"title-decoration-1 mb-8"},hH=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n={document_list:["start-node","document"]},o=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",n),t.nodeModel.properties.node_data),set:r=>{Qe.set(t.nodeModel.properties,"node_data",r)}});return(r,s)=>{const c=le("el-form-item"),v=le("el-form"),h=le("el-card");return Xe(),Bt(Ji,{nodeModel:r.nodeModel},{default:U(()=>[he("h5",pH,$e(r.$t("views.applicationWorkflow.nodeSetting")),1),F(h,{shadow:"never",class:"card-never"},{default:U(()=>[F(v,{onSubmit:s[1]||(s[1]=En(()=>{},["prevent"])),model:o.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref:"DatasetNodeFormRef"},{default:U(()=>[F(c,{label:r.$t("views.problem.relateParagraph.selectDocument"),rules:{type:"array",required:!0,message:r.$t("views.log.documentPlaceholder"),trigger:"change"}},{default:U(()=>[F(ki,{ref:"nodeCascaderRef",nodeModel:r.nodeModel,class:"w-full",placeholder:r.$t("views.log.documentPlaceholder"),modelValue:o.value.document_list,"onUpdate:modelValue":s[0]||(s[0]=g=>o.value.document_list=g)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});let vH=class extends Qi{constructor(t){super(t,hH)}};const yH={type:"document-extract-node",model:ea,view:vH},mH=Object.freeze(Object.defineProperty({__proto__:null,default:yH},Symbol.toStringTag,{value:"Module"})),gH={class:"dialog-footer"},_H=Lr({__name:"AddFormCollect",props:{title:{default:Qt("views.template.templateForm.title.addParam")},addFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=bt(!1),s=bt(),c=bt({}),v=bt(!1),h=()=>{r.value=!0},g=()=>{r.value=!1,c.value={}},_=()=>{var w;(w=s.value)==null||w.validate().then(()=>{var O;o.addFormField((O=s.value)==null?void 0:O.getData()),g()})};return t({close:g,open:h}),(w,O)=>{const S=le("el-button"),P=le("el-dialog");return Xe(),Bt(P,{title:w.title,modelValue:r.value,"onUpdate:modelValue":O[3]||(O[3]=A=>r.value=A),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":g,"append-to-body":""},{footer:U(()=>[he("span",gH,[F(S,{onClick:O[1]||(O[1]=En(A=>r.value=!1,["prevent"]))},{default:U(()=>[Tt($e(w.$t("common.cancel")),1)]),_:1}),F(S,{type:"primary",onClick:O[2]||(O[2]=A=>_()),loading:v.value},{default:U(()=>[Tt($e(w.$t("common.add")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(qM,{modelValue:c.value,"onUpdate:modelValue":O[0]||(O[0]=A=>c.value=A),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),bH={class:"dialog-footer"},wH=Lr({__name:"EditFormCollect",props:{title:{default:Qt("views.template.templateForm.title.editParam")},editFormField:{}},emits:["submit"],setup(e,{expose:t,emit:n}){const o=e,r=bt(!1),s=bt(),c=bt({}),v=bt(0),h=bt(!1),g=(O,S)=>{r.value=!0,c.value=O,v.value=S},_=()=>{r.value=!1,c.value={}},w=()=>{var O;(O=s.value)==null||O.validate().then(()=>{var S;o.editFormField((S=s.value)==null?void 0:S.getData(),v.value),_()})};return t({close:_,open:g}),(O,S)=>{const P=le("el-button"),A=le("el-dialog");return Xe(),Bt(A,{title:O.title,modelValue:r.value,"onUpdate:modelValue":S[3]||(S[3]=R=>r.value=R),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"before-close":_,"append-to-body":""},{footer:U(()=>[he("span",bH,[F(P,{onClick:S[1]||(S[1]=En(R=>r.value=!1,["prevent"]))},{default:U(()=>[Tt($e(O.$t("common.cancel")),1)]),_:1}),F(P,{type:"primary",onClick:S[2]||(S[2]=R=>w()),loading:h.value},{default:U(()=>[Tt($e(O.$t("common.modify")),1)]),_:1},8,["loading"])])]),default:U(()=>[F(qM,{modelValue:c.value,"onUpdate:modelValue":S[0]||(S[0]=R=>c.value=R),"label-position":"top","require-asterisk-position":"right",ref_key:"dynamicsFormConstructorRef",ref:s},null,8,["modelValue"])]),_:1},8,["title","modelValue"])}}}),EH={class:"title-decoration-1 mb-8"},OH={class:"flex align-center"},xH={class:"mr-4"},SH={class:"flex-between"},AH={class:"lighter"},TH=["title"],MH={key:0},PH=["title"],kH={key:1},NH=["title"],RH=["title"],jH={class:"mr-4"},CH=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=bt(),o=bt(),r=(N,$)=>{const Y=S.value.form_field_list.map((K,X)=>$===X?Qe.cloneDeep(N):Qe.cloneDeep(K));S.value.form_field_list=Y,c()},s=N=>{if(S.value.form_field_list.some($=>$.field===N.field)){xa(Qt("views.applicationWorkflow.tip.paramErrorMessage")+N.field);return}S.value.form_field_list=Qe.cloneDeep([...S.value.form_field_list,N]),c()},c=()=>{const N=[{label:Qt("views.applicationWorkflow.nodes.formNode.formAllContent"),value:"form_data"},...S.value.form_field_list.map($=>({value:$.field,label:typeof $.label=="string"?$.label:$.label.label}))];Qe.set(t.nodeModel.properties.config,"fields",N),t.nodeModel.clear_next_node_field(!1)},v=bt(),h=bt(),g=()=>{var N;(N=v.value)==null||N.open()},_=(N,$)=>{var Y;(Y=h.value)==null||Y.open(Qe.cloneDeep(N),$)},w=N=>{S.value.form_field_list=S.value.form_field_list.filter($=>$.field!==N.field),c()},O=bt({is_result:!0,form_content_format:`${Qt("views.applicationWorkflow.nodes.formNode.form_content_format1")}
{{form}}
${Qt("views.applicationWorkflow.nodes.formNode.form_content_format2")}`,form_field_list:[]}),S=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",O.value),t.nodeModel.properties.node_data),set:N=>{Qe.set(t.nodeModel.properties,"node_data",N)}}),P=N=>{var $;if(N.default_value){const Y=($=N.option_list)==null?void 0:$.filter(K=>N.default_value.indexOf(K.value)>-1).map(K=>K.label).join(",");return Y||N.default_value}if(N.default_value!==void 0)return N.default_value},A=()=>{var N;return(N=n.value)==null?void 0:N.validate()};function R(N){Qe.set(t.nodeModel.properties.node_data,"form_content_format",N)}function D(){if(!o.value)return;const $=o.value.$el.querySelector(".el-table__body-wrapper tbody");$&&Vw.create($,{animation:150,ghostClass:"ghost-row",onEnd:Y=>{if(Y.oldIndex===void 0||Y.newIndex===void 0)return;const K=Qe.cloneDeep([...S.value.form_field_list]),[X]=K.splice(Y.oldIndex,1);K.splice(Y.newIndex,0,X),S.value.form_field_list=K,c()}})}return Uo(()=>{Qe.set(t.nodeModel,"validate",A),c(),t.nodeModel.graphModel.eventCenter.emit("refresh_incoming_node_field"),D()}),(N,$)=>{const Y=le("AppIcon"),K=le("el-tooltip"),X=le("MdEditorMagnify"),te=le("el-form-item"),W=le("Plus"),C=le("el-icon"),G=le("el-button"),q=le("el-table-column"),z=le("el-tag"),Z=le("el-switch"),me=le("EditPen"),ge=le("Delete"),Re=le("el-table"),Be=le("el-form"),ve=le("el-card");return Xe(),Bt(Ji,{nodeModel:N.nodeModel},{default:U(()=>[he("h5",EH,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),F(ve,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(Be,{onSubmit:$[4]||($[4]=En(()=>{},["prevent"])),model:S.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"formNodeFormRef",ref:n,"hide-required-asterisk":""},{default:U(()=>[F(te,{label:N.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),prop:"form_content_format",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.formNode.formContent.requiredMessage"),trigger:"blur"}},{label:U(()=>[he("div",OH,[he("div",xH,[he("span",null,[Tt($e(N.$t("views.applicationWorkflow.nodes.formNode.formContent.label")),1),$[5]||($[5]=he("span",{class:"danger"},"*",-1))])]),F(K,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.formNode.formContent.tooltip",{form:"{ form }"})),1)]),default:U(()=>[F(Y,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(X,{title:N.$t("views.applicationWorkflow.nodes.formNode.formContent.label"),modelValue:S.value.form_content_format,"onUpdate:modelValue":$[0]||($[0]=_e=>S.value.form_content_format=_e),style:{height:"150px"},onSubmitDialog:R},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(te,{label:N.$t("views.applicationWorkflow.nodes.formNode.formSetting"),onClick:$[3]||($[3]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",SH,[he("h5",AH,$e(N.$t("views.applicationWorkflow.nodes.formNode.formSetting")),1),F(G,{link:"",type:"primary",onClick:$[1]||($[1]=_e=>g())},{default:U(()=>[F(C,{class:"mr-4"},{default:U(()=>[F(W)]),_:1}),Tt(" "+$e(N.$t("common.add")),1)]),_:1})])]),default:U(()=>[S.value.form_field_list.length>0?(Xe(),Bt(Re,{key:0,class:"border",data:S.value.form_field_list,ref_key:"tableRef",ref:o,"row-key":"field"},{default:U(()=>[F(q,{prop:"field",label:N.$t("dynamicsForm.paramForm.field.label"),width:"95"},{default:U(({row:_e})=>[he("span",{title:_e.field,class:"ellipsis-1"},$e(_e.field),9,TH)]),_:1},8,["label"]),F(q,{prop:"label",label:N.$t("dynamicsForm.paramForm.name.label")},{default:U(({row:_e})=>[_e.label&&_e.label.input_type==="TooltipLabel"?(Xe(),Rn("span",MH,[he("span",{title:_e.label.label,class:"ellipsis-1"},$e(_e.label.label),9,PH)])):(Xe(),Rn("span",kH,[he("span",{title:_e.label,class:"ellipsis-1"},$e(_e.label),9,NH)]))]),_:1},8,["label"]),F(q,{label:N.$t("dynamicsForm.paramForm.input_type.label"),width:"110px"},{default:U(({row:_e})=>[F(z,{type:"info",class:"info-tag"},{default:U(()=>{var Ce;return[Tt($e((Ce=yr(xL).find(tt=>tt.value===_e.input_type))==null?void 0:Ce.label),1)]}),_:2},1024)]),_:1},8,["label"]),F(q,{prop:"default_value",label:N.$t("dynamicsForm.default.label")},{default:U(({row:_e})=>[he("span",{title:_e.default_value,class:"ellipsis-1"},$e(P(_e)),9,RH)]),_:1},8,["label"]),F(q,{label:N.$t("common.required"),width:"85"},{default:U(({row:_e})=>[he("div",{onClick:$[2]||($[2]=En(()=>{},["stop"]))},[F(Z,{disabled:"",size:"small",modelValue:_e.required,"onUpdate:modelValue":Ce=>_e.required=Ce},null,8,["modelValue","onUpdate:modelValue"])])]),_:1},8,["label"]),F(q,{label:N.$t("common.operation"),align:"left",width:"90"},{default:U(({row:_e,$index:Ce})=>[he("span",jH,[F(K,{effect:"dark",content:N.$t("common.modify"),placement:"top"},{default:U(()=>[F(G,{type:"primary",text:"",onClick:En(tt=>_(_e,Ce),["stop"])},{default:U(()=>[F(C,null,{default:U(()=>[F(me)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),F(K,{effect:"dark",content:N.$t("common.delete"),placement:"top"},{default:U(()=>[F(G,{type:"primary",text:"",onClick:tt=>w(_e)},{default:U(()=>[F(C,null,{default:U(()=>[F(ge)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data"])):nr("",!0)]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(_H,{ref_key:"addFormCollectRef",ref:v,addFormField:s},null,512),F(wH,{ref_key:"editFormCollectRef",ref:h,editFormField:r},null,512)]),_:1},8,["nodeModel"])}}});class DH extends Qi{constructor(t){super(t,CH)}get_node_field_list(){var o,r;const t=[],n=((r=(o=this.props.model.properties)==null?void 0:o.config)==null?void 0:r.fields)||[];try{this.props.model.properties.node_data.form_field_list.forEach(s=>{n.some(c=>c.value===s.field)||n.push({value:s.field,label:typeof s.label=="string"?s.label:s.label.label})})}catch{}return t.push({value:this.props.model.id,label:this.props.model.properties.stepName,type:this.props.model.type,children:n}),t}}const IH={type:"form-node",model:ea,view:DH},LH=Object.freeze(Object.defineProperty({__proto__:null,default:IH},Symbol.toStringTag,{value:"Module"})),FH={class:"title-decoration-1 mb-16"},$H={class:"lighter mb-8"},BH={key:0},UH={class:"flex-between"},GH={class:"flex"},VH={class:"flex"},WH={key:0,class:"danger"},zH={class:"flex align-center"},HH={class:"mr-4"},XH=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=bt(),{params:{id:o}}=Vu.config.globalProperties.$route,r={input_field_list:[],is_result:!1},s=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:g=>{Qe.set(t.nodeModel.properties,"node_data",g)}}),c=bt(),v=()=>{var g;for(const _ of s.value.input_field_list)if(_.source==="reference"&&_.is_required&&_.value[0]!=="global"&&t.nodeModel.graphModel.nodes.filter(w=>w.id===_.value[0]).length===0)return _.value=[],Promise.reject({node:t.nodeModel,errMessage:_.name+Qt("dynamicsForm.tip.requiredMessage")});return(g=c.value)==null?void 0:g.validate().catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))},h=()=>{if(!t.nodeModel.properties.node_data.function_lib_id){Qe.set(t.nodeModel.properties,"status",500);return}Aa.getFunctionLib(o,t.nodeModel.properties.node_data.function_lib_id).then(g=>{const _=t.nodeModel.properties.node_data.input_field_list,w=g.data.input_field_list.map(O=>{const S=_.find(P=>P.name==O.name);return S&&S.source==O.source?{...O,value:JSON.parse(JSON.stringify(S.value))}:{...O,value:O.source=="reference"?[]:""}});Qe.set(t.nodeModel.properties.node_data,"input_field_list",w),Qe.set(t.nodeModel.properties,"status",g.data.is_active?200:500)}).catch(g=>{Qe.set(t.nodeModel.properties,"status",500)})};return Uo(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&qp(t.nodeModel)&&Qe.set(t.nodeModel.properties.node_data,"is_result",!0),h(),Qe.set(t.nodeModel,"validate",v)}),(g,_)=>{const w=le("auto-tooltip"),O=le("el-tag"),S=le("el-input"),P=le("el-form-item"),A=le("el-text"),R=le("el-card"),D=le("AppIcon"),N=le("el-tooltip"),$=le("el-switch"),Y=le("el-form");return Xe(),Bt(Ji,{nodeModel:g.nodeModel},{default:U(()=>[he("h5",FH,$e(g.$t("views.applicationWorkflow.nodeSetting")),1),he("h5",$H,$e(g.$t("common.param.inputParam")),1),F(Y,{onSubmit:_[2]||(_[2]=En(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:c,model:s.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[F(R,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var K;return[((K=s.value.input_field_list)==null?void 0:K.length)>0?(Xe(),Rn("div",BH,[(Xe(!0),Rn(Bo,null,zi(s.value.input_field_list,(X,te)=>(Xe(),Bt(P,{key:X.name,label:X.name,prop:"input_field_list."+te+".value",rules:{required:X.is_required,message:X.source==="reference"?g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):g.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[he("div",UH,[he("div",GH,[he("span",VH,[F(w,{content:X.name,style:{"max-width":"130px"}},{default:U(()=>[Tt($e(X.name),1)]),_:2},1032,["content"]),X.is_required?(Xe(),Rn("span",WH,"*")):nr("",!0)]),F(O,{type:"info",class:"info-tag ml-4"},{default:U(()=>[Tt($e(X.type),1)]),_:2},1024)])])]),default:U(()=>[X.source==="reference"?(Xe(),Bt(ki,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:n,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:X.value,"onUpdate:modelValue":W=>X.value=W},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Xe(),Bt(S,{key:1,modelValue:X.value,"onUpdate:modelValue":W=>X.value=W,placeholder:g.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Xe(),Bt(A,{key:1,type:"info"},{default:U(()=>[Tt($e(g.$t("common.noData")),1)]),_:1}))]}),_:1}),F(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[1]||(_[1]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",zH,[he("div",HH,[he("span",null,$e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(N,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(D,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F($,{size:"small",modelValue:s.value.is_result,"onUpdate:modelValue":_[0]||(_[0]=K=>s.value.is_result=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class YH extends Qi{constructor(t){super(t,XH)}}const qH={type:"function-lib-node",model:ea,view:YH},KH=Object.freeze(Object.defineProperty({__proto__:null,default:qH},Symbol.toStringTag,{value:"Module"})),ZH={class:"title-decoration-1 mb-16"},JH={class:"flex-between"},QH={class:"lighter mb-8"},eX={key:0},tX={class:"flex-between"},nX={class:"flex"},rX={class:"flex"},oX={key:0,class:"danger"},iX={class:"lighter mb-8"},aX={key:0,class:"mb-8"},lX={class:"flex align-center"},uX={class:"mr-4"},sX=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),o=bt(),r=bt(),s={code:"",input_field_list:[],is_result:!1},c=bt(null),v=bt(!1),h=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:A=>{Qe.set(t.nodeModel.properties,"node_data",A)}}),g=bt(),_=()=>{var A;return(A=g.value)==null?void 0:A.validate().catch(R=>Promise.reject({node:t.nodeModel,errMessage:R}))};function w(A){Qe.set(t.nodeModel.properties.node_data,"code",A)}function O(A,R){typeof R<"u"&&(c.value=R),o.value.open(A)}function S(A){const R=Qe.cloneDeep(t.nodeModel.properties.node_data.input_field_list);R.splice(A,1),Qe.set(t.nodeModel.properties.node_data,"input_field_list",R)}function P(A){const R=Qe.cloneDeep(t.nodeModel.properties.node_data.input_field_list),D={...A,value:A.source==="reference"?[]:""};c.value!==null?R.splice(c.value,1,D):R.push(D),Qe.set(t.nodeModel.properties.node_data,"input_field_list",R),c.value=null}return Uo(()=>{var A;typeof((A=t.nodeModel.properties.node_data)==null?void 0:A.is_result)>"u"&&qp(t.nodeModel)&&Qe.set(t.nodeModel.properties.node_data,"is_result",!0),Qe.set(t.nodeModel,"validate",_),setTimeout(()=>{v.value=!0},100)}),(A,R)=>{const D=le("Plus"),N=le("el-icon"),$=le("el-button"),Y=le("auto-tooltip"),K=le("el-tag"),X=le("EditPen"),te=le("Delete"),W=le("el-input"),C=le("el-form-item"),G=le("el-text"),q=le("el-card"),z=le("CodemirrorEditor"),Z=le("AppIcon"),me=le("el-tooltip"),ge=le("el-switch"),Re=le("el-form");return Xe(),Bt(Ji,{nodeModel:A.nodeModel},{default:U(()=>[he("h5",ZH,$e(A.$t("views.applicationWorkflow.nodeSetting")),1),he("div",JH,[he("h5",QH,$e(A.$t("common.param.inputParam")),1),F($,{link:"",type:"primary",onClick:R[0]||(R[0]=Be=>O())},{default:U(()=>[F(N,{class:"mr-4"},{default:U(()=>[F(D)]),_:1}),Tt(" "+$e(A.$t("common.add")),1)]),_:1})]),F(Re,{onSubmit:R[4]||(R[4]=En(()=>{},["prevent"])),ref_key:"FunctionNodeFormRef",ref:g,model:h.value,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":""},{default:U(()=>[F(q,{shadow:"never",class:"card-never mb-16",style:{"--el-card-padding":"12px"}},{default:U(()=>{var Be;return[((Be=h.value.input_field_list)==null?void 0:Be.length)>0?(Xe(),Rn("div",eX,[(Xe(!0),Rn(Bo,null,zi(h.value.input_field_list,(ve,_e)=>(Xe(),Bt(C,{key:_e,label:ve.name,prop:"input_field_list."+_e+".value",rules:{required:ve.is_required,message:ve.source==="reference"?A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"):A.$t("views.functionLib.functionForm.form.param.inputPlaceholder"),trigger:"blur"}},{label:U(()=>[he("div",tX,[he("div",nX,[he("span",rX,[F(Y,{content:ve.name,style:{"max-width":"130px"}},{default:U(()=>[Tt($e(ve.name),1)]),_:2},1032,["content"]),ve.is_required?(Xe(),Rn("span",oX,"*")):nr("",!0)]),F(K,{type:"info",class:"info-tag ml-4"},{default:U(()=>[Tt($e(ve.type),1)]),_:2},1024)]),he("div",null,[F($,{text:"",onClick:En(Ce=>O(ve,_e),["stop"])},{default:U(()=>[F(N,null,{default:U(()=>[F(X)]),_:1})]),_:2},1032,["onClick"]),F($,{text:"",onClick:Ce=>S(_e),style:{"margin-left":"4px !important"}},{default:U(()=>[F(N,null,{default:U(()=>[F(te)]),_:1})]),_:2},1032,["onClick"])])])]),default:U(()=>[ve.source==="reference"?(Xe(),Bt(ki,{key:0,ref_for:!0,ref_key:"nodeCascaderRef",ref:r,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.functionLib.functionForm.form.param.selectPlaceholder"),modelValue:ve.value,"onUpdate:modelValue":Ce=>ve.value=Ce,width:100},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):(Xe(),Bt(W,{key:1,modelValue:ve.value,"onUpdate:modelValue":Ce=>ve.value=Ce,placeholder:A.$t("views.functionLib.functionForm.form.param.inputPlaceholder")},null,8,["modelValue","onUpdate:modelValue","placeholder"]))]),_:2},1032,["label","prop","rules"]))),128))])):(Xe(),Bt(G,{key:1,type:"info"},{default:U(()=>[Tt($e(A.$t("common.noData")),1)]),_:1}))]}),_:1}),he("h5",iX,$e(A.$t("views.functionLib.functionForm.form.param.code")),1),v.value?(Xe(),Rn("div",aX,[F(z,{title:A.$t("views.functionLib.functionForm.form.param.code"),modelValue:h.value.code,"onUpdate:modelValue":R[1]||(R[1]=Be=>h.value.code=Be),onWheel:n,style:{height:"130px !important"},onSubmitDialog:w},null,8,["title","modelValue"])])):nr("",!0),F(C,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:R[3]||(R[3]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",lX,[he("div",uX,[he("span",null,$e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(me,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(Z,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(ge,{size:"small",modelValue:h.value.is_result,"onUpdate:modelValue":R[2]||(R[2]=Be=>h.value.is_result=Be)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"]),F(l3,{ref_key:"FieldFormDialogRef",ref:o,onRefresh:P},null,512)]),_:1},8,["nodeModel"])}}});class cX extends Qi{constructor(t){super(t,sX)}}const fX={type:"function-node",model:ea,view:cX},dX=Object.freeze(Object.defineProperty({__proto__:null,default:fX},Symbol.toStringTag,{value:"Module"})),pX={class:"title-decoration-1 mb-8"},hX={class:"flex-between w-full"},vX={class:"flex align-center"},yX={class:"mr-4"},mX={class:"flex align-center"},gX={class:"mr-4"},_X={class:"flex align-center"},bX={class:"mr-4"},wX=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=bt(null),s=bt(),c=bt(),v=()=>{var N;return(N=c.value)==null?void 0:N.validate().catch($=>Promise.reject({node:o.nodeModel,errMessage:$}))},h=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),_={model_id:"",system:"",prompt:`{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,negative_prompt:"",dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},w=go({get:()=>(o.nodeModel.properties.node_data||Qe.set(o.nodeModel.properties,"node_data",_),o.nodeModel.properties.node_data),set:N=>{Qe.set(o.nodeModel.properties,"node_data",N)}});function O(){n?Aa.getApplicationTTIModel(n).then(N=>{r.value=Qe.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{r.value=Qe.groupBy(N==null?void 0:N.data,"provider")})}const S=()=>{var N;w.value.model_id?(N=s.value)==null||N.reset_default(w.value.model_id,n):A({})},P=N=>{var $;N&&(($=s.value)==null||$.open(N,n,w.value.model_params_setting))};function A(N){Qe.set(o.nodeModel.properties.node_data,"model_params_setting",N)}function R(N){Qe.set(o.nodeModel.properties.node_data,"prompt",N)}function D(N){Qe.set(o.nodeModel.properties.node_data,"negative_prompt",N)}return Uo(()=>{O(),Qe.set(o.nodeModel,"validate",v)}),(N,$)=>{const Y=le("Setting"),K=le("el-icon"),X=le("el-button"),te=le("ModelSelect"),W=le("el-form-item"),C=le("AppIcon"),G=le("el-tooltip"),q=le("MdEditorMagnify"),z=le("el-switch"),Z=le("el-form"),me=le("el-card");return Xe(),Bt(Ji,{"node-model":N.nodeModel},{default:U(()=>[he("h5",pX,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),F(me,{shadow:"never",class:"card-never"},{default:U(()=>[F(Z,{onSubmit:$[6]||($[6]=En(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(W,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[he("div",hX,[he("div",null,[he("span",null,[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.label")),1),$[7]||($[7]=he("span",{class:"danger"},"*",-1))])]),F(X,{disabled:!w.value.model_id,type:"primary",link:"",onClick:$[0]||($[0]=ge=>P(w.value.model_id)),onRefreshForm:A},{default:U(()=>[F(K,null,{default:U(()=>[F(Y)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(te,{onChange:S,onWheel:h,teleported:!1,modelValue:w.value.model_id,"onUpdate:modelValue":$[1]||($[1]=ge=>w.value.model_id=ge),placeholder:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.model.requiredMessage"),options:r.value,showFooter:"","model-type":"TTI"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[he("div",vX,[he("div",yX,[he("span",null,[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label")),1),$[8]||($[8]=he("span",{class:"danger"},"*",-1))])]),F(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.tooltip")),1)]),default:U(()=>[F(C,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(q,{onWheel:h,title:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.prompt.label"),modelValue:w.value.prompt,"onUpdate:modelValue":$[2]||($[2]=ge=>w.value.prompt=ge),style:{height:"150px"},onSubmitDialog:R},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),prop:"prompt",rules:{required:!1,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[he("div",mX,[he("div",gX,[he("span",null,$e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label")),1)]),F(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.tooltip")),1)]),default:U(()=>[F(C,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(q,{onWheel:h,title:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.label"),modelValue:w.value.negative_prompt,"onUpdate:modelValue":$[3]||($[3]=ge=>w.value.negative_prompt=ge),placeholder:N.$t("views.applicationWorkflow.nodes.imageGenerateNode.negative_prompt.placeholder"),style:{height:"150px"},onSubmitDialog:D},null,8,["title","modelValue","placeholder"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[5]||($[5]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",_X,[he("div",bX,[he("span",null,$e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(G,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(C,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(z,{size:"small",modelValue:w.value.is_result,"onUpdate:modelValue":$[4]||($[4]=ge=>w.value.is_result=ge)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(d_,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:A},null,512)]),_:1},8,["node-model"])}}});let EX=class extends Qi{constructor(t){super(t,wX)}};const OX={type:"image-generate-node",model:ea,view:EX},xX=Object.freeze(Object.defineProperty({__proto__:null,default:OX},Symbol.toStringTag,{value:"Module"})),SX={class:"title-decoration-1 mb-8"},AX={class:"flex-between w-full"},TX={class:"flex align-center"},MX={class:"mr-4"},PX={class:"flex-between"},kX={class:"flex align-center"},NX={class:"mr-4"},RX=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=bt(null),s=bt(),c=bt(),v=bt(),h=()=>{var N;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(N=c.value)==null?void 0:N.validate()]).catch($=>Promise.reject({node:o.nodeModel,errMessage:$}))},g=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),w={model_id:"",system:"",prompt:`{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}`,dialogue_number:0,dialogue_type:"NODE",is_result:!0,temperature:null,max_tokens:null,image_list:["start-node","image"]},O=go({get:()=>(o.nodeModel.properties.node_data||Qe.set(o.nodeModel.properties,"node_data",w),o.nodeModel.properties.node_data),set:N=>{Qe.set(o.nodeModel.properties,"node_data",N)}});function S(){n?Aa.getApplicationImageModel(n).then(N=>{r.value=Qe.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{r.value=Qe.groupBy(N==null?void 0:N.data,"provider")})}function P(N){Qe.set(o.nodeModel.properties.node_data,"system",N)}function A(N){Qe.set(o.nodeModel.properties.node_data,"prompt",N)}const R=N=>{var $;N&&(($=s.value)==null||$.open(N,n,O.value.model_params_setting))};function D(N){Qe.set(o.nodeModel.properties.node_data,"model_params_setting",N)}return Uo(()=>{S(),Qe.set(o.nodeModel,"validate",h)}),(N,$)=>{const Y=le("Setting"),K=le("el-icon"),X=le("el-button"),te=le("ModelSelect"),W=le("el-form-item"),C=le("MdEditorMagnify"),G=le("AppIcon"),q=le("el-tooltip"),z=le("el-option"),Z=le("el-select"),me=le("el-input-number"),ge=le("el-switch"),Re=le("el-form"),Be=le("el-card");return Xe(),Bt(Ji,{"node-model":N.nodeModel},{default:U(()=>[he("h5",SX,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),F(Be,{shadow:"never",class:"card-never"},{default:U(()=>[F(Re,{onSubmit:$[9]||($[9]=En(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(W,{label:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),trigger:"change"}},{label:U(()=>[he("div",AX,[he("div",null,[he("span",null,[Tt($e(yr(Qt)("views.applicationWorkflow.nodes.imageUnderstandNode.model.label")),1),$[10]||($[10]=he("span",{class:"danger"},"*",-1))])]),F(X,{disabled:!O.value.model_id,type:"primary",link:"",onClick:$[0]||($[0]=ve=>R(O.value.model_id)),onRefreshForm:D},{default:U(()=>[F(K,null,{default:U(()=>[F(Y)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(te,{onWheel:g,teleported:!1,modelValue:O.value.model_id,"onUpdate:modelValue":$[1]||($[1]=ve=>O.value.model_id=ve),placeholder:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.model.requiredMessage"),options:r.value,showFooter:"","model-type":"IMAGE"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(C,{title:N.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":$[2]||($[2]=ve=>O.value.system=ve),style:{height:"100px"},onSubmitDialog:P,placeholder:N.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(W,{label:N.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.requiredMessage"),trigger:"blur"}},{label:U(()=>[he("div",TX,[he("div",MX,[he("span",null,[Tt($e(N.$t("views.application.applicationForm.form.prompt.label")),1),$[11]||($[11]=he("span",{class:"danger"},"*",-1))])]),F(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(C,{onWheel:g,title:N.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":$[3]||($[3]=ve=>O.value.prompt=ve),style:{height:"150px"},onSubmitDialog:A},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(W,null,{label:U(()=>[he("div",PX,[he("div",null,$e(N.$t("views.application.applicationForm.form.historyRecord.label")),1),F(Z,{modelValue:O.value.dialogue_type,"onUpdate:modelValue":$[4]||($[4]=ve=>O.value.dialogue_type=ve),type:"small",style:{width:"100px"}},{default:U(()=>[F(z,{label:N.$t("views.applicationWorkflow.node"),value:"NODE"},null,8,["label"]),F(z,{label:N.$t("views.applicationWorkflow.workflow"),value:"WORKFLOW"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[F(me,{modelValue:O.value.dialogue_number,"onUpdate:modelValue":$[5]||($[5]=ve=>O.value.dialogue_number=ve),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1}),F(W,{label:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label"),rules:{type:"array",required:!0,message:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),trigger:"change"}},{label:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.label")),1),$[12]||($[12]=he("span",{class:"danger"},"*",-1))]),default:U(()=>[F(ki,{ref_key:"nodeCascaderRef",ref:v,nodeModel:N.nodeModel,class:"w-full",placeholder:N.$t("views.applicationWorkflow.nodes.imageUnderstandNode.image.requiredMessage"),modelValue:O.value.image_list,"onUpdate:modelValue":$[6]||($[6]=ve=>O.value.image_list=ve)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[8]||($[8]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",kX,[he("div",NX,[he("span",null,$e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(ge,{size:"small",modelValue:O.value.is_result,"onUpdate:modelValue":$[7]||($[7]=ve=>O.value.is_result=ve)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(d_,{ref_key:"AIModeParamSettingDialogRef",ref:s,onRefresh:D},null,512)]),_:1},8,["node-model"])}}});let jX=class extends Qi{constructor(t){super(t,RX)}};const CX={type:"image-understand-node",model:ea,view:jX},DX=Object.freeze(Object.defineProperty({__proto__:null,default:CX},Symbol.toStringTag,{value:"Module"})),IX={class:"title-decoration-1 mb-8"},LX={class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},FX={class:"flex-between"},$X={class:"ml-4"},BX={class:"title-decoration-1 mb-8"},UX={key:0,class:"p-8-12"},GX={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},VX={class:"flex-between"},WX={key:0,class:"danger"},zX={key:0,class:"p-8-12"},HX={key:1,class:"border-r-4 p-8-12 mb-8 layout-bg lighter"},XX={class:"flex-between"},YX={key:0,class:"danger"},qX=`{
  "math": {
    "url": "your_server",
    "transport": "sse"
  }
}`,KX=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=bt(),o=bt(!1),r=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),s={mcp_tool:"",mcp_tools:[],mcp_servers:"",mcp_server:"",tool_params:{},tool_form_field:[],params_nested:""};function c(O){Qe.set(t.nodeModel.properties.node_data,"mcp_servers",O)}function v(){if(!g.value.mcp_servers){xa(Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}try{JSON.parse(g.value.mcp_servers)}catch{xa(Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip"));return}Aa.getMcpTools({mcp_servers:g.value.mcp_servers},o).then(O=>{g.value.mcp_tools=O.data,Up(Qt("views.applicationWorkflow.nodes.mcpNode.getToolsSuccess")),g.value.mcp_server=g.value.mcp_tools.filter(S=>S.name===g.value.mcp_tool)[0].server})}function h(){var S,P,A,R;g.value.mcp_server=g.value.mcp_tools.filter(D=>D.name===g.value.mcp_tool)[0].server;const O=g.value.mcp_tools.filter(D=>D.name===g.value.mcp_tool)[0].args_schema;g.value.tool_form_field=[];for(const D in O.properties){let N=O.properties[D].properties;if(N){g.value.params_nested=D;for(const $ in N){let Y="TextInput";N[$].type==="string"?Y="TextInput":N[$].type==="number"?Y="NumberInput":N[$].type==="boolean"?Y="SwitchInput":(N[$].type==="array"||N[$].type==="object")&&(Y="JsonInput"),console.log(N[$]),g.value.tool_form_field.push({field:$,label:{input_type:"TooltipLabel",label:$,attrs:{tooltip:N[$].description},props_info:{}},input_type:Y,source:"referencing",required:((S=O.properties[D].required)==null?void 0:S.indexOf($))!==-1,props_info:{rules:[{required:((P=O.properties[D].required)==null?void 0:P.indexOf($))!==-1,message:Qt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}else{g.value.params_nested="";let $="TextInput";O.properties[D].type==="string"?$="TextInput":O.properties[D].type==="number"?$="NumberInput":O.properties[D].type==="boolean"?$="SwitchInput":(O.properties[D].type==="array"||O.properties[D].type==="object")&&($="JsonInput"),console.log(O.properties[D]),g.value.tool_form_field.push({field:D,label:{input_type:"TooltipLabel",label:D,attrs:{tooltip:O.properties[D].description},props_info:{}},input_type:$,source:"referencing",required:((A=O.required)==null?void 0:A.indexOf(D))!==-1,props_info:{rules:[{required:((R=O.required)==null?void 0:R.indexOf(D))!==-1,message:Qt("dynamicsForm.tip.requiredMessage"),trigger:"blur"}]}})}}g.value.params_nested?g.value.tool_params={[g.value.params_nested]:{}}:g.value.tool_params={}}const g=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",s),t.nodeModel.properties.node_data),set:O=>{Qe.set(t.nodeModel.properties,"node_data",O)}}),_=bt(),w=async()=>{if(n.value){const O=g.value.tool_form_field.filter(S=>S.required).map(S=>S.label.label);if(O.length>0){for(const S of O)if(g.value.params_nested){if(!g.value.tool_params[g.value.params_nested][S])return Promise.reject({node:t.nodeModel,errMessage:S+Qt("dynamicsForm.tip.requiredMessage")})}else if(!g.value.tool_params[S])return Promise.reject({node:t.nodeModel,errMessage:S+Qt("dynamicsForm.tip.requiredMessage")})}}if(_.value){const O=Qe.cloneDeep(g.value);if(!O.mcp_servers)return Promise.reject({node:t.nodeModel,errMessage:Qt("views.applicationWorkflow.nodes.mcpNode.mcpServerTip")});if(!O.mcp_tool)return Promise.reject({node:t.nodeModel,errMessage:Qt("views.applicationWorkflow.nodes.mcpNode.mcpToolTip")})}};return Uo(()=>{var O;typeof((O=t.nodeModel.properties.node_data)==null?void 0:O.is_result)>"u"&&qp(t.nodeModel)&&Qe.set(t.nodeModel.properties.node_data,"is_result",!0),Qe.set(t.nodeModel,"validate",w)}),(O,S)=>{const P=le("MdEditorMagnify"),A=le("el-form-item"),R=le("Plus"),D=le("el-icon"),N=le("el-button"),$=le("AppIcon"),Y=le("el-tooltip"),K=le("el-option"),X=le("el-select"),te=le("el-form"),W=le("el-text"),C=le("el-input"),G=le("el-input-number"),q=le("el-switch"),z=Ev("loading");return Xe(),Bt(Ji,{nodeModel:O.nodeModel},{default:U(()=>[he("h5",IX,$e(O.$t("views.applicationWorkflow.nodeSetting")),1),he("div",LX,[F(te,{onSubmit:S[3]||(S[3]=En(()=>{},["prevent"])),model:g.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:_,"hide-required-asterisk":""},{default:U(()=>[F(A,{label:"MCP Server Config"},{default:U(()=>[F(P,{onWheel:r,title:"MCP Server Config",modelValue:g.value.mcp_servers,"onUpdate:modelValue":S[0]||(S[0]=Z=>g.value.mcp_servers=Z),style:{height:"150px"},onSubmitDialog:c,placeholder:qX},null,8,["modelValue"])]),_:1}),F(A,null,{label:U(()=>[he("div",FX,[he("span",null,$e(O.$t("views.applicationWorkflow.nodes.mcpNode.tool")),1),F(N,{type:"primary",link:"",onClick:S[1]||(S[1]=Z=>v())},{default:U(()=>[F(D,{class:"mr-4"},{default:U(()=>[F(R)]),_:1}),Tt(" "+$e(O.$t("views.applicationWorkflow.nodes.mcpNode.getTool")),1)]),_:1})])]),default:U(()=>[F(X,{modelValue:g.value.mcp_tool,"onUpdate:modelValue":S[2]||(S[2]=Z=>g.value.mcp_tool=Z),onChange:h,filterable:""},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(g.value.mcp_tools,Z=>(Xe(),Bt(K,{key:Z.value,label:Z.name,value:Z.name,class:"flex align-center"},{default:U(()=>[F(Y,{effect:"dark",content:Z.description,placement:"top-start","popper-class":"max-w-350"},{default:U(()=>[F($,{iconName:"app-warning",class:"app-warning-icon"})]),_:2},1032,["content"]),he("span",$X,$e(Z.name),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),he("h5",BX,$e(O.$t("views.applicationWorkflow.nodes.mcpNode.toolParam")),1),g.value.tool_params[g.value.params_nested]?(Xe(),Rn(Bo,{key:0},[g.value.mcp_tool?(Xe(),Rn("div",GX,[g.value.mcp_tool?Pl((Xe(),Bt(te,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[5]||(S[5]=En(()=>{},["prevent"]))},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(g.value.tool_form_field,Z=>(Xe(),Bt(A,{key:Z.field,required:Z.required},{label:U(()=>[he("div",VX,[he("div",null,[F(TS,{label:Z.label.label,tooltip:Z.label.attrs.tooltip},null,8,["label","tooltip"]),Z.required?(Xe(),Rn("span",WX,"*")):nr("",!0)]),F(X,{teleported:!1,modelValue:Z.source,"onUpdate:modelValue":me=>Z.source=me,size:"small",style:{width:"85px"},onChange:S[4]||(S[4]=me=>g.value.tool_params[g.value.params_nested]={})},{default:U(()=>[F(K,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(K,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[Z.source==="custom"&&Z.input_type==="TextInput"?(Xe(),Bt(C,{key:0,modelValue:g.value.tool_params[g.value.params_nested][Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[g.value.params_nested][Z.label.label]=me},null,8,["modelValue","onUpdate:modelValue"])):Z.source==="custom"&&Z.input_type==="NumberInput"?(Xe(),Bt(G,{key:1,modelValue:g.value.tool_params[g.value.params_nested][Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[g.value.params_nested][Z.label.label]=me},null,8,["modelValue","onUpdate:modelValue"])):Z.source==="custom"&&Z.input_type==="SwitchInput"?(Xe(),Bt(q,{key:2,modelValue:g.value.tool_params[g.value.params_nested][Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[g.value.params_nested][Z.label.label]=me},null,8,["modelValue","onUpdate:modelValue"])):Z.source==="custom"&&Z.input_type==="JsonInput"?(Xe(),Bt(C,{key:3,modelValue:g.value.tool_params[g.value.params_nested][Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[g.value.params_nested][Z.label.label]=me,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):nr("",!0),Z.source==="referencing"?(Xe(),Bt(ki,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[g.value.params_nested][Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[g.value.params_nested][Z.label.label]=me},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):nr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[z,o.value]]):nr("",!0)])):(Xe(),Rn("div",UX,[F(W,{type:"info"},{default:U(()=>[Tt($e(O.$t("common.noData")),1)]),_:1})]))],64)):(Xe(),Rn(Bo,{key:1},[g.value.mcp_tool?(Xe(),Rn("div",HX,[g.value.mcp_tool?Pl((Xe(),Bt(te,{key:0,ref_key:"dynamicsFormRef",ref:n,"label-position":"top","require-asterisk-position":"right","hide-required-asterisk":!0,onSubmit:S[6]||(S[6]=En(()=>{},["prevent"]))},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(g.value.tool_form_field,Z=>(Xe(),Bt(A,{key:Z.field,required:Z.required},{label:U(()=>[he("div",XX,[he("div",null,[F(TS,{label:Z.label.label,tooltip:Z.label.attrs.tooltip},null,8,["label","tooltip"]),Z.required?(Xe(),Rn("span",YX,"*")):nr("",!0)]),F(X,{teleported:!1,modelValue:Z.source,"onUpdate:modelValue":me=>Z.source=me,size:"small",style:{width:"85px"}},{default:U(()=>[F(K,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(K,{label:O.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])])]),default:U(()=>[Z.source==="custom"&&Z.input_type==="TextInput"?(Xe(),Bt(C,{key:0,modelValue:g.value.tool_params[Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[Z.label.label]=me},null,8,["modelValue","onUpdate:modelValue"])):Z.source==="custom"&&Z.input_type==="NumberInput"?(Xe(),Bt(G,{key:1,modelValue:g.value.tool_params[Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[Z.label.label]=me},null,8,["modelValue","onUpdate:modelValue"])):Z.source==="custom"&&Z.input_type==="SwitchInput"?(Xe(),Bt(q,{key:2,modelValue:g.value.tool_params[Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[Z.label.label]=me},null,8,["modelValue","onUpdate:modelValue"])):Z.source==="custom"&&Z.input_type==="JsonInput"?(Xe(),Bt(C,{key:3,modelValue:g.value.tool_params[Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[Z.label.label]=me,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])):nr("",!0),Z.source==="referencing"?(Xe(),Bt(ki,{key:4,ref_for:!0,ref:"nodeCascaderRef2",nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.variable.placeholder"),modelValue:g.value.tool_params[Z.label.label],"onUpdate:modelValue":me=>g.value.tool_params[Z.label.label]=me},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])):nr("",!0)]),_:2},1032,["required"]))),128))]),_:1})),[[z,o.value]]):nr("",!0)])):(Xe(),Rn("div",zX,[F(W,{type:"info"},{default:U(()=>[Tt($e(O.$t("common.noData")),1)]),_:1})]))],64))]),_:1},8,["nodeModel"])}}});class ZX extends Qi{constructor(t){super(t,KX)}}const JX={type:"mcp-node",model:ea,view:ZX},QX=Object.freeze(Object.defineProperty({__proto__:null,default:JX},Symbol.toStringTag,{value:"Module"})),eY={class:"title-decoration-1 mb-8"},tY={class:"flex-between"},nY={class:"flex align-center"},rY={class:"mr-4"},oY={class:"flex align-center"},iY={class:"mr-4"},aY=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),n=bt(),o=N=>N.ctrlKey===!0?(N.preventDefault(),!0):(N.stopPropagation(),!0),r=N=>{var $;N?($=n.value)==null||$.reset_default(N,v):_({})};function s(N){Qe.set(S.nodeModel.properties.node_data,"prompt",N)}function c(N){Qe.set(S.nodeModel.properties.node_data,"system",N)}const{params:{id:v}}=Vu.config.globalProperties.$route,h=`${Qt("views.applicationWorkflow.nodes.questionNode.defaultPrompt1")}{{${Qt("views.applicationWorkflow.nodes.startNode.label")}.question}}
${Qt("views.applicationWorkflow.nodes.questionNode.defaultPrompt2")}`,g={model_id:"",system:Qt("views.applicationWorkflow.nodes.questionNode.systemDefault"),prompt:h,dialogue_number:1,is_result:!1};function _(N){Qe.set(S.nodeModel.properties.node_data,"model_params_setting",N)}const w=N=>{var $;N&&(($=n.value)==null||$.open(N,v,O.value.model_params_setting))},O=go({get:()=>(S.nodeModel.properties.node_data||Qe.set(S.nodeModel.properties,"node_data",g),S.nodeModel.properties.node_data),set:N=>{Qe.set(S.nodeModel.properties,"node_data",N)}}),S=e,P=bt(),A=bt(null),R=()=>{var N;return(N=P.value)==null?void 0:N.validate().catch($=>Promise.reject({node:S.nodeModel,errMessage:$}))};function D(){v?Aa.getApplicationModel(v).then(N=>{A.value=Qe.groupBy(N==null?void 0:N.data,"provider")}):t.asyncGetModel().then(N=>{A.value=Qe.groupBy(N==null?void 0:N.data,"provider")})}return Uo(()=>{var N;D(),typeof((N=S.nodeModel.properties.node_data)==null?void 0:N.is_result)>"u"&&qp(S.nodeModel)&&Qe.set(S.nodeModel.properties.node_data,"is_result",!0),Qe.set(S.nodeModel,"validate",R)}),(N,$)=>{const Y=le("Setting"),K=le("el-icon"),X=le("el-button"),te=le("ModelSelect"),W=le("el-form-item"),C=le("MdEditorMagnify"),G=le("AppIcon"),q=le("el-tooltip"),z=le("el-input-number"),Z=le("el-switch"),me=le("el-form"),ge=le("el-card");return Xe(),Bt(Ji,{nodeModel:N.nodeModel},{default:U(()=>[he("h5",eY,$e(N.$t("views.applicationWorkflow.nodeSetting")),1),F(ge,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(me,{onSubmit:$[7]||($[7]=En(()=>{},["prevent"])),model:O.value,"label-position":"top","require-asterisk-position":"right",class:"mb-24","label-width":"auto",ref_key:"questionNodeFormRef",ref:P,"hide-required-asterisk":""},{default:U(()=>[F(W,{label:N.$t("views.application.applicationForm.form.aiModel.label"),prop:"model_id",rules:{required:!0,message:N.$t("views.application.applicationForm.form.aiModel.placeholder"),trigger:"change"}},{label:U(()=>[he("div",tY,[he("div",null,[he("span",null,[Tt($e(N.$t("views.application.applicationForm.form.aiModel.label")),1),$[8]||($[8]=he("span",{class:"danger"},"*",-1))])]),F(X,{type:"primary",link:"",disabled:!O.value.model_id,onClick:$[0]||($[0]=Re=>w(O.value.model_id)),onRefreshForm:_},{default:U(()=>[F(K,null,{default:U(()=>[F(Y)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(te,{onChange:r,onWheel:o,teleported:!1,modelValue:O.value.model_id,"onUpdate:modelValue":$[1]||($[1]=Re=>O.value.model_id=Re),placeholder:N.$t("views.application.applicationForm.form.aiModel.placeholder"),options:A.value,onSubmitModel:D,showFooter:"","model-type":"LLM"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.application.applicationForm.form.roleSettings.label")},{default:U(()=>[F(C,{title:N.$t("views.application.applicationForm.form.roleSettings.label"),modelValue:O.value.system,"onUpdate:modelValue":$[2]||($[2]=Re=>O.value.system=Re),style:{height:"100px"},onSubmitDialog:c,placeholder:N.$t("views.application.applicationForm.form.roleSettings.label")},null,8,["title","modelValue","placeholder"])]),_:1},8,["label"]),F(W,{label:N.$t("views.application.applicationForm.form.prompt.label"),prop:"prompt",rules:{required:!0,message:N.$t("views.application.applicationForm.form.prompt.tooltip"),trigger:"blur"}},{label:U(()=>[he("div",nY,[he("div",rY,[he("span",null,[Tt($e(N.$t("views.application.applicationForm.form.prompt.label")),1),$[9]||($[9]=he("span",{class:"danger"},"*",-1))])]),F(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.application.applicationForm.form.prompt.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(C,{onWheel:o,title:N.$t("views.application.applicationForm.form.prompt.label"),modelValue:O.value.prompt,"onUpdate:modelValue":$[3]||($[3]=Re=>O.value.prompt=Re),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])]),_:1},8,["label","rules"]),F(W,{label:N.$t("views.application.applicationForm.form.historyRecord.label")},{default:U(()=>[F(z,{modelValue:O.value.dialogue_number,"onUpdate:modelValue":$[4]||($[4]=Re=>O.value.dialogue_number=Re),min:0,"value-on-clear":0,"controls-position":"right",class:"w-full",step:1,"step-strictly":!0},null,8,["modelValue"])]),_:1},8,["label"]),F(W,{label:N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:$[6]||($[6]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",oY,[he("div",iY,[he("span",null,$e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(q,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(N.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(G,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(Z,{size:"small",modelValue:O.value.is_result,"onUpdate:modelValue":$[5]||($[5]=Re=>O.value.is_result=Re)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(d_,{ref_key:"AIModeParamSettingDialogRef",ref:n,onRefresh:_},null,512)]),_:1},8,["nodeModel"])}}});class lY extends Qi{constructor(t){super(t,aY)}}const uY={type:"question-node",model:ea,view:lY},sY=Object.freeze(Object.defineProperty({__proto__:null,default:uY},Symbol.toStringTag,{value:"Module"})),cY={class:"flex-between"},fY={class:"flex align-center"},dY={class:"mr-4"},pY=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=g=>g.ctrlKey===!0?(g.preventDefault(),!0):(g.stopPropagation(),!0),o={reply_type:"content",content:"",fields:[],is_result:!1},r=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",o),t.nodeModel.properties.node_data),set:g=>{Qe.set(t.nodeModel.properties,"node_data",g)}});function s(g){Qe.set(t.nodeModel.properties.node_data,"content",g)}const c=bt(),v=bt(),h=()=>{var g;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(g=c.value)==null?void 0:g.validate()]).catch(_=>Promise.reject({node:t.nodeModel,errMessage:_}))};return Uo(()=>{var g;typeof((g=t.nodeModel.properties.node_data)==null?void 0:g.is_result)>"u"&&qp(t.nodeModel)&&Qe.set(t.nodeModel.properties.node_data,"is_result",!0),Qe.set(t.nodeModel,"validate",h)}),(g,_)=>{const w=le("el-option"),O=le("el-select"),S=le("MdEditorMagnify"),P=le("el-form-item"),A=le("AppIcon"),R=le("el-tooltip"),D=le("el-switch"),N=le("el-form"),$=le("el-card");return Xe(),Bt(Ji,{nodeModel:g.nodeModel},{default:U(()=>[F($,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(N,{onSubmit:_[5]||(_[5]=En(()=>{},["prevent"])),model:r.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c},{default:U(()=>[F(P,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")},{label:U(()=>[he("div",cY,[he("span",null,$e(g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label")),1),F(O,{teleported:!1,modelValue:r.value.reply_type,"onUpdate:modelValue":_[0]||(_[0]=Y=>r.value.reply_type=Y),size:"small",style:{width:"85px"}},{default:U(()=>[F(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F(w,{label:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"content"},null,8,["label"])]),_:1},8,["modelValue"])])]),default:U(()=>[r.value.reply_type==="content"?(Xe(),Bt(S,{key:0,onWheel:n,title:g.$t("views.applicationWorkflow.nodes.replyNode.replyContent.label"),modelValue:r.value.content,"onUpdate:modelValue":_[1]||(_[1]=Y=>r.value.content=Y),style:{height:"150px"},onSubmitDialog:s},null,8,["title","modelValue"])):(Xe(),Bt(ki,{key:1,ref_key:"nodeCascaderRef",ref:v,nodeModel:g.nodeModel,class:"w-full",placeholder:g.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:r.value.fields,"onUpdate:modelValue":_[2]||(_[2]=Y=>r.value.fields=Y)},null,8,["nodeModel","placeholder","modelValue"]))]),_:1},8,["label"]),F(P,{label:g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:_[4]||(_[4]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",fY,[he("div",dY,[he("span",null,$e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(R,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(g.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(A,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(D,{size:"small",modelValue:r.value.is_result,"onUpdate:modelValue":_[3]||(_[3]=Y=>r.value.is_result=Y)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["nodeModel"])}}});class hY extends Qi{constructor(t){super(t,pY)}}const vY={type:"reply-node",model:ea,view:hY},yY=Object.freeze(Object.defineProperty({__proto__:null,default:vY},Symbol.toStringTag,{value:"Module"})),mY={class:"p-16"},gY={class:"flex align-center"},_Y={class:"mr-4"},bY={class:"dialog-footer p-16"},wY=Lr({__name:"ParamSettingDialog",emits:["refresh"],setup(e,{expose:t,emit:n}){const o=n,r=bt(),s=bt({top_n:3,similarity:0,max_paragraph_char_number:5e3}),c=bt(!1),v=bt(!1);c_(c,_=>{_||(s.value={top_n:3,similarity:0,max_paragraph_char_number:5e3})});const h=_=>{s.value={...s.value,...Qe.cloneDeep(_)},c.value=!0},g=()=>{var _;(_=r==null?void 0:r.value)==null||_.validate((w,O)=>{w&&(o("refresh",Qe.cloneDeep(s.value)),c.value=!1)})};return t({open:h}),(_,w)=>{const O=le("AppIcon"),S=le("el-tooltip"),P=le("el-input-number"),A=le("el-form-item"),R=le("el-col"),D=le("el-row"),N=le("el-slider"),$=le("el-form"),Y=le("el-scrollbar"),K=le("el-button"),X=le("el-dialog");return Xe(),Bt(X,{"align-center":"",title:_.$t("common.paramSetting"),class:"param-dialog",modelValue:c.value,"onUpdate:modelValue":w[5]||(w[5]=te=>c.value=te),style:{width:"550px"},"append-to-body":"","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:U(()=>[he("span",bY,[F(K,{onClick:w[3]||(w[3]=En(te=>c.value=!1,["prevent"]))},{default:U(()=>[Tt($e(_.$t("common.cancel")),1)]),_:1}),F(K,{type:"primary",onClick:w[4]||(w[4]=te=>g()),loading:v.value},{default:U(()=>[Tt($e(_.$t("common.save")),1)]),_:1},8,["loading"])])]),default:U(()=>[he("div",null,[F(Y,{always:""},{default:U(()=>[he("div",mY,[F($,{"label-position":"top",ref_key:"paramFormRef",ref:r,model:s.value},{default:U(()=>[F(D,{gutter:20},{default:U(()=>[F(R,{span:12},{default:U(()=>[F(A,null,{label:U(()=>[he("div",gY,[he("span",_Y,"Score "+$e(_.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1),F(S,{effect:"dark",content:_.$t("views.applicationWorkflow.nodes.rerankerNode.ScoreTooltip"),placement:"right"},{default:U(()=>[F(O,{iconName:"app-warning",class:"app-warning-icon"})]),_:1},8,["content"])])]),default:U(()=>[F(P,{modelValue:s.value.similarity,"onUpdate:modelValue":w[0]||(w[0]=te=>s.value.similarity=te),min:0,max:s.value.search_mode==="blend"?2:1,precision:3,step:.1,"value-on-clear":0,"controls-position":"right",class:"w-full"},null,8,["modelValue","max"])]),_:1})]),_:1}),F(R,{span:12},{default:U(()=>[F(A,{label:_.$t("views.application.applicationForm.dialog.topReferences")},{default:U(()=>[F(P,{modelValue:s.value.top_n,"onUpdate:modelValue":w[1]||(w[1]=te=>s.value.top_n=te),min:1,max:1e4,"value-on-clear":1,"controls-position":"right",class:"w-full"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1}),F(A,{label:_.$t("views.application.applicationForm.dialog.maxCharacters")},{default:U(()=>[F(N,{modelValue:s.value.max_paragraph_char_number,"onUpdate:modelValue":w[2]||(w[2]=te=>s.value.max_paragraph_char_number=te),"show-input":"","show-input-controls":!1,min:500,max:1e5,class:"custom-slider"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1})])]),_:1},8,["title","modelValue"])}}}),EY={class:"flex-between"},OY={class:"flex-between"},xY={class:"w-full"},SY={class:"flex-between"},AY={class:"flex-between"},TY=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),n=e,o=bt(),{params:{id:r}}=Vu.config.globalProperties.$route,s={reranker_reference_list:[[]],reranker_model_id:"",question_reference_address:[],reranker_setting:{top_n:3,similarity:0,max_paragraph_char_number:5e3}},c=bt(null),v=()=>{var D;(D=o.value)==null||D.open(_.value.reranker_setting)},h=D=>{const N=Qe.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);N.splice(D,1),Qe.set(n.nodeModel.properties.node_data,"reranker_reference_list",N)},g=D=>D.ctrlKey===!0?(D.preventDefault(),!0):(D.stopPropagation(),!0),_=go({get:()=>(n.nodeModel.properties.node_data||Qe.set(n.nodeModel.properties,"node_data",s),n.nodeModel.properties.node_data),set:D=>{Qe.set(n.nodeModel.properties,"node_data",D)}});function w(D){Qe.set(n.nodeModel.properties.node_data,"reranker_setting",D)}function O(){r?Aa.getApplicationRerankerModel(r).then(D=>{c.value=Qe.groupBy(D==null?void 0:D.data,"provider")}):t.asyncGetModel({model_type:"RERANKER"}).then(D=>{c.value=Qe.groupBy(D==null?void 0:D.data,"provider")})}const S=()=>{const D=Qe.cloneDeep(n.nodeModel.properties.node_data.reranker_reference_list);D.push([]),Qe.set(n.nodeModel.properties.node_data,"reranker_reference_list",D)},P=bt(),A=bt(),R=()=>{var D;return Promise.all([A.value?A.value.validate():Promise.resolve(""),(D=P.value)==null?void 0:D.validate()]).catch(N=>Promise.reject({node:n.nodeModel,errMessage:N}))};return Uo(()=>{O(),Qe.set(n.nodeModel,"validate",R)}),(D,N)=>{const $=le("Plus"),Y=le("el-icon"),K=le("el-button"),X=le("el-form-item"),te=le("el-col"),W=le("Delete"),C=le("el-row"),G=le("Setting"),q=le("ModelSelect"),z=le("el-form"),Z=le("el-card");return Xe(),Bt(Ji,{nodeModel:D.nodeModel},{default:U(()=>[F(Z,{shadow:"never",class:"card-never",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(z,{onSubmit:N[2]||(N[2]=En(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"rerankerNodeFormRef",ref:P,"hide-required-asterisk":""},{default:U(()=>[F(X,{label:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label"),prop:"reranker_reference_list",rules:{type:"array",message:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),trigger:"change",required:!0}},{label:U(()=>[he("div",EY,[he("span",null,[Tt($e(D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.label")),1),N[3]||(N[3]=he("span",{class:"danger"},"*",-1))]),F(K,{onClick:S,link:"",type:"primary"},{default:U(()=>[F(Y,{class:"mr-4"},{default:U(()=>[F($)]),_:1})]),_:1})])]),default:U(()=>[(Xe(!0),Rn(Bo,null,zi(_.value.reranker_reference_list,(me,ge)=>(Xe(),Bt(C,{gutter:8,style:{"margin-bottom":"8px"},key:ge},{default:U(()=>[F(te,{span:22},{default:U(()=>[F(X,{prop:"reranker_reference_list."+ge,rules:{type:"array",required:!0,message:D.$t("views.applicationWorkflow.variable.placeholder"),trigger:"change"}},{default:U(()=>[(Xe(),Bt(ki,{key:ge,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.rerankerNode.rerankerContent.requiredMessage"),modelValue:_.value.reranker_reference_list[ge],"onUpdate:modelValue":Re=>_.value.reranker_reference_list[ge]=Re},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])]),_:2},1024),F(te,{span:1},{default:U(()=>[F(K,{link:"",type:"info",class:"mt-4",onClick:Re=>h(ge)},{default:U(()=>[F(Y,null,{default:U(()=>[F(W)]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["label","rules"]),F(X,{label:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[he("div",OY,[he("span",null,$e(D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),F(K,{type:"primary",link:"",onClick:v},{default:U(()=>[F(Y,null,{default:U(()=>[F(G)]),_:1})]),_:1})])]),default:U(()=>[he("div",xY,[F(C,null,{default:U(()=>[F(te,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt(" Score "+$e(D.$t("views.applicationWorkflow.nodes.rerankerNode.higher")),1)]),_:1}),F(te,{span:12,class:"lighter"},{default:U(()=>{var me;return[Tt($e((me=_.value.reranker_setting.similarity)==null?void 0:me.toFixed(3)),1)]}),_:1}),F(te,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(D.$t("chat.KnowledgeSource.referenceParagraph"))+" Top",1)]),_:1}),F(te,{span:12,class:"lighter"},{default:U(()=>[Tt($e(_.value.reranker_setting.top_n),1)]),_:1}),F(te,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(D.$t("views.applicationWorkflow.nodes.rerankerNode.max_paragraph_char_number")),1)]),_:1}),F(te,{span:12,class:"lighter"},{default:U(()=>[Tt($e(_.value.reranker_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),F(X,{label:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{label:U(()=>[he("div",SY,[he("span",null,[Tt($e(D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label")),1),N[4]||(N[4]=he("span",{class:"danger"},"*",-1))])])]),default:U(()=>[F(ki,{ref_key:"nodeCascaderRef",ref:A,nodeModel:D.nodeModel,class:"w-full",placeholder:D.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),modelValue:_.value.question_reference_address,"onUpdate:modelValue":N[0]||(N[0]=me=>_.value.question_reference_address=me)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(X,{label:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label"),prop:"reranker_model_id",rules:{required:!0,message:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),trigger:"change"}},{label:U(()=>[he("div",AY,[he("span",null,[Tt($e(D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.label")),1),N[5]||(N[5]=he("span",{class:"danger"},"*",-1))])])]),default:U(()=>[F(q,{onWheel:g,teleported:!1,modelValue:_.value.reranker_model_id,"onUpdate:modelValue":N[1]||(N[1]=me=>_.value.reranker_model_id=me),placeholder:D.$t("views.applicationWorkflow.nodes.rerankerNode.reranker_model.placeholder"),options:c.value,onSubmitModel:O,showFooter:"","model-type":"RERANKER"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),F(wY,{ref_key:"ParamSettingDialogRef",ref:o,onRefresh:w},null,512)]),_:1},8,["nodeModel"])}}});const MY=Rv(TY,[["__scopeId","data-v-364c376e"]]);class PY extends Qi{constructor(t){super(t,MY)}}const kY={type:"reranker-node",model:ea,view:PY},NY=Object.freeze(Object.defineProperty({__proto__:null,default:kY},Symbol.toStringTag,{value:"Module"}));var Sk=(e=>(e.embedding="views.application.applicationForm.dialog.vectorSearch",e.keywords="views.application.applicationForm.dialog.fullTextSearch",e.blend="views.application.applicationForm.dialog.hybridSearch",e))(Sk||{});const RY={class:"title-decoration-1 mb-8"},jY={class:"flex-between"},CY={class:"w-full"},DY={class:"flex align-center",style:{"line-height":"20px"}},IY=["title"],LY={class:"flex-between"},FY={class:"w-full"},$Y=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{dataset:t,application:n,user:o}=Pf(),{params:{id:r}}=Vu.config.globalProperties.$route,s=e,c=bt(),v={dataset_id_list:[],dataset_setting:{top_n:3,similarity:.6,max_paragraph_char_number:5e3,search_mode:"embedding"},question_reference_address:[]},h=go({get:()=>(s.nodeModel.properties.node_data||Qe.set(s.nodeModel.properties,"node_data",v),s.nodeModel.properties.node_data),set:X=>{Qe.set(s.nodeModel.properties,"node_data",X)}}),g=bt(),_=bt(),w=bt(),O=bt([]),S=bt(!1);function P(X){Qe.set(s.nodeModel.properties.node_data,"dataset_setting",X.dataset_setting)}const A=()=>{var X;(X=_.value)==null||X.open(h.value,"WORK_FLOW")};function R(X){const te=s.nodeModel.properties.node_data.dataset_id_list.filter(W=>W!==X);Qe.set(s.nodeModel.properties.node_data,"dataset_id_list",te)}function D(X){Qe.set(s.nodeModel.properties.node_data,"dataset_id_list",X)}function N(){w.value&&w.value.open(h.value.dataset_id_list)}function $(){r?n.asyncGetApplicationDataset(r,S).then(X=>{O.value=X.data}):t.asyncGetAllDataset(S).then(X=>{var te;O.value=(te=X.data)==null?void 0:te.filter(W=>{var C;return W.user_id===((C=o.userInfo)==null?void 0:C.id)})})}function Y(){$()}const K=()=>{var X;return Promise.all([c.value.validate(),(X=g.value)==null?void 0:X.validate()]).catch(te=>Promise.reject({node:s.nodeModel,errMessage:te}))};return Uo(()=>{$(),Qe.set(s.nodeModel,"validate",K)}),(X,te)=>{const W=le("Plus"),C=le("el-icon"),G=le("el-button"),q=le("el-text"),z=le("AppAvatar"),Z=le("Close"),me=le("el-form-item"),ge=le("Setting"),Re=le("el-col"),Be=le("el-row"),ve=le("el-form"),_e=le("el-card");return Xe(),Bt(Ji,{nodeModel:X.nodeModel},{default:U(()=>[he("h5",RY,$e(X.$t("views.applicationWorkflow.nodeSetting")),1),F(_e,{shadow:"never",class:"card-never"},{default:U(()=>[F(ve,{onSubmit:te[1]||(te[1]=En(()=>{},["prevent"])),model:h.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"DatasetNodeFormRef",ref:g},{default:U(()=>[F(me,{label:X.$t("views.log.selectDataset")},{label:U(()=>[he("div",jY,[he("span",null,$e(X.$t("views.log.selectDataset")),1),F(G,{type:"primary",link:"",onClick:N},{default:U(()=>[F(C,null,{default:U(()=>[F(W)]),_:1})]),_:1})])]),default:U(()=>{var Ce;return[he("div",CY,[((Ce=h.value.dataset_id_list)==null?void 0:Ce.length)===0?(Xe(),Bt(q,{key:0,type:"info"},{default:U(()=>[Tt($e(X.$t("views.application.applicationForm.form.relatedKnowledge.placeholder")),1)]),_:1})):(Xe(!0),Rn(Bo,{key:1},zi(h.value.dataset_id_list,(tt,gt)=>{var st,At,jt,yt;return Xe(),Rn("div",{key:gt,class:"flex-between border border-r-4 white-bg mb-4",style:{padding:"5px 8px"}},[he("div",DY,[((st=yr(og)(O.value,tt,"id"))==null?void 0:st.type)==="1"?(Xe(),Bt(z,{key:0,class:"mr-8 avatar-purple",shape:"square",size:20},{default:U(()=>[...te[2]||(te[2]=[he("img",{src:SL,style:{width:"58%"},alt:""},null,-1)])]),_:1})):((At=yr(og)(O.value,tt,"id"))==null?void 0:At.type)==="2"?(Xe(),Bt(z,{key:1,class:"mr-8 avatar-purple",shape:"square",size:20,style:{background:"none"}},{default:U(()=>[...te[3]||(te[3]=[he("img",{src:AL,style:{width:"100%"},alt:""},null,-1)])]),_:1})):(Xe(),Bt(z,{key:2,class:"mr-8 avatar-blue",shape:"square",size:20},{default:U(()=>[...te[4]||(te[4]=[he("img",{src:TL,style:{width:"58%"},alt:""},null,-1)])]),_:1})),he("div",{class:"ellipsis",title:(jt=yr(og)(O.value,tt,"id"))==null?void 0:jt.name},$e((yt=yr(og)(O.value,tt,"id"))==null?void 0:yt.name),9,IY)]),F(G,{text:"",onClick:Kt=>R(tt)},{default:U(()=>[F(C,null,{default:U(()=>[F(Z)]),_:1})]),_:2},1032,["onClick"])])}),128))])]}),_:1},8,["label"]),F(me,{label:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")},{label:U(()=>[he("div",LY,[he("span",null,$e(X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchParam")),1),F(G,{type:"primary",link:"",onClick:A},{default:U(()=>[F(C,null,{default:U(()=>[F(ge)]),_:1})]),_:1})])]),default:U(()=>[he("div",FY,[F(Be,null,{default:U(()=>[F(Re,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(X.$t("views.application.applicationForm.dialog.selectSearchMode")),1)]),_:1}),F(Re,{span:12,class:"lighter"},{default:U(()=>[Tt($e(X.$t(yr(Sk)[h.value.dataset_setting.search_mode])),1)]),_:1}),F(Re,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(X.$t("views.application.applicationForm.dialog.similarityThreshold")),1)]),_:1}),F(Re,{span:12,class:"lighter"},{default:U(()=>{var Ce;return[Tt($e((Ce=h.value.dataset_setting.similarity)==null?void 0:Ce.toFixed(3)),1)]}),_:1}),F(Re,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(X.$t("views.application.applicationForm.dialog.topReferences")),1)]),_:1}),F(Re,{span:12,class:"lighter"},{default:U(()=>[Tt($e(h.value.dataset_setting.top_n),1)]),_:1}),F(Re,{span:12,class:"color-secondary lighter"},{default:U(()=>[Tt($e(X.$t("views.application.applicationForm.dialog.maxCharacters")),1)]),_:1}),F(Re,{span:12,class:"lighter"},{default:U(()=>[Tt($e(h.value.dataset_setting.max_paragraph_char_number),1)]),_:1})]),_:1})])]),_:1},8,["label"]),F(me,{label:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.label"),prop:"question_reference_address",rules:{message:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.requiredMessage"),trigger:"blur",required:!0}},{default:U(()=>[F(ki,{ref_key:"nodeCascaderRef",ref:c,nodeModel:X.nodeModel,class:"w-full",placeholder:X.$t("views.applicationWorkflow.nodes.searchDatasetNode.searchQuestion.placeholder"),modelValue:h.value.question_reference_address,"onUpdate:modelValue":te[0]||(te[0]=Ce=>h.value.question_reference_address=Ce)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"])]),_:1},8,["model"])]),_:1}),F(jL,{ref_key:"ParamSettingDialogRef",ref:_,onRefresh:P},null,512),F(CL,{ref_key:"AddDatasetDialogRef",ref:w,onAddData:D,data:O.value,onRefresh:Y,loading:S.value},null,8,["data","loading"])]),_:1},8,["nodeModel"])}}});class BY extends Qi{constructor(t){super(t,$Y)}}const UY={type:"search-dataset-node",model:ea,view:BY},GY=Object.freeze(Object.defineProperty({__proto__:null,default:UY},Symbol.toStringTag,{value:"Module"})),VY={class:"title-decoration-1 mb-8"},WY={class:"flex-between w-full"},zY={class:"flex-between w-full"},HY={class:"flex align-center"},XY={class:"mr-4"},YY=Lr({__name:"index",props:{nodeModel:{}},setup(e){const{model:t}=Pf(),{params:{id:n}}=Vu.config.globalProperties.$route,o=e,r=bt(null),s=bt(),c=bt(),v=()=>{var O;return Promise.all([c.value?c.value.validate():Promise.resolve(""),(O=s.value)==null?void 0:O.validate()]).catch(S=>Promise.reject({node:o.nodeModel,errMessage:S}))},h=O=>O.ctrlKey===!0?(O.preventDefault(),!0):(O.stopPropagation(),!0),g={stt_model_id:"",is_result:!0,audio_list:[]},_=go({get:()=>(o.nodeModel.properties.node_data||Qe.set(o.nodeModel.properties,"node_data",g),o.nodeModel.properties.node_data),set:O=>{Qe.set(o.nodeModel.properties,"node_data",O)}});function w(){n?Aa.getApplicationSTTModel(n).then(O=>{r.value=Qe.groupBy(O==null?void 0:O.data,"provider")}):t.asyncGetModel().then(O=>{r.value=Qe.groupBy(O==null?void 0:O.data,"provider")})}return Uo(()=>{w(),Qe.set(o.nodeModel,"validate",v)}),(O,S)=>{const P=le("ModelSelect"),A=le("el-form-item"),R=le("AppIcon"),D=le("el-tooltip"),N=le("el-switch"),$=le("el-form"),Y=le("el-card");return Xe(),Bt(Ji,{"node-model":O.nodeModel},{default:U(()=>[he("h5",VY,$e(O.$t("views.applicationWorkflow.nodeSetting")),1),F(Y,{shadow:"never",class:"card-never"},{default:U(()=>[F($,{onSubmit:S[4]||(S[4]=En(()=>{},["prevent"])),model:_.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:s,"hide-required-asterisk":""},{default:U(()=>[F(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label"),prop:"stt_model_id",rules:{required:!0,message:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),trigger:"change"}},{label:U(()=>[he("div",WY,[he("div",null,[he("span",null,[Tt($e(O.$t("views.applicationWorkflow.nodes.speechToTextNode.stt_model.label")),1),S[5]||(S[5]=he("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(P,{onWheel:h,teleported:!1,modelValue:_.value.stt_model_id,"onUpdate:modelValue":S[0]||(S[0]=K=>_.value.stt_model_id=K),placeholder:O.$t("views.application.applicationForm.form.voiceInput.placeholder"),options:r.value,showFooter:"","model-type":"STT"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(A,{label:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),prop:"audio_list",rules:{message:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label"),trigger:"change",required:!0}},{label:U(()=>[he("div",zY,[he("div",null,[he("span",null,[Tt($e(O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.label")),1),S[6]||(S[6]=he("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(ki,{ref_key:"nodeCascaderRef",ref:c,nodeModel:O.nodeModel,class:"w-full",placeholder:O.$t("views.applicationWorkflow.nodes.speechToTextNode.audio.placeholder"),modelValue:_.value.audio_list,"onUpdate:modelValue":S[1]||(S[1]=K=>_.value.audio_list=K)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(A,{label:O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:S[3]||(S[3]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",HY,[he("div",XY,[he("span",null,$e(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(D,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(O.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(R,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(N,{size:"small",modelValue:_.value.is_result,"onUpdate:modelValue":S[2]||(S[2]=K=>_.value.is_result=K)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1})]),_:1},8,["node-model"])}}});class qY extends Qi{constructor(t){super(t,YY)}}const KY={type:"speech-to-text-node",model:ea,view:qY},ZY=Object.freeze(Object.defineProperty({__proto__:null,default:KY},Symbol.toStringTag,{value:"Module"})),JY={class:"title-decoration-1 mb-8"},QY={class:"break-all"},eq=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=bt(!1),o=[{label:Qt("views.applicationWorkflow.nodes.startNode.currentTime"),value:"time"},{label:Qt("views.application.applicationForm.form.historyRecord.label"),value:"history_context"},{label:Qt("chat.chatId"),value:"chat_id"}],r=()=>{const v=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Qe.cloneDeep(g.properties.user_input_field_list)).reduce((g,_)=>[...g,..._],[]).map(g=>g.label&&g.label.input_type==="TooltipLabel"?{label:g.label.label,value:g.field||g.variable}:{label:g.label||g.name,value:g.field||g.variable}),h=t.nodeModel.graphModel.nodes.filter(g=>g.id==="base-node").map(g=>Qe.cloneDeep(g.properties.api_input_field_list)).reduce((g,_)=>[...g,..._],[]).map(g=>({label:g.name||g.variable,value:g.variable}));return[...v,...h]},s=()=>{const v=r();Qe.set(t.nodeModel.properties.config,"globalFields",[...o,...v])};t.nodeModel.graphModel.eventCenter.on("refreshFieldList",s);const c=()=>{let v=Qe.cloneDeep(t.nodeModel.properties.config.fields);const h=t.nodeModel.graphModel.nodes.filter(_=>_.id==="base-node").filter(_=>_.properties.node_data.file_upload_enable).map(_=>Qe.cloneDeep(_.properties.node_data.file_upload_setting)).filter(_=>_);if(v=v.filter(_=>_.value!=="image"&&_.value!=="document"&&_.value!=="audio"&&_.value!=="video"&&_.value!=="other"),h.length===0){Qe.set(t.nodeModel.properties.config,"fields",v);return}let g=[];h[0].document&&g.push({label:Qt("common.fileUpload.document"),value:"document"}),h[0].image&&g.push({label:Qt("common.fileUpload.image"),value:"image"}),h[0].audio&&g.push({label:Qt("common.fileUpload.audio"),value:"audio"}),h[0].video&&g.push({label:Qt("common.fileUpload.video"),value:"video"}),h[0].other&&g.push({label:Qt("common.fileUpload.other"),value:"other"}),Qe.set(t.nodeModel.properties.config,"fields",[...v,...g])};return t.nodeModel.graphModel.eventCenter.on("refreshFileUploadConfig",c),Uo(()=>{s(),c()}),(v,h)=>{const g=le("AppIcon"),_=le("el-button"),w=le("el-tooltip");return Xe(),Bt(Ji,{nodeModel:v.nodeModel},{default:U(()=>[he("h5",JY,$e(v.$t("views.applicationWorkflow.variable.global")),1),(Xe(!0),Rn(Bo,null,zi(v.nodeModel.properties.config.globalFields,(O,S)=>(Xe(),Rn("div",{key:S,class:"flex-between border-r-4 p-8-12 mb-8 layout-bg lighter",onMouseenter:h[0]||(h[0]=P=>n.value=!0),onMouseleave:h[1]||(h[1]=P=>n.value=!1)},[he("span",QY,$e(O.label)+" "+$e("{"+O.value+"}"),1),n.value===!0?(Xe(),Bt(w,{key:0,effect:"dark",content:v.$t("views.applicationWorkflow.setting.copyParam"),placement:"top"},{default:U(()=>[F(_,{link:"",onClick:P=>yr(HM)(`{{global.${O.value}}}`),style:{padding:"0"}},{default:U(()=>[F(g,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:2},1032,["content"])):nr("",!0)],32))),128))]),_:1},8,["nodeModel"])}}});class tq extends Qi{constructor(t){super(t,eq)}}const nq={type:"start-node",model:ea,view:tq},rq=Object.freeze(Object.defineProperty({__proto__:null,default:nq},Symbol.toStringTag,{value:"Module"})),oq={class:"title-decoration-1 mb-8"},iq={class:"flex-between w-full"},aq={class:"flex-between w-full"},lq={class:"flex align-center"},uq={class:"mr-4"},sq=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=bt(),{model:n}=Pf(),{params:{id:o}}=Vu.config.globalProperties.$route,r=e,s=bt(null),c=bt(),v=bt(),h=()=>{var A;return Promise.all([v.value?v.value.validate():Promise.resolve(""),(A=c.value)==null?void 0:A.validate()]).catch(R=>Promise.reject({node:r.nodeModel,errMessage:R}))},g=A=>A.ctrlKey===!0?(A.preventDefault(),!0):(A.stopPropagation(),!0),_={tts_model_id:"",is_result:!0,content_list:[],model_params_setting:{}},w=go({get:()=>(r.nodeModel.properties.node_data||Qe.set(r.nodeModel.properties,"node_data",_),r.nodeModel.properties.node_data),set:A=>{Qe.set(r.nodeModel.properties,"node_data",A)}});function O(){o?Aa.getApplicationTTSModel(o).then(A=>{s.value=Qe.groupBy(A==null?void 0:A.data,"provider")}):n.asyncGetModel().then(A=>{s.value=Qe.groupBy(A==null?void 0:A.data,"provider")})}const S=()=>{var R;const A=w.value.tts_model_id;if(!A){Up(Qt("views.application.applicationForm.form.voicePlay.requiredMessage"));return}(R=t.value)==null||R.open(A,o,w.value.model_params_setting)},P=A=>{w.value.model_params_setting=A};return Uo(()=>{O(),Qe.set(r.nodeModel,"validate",h)}),(A,R)=>{const D=le("Setting"),N=le("el-icon"),$=le("el-button"),Y=le("ModelSelect"),K=le("el-form-item"),X=le("AppIcon"),te=le("el-tooltip"),W=le("el-switch"),C=le("el-form"),G=le("el-card");return Xe(),Bt(Ji,{"node-model":A.nodeModel},{default:U(()=>[he("h5",oq,$e(A.$t("views.applicationWorkflow.nodeSetting")),1),F(G,{shadow:"never",class:"card-never"},{default:U(()=>[F(C,{onSubmit:R[4]||(R[4]=En(()=>{},["prevent"])),model:w.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"aiChatNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[F(K,{label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label"),prop:"tts_model_id",rules:{required:!0,message:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),trigger:"change"}},{label:U(()=>[he("div",iq,[he("div",null,[he("span",null,[Tt($e(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.tts_model.label")),1),R[5]||(R[5]=he("span",{class:"danger"},"*",-1))])]),F($,{type:"primary",link:"",onClick:S,disabled:!w.value.tts_model_id,class:"mr-4"},{default:U(()=>[F(N,null,{default:U(()=>[F(D)]),_:1})]),_:1},8,["disabled"])])]),default:U(()=>[F(Y,{onWheel:g,teleported:!1,modelValue:w.value.tts_model_id,"onUpdate:modelValue":R[0]||(R[0]=q=>w.value.tts_model_id=q),placeholder:A.$t("views.application.applicationForm.form.voicePlay.placeholder"),options:s.value,showFooter:"","model-type":"TTS"},null,8,["modelValue","placeholder","options"])]),_:1},8,["label","rules"]),F(K,{prop:"content_list",label:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),rules:{message:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),trigger:"blur",required:!0}},{label:U(()=>[he("div",aq,[he("div",null,[he("span",null,[Tt($e(A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label")),1),R[6]||(R[6]=he("span",{class:"danger"},"*",-1))])])])]),default:U(()=>[F(ki,{ref_key:"nodeCascaderRef",ref:v,nodeModel:A.nodeModel,class:"w-full",placeholder:A.$t("views.applicationWorkflow.nodes.textToSpeechNode.content.label"),modelValue:w.value.content_list,"onUpdate:modelValue":R[1]||(R[1]=q=>w.value.content_list=q)},null,8,["nodeModel","placeholder","modelValue"])]),_:1},8,["label","rules"]),F(K,{label:A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label"),onClick:R[3]||(R[3]=En(()=>{},["prevent"]))},{label:U(()=>[he("div",lq,[he("div",uq,[he("span",null,$e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.label")),1)]),F(te,{effect:"dark",placement:"right","popper-class":"max-w-200"},{content:U(()=>[Tt($e(A.$t("views.applicationWorkflow.nodes.aiChatNode.returnContent.tooltip")),1)]),default:U(()=>[F(X,{iconName:"app-warning",class:"app-warning-icon"})]),_:1})])]),default:U(()=>[F(W,{size:"small",modelValue:w.value.is_result,"onUpdate:modelValue":R[2]||(R[2]=q=>w.value.is_result=q)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1}),F(ZM,{ref_key:"TTSModeParamSettingDialogRef",ref:t,onRefresh:P},null,512)]),_:1},8,["node-model"])}}});class cq extends Qi{constructor(t){super(t,sq)}}const fq={type:"text-to-speech-node",model:ea,view:cq},dq=Object.freeze(Object.defineProperty({__proto__:null,default:fq},Symbol.toStringTag,{value:"Module"})),pq={class:"flex-between"},hq={class:"flex-between mb-8"},vq={class:"lighter"},yq={key:0,class:"flex w-full"},mq=Lr({__name:"index",props:{nodeModel:{}},setup(e){const t=e,n=["string","num","json"],o=S=>S.ctrlKey===!0?(S.preventDefault(),!0):(S.stopPropagation(),!0),r={variable_list:[{id:Oy(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""}]},s=go({get:()=>(t.nodeModel.properties.node_data||Qe.set(t.nodeModel.properties,"node_data",r),t.nodeModel.properties.node_data),set:S=>{Qe.set(t.nodeModel.properties,"node_data",S)}}),c=bt(),v=bt(),h=bt(),g=async()=>{var P;let S=[(P=c.value)==null?void 0:P.validate(),...v.value.map(A=>A.validate())];return h.value&&(S=[...S,...v.value.map(A=>A.validate())]),Promise.all(S).catch(A=>Promise.reject({node:t.nodeModel,errMessage:A}))};function _(){const S=Qe.cloneDeep(t.nodeModel.properties.node_data.variable_list),P={id:Oy(),fields:[],value:null,reference:[],type:"string",source:"custom",name:""};S.push(P),Qe.set(t.nodeModel.properties.node_data,"variable_list",S)}function w(S){const P=Qe.cloneDeep(t.nodeModel.properties.node_data.variable_list);P.splice(S,1),Qe.set(t.nodeModel.properties.node_data,"variable_list",P)}function O(S){t.nodeModel.graphModel.nodes.map(P=>{P.id==="start-node"&&P.properties.config.globalFields.forEach(A=>{A.value===S.fields[1]&&(S.name=A.label)})})}return Uo(()=>{var S;typeof((S=t.nodeModel.properties.node_data)==null?void 0:S.is_result)>"u"&&qp(t.nodeModel)&&Qe.set(t.nodeModel.properties.node_data,"is_result",!0),Qe.set(t.nodeModel,"validate",g)}),(S,P)=>{const A=le("Delete"),R=le("el-icon"),D=le("el-button"),N=le("el-form-item"),$=le("el-option"),Y=le("el-select"),K=le("el-input"),X=le("el-input-number"),te=le("CodemirrorEditor"),W=le("el-card"),C=le("Plus"),G=le("el-form");return Xe(),Bt(Ji,{nodeModel:S.nodeModel},{default:U(()=>[F(G,{onSubmit:P[0]||(P[0]=En(()=>{},["prevent"])),model:s.value,"label-position":"top","require-asterisk-position":"right","label-width":"auto",ref_key:"replyNodeFormRef",ref:c,"hide-required-asterisk":""},{default:U(()=>[(Xe(!0),Rn(Bo,null,zi(s.value.variable_list,(q,z)=>(Xe(),Bt(W,{key:q.id,shadow:"never",class:"card-never mb-8",style:{"--el-card-padding":"12px"}},{default:U(()=>[F(N,{label:S.$t("views.applicationWorkflow.variable.label")},{label:U(()=>[he("div",pq,[he("div",null,[Tt($e(S.$t("views.applicationWorkflow.variable.label"))+" ",1),P[1]||(P[1]=he("span",{class:"danger"},"*",-1))]),s.value.variable_list.length>1?(Xe(),Bt(D,{key:0,text:"",onClick:Z=>w(z)},{default:U(()=>[F(R,null,{default:U(()=>[F(A)]),_:1})]),_:2},1032,["onClick"])):nr("",!0)])]),default:U(()=>[F(ki,{ref_for:!0,ref_key:"nodeCascaderRef",ref:v,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:q.fields,"onUpdate:modelValue":Z=>q.fields=Z,global:!0,onChange:Z=>O(q)},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]),he("div",hq,[he("span",vq,[Tt($e(S.$t("views.applicationWorkflow.nodes.variableAssignNode.assign")),1),P[2]||(P[2]=he("span",{class:"danger"},"*",-1))]),F(Y,{teleported:!1,modelValue:q.source,"onUpdate:modelValue":Z=>q.source=Z,size:"small",style:{width:"85px"}},{default:U(()=>[F($,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.reference"),value:"referencing"},null,8,["label"]),F($,{label:S.$t("views.applicationWorkflow.nodes.replyNode.replyContent.custom"),value:"custom"},null,8,["label"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),q.source==="custom"?(Xe(),Rn("div",yq,[F(Y,{modelValue:q.type,"onUpdate:modelValue":Z=>q.type=Z,style:{"max-width":"85px"},class:"mr-8",onChange:Z=>s.value.variable_list[z].value=null},{default:U(()=>[(Xe(),Rn(Bo,null,zi(n,Z=>F($,{key:Z,label:Z,value:Z},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),q.type==="string"?(Xe(),Bt(N,{key:0,prop:"variable_list."+z+".value",rules:{message:yr(Qt)("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[F(K,{modelValue:q.value,"onUpdate:modelValue":Z=>q.value=Z,placeholder:S.$t("common.inputPlaceholder"),"show-word-limit":"",clearable:"",onWheel:o},null,8,["modelValue","onUpdate:modelValue","placeholder"])]),_:2},1032,["prop","rules"])):q.type==="num"?(Xe(),Bt(N,{key:1,prop:"variable_list."+z+".value",rules:{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0}},{default:U(()=>[F(X,{modelValue:q.value,"onUpdate:modelValue":Z=>q.value=Z},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop","rules"])):q.type==="json"?(Xe(),Bt(N,{key:2,class:"w-full",prop:"variable_list."+z+".value",rules:[{message:S.$t("common.inputPlaceholder"),trigger:"blur",required:!0},{validator:(Z,me,ge)=>{try{JSON.parse(me),ge()}catch{ge(new Error("Invalid JSON format"))}},trigger:"blur"}]},{default:U(()=>[F(te,{title:"JSON",modelValue:q.value,"onUpdate:modelValue":Z=>q.value=Z,style:{height:"100px",width:"155px"},onSubmitDialog:Z=>s.value.variable_list[z].value=Z},null,8,["modelValue","onUpdate:modelValue","onSubmitDialog"])]),_:2},1032,["prop","rules"])):nr("",!0)])):(Xe(),Bt(N,{key:1},{default:U(()=>[F(ki,{ref_for:!0,ref_key:"nodeCascaderRef2",ref:h,nodeModel:S.nodeModel,class:"w-full",placeholder:S.$t("views.applicationWorkflow.variable.placeholder"),modelValue:q.reference,"onUpdate:modelValue":Z=>q.reference=Z},null,8,["nodeModel","placeholder","modelValue","onUpdate:modelValue"])]),_:2},1024))]),_:2},1024))),128)),F(D,{link:"",type:"primary",onClick:_},{default:U(()=>[F(R,{class:"mr-4"},{default:U(()=>[F(C)]),_:1}),Tt(" "+$e(S.$t("common.add")),1)]),_:1})]),_:1},8,["model"])]),_:1},8,["nodeModel"])}}});class gq extends Qi{constructor(t){super(t,mq)}}const _q={type:"variable-assign-node",model:ea,view:gq},bq=Object.freeze(Object.defineProperty({__proto__:null,default:_q},Symbol.toStringTag,{value:"Module"})),dT=Lr({__name:"CustomLine",props:{model:{}},setup(e){const t=e,n=()=>{t.model.graphModel.deleteEdgeById(t.model.id)};return(o,r)=>Pl((Xe(),Rn("div",{class:"custom-edge cursor",onMouseup:r[0]||(r[0]=En(()=>{},["stop"])),onClick:r[1]||(r[1]=En(()=>{},["stop"]))},[(Xe(),Rn("svg",{onClick:n,width:"22",height:"22",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[...r[2]||(r[2]=[he("path",{d:"M12 23.0001C5.925 23.0001 1 18.0751 1 12.0001C1 5.92512 5.925 1.00012 12 1.00012C18.075 1.00012 23 5.92512 23 12.0001C23 18.0751 18.075 23.0001 12 23.0001Z",fill:"#3370FF"},null,-1),he("path",{d:"M9.02524 7.61124L12.0002 10.5862L14.9752 7.61124C15.069 7.5175 15.1962 7.46484 15.3287 7.46484C15.4613 7.46484 15.5885 7.5175 15.6822 7.61124L16.3892 8.31824C16.483 8.412 16.5356 8.53915 16.5356 8.67174C16.5356 8.80432 16.483 8.93147 16.3892 9.02524L13.4142 12.0002L16.3892 14.9752C16.483 15.069 16.5356 15.1962 16.5356 15.3287C16.5356 15.4613 16.483 15.5885 16.3892 15.6822L15.6822 16.3892C15.5885 16.483 15.4613 16.5356 15.3287 16.5356C15.1962 16.5356 15.069 16.483 14.9752 16.3892L12.0002 13.4142L9.02524 16.3892C8.93147 16.483 8.80432 16.5356 8.67174 16.5356C8.53916 16.5356 8.412 16.483 8.31824 16.3892L7.61124 15.6822C7.5175 15.5885 7.46484 15.4613 7.46484 15.3287C7.46484 15.1962 7.5175 15.069 7.61124 14.9752L10.5862 12.0002L7.61124 9.02524C7.5175 8.93147 7.46484 8.80432 7.46484 8.67174C7.46484 8.53915 7.5175 8.412 7.61124 8.31824L8.31824 7.61124C8.412 7.5175 8.53916 7.46484 8.67174 7.46484C8.80432 7.46484 8.93147 7.5175 9.02524 7.61124Z",fill:"white"},null,-1)])]))],544)),[[wv,t.model.isHovered]])}});function wq(e,t){const n=e.getBoundingClientRect();return t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom}const Eq=32,Oq=32;class xq extends cn.BezierEdge{constructor(){super();wa(this,"isMounted");wa(this,"customLineApp");wa(this,"root");this.isMounted=!1,this.handleMouseUp=n=>{this.props.graphModel.clearSelectElements(),this.props.model.isSelected=!0;const o=n.target.parentNode.parentNode.querySelector(".lf-custom-edge-wrapper");wq(o,n)&&this.props.model.graphModel.deleteEdgeById(this.props.model.id)}}renderVueComponent(n){var r;this.unmountVueComponent(),this.root=n;const{graphModel:o}=this.props;n&&(Wg()?rk(this.targetId(),dT,n,this.props.model,o,(s,c)=>({model:s,graph:c})):(this.customLineApp=YM({render:()=>Bp(dT,{model:this.props.model})}),(r=this.customLineApp)==null||r.mount(n)))}targetId(){return`${this.props.graphModel.flowId}:${this.props.model.id}`}componentWillUnmount(){super.componentWillUnmount&&super.componentWillUnmount(),Wg()&&ok(this.targetId()),this.unmountVueComponent()}unmountVueComponent(){return this.customLineApp&&(this.customLineApp.unmount(),this.customLineApp=null),this.root&&(this.root.innerHTML=""),this.root}getEdge(){const{model:n}=this.props,o=n.id,{customWidth:r=Eq,customHeight:s=Oq}=n.getProperties(),{startPoint:c,endPoint:v,path:h,isAnimation:g,arrowConfig:_}=n,w=n.getEdgeAnimationStyle(),{strokeDasharray:O,stroke:S,strokeDashoffset:P,animationName:A,animationDuration:R,animationIterationCount:D,animationTimingFunction:N,animationDirection:$}=w,Y={x:(c.x+v.x-r)/2,y:(c.y+v.y-s)/2,width:r,height:s},K=n.getEdgeStyle(),X={width:r,height:s};return setTimeout(()=>{const te=document.getElementById(o);te&&!this.isMounted&&(this.isMounted=!0,this.renderVueComponent(te))},0),delete K.stroke,cn.h("g",{},[cn.h("style",{type:"text/css"},".lf-edge{stroke:#afafaf}.lf-edge:hover{stroke: #3370FF;}"),cn.h("path",{d:h,...K,..._,...g?{strokeDasharray:O,stroke:S,style:{strokeDashoffset:P,animationName:A,animationDuration:R,animationIterationCount:D,animationTimingFunction:N,animationDirection:$}}:{}}),cn.h("foreignObject",{...Y,y:Y.y+5,x:Y.x+5,style:{}},[cn.h("div",{id:o,style:{...X},className:"lf-custom-edge-wrapper"})])])}}class Sq extends cn.BezierEdgeModel{getArrowStyle(){const t=super.getArrowStyle();return t.offset=1,t.verticalLength=0,t}getEdgeStyle(){const t=super.getEdgeStyle();return t.strokeWidth=2,t.stroke="#BBBFC4",t.offset=0,t}getData(){const t=super.getData();return t&&(t.sourceAnchorId=this.sourceAnchorId,t.targetAnchorId=this.targetAnchorId),t}updatePathByAnchor(){const n=this.graphModel.getNodeModelById(this.sourceNodeId).getDefaultAnchor().find(s=>s.id===this.sourceAnchorId),r=this.graphModel.getNodeModelById(this.targetNodeId).getDefaultAnchor().find(s=>s.id===this.targetAnchorId);if(n&&r){const s={x:n.x,y:n.y};this.updateStartPoint(s);const c={x:r.x,y:r.y};this.updateEndPoint(c)}this.pointsList=[],this.initPoints()}setAttributes(){super.setAttributes(),this.isHitable=!0,this.zIndex=0}}const Aq={type:"app-edge",view:xq,model:Sq},Tq=Lr({__name:"NodeControl",props:{lf:Object||String||null},setup(e){const t=e;function n(){var h;(h=t.lf)==null||h.zoom(!0,[0,0])}function o(){var h;(h=t.lf)==null||h.zoom(!1,[0,0])}function r(){var h,g,_;(h=t.lf)==null||h.resetZoom(),(g=t.lf)==null||g.resetTranslate(),(_=t.lf)==null||_.fitView()}const s=()=>{var h;(h=t.lf)==null||h.extension.dagre.layout()},c=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!1})},v=()=>{var h;(h=t.lf)==null||h.graphModel.nodes.forEach(g=>{g.properties.showNode=!0})};return(h,g)=>{const _=le("ZoomOut"),w=le("el-icon"),O=le("el-tooltip"),S=le("el-button"),P=le("ZoomIn"),A=le("AppIcon"),R=le("el-divider"),D=le("el-card");return Xe(),Bt(D,{shadow:"always",style:{"--el-card-padding":"8px 12px","--el-card-border-radius":"8px"}},{default:U(()=>[F(S,{link:"",onClick:o},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomOut"),placement:"top"},{default:U(()=>[F(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomOut")},{default:U(()=>[F(_)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:n},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.zoomIn"),placement:"top"},{default:U(()=>[F(w,{size:16,title:h.$t("views.applicationWorkflow.control.zoomIn")},{default:U(()=>[F(P)]),_:1},8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:r},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.fitView"),placement:"top"},{default:U(()=>[F(A,{iconName:"app-fitview",title:h.$t("views.applicationWorkflow.control.fitView")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(R,{direction:"vertical"}),F(S,{link:"",onClick:c},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.retract"),placement:"top"},{default:U(()=>[F(A,{style:{"font-size":"16px"},iconName:"app-retract",title:h.$t("views.applicationWorkflow.control.retract")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:v},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.extend"),placement:"top"},{default:U(()=>[F(A,{style:{"font-size":"16px"},iconName:"app-extend",title:h.$t("views.applicationWorkflow.control.extend")},null,8,["title"])]),_:1},8,["content"])]),_:1}),F(S,{link:"",onClick:s},{default:U(()=>[F(O,{effect:"dark",content:h.$t("views.applicationWorkflow.control.beautify"),placement:"top"},{default:U(()=>[F(A,{style:{"font-size":"16px"},iconName:"app-beautify",title:h.$t("views.applicationWorkflow.control.beautify")},null,8,["title"])]),_:1},8,["content"])]),_:1})]),_:1})}}});let ic=null;function pT(e,t){return e.x+=t,e.y+=t,e.text&&(e.text.x+=t,e.text.y+=t),e}function hT(e,t){return e.startPoint&&(e.startPoint.x+=t,e.startPoint.y+=t),e.endPoint&&(e.endPoint.x+=t,e.endPoint.y+=t),e.pointsList&&e.pointsList.length>0&&e.pointsList.forEach(n=>{n.x+=t,n.y+=t}),e.text&&(e.text.x+=t,e.text.y+=t),e}const Zh=40;let fg=40;function Mq(e,t){const{keyboard:n}=e,{options:{keyboard:o}}=n,r=()=>{var w,O;if(fg=Zh,!(o!=null&&o.enabled)||t.textEditElement)return!0;const{guards:v}=e.options,h=t.getSelectElements(!1);if(!(v&&v.beforeClone?v.beforeClone(h):!0)||h.nodes.length===0&&h.edges.length===0)return ic=null,!0;const _=h.nodes.filter(S=>S.type===si.Start||S.type===si.Base);if(_.length>0){xa(((O=(w=_[0])==null?void 0:w.properties)==null?void 0:O.stepName)+Qt("views.applicationWorkflow.tip.cannotCopy"));return}return ic=h,ic.nodes.forEach(S=>pT(S,Zh)),ic.edges.forEach(S=>hT(S,Zh)),Up(Qt("views.applicationWorkflow.tip.copyError")),!1},s=()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;if(ic&&(ic.nodes||ic.edges)){e.clearSelectElements();const v=e.addElements(ic,fg);if(!v)return!0;v.nodes.forEach(h=>e.selectElementById(h.id,!0)),v.edges.forEach(h=>e.selectElementById(h.id,!0)),ic.nodes.forEach(h=>pT(h,Zh)),ic.edges.forEach(h=>hT(h,Zh)),fg=fg+Zh}return!1},c=()=>{var g;const v=t.getSelectElements(!0);if(e.clearSelectElements(),v.nodes.length==0&&v.edges.length==0)return;if(v.edges.length>0&&v.nodes.length==0){v.edges.forEach(_=>e.deleteEdge(_.id));return}const h=v.nodes.filter(_=>["start-node","base-node"].includes(_.type));if(h.length>0){xa(`${(g=h[0].properties)==null?void 0:g.stepName}${Qt("views.applicationWorkflow.delete.deleteMessage")}`);return}return Uw(Qt("common.tip"),Qt("views.applicationWorkflow.delete.confirmTitle"),{confirmButtonText:Qt("common.confirm"),confirmButtonClass:"danger"}).then(()=>{if(!(o!=null&&o.enabled)||t.textEditElement)return!0;v.edges.forEach(_=>e.deleteEdge(_.id)),v.nodes.forEach(_=>e.deleteNode(_.id))}),!1};t.eventCenter.on("copy_node",r),n.on(["cmd + c","ctrl + c"],r),n.on(["cmd + v","ctrl + v"],s),n.on(["cmd + z","ctrl + z"],()=>{}),n.on(["cmd + y","ctrl + y"],()=>!(o!=null&&o.enabled)||t.textEditElement?!0:(e.redo(),!1)),n.on(["backspace"],c)}class Pq{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(t){return this.init(t),this.execute(!0)}init(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[],this.comboEdges=t.comboEdges||[],this.hiddenNodes=t.hiddenNodes||[],this.hiddenEdges=t.hiddenEdges||[],this.hiddenCombos=t.hiddenCombos||[],this.vedges=t.vedges||[]}execute(t){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(t){t&&Object.assign(this,t)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}const kq=e=>typeof e=="string",vT=Array.isArray,Zg=e=>typeof e=="number",Ak=e=>e!==null&&typeof e=="object",Jg=e=>{if(e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const t=[];return e.forEach(n=>{t.push(n)}),t.map(n=>Jg(n))}if(typeof e=="object"&&Object.keys(e).length){const t=Object.assign({},e);return Object.keys(t).forEach(n=>{t[n]=Jg(t[n])}),t}return e},Jh=(e,t)=>{const n=e[t];return Ak(n)?n.cell:n},yT=(e,t,n)=>{let o;return n?o=n:Zg(e)?o=()=>e:o=()=>t,o},Nq=(e,t)=>{if(e!=="next"&&e!=="prev")return t},mT=e=>{e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev};let Rq=class{constructor(){const t={};t.prev=t,t.next=t.prev,this.shortcut=t}dequeue(){const t=this.shortcut,n=t.prev;if(n&&n!==t)return mT(n),n}enqueue(t){const n=this.shortcut;t.prev&&t.next&&mT(t),t.next=n.next,n.next.prev=t,n.next=t,t.prev=n}toString(){const t=[],n=this.shortcut;let o=n.prev;for(;o!==n;)t.push(JSON.stringify(o,Nq)),o=o==null?void 0:o.prev;return`[${t.join(", ")}]`}};var vv;(function(e){e.DEFAULT_EDGE_NAME="\0",e.GRAPH_NODE="\0",e.EDGE_KEY_DELIM=""})(vv||(vv={}));function gT(e,t){var n=e.get(t)||0;e.set(t,n+1)}function _T(e,t){var n=e.get(t);n!==void 0&&(n=n-1,n>0?e.set(t,n):e.delete(t))}function Tk(e,t,n,o){var r=String(t),s=String(n);if(!e&&r>s){var c=r;r=s,s=c}return r+vv.EDGE_KEY_DELIM+s+vv.EDGE_KEY_DELIM+(o===void 0?vv.DEFAULT_EDGE_NAME:o)}function bT(e,t,n,o){var r=String(t),s=String(n),c={v:t,w:n};if(!e&&r>s){var v=c.v;c.v=c.w,c.w=v}return o!==void 0&&(c.name=o),c}function $1(e,t){return Tk(e,t.v,t.w,t.name)}function wT(e){return typeof e=="function"}var jq=function(t){return t.nodes().map(function(n){var o=t.node(n),r=t.parent(n),s={id:n,value:o,parent:r};return s.value===void 0&&delete s.value,s.parent===void 0&&delete s.parent,s})},Cq=function(t){return t.edges().map(function(n){var o=t.edge(n),r={v:n.v,w:n.w,value:o,name:n.name};return r.name===void 0&&delete r.name,r.value===void 0&&delete r.value,r})},Dq=function(t){var n={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:jq(t),edges:Cq(t),value:t.graph()};return n.value===void 0&&delete n.value,n},Iq=function(t){var n=new Bv(t.options);return t.value!==void 0&&n.setGraph(t.value),t.nodes.forEach(function(o){n.setNode(o.id,o.value),o.parent&&n.setParent(o.id,o.parent)}),t.edges.forEach(function(o){n.setEdge(o.v,o.w,o.value,o.name)}),n};function ET(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,o)}return n}function OT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ET(Object(n),!0).forEach(function(o){Lq(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ET(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Lq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function $q(e,t,n){return t&&xT(e.prototype,t),n&&xT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Bq={compound:!1,multigraph:!1,directed:!0},Bv=function(){function e(){var t=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Fq(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=vv.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(r){return t.label=r,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(r){return wT(r)?t.defaultNodeLabelFn=r:t.defaultNodeLabelFn=function(){return r},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(r){return t.nodesLabelMap.get(r)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.inEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.sinks=function(){return t.nodes().filter(function(r){var s;return!(!((s=t.outEdgesMap.get(r))===null||s===void 0)&&s.size)})},this.setNodes=function(r,s){return r.map(function(c){return t.setNode(c,s)}),t},this.hasNode=function(r){return t.nodesLabelMap.has(r)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(r){if(t.isCompound()){var s,c=(s=t.parentMap)===null||s===void 0?void 0:s.get(r);if(c!==t.GRAPH_NODE)return c}},this.removeFromParentsChildList=function(r){var s=t.parentMap.get(r);t.childrenMap.get(s).delete(r)},this.setParent=function(r,s){var c,v;t.checkCompound();for(var h=s===void 0?t.GRAPH_NODE:s,g=t.parent(h);g;){if(r===g)throw new Error("Setting "+s+" as parent of "+r+" would create a cycle");g=t.parent(g)}s&&t.setNode(s),t.setNode(r),t.removeFromParentsChildList(r),(c=t.parentMap)===null||c===void 0||c.set(r,h);var _=t.childrenMap.get(h);return _.set(r,!0),(v=t.childrenMap)===null||v===void 0||v.set(h,_),t},this.children=function(r){var s=r===void 0?t.GRAPH_NODE:r;if(t.isCompound()){var c,v=(c=t.childrenMap)===null||c===void 0?void 0:c.get(s);return v?Array.from(v.keys()):void 0}if(s===t.GRAPH_NODE)return t.nodes();if(r&&t.hasNode(r))return[]},this.predecessors=function(r){var s=t.predecessorsMap.get(r);return s?Array.from(s.keys()):void 0},this.successors=function(r){var s=t.successorsMap.get(r);return s?Array.from(s.keys()):void 0},this.neighbors=function(r){var s;if(t.hasNode(r))return Array.from(new Set((s=t.predecessors(r))===null||s===void 0?void 0:s.concat(t.successors(r))))},this.isLeaf=function(r){var s;if(t.isDirected()){var c;return!(!((c=t.successors(r))===null||c===void 0)&&c.length)}return!(!((s=t.neighbors(r))===null||s===void 0)&&s.length)},this.filterNodes=function(r){var s=t.directed,c=t.multigraph,v=t.compound,h=new e({directed:s,multigraph:c,compound:v});if(h.setGraph(t.graph()),t.nodes().forEach(function(_){r(_)&&h.setNode(_,t.node(_))}),t.edges().forEach(function(_){h.hasNode(_.v)&&h.hasNode(_.w)&&h.setEdgeObj(_,t.edge(_))}),v){var g=function(w){for(var O=t.parent(w);O!==void 0&&!h.hasNode(O);)O=t.parent(O);return O};h.nodes().forEach(function(_){h.setParent(_,g(_))})}return h},this.setDefaultEdgeLabel=function(r){return wT(r)?t.defaultEdgeLabelFn=r:t.defaultEdgeLabelFn=function(){return r},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(r,s){return t.setEdge(r.v,r.w,s,r.name)},this.setPath=function(r,s){return r.reduce(function(c,v){return t.setEdge(c,v,s),v}),t},this.edgeFromArgs=function(r,s,c){return t.edge({v:r,w:s,name:c})},this.edge=function(r){return t.edgesLabelsMap.get($1(t.isDirected(),r))},this.hasEdge=function(r,s,c){return t.edgesLabelsMap.has($1(t.isDirected(),{v:r,w:s,name:c}))},this.removeEdgeObj=function(r){var s=r.v,c=r.w,v=r.name;return t.removeEdge(s,c,v)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(r,s){var c=t.inEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.v===s})},this.outEdges=function(r,s){var c=t.outEdgesMap.get(r);if(c)return Array.from(c.values()).filter(function(v){return!s||v.w===s})},this.nodeEdges=function(r,s){var c;if(t.hasNode(r))return(c=t.inEdges(r,s))===null||c===void 0?void 0:c.concat(t.outEdges(r,s))},this.toJSON=function(){return Dq(t)},this.nodeInDegree=function(r){var s=t.inEdgesMap.get(r);return s?s.size:0},this.nodeOutDegree=function(r){var s=t.outEdgesMap.get(r);return s?s.size:0},this.nodeDegree=function(r){return t.nodeInDegree(r)+t.nodeOutDegree(r)},this.source=function(r){return r.v},this.target=function(r){return r.w};var o=OT(OT({},Bq),n);this.compound=o.compound,this.directed=o.directed,this.multigraph=o.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return $q(e,[{key:"setNode",value:function(n,o){var r=this.nodesLabelMap,s=this.defaultNodeLabelFn,c=this.isCompound,v=this.parentMap,h=this.childrenMap,g=this.inEdgesMap,_=this.outEdgesMap,w=this.predecessorsMap,O=this.successorsMap;if(r.has(n))return o!==void 0&&r.set(n,o),this;if(r.set(n,o||s(n)),c()){var S;v==null||v.set(n,this.GRAPH_NODE),h==null||h.set(n,new Map),h!=null&&h.has(this.GRAPH_NODE)||h==null||h.set(this.GRAPH_NODE,new Map),h==null||(S=h.get(this.GRAPH_NODE))===null||S===void 0||S.set(n,!0)}return[g,_,w,O].forEach(function(P){return P.set(n,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(n){var o=this;if(this.hasNode(n)){var r=function(R){o.removeEdge(R.v,R.w,R.name)},s=this.inEdgesMap,c=this.outEdgesMap,v=this.predecessorsMap,h=this.successorsMap,g=this.nodesLabelMap;if(this.isCompound()){var _,w,O;this.removeFromParentsChildList(n),(_=this.parentMap)===null||_===void 0||_.delete(n),(w=this.children(n))===null||w===void 0||w.forEach(function(A){return o.setParent(A)}),(O=this.childrenMap)===null||O===void 0||O.delete(n)}var S=s.get(n),P=c.get(n);Array.from(S.values()).forEach(function(A){return r(A)}),Array.from(P.values()).forEach(function(A){return r(A)}),g.delete(n),s.delete(n),c.delete(n),v.delete(n),h.delete(n),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(n,o,r,s){var c,v,h=bT(this.isDirected(),n,o,s),g=$1(this.isDirected(),h),_=h.v,w=h.w;if(this.edgesLabelsMap.has(g))return this.edgesLabelsMap.set(g,r),this;if(s!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(_),this.setNode(w),this.edgesLabelsMap.set(g,r||this.defaultEdgeLabelFn(_,w,s)),Object.freeze(h),this.edgesMap.set(g,h);var O=this.predecessorsMap.get(w),S=this.successorsMap.get(_);return gT(O,_),gT(S,w),(c=this.inEdgesMap.get(w))===null||c===void 0||c.set(g,h),(v=this.outEdgesMap.get(_))===null||v===void 0||v.set(g,h),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(n,o,r){var s=Tk(this.isDirected(),n,o,r),c=this.edgesMap.get(s);if(c){var v=bT(this.isDirected(),n,o,r),h=v.v,g=v.w;this.edgesLabelsMap.delete(s),this.edgesMap.delete(s);var _=this.predecessorsMap.get(g),w=this.successorsMap.get(h);_T(_,h),_T(w,g),this.inEdgesMap.get(g).delete(s),this.outEdgesMap.get(h).delete(s),this.edgeCountNum-=1}return this}}]),e}();Bv.fromJSON=Iq;function ST(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Uq(e,t,n){return t&&ST(e.prototype,t),n&&ST(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mk=Uq(function e(){var t=this;Gq(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map(function(n){return n.key})},this.has=function(n){return t.keyIndice.has(n)},this.priority=function(n){var o=t.keyIndice.get(n);if(o!==void 0)return t.arr[o].priority},this.swap=function(n,o){var r=t.arr,s=t.keyIndice,c=[r[n],r[o]],v=c[0],h=c[1];r[n]=h,r[o]=v,s.set(v.key,o),s.set(h.key,n)},this.innerDecrease=function(n){for(var o=t.arr,r=o[n].priority,s,c=n;c!==0;){var v;if(s=c>>1,((v=o[s])===null||v===void 0?void 0:v.priority)<r)break;t.swap(c,s),c=s}},this.heapify=function(n){var o=t.arr,r=n<<1,s=r+1,c=n;r<o.length&&(c=o[r].priority<o[c].priority?r:c,s<o.length&&(c=o[s].priority<o[c].priority?s:c),c!==n&&(t.swap(n,c),t.heapify(c)))},this.min=function(){if(t.size()===0)throw new Error("Queue underflow");return t.arr[0].key},this.add=function(n,o){var r=t.keyIndice,s=t.arr;if(!r.has(n)){var c=s.length;return r.set(n,c),s.push({key:n,priority:o}),t.innerDecrease(c),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var n=t.arr.pop();return t.keyIndice.delete(n.key),t.heapify(0),n.key},this.decrease=function(n,o){if(!t.has(n))throw new Error("There's no key named ".concat(n));var r=t.keyIndice.get(n);if(o>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(n," Old: + ").concat(t.arr[r].priority," New: ").concat(o));t.arr[r].priority=o,t.innerDecrease(r)}}),Vq=function(t,n){var o=new Bv,r=new Map,s=new Mk,c;function v(_){var w=_.v===c?_.w:_.v,O=s.priority(w);if(O!==void 0){var S=n(_);S<O&&(r.set(w,c),s.decrease(w,S))}}if(t.nodeCount()===0)return o;t.nodes().forEach(function(_){s.add(_,Number.POSITIVE_INFINITY),o.setNode(_)}),s.decrease(t.nodes()[0],0);for(var h=!1;s.size()>0;){var g;if(c=s.removeMin(),r.has(c))o.setEdge(c,r.get(c));else{if(h)throw new Error("Input graph is not connected: "+t.graph());h=!0}(g=t.nodeEdges(c))===null||g===void 0||g.forEach(v)}return o},Wq=function(t){var n=new Set,o=[],r=t.nodes();return r.forEach(function(s){for(var c=[],v=[s];v.length>0;){var h=v.pop();if(!n.has(h)){var g,_;n.add(h),c.push(h),(g=t.successors(h))===null||g===void 0||g.forEach(function(w){return v.push(w)}),(_=t.predecessors(h))===null||_===void 0||_.forEach(function(w){return v.push(w)})}}c.length&&o.push(c)}),o},zq=function e(t,n,o,r,s,c){r.includes(n)||(r.push(n),o||c.push(n),s(n).forEach(function(v){return e(t,v,o,r,s,c)}),o&&c.push(n))},SE=function(t,n,o){var r=Array.isArray(n)?n:[n],s=function(g){return t.isDirected()?t.successors(g):t.neighbors(g)},c=[],v=[];return r.forEach(function(h){if(t.hasNode(h))zq(t,h,o==="post",v,s,c);else throw new Error("Graph does not have node: "+h)}),c};function Hq(e,t){return Kq(e)||qq(e,t)||Yq(e,t)||Xq()}function Xq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yq(e,t){if(e){if(typeof e=="string")return AT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return AT(e,t)}}function AT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function qq(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],r=!0,s=!1,c,v;try{for(n=n.call(e);!(r=(c=n.next()).done)&&(o.push(c.value),!(t&&o.length===t));r=!0);}catch(h){s=!0,v=h}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw v}}return o}}function Kq(e){if(Array.isArray(e))return e}var Zq=function(){return 1},Pk=function(t,n,o,r){return Jq(t,n,o||Zq,r||function(s){return t.outEdges(s)})},Jq=function(t,n,o,r){var s=new Map,c=new Mk,v,h,g=function(O){var S=O.v!==v?O.v:O.w,P=s.get(S),A=o(O),R=h.distance+A;if(A<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+A);R<P.distance&&(P.distance=R,P.predecessor=v,c.decrease(S,R))};for(t.nodes().forEach(function(w){var O=w===n?0:Number.POSITIVE_INFINITY;s.set(w,{distance:O}),c.add(w,O)});c.size()>0&&(v=c.removeMin(),h=s.get(v),!(h&&h.distance===Number.POSITIVE_INFINITY));)r(v).forEach(g);var _={};return Array.from(s.entries()).forEach(function(w){var O=Hq(w,2),S=O[0],P=O[1];return _[String(S)]=P,_}),_},Qq=function(t,n,o){var r={};return t.nodes().forEach(function(s){return r[String(s)]=Pk(t,s,n,o),r}),r},kk=function(t){var n=0,o=[],r=new Map,s=[];function c(v){var h,g={onStack:!0,lowlink:n,index:n};if(r.set(v,g),n+=1,o.push(v),(h=t.successors(v))===null||h===void 0||h.forEach(function(S){var P;if(r.has(S)){if(!((P=r.get(S))===null||P===void 0)&&P.onStack){var R=r.get(S);g.lowlink=Math.min(g.lowlink,R.index)}}else{c(S);var A=r.get(S);g.lowlink=Math.min(g.lowlink,A.lowlink)}}),g.lowlink===g.index){var _=[],w;do{w=o.pop();var O=r.get(w);O.onStack=!1,_.push(w)}while(v!==w);s.push(_)}}return t.nodes().forEach(function(v){r.has(v)||c(v)}),s},eK=function(t){return kk(t).filter(function(n){return n.length>1||n.length===1&&t.hasEdge(n[0],n[0])})};function xw(e){"@babel/helpers - typeof";return xw=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xw(e)}function TT(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function tK(e,t,n){return t&&TT(e.prototype,t),n&&TT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function nK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Iy(e,t)}function oK(e){var t=Nk();return function(){var o=Ly(e),r;if(t){var s=Ly(this).constructor;r=Reflect.construct(o,arguments,s)}else r=o.apply(this,arguments);return iK(this,r)}}function iK(e,t){if(t&&(xw(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return aK(e)}function aK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sw(e){var t=typeof Map=="function"?new Map:void 0;return Sw=function(o){if(o===null||!lK(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(o))return t.get(o);t.set(o,r)}function r(){return Sg(o,arguments,Ly(this).constructor)}return r.prototype=Object.create(o.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Iy(r,o)},Sw(e)}function Sg(e,t,n){return Nk()?Sg=Reflect.construct:Sg=function(r,s,c){var v=[null];v.push.apply(v,s);var h=Function.bind.apply(r,v),g=new h;return c&&Iy(g,c.prototype),g},Sg.apply(null,arguments)}function Nk(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lK(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Iy(e,t){return Iy=Object.setPrototypeOf||function(o,r){return o.__proto__=r,o},Iy(e,t)}function Ly(e){return Ly=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ly(e)}var Aw=function(e){rK(n,e);var t=oK(n);function n(){return nK(this,n),t.apply(this,arguments)}return tK(n)}(Sw(Error));function Rk(e){var t=new Set,n=new Set,o=[];function r(s){if(n.has(s))throw new Aw;if(!t.has(s)){var c;n.add(s),t.add(s),(c=e.predecessors(s))===null||c===void 0||c.forEach(r),n.delete(s),o.push(s)}}if(e.sinks().forEach(r),t.size!==e.nodeCount())throw new Aw;return o}var uK=function(t){try{Rk(t)}catch(n){if(n instanceof Aw)return!1;throw n}return!0},sK=function(t,n){return SE(t,n,"post")},cK=function(t,n){return SE(t,n,"pre")},fK=function(){return 1};function dK(e,t,n){return pK(e,t||fK,n||function(o){return e.outEdges(o)})}function pK(e,t,n){var o={},r=e.nodes();return r.forEach(function(s){var c=String(s);o[c]={},o[c][c]={distance:0},r.forEach(function(v){s!==v&&(o[c][String(v)]={distance:Number.POSITIVE_INFINITY})}),n(s).forEach(function(v){var h=v.v===s?v.w:v.v,g=t(v);o[c][String(h)]={distance:g,predecessor:s}})}),r.forEach(function(s){var c=String(s),v=o[c];r.forEach(function(h){var g=String(h),_=o[g];r.forEach(function(w){var O=String(w),S=_[c],P=v[O],A=_[O],R=S.distance+P.distance;R<A.distance&&(A.distance=R,A.predecessor=P.predecessor)})})}),o}const hK=Object.freeze(Object.defineProperty({__proto__:null,components:Wq,dfs:SE,dijkstra:Pk,dijkstraAll:Qq,findCycles:eK,floydWarshall:dK,isAcyclic:uK,postorder:sK,preorder:cK,prim:Vq,tarjan:kk,topsort:Rk},Symbol.toStringTag,{value:"Module"}));class vK extends Rq{}class yK extends Bv{}const mK=()=>1,gK=(e,t)=>{var n;if(e.nodeCount()<=1)return[];const o=bK(e,t||mK);return(n=_K(o.graph,o.buckets,o.zeroIdx).map(s=>e.outEdges(s.v,s.w)))===null||n===void 0?void 0:n.flat()},_K=(e,t,n)=>{let o=[];const r=t[t.length-1],s=t[0];let c;for(;e.nodeCount();){for(;c=s.dequeue();)B1(e,t,n,c);for(;c=r.dequeue();)B1(e,t,n,c);if(e.nodeCount()){for(let v=t.length-2;v>0;--v)if(c=t[v].dequeue(),c){o=o.concat(B1(e,t,n,c,!0));break}}}return o},B1=(e,t,n,o,r)=>{var s,c;const v=[];return(s=e.inEdges(o.v))===null||s===void 0||s.forEach(h=>{const g=e.edge(h),_=e.node(h.v);r&&v.push({v:h.v,w:h.w,in:0,out:0}),_.out===void 0&&(_.out=0),_.out-=g,Tw(t,n,_)}),(c=e.outEdges(o.v))===null||c===void 0||c.forEach(h=>{const g=e.edge(h),_=h.w,w=e.node(_);w.in===void 0&&(w.in=0),w.in-=g,Tw(t,n,w)}),e.removeNode(o.v),r?v:void 0},bK=(e,t)=>{const n=new yK;let o=0,r=0;e.nodes().forEach(h=>{n.setNode(h,{v:h,in:0,out:0})}),e.edges().forEach(h=>{const g=n.edge(h)||0,_=(t==null?void 0:t(h))||1,w=g+_;n.setEdge(h.v,h.w,w),r=Math.max(r,n.node(h.v).out+=_),o=Math.max(o,n.node(h.w).in+=_)});const s=[],c=r+o+3;for(let h=0;h<c;h++)s.push(new vK);const v=o+1;return n.nodes().forEach(h=>{Tw(s,v,n.node(h))}),{buckets:s,zeroIdx:v,graph:n}},Tw=(e,t,n)=>{n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)},wK=e=>{const t=o=>r=>{var s;return((s=o.edge(r))===null||s===void 0?void 0:s.weight)||1},n=e.graph().acyclicer==="greedy"?gK(e,t(e)):EK(e);n==null||n.forEach(o=>{const r=e.edge(o);e.removeEdgeObj(o),r.forwardName=o.name,r.reversed=!0,e.setEdge(o.w,o.v,r,`rev-${Math.random()}`)})},EK=e=>{const t=[],n={},o={},r=s=>{var c;o[s]||(o[s]=!0,n[s]=!0,(c=e.outEdges(s))===null||c===void 0||c.forEach(v=>{n[v.w]?t.push(v):r(v.w)}),delete n[s])};return e.nodes().forEach(r),t},OK=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);const o=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,o)}})},MT={run:wK,undo:OK};class Mf extends Bv{}const xK=(e,t)=>Number(e)-Number(t),Uv=(e,t,n,o)=>{let r;do r=`${o}${Math.random()}`;while(e.hasNode(r));return n.dummy=t,e.setNode(r,n),r},SK=e=>{const t=new Mf().setGraph(e.graph());return e.nodes().forEach(n=>{t.setNode(n,e.node(n))}),e.edges().forEach(n=>{const o=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},r=e.edge(n);t.setEdge(n.v,n.w,{weight:o.weight+r.weight,minlen:Math.max(o.minlen,r.minlen)})}),t},jk=e=>{const t=new Mf({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach(n=>{var o;!((o=e.children(n))===null||o===void 0)&&o.length||t.setNode(n,e.node(n))}),e.edges().forEach(n=>{t.setEdgeObj(n,e.edge(n))}),t},AK=(e,t)=>e==null?void 0:e.reduce((n,o,r)=>(n[o]=t[r],n),{}),PT=(e,t)=>{const n=Number(e.x),o=Number(e.y),r=Number(t.x)-n,s=Number(t.y)-o;let c=Number(e.width)/2,v=Number(e.height)/2;if(!r&&!s)return{x:0,y:0};let h,g;return Math.abs(s)*c>Math.abs(r)*v?(s<0&&(v=-v),h=v*r/s,g=v):(r<0&&(c=-c),h=c,g=c*s/r),{x:n+h,y:o+g}},Fy=e=>{const t=[],n=Ck(e)+1;for(let o=0;o<n;o++)t.push([]);e.nodes().forEach(o=>{const r=e.node(o);if(!r)return;const s=r.rank;s!==void 0&&t[s]&&t[s].push(o)});for(let o=0;o<n;o++)t[o]=t[o].sort((r,s)=>{var c,v;return xK((c=e.node(r))===null||c===void 0?void 0:c.order,(v=e.node(s))===null||v===void 0?void 0:v.order)});return t},TK=e=>{const t=e.nodes().filter(o=>{var r;return((r=e.node(o))===null||r===void 0?void 0:r.rank)!==void 0}).map(o=>e.node(o).rank),n=Math.min(...t);e.nodes().forEach(o=>{const r=e.node(o);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)})},MK=e=>{const t=e.nodes(),n=t.filter(v=>{var h;return((h=e.node(v))===null||h===void 0?void 0:h.rank)!==void 0}).map(v=>e.node(v).rank),o=Math.min(...n),r=[];t.forEach(v=>{var h;const g=(((h=e.node(v))===null||h===void 0?void 0:h.rank)||0)-o;r[g]||(r[g]=[]),r[g].push(v)});let s=0;const c=e.graph().nodeRankFactor||0;for(let v=0;v<r.length;v++){const h=r[v];h===void 0?v%c!==0&&(s-=1):s&&(h==null||h.forEach(g=>{const _=e.node(g);_&&(_.rank=_.rank||0,_.rank+=s)}))}},kT=(e,t,n,o)=>{const r={width:0,height:0};return Zg(n)&&Zg(o)&&(r.rank=n,r.order=o),Uv(e,"border",r,t)},Ck=e=>{let t;return e.nodes().forEach(n=>{var o;const r=(o=e.node(n))===null||o===void 0?void 0:o.rank;r!==void 0&&(t===void 0||r>t)&&(t=r)}),t||(t=0),t},PK=(e,t)=>{const n={lhs:[],rhs:[]};return e==null||e.forEach(o=>{t(o)?n.lhs.push(o):n.rhs.push(o)}),n},Dk=(e,t)=>{const n=Date.now();try{return t()}finally{console.log(`${e} time: ${Date.now()-n}ms`)}},Ik=(e,t)=>t(),AE=(e,t)=>e.reduce((n,o)=>{const r=t(n),s=t(o);return r>s?o:n}),kK=e=>{e.graph().dummyChains=[],e.edges().forEach(t=>NK(e,t))},NK=(e,t)=>{let n=t.v,o=e.node(n).rank;const r=t.w,s=e.node(r).rank,c=t.name,v=e.edge(t),h=v.labelRank;if(s===o+1)return;e.removeEdgeObj(t);const g=e.graph();let _,w,O;for(O=0,++o;o<s;++O,++o)v.points=[],w={edgeLabel:v,width:0,height:0,edgeObj:t,rank:o},_=Uv(e,"edge",w,"_d"),o===h&&(w.width=v.width,w.height=v.height,w.dummy="edge-label",w.labelpos=v.labelpos),e.setEdge(n,_,{weight:v.weight},c),O===0&&(g.dummyChains||(g.dummyChains=[]),g.dummyChains.push(_)),n=_;e.setEdge(n,r,{weight:v.weight},c)},RK=e=>{var t;(t=e.graph().dummyChains)===null||t===void 0||t.forEach(n=>{let o=e.node(n);const r=o.edgeLabel;let s;o.edgeObj&&e.setEdgeObj(o.edgeObj,r);let c=n;for(;o.dummy;)s=e.successors(c)[0],e.removeNode(c),r.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height),c=s,o=e.node(c)})},NT={run:kK,undo:RK},Lk=e=>{var t;const n={},o=r=>{var s;const c=e.node(r);if(!c)return 0;if(n[r])return c.rank;n[r]=!0;let v;return(s=e.outEdges(r))===null||s===void 0||s.forEach(h=>{const g=o(h.w),_=e.edge(h).minlen,w=g-_;w&&(v===void 0||w<v)&&(v=w)}),v||(v=0),c.rank=v,v};(t=e.sources())===null||t===void 0||t.forEach(r=>o(r))},jK=e=>{var t;const n={};let o;const r=v=>{var h;const g=e.node(v);if(!g)return 0;if(n[v])return g.rank;n[v]=!0;let _;return(h=e.outEdges(v))===null||h===void 0||h.forEach(w=>{const O=r(w.w),S=e.edge(w).minlen,P=O-S;P&&(_===void 0||P<_)&&(_=P)}),_||(_=0),(o===void 0||_<o)&&(o=_),g.rank=_,_};(t=e.sources())===null||t===void 0||t.forEach(v=>{e.node(v)&&r(v)}),o===void 0&&(o=0);const s={},c=(v,h)=>{var g;const _=e.node(v),w=isNaN(_.layer)?h:_.layer;(_.rank===void 0||_.rank<w)&&(_.rank=w),!s[v]&&(s[v]=!0,(g=e.outEdges(v))===null||g===void 0||g.map(O=>{c(O.w,w+e.edge(O).minlen)}))};e.nodes().forEach(v=>{const h=e.node(v);h&&(isNaN(h.layer)?h.rank-=o:c(v,h.layer))})},Cd=(e,t)=>e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen,CK=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodeCount();t.setNode(n,{});let r,s;for(;DK(t,e)<o;)r=Fk(t,e),s=t.hasNode(r.v)?Cd(e,r):-Cd(e,r),$k(t,e,s);return t},DK=(e,t)=>{const n=o=>{t.nodeEdges(o).forEach(r=>{const s=r.v,c=o===s?r.w:s;!e.hasNode(c)&&!Cd(t,r)&&(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))})};return e.nodes().forEach(n),e.nodeCount()},IK=e=>{const t=new Mf({directed:!1}),n=e.nodes()[0],o=e.nodes().filter(c=>!!e.node(c)).length;t.setNode(n,{});let r,s;for(;LK(t,e)<o;)r=Fk(t,e),s=t.hasNode(r.v)?Cd(e,r):-Cd(e,r),$k(t,e,s);return t},LK=(e,t)=>{const n=o=>{var r;(r=t.nodeEdges(o))===null||r===void 0||r.forEach(s=>{const c=s.v,v=o===c?s.w:c;!e.hasNode(v)&&(t.node(v).layer!==void 0||!Cd(t,s))&&(e.setNode(v,{}),e.setEdge(o,v,{}),n(v))})};return e.nodes().forEach(n),e.nodeCount()},Fk=(e,t)=>AE(t.edges(),n=>e.hasNode(n.v)!==e.hasNode(n.w)?Cd(t,n):1/0),$k=(e,t,n)=>{e.nodes().forEach(o=>{t.node(o).rank||(t.node(o).rank=0),t.node(o).rank+=n})},{preorder:FK,postorder:$K}=hK,BK=e=>{const t=SK(e);Lk(t);const n=CK(t);Uk(n),Bk(n,t);let o,r;for(;o=VK(n);)r=WK(n,t,o),zK(n,t,o,r)},Bk=(e,t)=>{let n=$K(e,e.nodes());n=n==null?void 0:n.slice(0,(n==null?void 0:n.length)-1),n==null||n.forEach(o=>{UK(e,t,o)})},UK=(e,t,n)=>{const r=e.node(n).parent;e.edgeFromArgs(n,r).cutvalue=GK(e,t,n)},GK=(e,t,n)=>{var o;const s=e.node(n).parent;let c=!0,v=t.edgeFromArgs(n,s),h=0;return v||(c=!1,v=t.edgeFromArgs(s,n)),h=v.weight,(o=t.nodeEdges(n))===null||o===void 0||o.forEach(g=>{const _=g.v===n,w=_?g.w:g.v;if(w!==s){const O=_===c,S=t.edge(g).weight;if(h+=O?S:-S,XK(e,n,w)){const P=e.edgeFromArgs(n,w).cutvalue;h+=O?-P:P}}}),h},Uk=(e,t=e.nodes()[0])=>{Gk(e,{},1,t)},Gk=(e,t,n,o,r)=>{var s;const c=n;let v=n;const h=e.node(o);return t[o]=!0,(s=e.neighbors(o))===null||s===void 0||s.forEach(g=>{t[g]||(v=Gk(e,t,v,g,o))}),h.low=c,h.lim=v++,r?h.parent=r:delete h.parent,v},VK=e=>e.edges().find(t=>e.edge(t).cutvalue<0),WK=(e,t,n)=>{let o=n.v,r=n.w;t.hasEdge(o,r)||(o=n.w,r=n.v);const s=e.node(o),c=e.node(r);let v=s,h=!1;s.lim>c.lim&&(v=c,h=!0);const g=t.edges().filter(_=>h===RT(e,e.node(_.v),v)&&h!==RT(e,e.node(_.w),v));return AE(g,_=>Cd(t,_))},zK=(e,t,n,o)=>{const r=n.v,s=n.w;e.removeEdge(r,s),e.setEdge(o.v,o.w,{}),Uk(e),Bk(e,t),HK(e,t)},HK=(e,t)=>{const n=e.nodes().find(r=>{var s;return!(!((s=t.node(r))===null||s===void 0)&&s.parent)});let o=FK(e,n);o=o==null?void 0:o.slice(1),o==null||o.forEach(r=>{const s=e.node(r).parent;let c=t.edgeFromArgs(r,s),v=!1;c||(c=t.edgeFromArgs(s,r),v=!0),t.node(r).rank=t.node(s).rank+(v?c.minlen:-c.minlen)})},XK=(e,t,n)=>e.hasEdge(t,n),RT=(e,t,n)=>n.low<=t.lim&&t.lim<=n.lim,YK=e=>{switch(e.graph().ranker){case"network-simplex":KK(e);break;case"tight-tree":jT(e);break;case"longest-path":qK(e);break;default:jT(e)}},qK=Lk,jT=e=>{jK(e),IK(e)},KK=e=>{BK(e)},ZK=e=>{var t;const n={};let o=0;const r=s=>{var c;const v=o;(c=e.children(s))===null||c===void 0||c.forEach(r),n[s]={low:v,lim:o++}};return(t=e.children())===null||t===void 0||t.forEach(r),n},JK=(e,t,n,o)=>{const r=[],s=[],c=Math.min(t[n].low,t[o].low),v=Math.max(t[n].lim,t[o].lim);let h,g;h=n;do h=e.parent(h),r.push(h);while(h&&(t[h].low>c||v>t[h].lim));for(g=h,h=o;h&&h!==g;)s.push(h),h=e.parent(h);return{lca:g,path:r.concat(s.reverse())}},QK=e=>{var t;const n=ZK(e);(t=e.graph().dummyChains)===null||t===void 0||t.forEach(o=>{var r,s;let c=o,v=e.node(c);const h=v.edgeObj;if(!h)return;const g=JK(e,n,h.v,h.w),_=g.path,w=g.lca;let O=0,S=_[O],P=!0;for(;c!==h.w;){if(v=e.node(c),P){for(;S!==w&&((r=e.node(S))===null||r===void 0?void 0:r.maxRank)<v.rank;)O++,S=_[O];S===w&&(P=!1)}if(!P){for(;O<_.length-1&&((s=e.node(_[O+1]))===null||s===void 0?void 0:s.minRank)<=v.rank;)O++;S=_[O]}e.setParent(c,S),c=e.successors(c)[0]}})},eZ=e=>{var t;const n=Uv(e,"root",{},"_root"),o=tZ(e);let r=Math.max(...Object.values(o));Math.abs(r)===1/0&&(r=1);const s=r-1,c=2*s+1;e.graph().nestingRoot=n,e.edges().forEach(h=>{e.edge(h).minlen*=c});const v=nZ(e)+1;(t=e.children())===null||t===void 0||t.forEach(h=>{Vk(e,n,c,v,s,o,h)}),e.graph().nodeRankFactor=c},Vk=(e,t,n,o,r,s,c)=>{const v=e.children(c);if(!(v!=null&&v.length)){c!==t&&e.setEdge(t,c,{weight:0,minlen:n});return}const h=kT(e,"_bt"),g=kT(e,"_bb"),_=e.node(c);e.setParent(h,c),_.borderTop=h,e.setParent(g,c),_.borderBottom=g,v==null||v.forEach(w=>{Vk(e,t,n,o,r,s,w);const O=e.node(w),S=O.borderTop?O.borderTop:w,P=O.borderBottom?O.borderBottom:w,A=O.borderTop?o:2*o,R=S!==P?1:r-s[c]+1;e.setEdge(h,S,{minlen:R,weight:A,nestingEdge:!0}),e.setEdge(P,g,{minlen:R,weight:A,nestingEdge:!0})}),e.parent(c)||e.setEdge(t,h,{weight:0,minlen:r+s[c]})},tZ=e=>{var t;const n={},o=(r,s)=>{const c=e.children(r);c==null||c.forEach(v=>o(v,s+1)),n[r]=s};return(t=e.children())===null||t===void 0||t.forEach(r=>o(r,1)),n},nZ=e=>{let t=0;return e.edges().forEach(n=>{t+=e.edge(n).weight}),t},rZ=e=>{const t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach(n=>{e.edge(n).nestingEdge&&e.removeEdgeObj(n)})},CT={run:eZ,cleanup:rZ},oZ=e=>{var t;const n=o=>{const r=e.children(o),s=e.node(o);if(r!=null&&r.length&&r.forEach(c=>n(c)),s.hasOwnProperty("minRank")){s.borderLeft=[],s.borderRight=[];for(let c=s.minRank,v=s.maxRank+1;c<v;c+=1)DT(e,"borderLeft","_bl",o,s,c),DT(e,"borderRight","_br",o,s,c)}};(t=e.children())===null||t===void 0||t.forEach(o=>n(o))},DT=(e,t,n,o,r,s)=>{const c={rank:s,borderType:t,width:0,height:0},v=r[t][s-1],h=Uv(e,"border",c,n);r[t][s]=h,e.setParent(h,o),v&&e.setEdge(v,h,{weight:1})},iZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="lr"||n==="rl")&&Wk(e)},aZ=e=>{var t;const n=(t=e.graph().rankdir)===null||t===void 0?void 0:t.toLowerCase();(n==="bt"||n==="rl")&&lZ(e),(n==="lr"||n==="rl")&&(uZ(e),Wk(e))},Wk=e=>{e.nodes().forEach(t=>{IT(e.node(t))}),e.edges().forEach(t=>{IT(e.edge(t))})},IT=e=>{const t=e.width;e.width=e.height,e.height=t},lZ=e=>{e.nodes().forEach(t=>{U1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>U1(r)),o.hasOwnProperty("y")&&U1(o)})},U1=e=>{e!=null&&e.y&&(e.y=-e.y)},uZ=e=>{e.nodes().forEach(t=>{G1(e.node(t))}),e.edges().forEach(t=>{var n;const o=e.edge(t);(n=o.points)===null||n===void 0||n.forEach(r=>G1(r)),o.hasOwnProperty("x")&&G1(o)})},G1=e=>{const t=e.x;e.x=e.y,e.y=t},LT={adjust:iZ,undo:aZ};function sZ(e){return Array.isArray(e)}function Mw(e){if(!Array.isArray(e))return-1/0;var t=e.length;if(!t)return-1/0;for(var n=e[0],o=1;o<t;o++)n=Math.max(n,e[o]);return n}const FT=function(e){if(sZ(e))return e.reduce(function(t,n){return Math.min(t,n)},e[0])},$T=e=>{const t={},n=e.nodes().filter(_=>{var w;return!(!((w=e.children(_))===null||w===void 0)&&w.length)}),o=n.map(_=>e.node(_).rank),r=Mw(o),s=[];for(let _=0;_<r+1;_++)s.push([]);const c=_=>{var w;if(t.hasOwnProperty(_))return;t[_]=!0;const O=e.node(_);isNaN(O.rank)||s[O.rank].push(_),(w=e.successors(_))===null||w===void 0||w.forEach(S=>c(S))},v=n.sort((_,w)=>e.node(_).rank-e.node(w).rank),g=v.filter(_=>e.node(_).fixorder!==void 0).sort((_,w)=>e.node(_).fixorder-e.node(w).fixorder);return g==null||g.forEach(_=>{isNaN(e.node(_).rank)||s[e.node(_).rank].push(_),t[_]=!0}),v==null||v.forEach(c),s},cZ=(e,t,n)=>{const o=AK(n,n.map((_,w)=>w)),s=t.map(_=>{var w;const O=(w=e.outEdges(_))===null||w===void 0?void 0:w.map(S=>({pos:o[S.w]||0,weight:e.edge(S).weight}));return O==null?void 0:O.sort((S,P)=>S.pos-P.pos)}).flat().filter(_=>_!==void 0);let c=1;for(;c<n.length;)c<<=1;const v=2*c-1;c-=1;const h=Array(v).fill(0,0,v);let g=0;return s==null||s.forEach(_=>{if(_){let w=_.pos+c;h[w]+=_.weight;let O=0;for(;w>0;)w%2&&(O+=h[w+1]),w=w-1>>1,h[w]+=_.weight;g+=_.weight*O}}),g},BT=(e,t)=>{let n=0;for(let o=1;o<(t==null?void 0:t.length);o+=1)n+=cZ(e,t[o-1],t[o]);return n},fZ=(e,t,n)=>{const o=dZ(e),r=new Mf({compound:!0}).setGraph({root:o}).setDefaultNodeLabel(s=>e.node(s));return e.nodes().forEach(s=>{var c;const v=e.node(s),h=e.parent(s);(v.rank===t||v.minRank<=t&&t<=v.maxRank)&&(r.setNode(s),r.setParent(s,h||o),(c=e[n](s))===null||c===void 0||c.forEach(g=>{const _=g.v===s?g.w:g.v,w=r.edgeFromArgs(_,s),O=w!==void 0?w.weight:0;r.setEdge(_,s,{weight:e.edge(g).weight+O})}),v.hasOwnProperty("minRank")&&r.setNode(s,{borderLeft:v.borderLeft[t],borderRight:v.borderRight[t]}))}),r},dZ=e=>{let t;for(;e.hasNode(t=`_root${Math.random()}`););return t},pZ=(e,t,n)=>{const o={};let r;n==null||n.forEach(s=>{let c=e.parent(s),v,h;for(;c;){if(v=e.parent(c),v?(h=o[v],o[v]=c):(h=r,r=c),h&&h!==c){t.setEdge(h,c);return}c=v}})},hZ=(e,t)=>t.map(n=>{const o=e.inEdges(n);if(!(o!=null&&o.length))return{v:n};{const r={sum:0,weight:0};return o==null||o.forEach(s=>{const c=e.edge(s),v=e.node(s.v);r.sum+=c.weight*v.order,r.weight+=c.weight}),{v:n,barycenter:r.sum/r.weight,weight:r.weight}}}),vZ=(e,t)=>{var n,o,r;const s={};e==null||e.forEach((v,h)=>{s[v.v]={i:h,indegree:0,in:[],out:[],vs:[v.v]};const g=s[v.v];v.barycenter!==void 0&&(g.barycenter=v.barycenter,g.weight=v.weight)}),(n=t.edges())===null||n===void 0||n.forEach(v=>{const h=s[v.v],g=s[v.w];h!==void 0&&g!==void 0&&(g.indegree++,h.out.push(s[v.w]))});const c=(r=(o=Object.values(s)).filter)===null||r===void 0?void 0:r.call(o,v=>!v.indegree);return yZ(c)},yZ=e=>{var t,n;const o=[],r=h=>g=>{g.merged||(g.barycenter===void 0||h.barycenter===void 0||g.barycenter>=h.barycenter)&&mZ(h,g)},s=h=>g=>{g.in.push(h),--g.indegree===0&&e.push(g)};for(;e!=null&&e.length;){const h=e.pop();o.push(h),(t=h.in.reverse())===null||t===void 0||t.forEach(g=>r(h)(g)),(n=h.out)===null||n===void 0||n.forEach(g=>s(h)(g))}const c=o.filter(h=>!h.merged),v=["vs","i","barycenter","weight"];return c.map(h=>{const g={};return v==null||v.forEach(_=>{h[_]!==void 0&&(g[_]=h[_])}),g})},mZ=(e,t)=>{var n;let o=0,r=0;e.weight&&(o+=e.barycenter*e.weight,r+=e.weight),t.weight&&(o+=t.barycenter*t.weight,r+=t.weight),e.vs=(n=t.vs)===null||n===void 0?void 0:n.concat(e.vs),e.barycenter=o/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0},gZ=(e,t,n,o)=>{const r=PK(e,O=>{const S=O.hasOwnProperty("fixorder")&&!isNaN(O.fixorder);return o?!S&&O.hasOwnProperty("barycenter"):S||O.hasOwnProperty("barycenter")}),s=r.lhs,c=r.rhs.sort((O,S)=>-O.i- -S.i),v=[];let h=0,g=0,_=0;s==null||s.sort(_Z(!!t,!!n)),_=UT(v,c,_),s==null||s.forEach(O=>{var S;_+=(S=O.vs)===null||S===void 0?void 0:S.length,v.push(O.vs),h+=O.barycenter*O.weight,g+=O.weight,_=UT(v,c,_)});const w={vs:v.flat()};return g&&(w.barycenter=h/g,w.weight=g),w},UT=(e,t,n)=>{let o=n,r;for(;t.length&&(r=t[t.length-1]).i<=o;)t.pop(),e==null||e.push(r.vs),o++;return o},_Z=(e,t)=>(n,o)=>{if(n.fixorder!==void 0&&o.fixorder!==void 0)return n.fixorder-o.fixorder;if(n.barycenter<o.barycenter)return-1;if(n.barycenter>o.barycenter)return 1;if(t&&n.order!==void 0&&o.order!==void 0){if(n.order<o.order)return-1;if(n.order>o.order)return 1}return e?o.i-n.i:n.i-o.i},zk=(e,t,n,o,r,s)=>{var c,v,h,g;let _=e.children(t);const w=e.node(t),O=w?w.borderLeft:void 0,S=w?w.borderRight:void 0,P={};O&&(_=_==null?void 0:_.filter(N=>N!==O&&N!==S));const A=hZ(e,_||[]);A==null||A.forEach(N=>{var $;if(!(($=e.children(N.v))===null||$===void 0)&&$.length){const Y=zk(e,N.v,n,o,s);P[N.v]=Y,Y.hasOwnProperty("barycenter")&&wZ(N,Y)}});const R=vZ(A,n);bZ(R,P),(c=R.filter(N=>N.vs.length>0))===null||c===void 0||c.forEach(N=>{const $=e.node(N.vs[0]);$&&(N.fixorder=$.fixorder,N.order=$.order)});const D=gZ(R,o,r,s);if(O&&(D.vs=[O,D.vs,S].flat(),!((v=e.predecessors(O))===null||v===void 0)&&v.length)){const N=e.node(((h=e.predecessors(O))===null||h===void 0?void 0:h[0])||""),$=e.node(((g=e.predecessors(S))===null||g===void 0?void 0:g[0])||"");D.hasOwnProperty("barycenter")||(D.barycenter=0,D.weight=0),D.barycenter=(D.barycenter*D.weight+N.order+$.order)/(D.weight+2),D.weight+=2}return D},bZ=(e,t)=>{e==null||e.forEach(n=>{var o;const r=(o=n.vs)===null||o===void 0?void 0:o.map(s=>t[s]?t[s].vs:s);n.vs=r.flat()})},wZ=(e,t)=>{e.barycenter!==void 0?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)},EZ=(e,t)=>{const n=Ck(e),o=[],r=[];for(let _=1;_<n+1;_++)o.push(_);for(let _=n-1;_>-1;_--)r.push(_);const s=GT(e,o,"inEdges"),c=GT(e,r,"outEdges");let v=$T(e);V1(e,v);let h=Number.POSITIVE_INFINITY,g;for(let _=0,w=0;w<4;++_,++w){VT(_%2?s:c,_%4>=2,!1,t),v=Fy(e);const O=BT(e,v);O<h&&(w=0,g=Jg(v),h=O)}v=$T(e),V1(e,v);for(let _=0,w=0;w<4;++_,++w){VT(_%2?s:c,_%4>=2,!0,t),v=Fy(e);const O=BT(e,v);O<h&&(w=0,g=Jg(v),h=O)}V1(e,g)},GT=(e,t,n)=>t.map(o=>fZ(e,o,n)),VT=(e,t,n,o)=>{const r=new Mf;e==null||e.forEach(s=>{var c;const v=s.graph().root,h=zk(s,v,r,t,n,o);for(let g=0;g<((c=h.vs)===null||c===void 0?void 0:c.length);g++){const _=s.node(h.vs[g]);_&&(_.order=g)}pZ(s,r,h.vs)})},V1=(e,t)=>{t==null||t.forEach(n=>{n==null||n.forEach((o,r)=>{e.node(o).order=r})})};class OZ extends Bv{}const xZ=(e,t)=>{const n={},o=(r,s)=>{let c=0,v=0;const h=r.length,g=s==null?void 0:s[(s==null?void 0:s.length)-1];return s==null||s.forEach((_,w)=>{var O;const S=AZ(e,_),P=S?e.node(S).order:h;(S||_===g)&&((O=s.slice(v,w+1))===null||O===void 0||O.forEach(A=>{var R;(R=e.predecessors(A))===null||R===void 0||R.forEach(D=>{var N;const $=e.node(D),Y=$.order;(Y<c||P<Y)&&!($.dummy&&(!((N=e.node(A))===null||N===void 0)&&N.dummy))&&Hk(n,D,A)})}),v=w+1,c=P)}),s};return t!=null&&t.length&&t.reduce(o),n},SZ=(e,t)=>{const n={};function o(v,h,g,_,w){var O,S;let P;for(let A=h;A<g;A++)P=v[A],!((O=e.node(P))===null||O===void 0)&&O.dummy&&((S=e.predecessors(P))===null||S===void 0||S.forEach(R=>{const D=e.node(R);D.dummy&&(D.order<_||D.order>w)&&Hk(n,R,P)}))}function r(v){return JSON.stringify(v.slice(1))}function s(v,h){const g=r(v);h.get(g)||(o(...v),h.set(g,!0))}const c=(v,h)=>{let g=-1,_,w=0;const O=new Map;return h==null||h.forEach((S,P)=>{var A;if(((A=e.node(S))===null||A===void 0?void 0:A.dummy)==="border"){const R=e.predecessors(S)||[];R.length&&(_=e.node(R[0]).order,s([h,w,P,g,_],O),w=P,g=_)}s([h,w,h.length,_,v.length],O)}),h};return t!=null&&t.length&&t.reduce(c),n},AZ=(e,t)=>{var n,o;if(!((n=e.node(t))===null||n===void 0)&&n.dummy)return(o=e.predecessors(t))===null||o===void 0?void 0:o.find(r=>e.node(r).dummy)},Hk=(e,t,n)=>{let o=t,r=n;if(o>r){const c=o;o=r,r=c}let s=e[o];s||(e[o]=s={}),s[r]=!0},TZ=(e,t,n)=>{let o=t,r=n;if(o>r){const s=t;o=r,r=s}return!!e[o]},MZ=(e,t,n,o)=>{const r={},s={},c={};return t==null||t.forEach(v=>{v==null||v.forEach((h,g)=>{r[h]=h,s[h]=h,c[h]=g})}),t==null||t.forEach(v=>{let h=-1;v==null||v.forEach(g=>{let _=o(g);if(_.length){_=_.sort((O,S)=>c[O]-c[S]);const w=(_.length-1)/2;for(let O=Math.floor(w),S=Math.ceil(w);O<=S;++O){const P=_[O];s[g]===g&&h<c[P]&&!TZ(n,g,P)&&(s[P]=g,s[g]=r[g]=r[P],h=c[P])}}})}),{root:r,align:s}},PZ=(e,t,n,o,r)=>{var s;const c={},v=kZ(e,t,n,r),h=r?"borderLeft":"borderRight",g=(O,S)=>{let P=v.nodes(),A=P.pop();const R={};for(;A;)R[A]?O(A):(R[A]=!0,P.push(A),P=P.concat(S(A))),A=P.pop()},_=O=>{c[O]=(v.inEdges(O)||[]).reduce((S,P)=>Math.max(S,(c[P.v]||0)+v.edge(P)),0)},w=O=>{const S=(v.outEdges(O)||[]).reduce((A,R)=>Math.min(A,(c[R.w]||0)-v.edge(R)),Number.POSITIVE_INFINITY),P=e.node(O);S!==Number.POSITIVE_INFINITY&&P.borderType!==h&&(c[O]=Math.max(c[O],S))};return g(_,v.predecessors.bind(v)),g(w,v.successors.bind(v)),(s=Object.values(o))===null||s===void 0||s.forEach(O=>{c[O]=c[n[O]]}),c},kZ=(e,t,n,o)=>{const r=new OZ,s=e.graph(),c=CZ(s.nodesep,s.edgesep,o);return t==null||t.forEach(v=>{let h;v==null||v.forEach(g=>{const _=n[g];if(r.setNode(_),h){const w=n[h],O=r.edgeFromArgs(w,_);r.setEdge(w,_,Math.max(c(e,g,h),O||0))}h=g})}),r},NZ=(e,t)=>AE(Object.values(t),n=>{var o;let r=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return(o=Object.keys(n))===null||o===void 0||o.forEach(c=>{const v=n[c],h=DZ(e,c)/2;r=Math.max(v+h,r),s=Math.min(v-h,s)}),r-s});function RZ(e,t){const n=Object.values(t),o=FT(n),r=Mw(n);["u","d"].forEach(s=>{["l","r"].forEach(c=>{const v=s+c,h=e[v];let g;if(h===t)return;const _=Object.values(h);g=c==="l"?o-FT(_):r-Mw(_),g&&(e[v]={},Object.keys(h).forEach(w=>{e[v][w]=h[w]+g}))})})}const jZ=(e,t)=>{const n={};return Object.keys(e.ul).forEach(o=>{if(t)n[o]=e[t.toLowerCase()][o];else{const r=Object.values(e).map(s=>s[o]);n[o]=(r[0]+r[1])/2}}),n},CZ=(e,t,n)=>(o,r,s)=>{const c=o.node(r),v=o.node(s);let h=0,g;if(h+=c.width/2,c.hasOwnProperty("labelpos"))switch((c.labelpos||"").toLowerCase()){case"l":g=-c.width/2;break;case"r":g=c.width/2;break}if(g&&(h+=n?g:-g),g=0,h+=(c.dummy?t:e)/2,h+=(v.dummy?t:e)/2,h+=v.width/2,v.labelpos)switch((v.labelpos||"").toLowerCase()){case"l":g=v.width/2;break;case"r":g=-v.width/2;break}return g&&(h+=n?g:-g),g=0,h},DZ=(e,t)=>e.node(t).width||0,IZ=e=>{const t=Fy(e),n=e.graph().ranksep;let o=0;t==null||t.forEach(r=>{const s=r.map(v=>e.node(v).height),c=Math.max(...s,0);r==null||r.forEach(v=>{e.node(v).y=o+c/2}),o+=c+n})},LZ=e=>{const t=Fy(e),n=Object.assign(xZ(e,t),SZ(e,t)),o={};let r=[];["u","d"].forEach(c=>{r=c==="u"?t:Object.values(t).reverse(),["l","r"].forEach(v=>{v==="r"&&(r=r.map(w=>Object.values(w).reverse()));const h=(c==="u"?e.predecessors:e.successors).bind(e),g=MZ(e,r,n,h),_=PZ(e,r,g.root,g.align,v==="r");v==="r"&&Object.keys(_).forEach(w=>_[w]=-_[w]),o[c+v]=_})});const s=NZ(e,o);return s&&RZ(o,s),jZ(o,e.graph().align)},FZ=e=>{var t;const n=jk(e);IZ(n);const o=LZ(n);(t=Object.keys(o))===null||t===void 0||t.forEach(r=>{n.node(r).x=o[r]})},$Z=(e,t)=>{const o=e.nodes().filter(c=>{var v;return!(!((v=e.children(c))===null||v===void 0)&&v.length)}).map(c=>e.node(c).rank),r=Math.max(...o),s=[];for(let c=0;c<r+1;c++)s[c]=[];t==null||t.forEach(c=>{const v=e.node(c);!v||v!=null&&v.dummy||isNaN(v.rank)||(v.fixorder=s[v.rank].length,s[v.rank].push(c))})},BZ=(e,t)=>{const n=t&&t.debugTiming?Dk:Ik;n("layout",()=>{t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",()=>{GZ(e,t.prevGraph)});const o=n("  buildLayoutGraph",()=>KZ(e));t&&t.edgeLabelSpace===!1||n("  makeSpaceForEdgeLabels",()=>{ZZ(o)});try{n("  runLayout",()=>{UZ(o,n,t)})}catch(r){if(r.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,r);return}throw r}n("  updateInputGraph",()=>{VZ(e,o)})})},UZ=(e,t,n)=>{t("    removeSelfEdges",()=>{aJ(e)}),t("    acyclic",()=>{MT.run(e)}),t("    nestingGraph.run",()=>{CT.run(e)}),t("    rank",()=>{YK(jk(e))}),t("    injectEdgeLabelProxies",()=>{JZ(e)}),t("    removeEmptyRanks",()=>{MK(e)}),t("    nestingGraph.cleanup",()=>{CT.cleanup(e)}),t("    normalizeRanks",()=>{TK(e)}),t("    assignRankMinMax",()=>{QZ(e)}),t("    removeEdgeLabelProxies",()=>{eJ(e)}),t("    normalize.run",()=>{NT.run(e)}),t("    parentDummyChains",()=>{QK(e)}),t("    addBorderSegments",()=>{oZ(e)}),n&&n.keepNodeOrder&&t("    initDataOrder",()=>{$Z(e,n.nodeOrder)}),t("    order",()=>{EZ(e,n==null?void 0:n.keepNodeOrder)}),t("    insertSelfEdges",()=>{lJ(e)}),t("    adjustCoordinateSystem",()=>{LT.adjust(e)}),t("    position",()=>{FZ(e)}),t("    positionSelfEdges",()=>{uJ(e)}),t("    removeBorderNodes",()=>{iJ(e)}),t("    normalize.undo",()=>{NT.undo(e)}),t("    fixupEdgeLabelCoords",()=>{rJ(e)}),t("    undoCoordinateSystem",()=>{LT.undo(e)}),t("    translateGraph",()=>{tJ(e)}),t("    assignNodeIntersects",()=>{nJ(e)}),t("    reversePoints",()=>{oJ(e)}),t("    acyclic.undo",()=>{MT.undo(e)})},GZ=(e,t)=>{e.nodes().forEach(n=>{const o=e.node(n),r=t.node(n);r!==void 0?(o.fixorder=r._order,delete r._order):delete o.fixorder})},VZ=(e,t)=>{e.nodes().forEach(n=>{var o;const r=e.node(n);if(r){const s=t.node(n);r.x=s.x,r.y=s.y,r._order=s.order,r._rank=s.rank,!((o=t.children(n))===null||o===void 0)&&o.length&&(r.width=s.width,r.height=s.height)}}),e.edges().forEach(n=>{const o=e.edge(n),r=t.edge(n);o.points=r?r.points:[],r&&r.hasOwnProperty("x")&&(o.x=r.x,o.y=r.y)}),e.graph().width=t.graph().width,e.graph().height=t.graph().height},WZ=["nodesep","edgesep","ranksep","marginx","marginy"],zZ={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W1=["acyclicer","ranker","rankdir","align"],HZ=["width","height","layer","fixorder"],XZ={width:0,height:0},YZ=["minlen","weight","width","height","labeloffset"],qZ={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},z1=["labelpos"],KZ=e=>{const t=new Mf({multigraph:!0,compound:!0}),n=X1(e.graph()),o={};return W1==null||W1.forEach(r=>{n[r]!==void 0&&(o[r]=n[r])}),t.setGraph(Object.assign({},zZ,H1(n,WZ),o)),e.nodes().forEach(r=>{const s=X1(e.node(r)),c=Object.assign(Object.assign({},XZ),s),v=H1(c,HZ);t.setNode(r,v),t.setParent(r,e.parent(r))}),e.edges().forEach(r=>{const s=X1(e.edge(r)),c={};z1==null||z1.forEach(v=>{s[v]!==void 0&&(c[v]=s[v])}),t.setEdgeObj(r,Object.assign({},qZ,H1(s,YZ),c))}),t},ZZ=e=>{const t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach(n=>{const o=e.node(n);isNaN(o.layer)||o.layer||(o.layer=0)}),e.edges().forEach(n=>{var o;const r=e.edge(n);r.minlen*=2,((o=r.labelpos)===null||o===void 0?void 0:o.toLowerCase())!=="c"&&(t.rankdir==="TB"||t.rankdir==="BT"?r.width+=r.labeloffset:r.height+=r.labeloffset)})},JZ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n.width&&n.height){const o=e.node(t.v),r=e.node(t.w),s={e:t,rank:(r.rank-o.rank)/2+o.rank};Uv(e,"edge-proxy",s,"_ep")}})},QZ=e=>{let t=0;e.nodes().forEach(n=>{var o,r;const s=e.node(n);s.borderTop&&(s.minRank=(o=e.node(s.borderTop))===null||o===void 0?void 0:o.rank,s.maxRank=(r=e.node(s.borderBottom))===null||r===void 0?void 0:r.rank,t=Math.max(t,s.maxRank||-1/0))}),e.graph().maxRank=t},eJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);n.dummy==="edge-proxy"&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))})},tJ=e=>{let t,n=0,o,r=0;const s=e.graph(),c=s.marginx||0,v=s.marginy||0,h=g=>{if(!g)return;const _=g.x,w=g.y,O=g.width,S=g.height;!isNaN(_)&&!isNaN(O)&&(t===void 0&&(t=_-O/2),t=Math.min(t,_-O/2),n=Math.max(n,_+O/2)),!isNaN(w)&&!isNaN(S)&&(o===void 0&&(o=w-S/2),o=Math.min(o,w-S/2),r=Math.max(r,w+S/2))};e.nodes().forEach(g=>{h(e.node(g))}),e.edges().forEach(g=>{const _=e.edge(g);_!=null&&_.hasOwnProperty("x")&&h(_)}),t-=c,o-=v,e.nodes().forEach(g=>{const _=e.node(g);_&&(_.x-=t,_.y-=o)}),e.edges().forEach(g=>{var _;const w=e.edge(g);(_=w.points)===null||_===void 0||_.forEach(O=>{O.x-=t,O.y-=o}),w.hasOwnProperty("x")&&(w.x-=t),w.hasOwnProperty("y")&&(w.y-=o)}),s.width=n-t+c,s.height=r-o+v},nJ=e=>{e.edges().forEach(t=>{const n=e.edge(t),o=e.node(t.v),r=e.node(t.w);let s,c;n.points?(s=n.points[0],c=n.points[n.points.length-1]):(n.points=[],s=r,c=o),n.points.unshift(PT(o,s)),n.points.push(PT(r,c))})},rJ=e=>{e.edges().forEach(t=>{const n=e.edge(t);if(n!=null&&n.hasOwnProperty("x"))switch((n.labelpos==="l"||n.labelpos==="r")&&(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset;break}})},oJ=e=>{e.edges().forEach(t=>{var n;const o=e.edge(t);o.reversed&&((n=o.points)===null||n===void 0||n.reverse())})},iJ=e=>{e.nodes().forEach(t=>{var n,o,r;if(!((n=e.children(t))===null||n===void 0)&&n.length){const s=e.node(t),c=e.node(s.borderTop),v=e.node(s.borderBottom),h=e.node(s.borderLeft[((o=s.borderLeft)===null||o===void 0?void 0:o.length)-1]),g=e.node(s.borderRight[((r=s.borderRight)===null||r===void 0?void 0:r.length)-1]);s.width=Math.abs((g==null?void 0:g.x)-(h==null?void 0:h.x))||10,s.height=Math.abs((v==null?void 0:v.y)-(c==null?void 0:c.y))||10,s.x=((h==null?void 0:h.x)||0)+s.width/2,s.y=((c==null?void 0:c.y)||0)+s.height/2}}),e.nodes().forEach(t=>{var n;((n=e.node(t))===null||n===void 0?void 0:n.dummy)==="border"&&e.removeNode(t)})},aJ=e=>{e.edges().forEach(t=>{if(t.v===t.w){const n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}})},lJ=e=>{const t=Fy(e);t==null||t.forEach(n=>{let o=0;n==null||n.forEach((r,s)=>{var c;const v=e.node(r);v.order=s+o,(c=v.selfEdges)===null||c===void 0||c.forEach(h=>{Uv(e,"selfedge",{width:h.label.width,height:h.label.height,rank:v.rank,order:s+ ++o,e:h.e,label:h.label},"_se")}),delete v.selfEdges})})},uJ=e=>{e.nodes().forEach(t=>{const n=e.node(t);if(n.dummy==="selfedge"){const o=e.node(n.e.v),r=o.x+o.width/2,s=o.y,c=n.x-r,v=o.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:r+2*c/3,y:s-v},{x:r+5*c/6,y:s-v},{y:s,x:r+c},{x:r+5*c/6,y:s+v},{x:r+2*c/3,y:s+v}],n.label.x=n.x,n.label.y=n.y}})},H1=(e,t)=>{const n={};return t==null||t.forEach(o=>{e[o]!==void 0&&(n[o]=+e[o])}),n},X1=(e={})=>{const t={};return Object.keys(e).forEach(n=>{t[n.toLowerCase()]=e[n]}),t},sJ={layout:BZ,util:{time:Dk,notime:Ik}};class cJ extends Pq{constructor(t){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=n=>{const o=this,{nodes:r}=o,s=r.find(c=>c.id===n);return s?s.layout!==!1:!0},this.updateCfg(t)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var t,n,o,r;const s=this,{nodes:c,nodeSize:v,rankdir:h,combos:g,begin:_,radial:w,comboEdges:O=[],vedges:S=[]}=s;if(!c)return;const P=s.edges||[],A=new Mf({multigraph:!0,compound:!0});s.nodeMap={};const R={};c.forEach(z=>{s.nodeMap[z.id]=z,z.comboId&&(R[z.comboId]=R[z.comboId]||[],R[z.comboId].push(z.id))});let D=[];const N={};!((t=s.nodeOrder)===null||t===void 0)&&t.length?(s.nodeOrder.forEach(z=>{N[z]=!0,D.push(s.nodeMap[z])}),c.forEach(z=>{N[z.id]||D.push(z)})):D=c;let $;v?vT(v)?$=()=>v:$=()=>[v,v]:$=z=>z.size?vT(z.size)?z.size:Ak(z.size)?[z.size.width||40,z.size.height||40]:[z.size,z.size]:[40,40];const Y=yT(s.ranksep,50,s.ranksepFunc),K=yT(s.nodesep,50,s.nodesepFunc);let X=K,te=Y;(h==="LR"||h==="RL")&&(X=Y,te=K),A.setDefaultEdgeLabel(()=>({})),A.setGraph(s);const W={};this.sortByCombo&&g&&g.forEach(z=>{if(W[z.id]=z,z.collapsed){const Z=$(z),me=te(z),ge=X(z),Re=Z[0]+2*ge,Be=Z[1]+2*me;A.setNode(z.id,{width:Re,height:Be})}z.parentId&&(W[z.parentId]||A.setNode(z.parentId,{}),A.setParent(z.id,z.parentId))}),D.filter(z=>z.layout!==!1).forEach(z=>{const Z=$(z),me=te(z),ge=X(z),Re=Z[0]+2*ge,Be=Z[1]+2*me,ve=z.layer;Zg(ve)?A.setNode(z.id,{width:Re,height:Be,layer:ve}):A.setNode(z.id,{width:Re,height:Be}),this.sortByCombo&&z.comboId&&(W[z.comboId]||(W[z.comboId]={id:z.comboId},A.setNode(z.comboId,{})),A.setParent(z.id,z.comboId))}),P.forEach(z=>{const Z=Jh(z,"source"),me=Jh(z,"target");this.layoutNode(Z)&&this.layoutNode(me)&&A.setEdge(Z,me,{weight:z.weight||1})}),(n=O==null?void 0:O.concat(S||[]))===null||n===void 0||n.forEach(z=>{var Z,me;const{source:ge,target:Re}=z,Be=!((Z=W[ge])===null||Z===void 0)&&Z.collapsed?[ge]:R[ge]||[ge],ve=!((me=W[Re])===null||me===void 0)&&me.collapsed?[Re]:R[Re]||[Re];Be.forEach(_e=>{ve.forEach(Ce=>{A.setEdge(_e,Ce,{weight:z.weight||1})})})});let C;!((o=s.preset)===null||o===void 0)&&o.nodes&&(C=new Mf({multigraph:!0,compound:!0}),s.preset.nodes.forEach(z=>{C==null||C.setNode(z.id,z)})),sJ.layout(A,{prevGraph:C,edgeLabelSpace:s.edgeLabelSpace,keepNodeOrder:!!s.nodeOrder,nodeOrder:s.nodeOrder});const G=[0,0];if(_){let z=1/0,Z=1/0;A.nodes().forEach(me=>{const ge=A.node(me);z>ge.x&&(z=ge.x),Z>ge.y&&(Z=ge.y)}),A.edges().forEach(me=>{var ge;(ge=A.edge(me).points)===null||ge===void 0||ge.forEach(Be=>{z>Be.x&&(z=Be.x),Z>Be.y&&(Z=Be.y)})}),G[0]=_[0]-z,G[1]=_[1]-Z}const q=h==="LR"||h==="RL";if(w){const{focusNode:z,ranksep:Z,getRadialPos:me}=this,ge=kq(z)?z:z==null?void 0:z.id,Re=ge?(r=A.node(ge))===null||r===void 0?void 0:r._rank:0,Be=[],ve=q?"y":"x",_e=q?"height":"width";let Ce=1/0,tt=-1/0;A.nodes().forEach(we=>{const Me=A.node(we);if(!s.nodeMap[we])return;const dt=K(s.nodeMap[we]);if(Re===0)Be[Me._rank]||(Be[Me._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Be[Me._rank].nodes.push(we),Be[Me._rank].totalWidth+=dt*2+Me[_e],Be[Me._rank].maxSize<Math.max(Me.width,Me.height)&&(Be[Me._rank].maxSize=Math.max(Me.width,Me.height));else{const rn=Me._rank-Re;if(rn===0)Be[rn]||(Be[rn]={nodes:[],totalWidth:0,maxSize:-1/0}),Be[rn].nodes.push(we),Be[rn].totalWidth+=dt*2+Me[_e],Be[rn].maxSize<Math.max(Me.width,Me.height)&&(Be[rn].maxSize=Math.max(Me.width,Me.height));else{const yn=Math.abs(rn);Be[yn]||(Be[yn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Be[yn].totalWidth+=dt*2+Me[_e],Be[yn].maxSize<Math.max(Me.width,Me.height)&&(Be[yn].maxSize=Math.max(Me.width,Me.height)),rn<0?Be[yn].left.push(we):Be[yn].right.push(we)}}const zt=Me[ve]-Me[_e]/2-dt,Et=Me[ve]+Me[_e]/2+dt;zt<Ce&&(Ce=zt),Et>tt&&(tt=Et)});let gt=Z||50;const st={},At=(tt-Ce)/.9,jt=[(Ce+tt-At)*.5,(Ce+tt+At)*.5],yt=(we,Me,dt=-1/0,zt=[0,1])=>{let Et=dt;return we.forEach(rn=>{const yn=A.node(rn);st[rn]=Me;const{x:Tn,y:pn}=me(yn[ve],jt,At,Me,zt);if(!s.nodeMap[rn])return;s.nodeMap[rn].x=Tn+G[0],s.nodeMap[rn].y=pn+G[1],s.nodeMap[rn]._order=yn._order;const ut=Y(s.nodeMap[rn]);Et<ut&&(Et=ut)}),Et};let Kt=!0;const je=0;Be.forEach(we=>{var Me,dt,zt,Et,rn,yn,Tn;if(!(!((Me=we==null?void 0:we.nodes)===null||Me===void 0)&&Me.length)&&!(!((dt=we==null?void 0:we.left)===null||dt===void 0)&&dt.length)&&!(!((zt=we==null?void 0:we.right)===null||zt===void 0)&&zt.length))return;if(Kt&&we.nodes.length===1){const ut=we.nodes[0];if(!s.nodeMap[ut])return;s.nodeMap[ut].x=G[0],s.nodeMap[ut].y=G[1],st[we.nodes[0]]=0,gt=Y(s.nodeMap[ut]),Kt=!1;return}gt=Math.max(gt,we.totalWidth/(2*Math.PI));let pn=-1/0;if(Re===0||!((Et=we.nodes)===null||Et===void 0)&&Et.length)pn=yt(we.nodes,gt,pn,[0,1]);else{const ut=((rn=we.left)===null||rn===void 0?void 0:rn.length)/(((yn=we.left)===null||yn===void 0?void 0:yn.length)+((Tn=we.right)===null||Tn===void 0?void 0:Tn.length));pn=yt(we.left,gt,pn,[0,ut]),pn=yt(we.right,gt,pn,[ut+.05,1])}gt+=pn,Kt=!1,je-we.maxSize}),A.edges().forEach(we=>{var Me,dt,zt;const Et=A.edge(we),rn=P.findIndex(yn=>{const Tn=Jh(yn,"source"),pn=Jh(yn,"target");return Tn===we.v&&pn===we.w});if(!(rn<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[rn].type!=="loop"){const yn=ve==="x"?"y":"x",Tn=(Me=Et==null?void 0:Et.points)===null||Me===void 0?void 0:Me.slice(1,Et.points.length-1),pn=[],ut=(dt=A.node(we.v))===null||dt===void 0?void 0:dt[yn],xn=ut-((zt=A.node(we.w))===null||zt===void 0?void 0:zt[yn]),Le=st[we.v],mn=Le-st[we.w];Tn==null||Tn.forEach(qn=>{const re=(qn[yn]-ut)/xn*mn+Le,Kn=me(qn[ve],jt,At,re);pn.push({x:Kn.x+G[0],y:Kn.y+G[1]})}),P[rn].controlPoints=pn}})}else{const z=new Set,me=h==="BT"||h==="RL"?(ve,_e)=>_e-ve:(ve,_e)=>ve-_e;A.nodes().forEach(ve=>{const _e=A.node(ve);if(!_e)return;let Ce=this.nodeMap[ve];Ce||(Ce=g==null?void 0:g.find(tt=>tt.id===ve)),Ce&&(Ce.x=_e.x+G[0],Ce.y=_e.y+G[1],Ce._order=_e._order,z.add(q?Ce.x:Ce.y))});const ge=Array.from(z).sort(me),Re=q?(ve,_e)=>ve.x!==_e.x:(ve,_e)=>ve.y!==_e.y,Be=q?(ve,_e,Ce)=>{const tt=Math.max(_e.y,Ce.y),gt=Math.min(_e.y,Ce.y);return ve.filter(st=>st.y<=tt&&st.y>=gt)}:(ve,_e,Ce)=>{const tt=Math.max(_e.x,Ce.x),gt=Math.min(_e.x,Ce.x);return ve.filter(st=>st.x<=tt&&st.x>=gt)};A.edges().forEach(ve=>{var _e;const Ce=A.edge(ve),tt=P.findIndex(gt=>{const st=Jh(gt,"source"),At=Jh(gt,"target");return st===ve.v&&At===ve.w});if(!(tt<=-1)&&s.edgeLabelSpace&&s.controlPoints&&P[tt].type!=="loop"){(_e=Ce==null?void 0:Ce.points)===null||_e===void 0||_e.forEach(At=>{At.x+=G[0],At.y+=G[1]});const gt=s.nodeMap[ve.v],st=s.nodeMap[ve.w];P[tt].controlPoints=fJ(Ce==null?void 0:Ce.points,gt,st,ge,q,Re,Be)}})}return s.onLayoutEnd&&s.onLayoutEnd(),{nodes:c,edges:P}}getRadialPos(t,n,o,r,s=[0,1]){let c=(t-n[0])/o;c=c*(s[1]-s[0])+s[0];const v=c*2*Math.PI;return{x:Math.cos(v)*r,y:Math.sin(v)*r}}getType(){return"dagre"}}const fJ=(e,t,n,o,r,s,c)=>{let v=(e==null?void 0:e.slice(1,e.length-1))||[];if(t&&n){let{x:h,y:g}=t,{x:_,y:w}=n;if(r&&(h=t.y,g=t.x,_=n.y,w=n.x),w!==g&&h!==_){const O=o.indexOf(g),S=o[O+1];if(S){const R=v[0],D=r?{x:(g+S)/2,y:(R==null?void 0:R.y)||_}:{x:(R==null?void 0:R.x)||_,y:(g+S)/2};(!R||s(R,D))&&v.unshift(D)}const P=o.indexOf(w),A=Math.abs(P-O);if(A===1)v=c(v,t,n),v.length||v.push(r?{x:(g+w)/2,y:h}:{x:h,y:(g+w)/2});else if(A>1){const R=o[P-1];if(R){const D=v[v.length-1],N=r?{x:(w+R)/2,y:(D==null?void 0:D.y)||_}:{x:(D==null?void 0:D.x)||h,y:(w+R)/2};(!D||s(D,N))&&v.push(N)}}}}return v};var WT,zT,HT,XT;(function(e){e[e.META=0]="META",e[e.NODE=1]="NODE",e[e.BRIDGE=2]="BRIDGE"})(WT||(WT={})),function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(zT||(zT={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(HT||(HT={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(XT||(XT={}));var dg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function TE(e,t){return e(t={exports:{}},t.exports),t.exports}var dJ=function(){this.__data__=[],this.size=0},Gv=function(e,t){return e===t||e!=e&&t!=t},M_=function(e,t){for(var n=e.length;n--;)if(Gv(e[n][0],t))return n;return-1},pJ=Array.prototype.splice,hJ=function(e){var t=this.__data__,n=M_(t,e);return!(n<0)&&(n==t.length-1?t.pop():pJ.call(t,n,1),--this.size,!0)},vJ=function(e){var t=this.__data__,n=M_(t,e);return n<0?void 0:t[n][1]},yJ=function(e){return M_(this.__data__,e)>-1},mJ=function(e,t){var n=this.__data__,o=M_(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this};function tv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}tv.prototype.clear=dJ,tv.prototype.delete=hJ,tv.prototype.get=vJ,tv.prototype.has=yJ,tv.prototype.set=mJ;var P_=tv,gJ=function(){this.__data__=new P_,this.size=0},_J=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},bJ=function(e){return this.__data__.get(e)},wJ=function(e){return this.__data__.has(e)},Xk=typeof dg=="object"&&dg&&dg.Object===Object&&dg,EJ=typeof self=="object"&&self&&self.Object===Object&&self,ws=Xk||EJ||Function("return this")(),Bu=ws.Symbol,Yk=Object.prototype,OJ=Yk.hasOwnProperty,xJ=Yk.toString,hy=Bu?Bu.toStringTag:void 0,SJ=function(e){var t=OJ.call(e,hy),n=e[hy];try{e[hy]=void 0;var o=!0}catch{}var r=xJ.call(e);return o&&(t?e[hy]=n:delete e[hy]),r},AJ=Object.prototype.toString,TJ=function(e){return AJ.call(e)},YT=Bu?Bu.toStringTag:void 0,$d=function(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":YT&&YT in Object(e)?SJ(e):TJ(e)},kl=function(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")},qT,nm=function(e){if(!kl(e))return!1;var t=$d(e);return t=="[object Function]"||t=="[object GeneratorFunction]"||t=="[object AsyncFunction]"||t=="[object Proxy]"},Y1=ws["__core-js_shared__"],KT=(qT=/[^.]+$/.exec(Y1&&Y1.keys&&Y1.keys.IE_PROTO||""))?"Symbol(src)_1."+qT:"",MJ=function(e){return!!KT&&KT in e},PJ=Function.prototype.toString,Jp=function(e){if(e!=null){try{return PJ.call(e)}catch{}try{return e+""}catch{}}return""},kJ=/^\[object .+?Constructor\]$/,NJ=Function.prototype,RJ=Object.prototype,jJ=NJ.toString,CJ=RJ.hasOwnProperty,DJ=RegExp("^"+jJ.call(CJ).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),IJ=function(e){return!(!kl(e)||MJ(e))&&(nm(e)?DJ:kJ).test(Jp(e))},LJ=function(e,t){return e==null?void 0:e[t]},Qp=function(e,t){var n=LJ(e,t);return IJ(n)?n:void 0},$y=Qp(ws,"Map"),By=Qp(Object,"create"),FJ=function(){this.__data__=By?By(null):{},this.size=0},$J=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},BJ=Object.prototype.hasOwnProperty,UJ=function(e){var t=this.__data__;if(By){var n=t[e];return n==="__lodash_hash_undefined__"?void 0:n}return BJ.call(t,e)?t[e]:void 0},GJ=Object.prototype.hasOwnProperty,VJ=function(e){var t=this.__data__;return By?t[e]!==void 0:GJ.call(t,e)},WJ=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=By&&t===void 0?"__lodash_hash_undefined__":t,this};function nv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}nv.prototype.clear=FJ,nv.prototype.delete=$J,nv.prototype.get=UJ,nv.prototype.has=VJ,nv.prototype.set=WJ;var ZT=nv,zJ=function(){this.size=0,this.__data__={hash:new ZT,map:new($y||P_),string:new ZT}},HJ=function(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null},k_=function(e,t){var n=e.__data__;return HJ(t)?n[typeof t=="string"?"string":"hash"]:n.map},XJ=function(e){var t=k_(this,e).delete(e);return this.size-=t?1:0,t},YJ=function(e){return k_(this,e).get(e)},qJ=function(e){return k_(this,e).has(e)},KJ=function(e,t){var n=k_(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this};function rv(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}rv.prototype.clear=zJ,rv.prototype.delete=XJ,rv.prototype.get=YJ,rv.prototype.has=qJ,rv.prototype.set=KJ;var N_=rv,ZJ=function(e,t){var n=this.__data__;if(n instanceof P_){var o=n.__data__;if(!$y||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new N_(o)}return n.set(e,t),this.size=n.size,this};function ov(e){var t=this.__data__=new P_(e);this.size=t.size}ov.prototype.clear=gJ,ov.prototype.delete=_J,ov.prototype.get=bJ,ov.prototype.has=wJ,ov.prototype.set=ZJ;var yv=ov,ME=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o&&t(e[n],n,e)!==!1;);return e},Qg=function(){try{var e=Qp(Object,"defineProperty");return e({},"",{}),e}catch{}}(),R_=function(e,t,n){t=="__proto__"&&Qg?Qg(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},JJ=Object.prototype.hasOwnProperty,j_=function(e,t,n){var o=e[t];JJ.call(e,t)&&Gv(o,n)&&(n!==void 0||t in e)||R_(e,t,n)},rm=function(e,t,n,o){var r=!n;n||(n={});for(var s=-1,c=t.length;++s<c;){var v=t[s],h=o?o(n[v],e[v],v,n,e):void 0;h===void 0&&(h=e[v]),r?R_(n,v,h):j_(n,v,h)}return n},QJ=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o},_s=function(e){return e!=null&&typeof e=="object"},JT=function(e){return _s(e)&&$d(e)=="[object Arguments]"},qk=Object.prototype,eQ=qk.hasOwnProperty,tQ=qk.propertyIsEnumerable,Av=JT(function(){return arguments}())?JT:function(e){return _s(e)&&eQ.call(e,"callee")&&!tQ.call(e,"callee")},xi=Array.isArray,nQ=function(){return!1},Gp=TE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=(r?r.isBuffer:void 0)||nQ;e.exports=s}),rQ=/^(?:0|[1-9]\d*)$/,C_=function(e,t){var n=typeof e;return!!(t=t??9007199254740991)&&(n=="number"||n!="symbol"&&rQ.test(e))&&e>-1&&e%1==0&&e<t},PE=function(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=9007199254740991},ti={};ti["[object Float32Array]"]=ti["[object Float64Array]"]=ti["[object Int8Array]"]=ti["[object Int16Array]"]=ti["[object Int32Array]"]=ti["[object Uint8Array]"]=ti["[object Uint8ClampedArray]"]=ti["[object Uint16Array]"]=ti["[object Uint32Array]"]=!0,ti["[object Arguments]"]=ti["[object Array]"]=ti["[object ArrayBuffer]"]=ti["[object Boolean]"]=ti["[object DataView]"]=ti["[object Date]"]=ti["[object Error]"]=ti["[object Function]"]=ti["[object Map]"]=ti["[object Number]"]=ti["[object Object]"]=ti["[object RegExp]"]=ti["[object Set]"]=ti["[object String]"]=ti["[object WeakMap]"]=!1;var oQ=function(e){return _s(e)&&PE(e.length)&&!!ti[$d(e)]},D_=function(e){return function(t){return e(t)}},Tv=TE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n&&Xk.process,s=function(){try{var c=o&&o.require&&o.require("util").types;return c||r&&r.binding&&r.binding("util")}catch{}}();e.exports=s}),QT=Tv&&Tv.isTypedArray,om=QT?D_(QT):oQ,iQ=Object.prototype.hasOwnProperty,Kk=function(e,t){var n=xi(e),o=!n&&Av(e),r=!n&&!o&&Gp(e),s=!n&&!o&&!r&&om(e),c=n||o||r||s,v=c?QJ(e.length,String):[],h=v.length;for(var g in e)!t&&!iQ.call(e,g)||c&&(g=="length"||r&&(g=="offset"||g=="parent")||s&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||C_(g,h))||v.push(g);return v},aQ=Object.prototype,I_=function(e){var t=e&&e.constructor;return e===(typeof t=="function"&&t.prototype||aQ)},Zk=function(e,t){return function(n){return e(t(n))}},lQ=Zk(Object.keys,Object),uQ=Object.prototype.hasOwnProperty,kE=function(e){if(!I_(e))return lQ(e);var t=[];for(var n in Object(e))uQ.call(e,n)&&n!="constructor"&&t.push(n);return t},Rf=function(e){return e!=null&&PE(e.length)&&!nm(e)},Bd=function(e){return Rf(e)?Kk(e):kE(e)},sQ=function(e,t){return e&&rm(t,Bd(t),e)},cQ=function(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t},fQ=Object.prototype.hasOwnProperty,dQ=function(e){if(!kl(e))return cQ(e);var t=I_(e),n=[];for(var o in e)(o!="constructor"||!t&&fQ.call(e,o))&&n.push(o);return n},eh=function(e){return Rf(e)?Kk(e,!0):dQ(e)},pQ=function(e,t){return e&&rm(t,eh(t),e)},Jk=TE(function(e,t){var n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,r=o&&o.exports===n?ws.Buffer:void 0,s=r?r.allocUnsafe:void 0;e.exports=function(c,v){if(v)return c.slice();var h=c.length,g=s?s(h):new c.constructor(h);return c.copy(g),g}}),Qk=function(e,t){var n=-1,o=e.length;for(t||(t=Array(o));++n<o;)t[n]=e[n];return t},eN=function(e,t){for(var n=-1,o=e==null?0:e.length,r=0,s=[];++n<o;){var c=e[n];t(c,n,e)&&(s[r++]=c)}return s},tN=function(){return[]},hQ=Object.prototype.propertyIsEnumerable,eM=Object.getOwnPropertySymbols,NE=eM?function(e){return e==null?[]:(e=Object(e),eN(eM(e),function(t){return hQ.call(e,t)}))}:tN,vQ=function(e,t){return rm(e,NE(e),t)},RE=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e},L_=Zk(Object.getPrototypeOf,Object),nN=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)RE(t,NE(e)),e=L_(e);return t}:tN,yQ=function(e,t){return rm(e,nN(e),t)},rN=function(e,t,n){var o=t(e);return xi(e)?o:RE(o,n(e))},Pw=function(e){return rN(e,Bd,NE)},mQ=function(e){return rN(e,eh,nN)},kw=Qp(ws,"DataView"),Nw=Qp(ws,"Promise"),mv=Qp(ws,"Set"),Rw=Qp(ws,"WeakMap"),gQ=Jp(kw),_Q=Jp($y),bQ=Jp(Nw),wQ=Jp(mv),EQ=Jp(Rw),Ip=$d;(kw&&Ip(new kw(new ArrayBuffer(1)))!="[object DataView]"||$y&&Ip(new $y)!="[object Map]"||Nw&&Ip(Nw.resolve())!="[object Promise]"||mv&&Ip(new mv)!="[object Set]"||Rw&&Ip(new Rw)!="[object WeakMap]")&&(Ip=function(e){var t=$d(e),n=t=="[object Object]"?e.constructor:void 0,o=n?Jp(n):"";if(o)switch(o){case gQ:return"[object DataView]";case _Q:return"[object Map]";case bQ:return"[object Promise]";case wQ:return"[object Set]";case EQ:return"[object WeakMap]"}return t});var Vp=Ip,OQ=Object.prototype.hasOwnProperty,xQ=function(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&OQ.call(e,"index")&&(n.index=e.index,n.input=e.input),n},e_=ws.Uint8Array,jE=function(e){var t=new e.constructor(e.byteLength);return new e_(t).set(new e_(e)),t},SQ=function(e,t){var n=t?jE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},AQ=/\w*$/,TQ=function(e){var t=new e.constructor(e.source,AQ.exec(e));return t.lastIndex=e.lastIndex,t},tM=Bu?Bu.prototype:void 0,nM=tM?tM.valueOf:void 0,MQ=function(e){return nM?Object(nM.call(e)):{}},oN=function(e,t){var n=t?jE(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},PQ=function(e,t,n){var o=e.constructor;switch(t){case"[object ArrayBuffer]":return jE(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return SQ(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return oN(e,n);case"[object Map]":return new o;case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return TQ(e);case"[object Set]":return new o;case"[object Symbol]":return MQ(e)}},rM=Object.create,iN=function(){function e(){}return function(t){if(!kl(t))return{};if(rM)return rM(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),aN=function(e){return typeof e.constructor!="function"||I_(e)?{}:iN(L_(e))},kQ=function(e){return _s(e)&&Vp(e)=="[object Map]"},oM=Tv&&Tv.isMap,NQ=oM?D_(oM):kQ,RQ=function(e){return _s(e)&&Vp(e)=="[object Set]"},iM=Tv&&Tv.isSet,jQ=iM?D_(iM):RQ,Ho={};Ho["[object Arguments]"]=Ho["[object Array]"]=Ho["[object ArrayBuffer]"]=Ho["[object DataView]"]=Ho["[object Boolean]"]=Ho["[object Date]"]=Ho["[object Float32Array]"]=Ho["[object Float64Array]"]=Ho["[object Int8Array]"]=Ho["[object Int16Array]"]=Ho["[object Int32Array]"]=Ho["[object Map]"]=Ho["[object Number]"]=Ho["[object Object]"]=Ho["[object RegExp]"]=Ho["[object Set]"]=Ho["[object String]"]=Ho["[object Symbol]"]=Ho["[object Uint8Array]"]=Ho["[object Uint8ClampedArray]"]=Ho["[object Uint16Array]"]=Ho["[object Uint32Array]"]=!0,Ho["[object Error]"]=Ho["[object Function]"]=Ho["[object WeakMap]"]=!1;var lN=function e(t,n,o,r,s,c){var v,h=1&n,g=2&n,_=4&n;if(o&&(v=s?o(t,r,s,c):o(t)),v!==void 0)return v;if(!kl(t))return t;var w=xi(t);if(w){if(v=xQ(t),!h)return Qk(t,v)}else{var O=Vp(t),S=O=="[object Function]"||O=="[object GeneratorFunction]";if(Gp(t))return Jk(t,h);if(O=="[object Object]"||O=="[object Arguments]"||S&&!s){if(v=g||S?{}:aN(t),!h)return g?yQ(t,pQ(v,t)):vQ(t,sQ(v,t))}else{if(!Ho[O])return s?t:{};v=PQ(t,O,h)}}c||(c=new yv);var P=c.get(t);if(P)return P;c.set(t,v),jQ(t)?t.forEach(function(R){v.add(e(R,n,o,R,t,c))}):NQ(t)&&t.forEach(function(R,D){v.set(D,e(R,n,o,D,t,c))});var A=w?void 0:(_?g?mQ:Pw:g?eh:Bd)(t);return ME(A||t,function(R,D){A&&(R=t[D=R]),j_(v,D,e(R,n,o,D,t,c))}),v},CQ=function(e){return lN(e,4)},CE=function(e){return function(){return e}},DE=function(e){return function(t,n,o){for(var r=-1,s=Object(t),c=o(t),v=c.length;v--;){var h=c[e?v:++r];if(n(s[h],h,s)===!1)break}return t}}(),IE=function(e,t){return e&&DE(e,t,Bd)},F_=function(e,t){return function(n,o){if(n==null)return n;if(!Rf(n))return e(n,o);for(var r=n.length,s=t?r:-1,c=Object(n);(t?s--:++s<r)&&o(c[s],s,c)!==!1;);return n}}(IE),th=function(e){return e},uN=function(e){return typeof e=="function"?e:th},sN=function(e,t){return(xi(e)?ME:F_)(e,uN(t))},cN=sN,DQ=function(e,t){var n=[];return F_(e,function(o,r,s){t(o,r,s)&&n.push(o)}),n},IQ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},LQ=function(e){return this.__data__.has(e)};function Ag(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new N_;++t<n;)this.add(e[t])}Ag.prototype.add=Ag.prototype.push=IQ,Ag.prototype.has=LQ;var fN=Ag,FQ=function(e,t){for(var n=-1,o=e==null?0:e.length;++n<o;)if(t(e[n],n,e))return!0;return!1},dN=function(e,t){return e.has(t)},pN=function(e,t,n,o,r,s){var c=1&n,v=e.length,h=t.length;if(v!=h&&!(c&&h>v))return!1;var g=s.get(e),_=s.get(t);if(g&&_)return g==t&&_==e;var w=-1,O=!0,S=2&n?new fN:void 0;for(s.set(e,t),s.set(t,e);++w<v;){var P=e[w],A=t[w];if(o)var R=c?o(A,P,w,t,e,s):o(P,A,w,e,t,s);if(R!==void 0){if(R)continue;O=!1;break}if(S){if(!FQ(t,function(D,N){if(!dN(S,N)&&(P===D||r(P,D,n,o,s)))return S.push(N)})){O=!1;break}}else if(P!==A&&!r(P,A,n,o,s)){O=!1;break}}return s.delete(e),s.delete(t),O},$Q=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o,r){n[++t]=[r,o]}),n},LE=function(e){var t=-1,n=Array(e.size);return e.forEach(function(o){n[++t]=o}),n},aM=Bu?Bu.prototype:void 0,q1=aM?aM.valueOf:void 0,BQ=function(e,t,n,o,r,s,c){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new e_(e),new e_(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Gv(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var v=$Q;case"[object Set]":var h=1&o;if(v||(v=LE),e.size!=t.size&&!h)return!1;var g=c.get(e);if(g)return g==t;o|=2,c.set(e,t);var _=pN(v(e),v(t),o,r,s,c);return c.delete(e),_;case"[object Symbol]":if(q1)return q1.call(e)==q1.call(t)}return!1},UQ=Object.prototype.hasOwnProperty,GQ=function(e,t,n,o,r,s){var c=1&n,v=Pw(e),h=v.length;if(h!=Pw(t).length&&!c)return!1;for(var g=h;g--;){var _=v[g];if(!(c?_ in t:UQ.call(t,_)))return!1}var w=s.get(e),O=s.get(t);if(w&&O)return w==t&&O==e;var S=!0;s.set(e,t),s.set(t,e);for(var P=c;++g<h;){var A=e[_=v[g]],R=t[_];if(o)var D=c?o(R,A,_,t,e,s):o(A,R,_,e,t,s);if(!(D===void 0?A===R||r(A,R,n,o,s):D)){S=!1;break}P||(P=_=="constructor")}if(S&&!P){var N=e.constructor,$=t.constructor;N==$||!("constructor"in e)||!("constructor"in t)||typeof N=="function"&&N instanceof N&&typeof $=="function"&&$ instanceof $||(S=!1)}return s.delete(e),s.delete(t),S},lM=Object.prototype.hasOwnProperty,VQ=function(e,t,n,o,r,s){var c=xi(e),v=xi(t),h=c?"[object Array]":Vp(e),g=v?"[object Array]":Vp(t),_=(h=h=="[object Arguments]"?"[object Object]":h)=="[object Object]",w=(g=g=="[object Arguments]"?"[object Object]":g)=="[object Object]",O=h==g;if(O&&Gp(e)){if(!Gp(t))return!1;c=!0,_=!1}if(O&&!_)return s||(s=new yv),c||om(e)?pN(e,t,n,o,r,s):BQ(e,t,h,n,o,r,s);if(!(1&n)){var S=_&&lM.call(e,"__wrapped__"),P=w&&lM.call(t,"__wrapped__");if(S||P){var A=S?e.value():e,R=P?t.value():t;return s||(s=new yv),r(A,R,n,o,s)}}return!!O&&(s||(s=new yv),GQ(e,t,n,o,r,s))},hN=function e(t,n,o,r,s){return t===n||(t==null||n==null||!_s(t)&&!_s(n)?t!=t&&n!=n:VQ(t,n,o,r,e,s))},WQ=function(e,t,n,o){var r=n.length,s=r,c=!o;if(e==null)return!s;for(e=Object(e);r--;){var v=n[r];if(c&&v[2]?v[1]!==e[v[0]]:!(v[0]in e))return!1}for(;++r<s;){var h=(v=n[r])[0],g=e[h],_=v[1];if(c&&v[2]){if(g===void 0&&!(h in e))return!1}else{var w=new yv;if(o)var O=o(g,_,h,e,t,w);if(!(O===void 0?hN(_,g,3,o,w):O))return!1}}return!0},vN=function(e){return e==e&&!kl(e)},zQ=function(e){for(var t=Bd(e),n=t.length;n--;){var o=t[n],r=e[o];t[n]=[o,r,vN(r)]}return t},yN=function(e,t){return function(n){return n!=null&&n[e]===t&&(t!==void 0||e in Object(n))}},HQ=function(e){var t=zQ(e);return t.length==1&&t[0][2]?yN(t[0][0],t[0][1]):function(n){return n===e||WQ(n,e,t)}},Wp=function(e){return typeof e=="symbol"||_s(e)&&$d(e)=="[object Symbol]"},XQ=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,YQ=/^\w*$/,FE=function(e,t){if(xi(e))return!1;var n=typeof e;return!(n!="number"&&n!="symbol"&&n!="boolean"&&e!=null&&!Wp(e))||YQ.test(e)||!XQ.test(e)||t!=null&&e in Object(t)};function $E(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError("Expected a function");var n=function(){var o=arguments,r=t?t.apply(this,o):o[0],s=n.cache;if(s.has(r))return s.get(r);var c=e.apply(this,o);return n.cache=s.set(r,c)||s,c};return n.cache=new($E.Cache||N_),n}$E.Cache=N_;var qQ=$E,KQ=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ZQ=/\\(\\)?/g,JQ=function(e){var t=qQ(e,function(o){return n.size===500&&n.clear(),o}),n=t.cache;return t}(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(KQ,function(n,o,r,s){t.push(r?s.replace(ZQ,"$1"):o||n)}),t}),gv=function(e,t){for(var n=-1,o=e==null?0:e.length,r=Array(o);++n<o;)r[n]=t(e[n],n,e);return r},uM=Bu?Bu.prototype:void 0,sM=uM?uM.toString:void 0,QQ=function e(t){if(typeof t=="string")return t;if(xi(t))return gv(t,e)+"";if(Wp(t))return sM?sM.call(t):"";var n=t+"";return n=="0"&&1/t==-1/0?"-0":n},mN=function(e){return e==null?"":QQ(e)},$_=function(e,t){return xi(e)?e:FE(e,t)?[e]:JQ(mN(e))},im=function(e){if(typeof e=="string"||Wp(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t},B_=function(e,t){for(var n=0,o=(t=$_(t,e)).length;e!=null&&n<o;)e=e[im(t[n++])];return n&&n==o?e:void 0},eee=function(e,t,n){var o=e==null?void 0:B_(e,t);return o===void 0?n:o},tee=function(e,t){return e!=null&&t in Object(e)},gN=function(e,t,n){for(var o=-1,r=(t=$_(t,e)).length,s=!1;++o<r;){var c=im(t[o]);if(!(s=e!=null&&n(e,c)))break;e=e[c]}return s||++o!=r?s:!!(r=e==null?0:e.length)&&PE(r)&&C_(c,r)&&(xi(e)||Av(e))},_N=function(e,t){return e!=null&&gN(e,t,tee)},nee=function(e,t){return FE(e)&&vN(t)?yN(im(e),t):function(n){var o=eee(n,e);return o===void 0&&o===t?_N(n,e):hN(t,o,3)}},bN=function(e){return function(t){return t==null?void 0:t[e]}},ree=function(e){return function(t){return B_(t,e)}},oee=function(e){return FE(e)?bN(im(e)):ree(e)},jf=function(e){return typeof e=="function"?e:e==null?th:typeof e=="object"?xi(e)?nee(e[0],e[1]):HQ(e):oee(e)},wN=function(e,t){return(xi(e)?eN:DQ)(e,jf(t))},iee=Object.prototype.hasOwnProperty,aee=function(e,t){return e!=null&&iee.call(e,t)},EN=function(e,t){return e!=null&&gN(e,t,aee)},lee=Object.prototype.hasOwnProperty,uee=function(e){if(e==null)return!0;if(Rf(e)&&(xi(e)||typeof e=="string"||typeof e.splice=="function"||Gp(e)||om(e)||Av(e)))return!e.length;var t=Vp(e);if(t=="[object Map]"||t=="[object Set]")return!e.size;if(I_(e))return!kE(e).length;for(var n in e)if(lee.call(e,n))return!1;return!0},ON=function(e){return e===void 0},xN=function(e,t){var n=-1,o=Rf(e)?Array(e.length):[];return F_(e,function(r,s,c){o[++n]=t(r,s,c)}),o},SN=function(e,t){return(xi(e)?gv:xN)(e,jf(t))},see=function(e,t,n,o){var r=-1,s=e==null?0:e.length;for(o&&s&&(n=e[++r]);++r<s;)n=t(n,e[r],r,e);return n},cee=function(e,t,n,o,r){return r(e,function(s,c,v){n=o?(o=!1,s):t(n,s,c,v)}),n},AN=function(e,t,n){var o=xi(e)?see:cee,r=arguments.length<3;return o(e,jf(t),n,r,F_)},fee=function(e){return typeof e=="string"||!xi(e)&&_s(e)&&$d(e)=="[object String]"},dee=bN("length"),pee=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),hee=function(e){return pee.test(e)},vee="[\\ud800-\\udfff]",jw="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Cw="\\ud83c[\\udffb-\\udfff]",TN="[^\\ud800-\\udfff]",MN="(?:\\ud83c[\\udde6-\\uddff]){2}",PN="[\\ud800-\\udbff][\\udc00-\\udfff]",cM="(?:"+jw+"|"+Cw+")?",yee="[\\ufe0e\\ufe0f]?"+cM+("(?:\\u200d(?:"+[TN,MN,PN].join("|")+")[\\ufe0e\\ufe0f]?"+cM+")*"),mee="(?:"+[TN+jw+"?",jw,MN,PN,vee].join("|")+")",fM=RegExp(Cw+"(?="+Cw+")|"+mee+yee,"g"),gee=function(e){for(var t=fM.lastIndex=0;fM.test(e);)++t;return t},_ee=function(e){return hee(e)?gee(e):dee(e)},bee=function(e){if(e==null)return 0;if(Rf(e))return fee(e)?_ee(e):e.length;var t=Vp(e);return t=="[object Map]"||t=="[object Set]"?e.size:kE(e).length},wee=function(e,t,n){var o=xi(e),r=o||Gp(e)||om(e);if(t=jf(t),n==null){var s=e&&e.constructor;n=r?o?new s:[]:kl(e)&&nm(s)?iN(L_(e)):{}}return(r?ME:IE)(e,function(c,v,h){return t(n,c,v,h)}),n},dM=Bu?Bu.isConcatSpreadable:void 0,Eee=function(e){return xi(e)||Av(e)||!!(dM&&e&&e[dM])},BE=function e(t,n,o,r,s){var c=-1,v=t.length;for(o||(o=Eee),s||(s=[]);++c<v;){var h=t[c];n>0&&o(h)?n>1?e(h,n-1,o,r,s):RE(s,h):r||(s[s.length]=h)}return s},Oee=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},pM=Math.max,kN=function(e,t,n){return t=pM(t===void 0?e.length-1:t,0),function(){for(var o=arguments,r=-1,s=pM(o.length-t,0),c=Array(s);++r<s;)c[r]=o[t+r];r=-1;for(var v=Array(t+1);++r<t;)v[r]=o[r];return v[t]=n(c),Oee(e,this,v)}},xee=Qg?function(e,t){return Qg(e,"toString",{configurable:!0,enumerable:!1,value:CE(t),writable:!0})}:th,See=Date.now,NN=function(e){var t=0,n=0;return function(){var o=See(),r=16-(o-n);if(n=o,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(xee),U_=function(e,t){return NN(kN(e,t,th),e+"")},RN=function(e,t,n,o){for(var r=e.length,s=n+(o?1:-1);o?s--:++s<r;)if(t(e[s],s,e))return s;return-1},Aee=function(e){return e!=e},Tee=function(e,t,n){for(var o=n-1,r=e.length;++o<r;)if(e[o]===t)return o;return-1},Mee=function(e,t,n){return t==t?Tee(e,t,n):RN(e,Aee,n)},Pee=function(e,t){return!!(e!=null&&e.length)&&Mee(e,t,0)>-1},kee=function(e,t,n){for(var o=-1,r=e==null?0:e.length;++o<r;)if(n(t,e[o]))return!0;return!1},Nee=function(){},Ree=mv&&1/LE(new mv([,-0]))[1]==1/0?function(e){return new mv(e)}:Nee,jee=function(e,t,n){var o=-1,r=Pee,s=e.length,c=!0,v=[],h=v;if(n)c=!1,r=kee;else if(s>=200){var g=t?null:Ree(e);if(g)return LE(g);c=!1,r=dN,h=new fN}else h=t?[]:v;e:for(;++o<s;){var _=e[o],w=t?t(_):_;if(_=n||_!==0?_:0,c&&w==w){for(var O=h.length;O--;)if(h[O]===w)continue e;t&&h.push(w),v.push(_)}else r(h,w,n)||(h!==v&&h.push(w),v.push(_))}return v},jN=function(e){return _s(e)&&Rf(e)},Cee=U_(function(e){return jee(BE(e,1,jN,!0))}),Dee=function(e,t){return gv(t,function(n){return e[n]})},t_,CN=function(e){return e==null?[]:Dee(e,Bd(e))};try{t_={clone:CQ,constant:CE,each:cN,filter:wN,has:EN,isArray:xi,isEmpty:uee,isFunction:nm,isUndefined:ON,keys:Bd,map:SN,reduce:AN,size:bee,transform:wee,union:Cee,values:CN}}catch{}t_||(t_=window._);var wn=t_,UE=Ur;function Ur(e){this._isDirected=!wn.has(e,"directed")||e.directed,this._isMultigraph=!!wn.has(e,"multigraph")&&e.multigraph,this._isCompound=!!wn.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=wn.constant(void 0),this._defaultEdgeLabelFn=wn.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function hM(e,t){e[t]?e[t]++:e[t]=1}function vM(e,t){--e[t]||delete e[t]}function Ey(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}return r+""+s+""+(wn.isUndefined(o)?"\0":o)}function Iee(e,t,n,o){var r=""+t,s=""+n;if(!e&&r>s){var c=r;r=s,s=c}var v={v:r,w:s};return o&&(v.name=o),v}function K1(e,t){return Ey(e,t.v,t.w,t.name)}Ur.prototype._nodeCount=0,Ur.prototype._edgeCount=0,Ur.prototype.isDirected=function(){return this._isDirected},Ur.prototype.isMultigraph=function(){return this._isMultigraph},Ur.prototype.isCompound=function(){return this._isCompound},Ur.prototype.setGraph=function(e){return this._label=e,this},Ur.prototype.graph=function(){return this._label},Ur.prototype.setDefaultNodeLabel=function(e){return wn.isFunction(e)||(e=wn.constant(e)),this._defaultNodeLabelFn=e,this},Ur.prototype.nodeCount=function(){return this._nodeCount},Ur.prototype.nodes=function(){return wn.keys(this._nodes)},Ur.prototype.sources=function(){var e=this;return wn.filter(this.nodes(),function(t){return wn.isEmpty(e._in[t])})},Ur.prototype.sinks=function(){var e=this;return wn.filter(this.nodes(),function(t){return wn.isEmpty(e._out[t])})},Ur.prototype.setNodes=function(e,t){var n=arguments,o=this;return wn.each(e,function(r){n.length>1?o.setNode(r,t):o.setNode(r)}),this},Ur.prototype.setNode=function(e,t){return wn.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},Ur.prototype.node=function(e){return this._nodes[e]},Ur.prototype.hasNode=function(e){return wn.has(this._nodes,e)},Ur.prototype.removeNode=function(e){var t=this;if(wn.has(this._nodes,e)){var n=function(o){t.removeEdge(t._edgeObjs[o])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],wn.each(this.children(e),function(o){t.setParent(o)}),delete this._children[e]),wn.each(wn.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],wn.each(wn.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},Ur.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(wn.isUndefined(t))t="\0";else{for(var n=t+="";!wn.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},Ur.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},Ur.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if(t!=="\0")return t}},Ur.prototype.children=function(e){if(wn.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return wn.keys(t)}else{if(e==="\0")return this.nodes();if(this.hasNode(e))return[]}},Ur.prototype.predecessors=function(e){var t=this._preds[e];if(t)return wn.keys(t)},Ur.prototype.successors=function(e){var t=this._sucs[e];if(t)return wn.keys(t)},Ur.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return wn.union(t,this.successors(e))},Ur.prototype.isLeaf=function(e){return(this.isDirected()?this.successors(e):this.neighbors(e)).length===0},Ur.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;wn.each(this._nodes,function(s,c){e(c)&&t.setNode(c,s)}),wn.each(this._edgeObjs,function(s){t.hasNode(s.v)&&t.hasNode(s.w)&&t.setEdge(s,n.edge(s))});var o={};function r(s){var c=n.parent(s);return c===void 0||t.hasNode(c)?(o[s]=c,c):c in o?o[c]:r(c)}return this._isCompound&&wn.each(t.nodes(),function(s){t.setParent(s,r(s))}),t},Ur.prototype.setDefaultEdgeLabel=function(e){return wn.isFunction(e)||(e=wn.constant(e)),this._defaultEdgeLabelFn=e,this},Ur.prototype.edgeCount=function(){return this._edgeCount},Ur.prototype.edges=function(){return wn.values(this._edgeObjs)},Ur.prototype.setPath=function(e,t){var n=this,o=arguments;return wn.reduce(e,function(r,s){return o.length>1?n.setEdge(r,s,t):n.setEdge(r,s),s}),this},Ur.prototype.setEdge=function(){var e,t,n,o,r=!1,s=arguments[0];typeof s=="object"&&s!==null&&"v"in s?(e=s.v,t=s.w,n=s.name,arguments.length===2&&(o=arguments[1],r=!0)):(e=s,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],r=!0)),e=""+e,t=""+t,wn.isUndefined(n)||(n=""+n);var c=Ey(this._isDirected,e,t,n);if(wn.has(this._edgeLabels,c))return r&&(this._edgeLabels[c]=o),this;if(!wn.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[c]=r?o:this._defaultEdgeLabelFn(e,t,n);var v=Iee(this._isDirected,e,t,n);return e=v.v,t=v.w,Object.freeze(v),this._edgeObjs[c]=v,hM(this._preds[t],e),hM(this._sucs[e],t),this._in[t][c]=v,this._out[e][c]=v,this._edgeCount++,this},Ur.prototype.edge=function(e,t,n){var o=arguments.length===1?K1(this._isDirected,arguments[0]):Ey(this._isDirected,e,t,n);return this._edgeLabels[o]},Ur.prototype.hasEdge=function(e,t,n){var o=arguments.length===1?K1(this._isDirected,arguments[0]):Ey(this._isDirected,e,t,n);return wn.has(this._edgeLabels,o)},Ur.prototype.removeEdge=function(e,t,n){var o=arguments.length===1?K1(this._isDirected,arguments[0]):Ey(this._isDirected,e,t,n),r=this._edgeObjs[o];return r&&(e=r.v,t=r.w,delete this._edgeLabels[o],delete this._edgeObjs[o],vM(this._preds[t],e),vM(this._sucs[e],t),delete this._in[t][o],delete this._out[e][o],this._edgeCount--),this},Ur.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=wn.values(n);return t?wn.filter(o,function(r){return r.v===t}):o}},Ur.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=wn.values(n);return t?wn.filter(o,function(r){return r.w===t}):o}},Ur.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var yM={Graph:UE,version:"2.1.8"},Lee={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:Fee(e),edges:$ee(e)};return wn.isUndefined(e.graph())||(t.value=wn.clone(e.graph())),t},read:function(e){var t=new UE(e.options).setGraph(e.value);return wn.each(e.nodes,function(n){t.setNode(n.v,n.value),n.parent&&t.setParent(n.v,n.parent)}),wn.each(e.edges,function(n){t.setEdge({v:n.v,w:n.w,name:n.name},n.value)}),t}};function Fee(e){return wn.map(e.nodes(),function(t){var n=e.node(t),o=e.parent(t),r={v:t};return wn.isUndefined(n)||(r.value=n),wn.isUndefined(o)||(r.parent=o),r})}function $ee(e){return wn.map(e.edges(),function(t){var n=e.edge(t),o={v:t.v,w:t.w};return wn.isUndefined(t.name)||(o.name=t.name),wn.isUndefined(n)||(o.value=n),o})}var Bee=function(e){var t,n={},o=[];function r(s){wn.has(n,s)||(n[s]=!0,t.push(s),wn.each(e.successors(s),r),wn.each(e.predecessors(s),r))}return wn.each(e.nodes(),function(s){t=[],r(s),t.length&&o.push(t)}),o},DN=ju;function ju(){this._arr=[],this._keyIndices={}}ju.prototype.size=function(){return this._arr.length},ju.prototype.keys=function(){return this._arr.map(function(e){return e.key})},ju.prototype.has=function(e){return wn.has(this._keyIndices,e)},ju.prototype.priority=function(e){var t=this._keyIndices[e];if(t!==void 0)return this._arr[t].priority},ju.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},ju.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!wn.has(n,e)){var o=this._arr,r=o.length;return n[e]=r,o.push({key:e,priority:t}),this._decrease(r),!0}return!1},ju.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},ju.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},ju.prototype._heapify=function(e){var t=this._arr,n=2*e,o=n+1,r=e;n<t.length&&(r=t[n].priority<t[r].priority?n:r,o<t.length&&(r=t[o].priority<t[r].priority?o:r),r!==e&&(this._swap(e,r),this._heapify(r)))},ju.prototype._decrease=function(e){for(var t,n=this._arr,o=n[e].priority;e!==0&&!(n[t=e>>1].priority<o);)this._swap(e,t),e=t},ju.prototype._swap=function(e,t){var n=this._arr,o=this._keyIndices,r=n[e],s=n[t];n[e]=s,n[t]=r,o[s.key]=e,o[r.key]=t};var IN=function(e,t,n,o){return function(r,s,c,v){var h,g,_={},w=new DN,O=function(S){var P=S.v!==h?S.v:S.w,A=_[P],R=c(S),D=g.distance+R;if(R<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+S+" Weight: "+R);D<A.distance&&(A.distance=D,A.predecessor=h,w.decrease(P,D))};for(r.nodes().forEach(function(S){var P=S===s?0:Number.POSITIVE_INFINITY;_[S]={distance:P},w.add(S,P)});w.size()>0&&(h=w.removeMin(),(g=_[h]).distance!==Number.POSITIVE_INFINITY);)v(h).forEach(O);return _}(e,String(t),n||Uee,o||function(r){return e.outEdges(r)})},Uee=wn.constant(1),Gee=function(e,t,n){return wn.transform(e.nodes(),function(o,r){o[r]=IN(e,r,t,n)},{})},LN=function(e){var t=0,n=[],o={},r=[];function s(c){var v=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach(function(_){wn.has(o,_)?o[_].onStack&&(v.lowlink=Math.min(v.lowlink,o[_].index)):(s(_),v.lowlink=Math.min(v.lowlink,o[_].lowlink))}),v.lowlink===v.index){var h,g=[];do h=n.pop(),o[h].onStack=!1,g.push(h);while(c!==h);r.push(g)}}return e.nodes().forEach(function(c){wn.has(o,c)||s(c)}),r},Vee=function(e){return wn.filter(LN(e),function(t){return t.length>1||t.length===1&&e.hasEdge(t[0],t[0])})},Wee=function(e,t,n){return function(o,r,s){var c={},v=o.nodes();return v.forEach(function(h){c[h]={},c[h][h]={distance:0},v.forEach(function(g){h!==g&&(c[h][g]={distance:Number.POSITIVE_INFINITY})}),s(h).forEach(function(g){var _=g.v===h?g.w:g.v,w=r(g);c[h][_]={distance:w,predecessor:h}})}),v.forEach(function(h){var g=c[h];v.forEach(function(_){var w=c[_];v.forEach(function(O){var S=w[h],P=g[O],A=w[O],R=S.distance+P.distance;R<A.distance&&(A.distance=R,A.predecessor=P.predecessor)})})}),c}(e,t||zee,n||function(o){return e.outEdges(o)})},zee=wn.constant(1),Z1=FN;function FN(e){var t={},n={},o=[];if(wn.each(e.sinks(),function r(s){if(wn.has(n,s))throw new n_;wn.has(t,s)||(n[s]=!0,t[s]=!0,wn.each(e.predecessors(s),r),delete n[s],o.push(s))}),wn.size(t)!==e.nodeCount())throw new n_;return o}function n_(){}FN.CycleException=n_,n_.prototype=new Error;var mM=function(e,t,n){wn.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),r=[],s={};return wn.each(t,function(c){if(!e.hasNode(c))throw new Error("Graph does not have node: "+c);$N(e,c,n==="post",s,o,r)}),r};function $N(e,t,n,o,r,s){wn.has(o,t)||(o[t]=!0,n||s.push(t),wn.each(r(t),function(c){$N(e,c,n,o,r,s)}),n&&s.push(t))}var r_,Hee={Graph:yM.Graph,json:Lee,alg:{components:Bee,dijkstra:IN,dijkstraAll:Gee,findCycles:Vee,floydWarshall:Wee,isAcyclic:function(e){try{Z1(e)}catch(t){if(t instanceof Z1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return mM(e,t,"post")},preorder:function(e,t){return mM(e,t,"pre")},prim:function(e,t){var n,o=new UE,r={},s=new DN;function c(h){var g=h.v===n?h.w:h.v,_=s.priority(g);if(_!==void 0){var w=t(h);w<_&&(r[g]=n,s.decrease(g,w))}}if(e.nodeCount()===0)return o;wn.each(e.nodes(),function(h){s.add(h,Number.POSITIVE_INFINITY),o.setNode(h)}),s.decrease(e.nodes()[0],0);for(var v=!1;s.size()>0;){if(n=s.removeMin(),wn.has(r,n))o.setEdge(n,r[n]);else{if(v)throw new Error("Input graph is not connected: "+e);v=!0}e.nodeEdges(n).forEach(c)}return o},tarjan:LN,topsort:Z1},version:yM.version};try{r_=Hee}catch{}r_||(r_=window.graphlib);var yc=r_,Xee=function(e){return lN(e,5)},Uy=function(e,t,n){if(!kl(n))return!1;var o=typeof t;return!!(o=="number"?Rf(n)&&C_(t,n.length):o=="string"&&t in n)&&Gv(n[t],e)},BN=Object.prototype,Yee=BN.hasOwnProperty,qee=U_(function(e,t){e=Object(e);var n=-1,o=t.length,r=o>2?t[2]:void 0;for(r&&Uy(t[0],t[1],r)&&(o=1);++n<o;)for(var s=t[n],c=eh(s),v=-1,h=c.length;++v<h;){var g=c[v],_=e[g];(_===void 0||Gv(_,BN[g])&&!Yee.call(e,g))&&(e[g]=s[g])}return e}),Kee=function(e){return function(t,n,o){var r=Object(t);if(!Rf(t)){var s=jf(n);t=Bd(t),n=function(v){return s(r[v],v,r)}}var c=e(t,n,o);return c>-1?r[s?t[c]:c]:void 0}},Zee=/^\s+|\s+$/g,Jee=/^[-+]0x[0-9a-f]+$/i,Qee=/^0b[01]+$/i,ete=/^0o[0-7]+$/i,tte=parseInt,nte=function(e){if(typeof e=="number")return e;if(Wp(e))return NaN;if(kl(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=kl(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Zee,"");var n=Qee.test(e);return n||ete.test(e)?tte(e.slice(2),n?2:8):Jee.test(e)?NaN:+e},Tg=function(e){return e?(e=nte(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:e===0?e:0},rte=function(e){var t=Tg(e),n=t%1;return t==t?n?t-n:t:0},ote=Math.max,ite=Kee(function(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var r=n==null?0:rte(n);return r<0&&(r=ote(o+r,0)),RN(e,jf(t),r)}),UN=function(e){return e!=null&&e.length?BE(e,1):[]},ate=function(e,t){return e==null?e:DE(e,uN(t),eh)},lte=function(e){var t=e==null?0:e.length;return t?e[t-1]:void 0},ute=function(e,t){var n={};return t=jf(t),IE(e,function(o,r,s){R_(n,r,t(o,r,s))}),n},GE=function(e,t,n){for(var o=-1,r=e.length;++o<r;){var s=e[o],c=t(s);if(c!=null&&(v===void 0?c==c&&!Wp(c):n(c,v)))var v=c,h=s}return h},ste=function(e,t){return e>t},cte=function(e){return e&&e.length?GE(e,th,ste):void 0},Dw=function(e,t,n){(n!==void 0&&!Gv(e[t],n)||n===void 0&&!(t in e))&&R_(e,t,n)},fte=Function.prototype,dte=Object.prototype,GN=fte.toString,pte=dte.hasOwnProperty,hte=GN.call(Object),vte=function(e){if(!_s(e)||$d(e)!="[object Object]")return!1;var t=L_(e);if(t===null)return!0;var n=pte.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&GN.call(n)==hte},Iw=function(e,t){if((t!=="constructor"||typeof e[t]!="function")&&t!="__proto__")return e[t]},yte=function(e){return rm(e,eh(e))},mte=function(e,t,n,o,r,s,c){var v=Iw(e,n),h=Iw(t,n),g=c.get(h);if(g)Dw(e,n,g);else{var _=s?s(v,h,n+"",e,t,c):void 0,w=_===void 0;if(w){var O=xi(h),S=!O&&Gp(h),P=!O&&!S&&om(h);_=h,O||S||P?xi(v)?_=v:jN(v)?_=Qk(v):S?(w=!1,_=Jk(h,!0)):P?(w=!1,_=oN(h,!0)):_=[]:vte(h)||Av(h)?(_=v,Av(v)?_=yte(v):kl(v)&&!nm(v)||(_=aN(h))):w=!1}w&&(c.set(h,_),r(_,h,o,s,c),c.delete(h)),Dw(e,n,_)}},gte=function e(t,n,o,r,s){t!==n&&DE(n,function(c,v){if(s||(s=new yv),kl(c))mte(t,n,v,o,e,r,s);else{var h=r?r(Iw(t,v),c,v+"",t,n,s):void 0;h===void 0&&(h=c),Dw(t,v,h)}},eh)},_te=function(e){return U_(function(t,n){var o=-1,r=n.length,s=r>1?n[r-1]:void 0,c=r>2?n[2]:void 0;for(s=e.length>3&&typeof s=="function"?(r--,s):void 0,c&&Uy(n[0],n[1],c)&&(s=r<3?void 0:s,r=1),t=Object(t);++o<r;){var v=n[o];v&&e(t,v,o,s)}return t})}(function(e,t,n){gte(e,t,n)}),VN=function(e,t){return e<t},bte=function(e){return e&&e.length?GE(e,th,VN):void 0},wte=function(e,t){return e&&e.length?GE(e,jf(t),VN):void 0},Ete=function(){return ws.Date.now()},Ote=function(e,t,n,o){if(!kl(e))return e;for(var r=-1,s=(t=$_(t,e)).length,c=s-1,v=e;v!=null&&++r<s;){var h=im(t[r]),g=n;if(h==="__proto__"||h==="constructor"||h==="prototype")return e;if(r!=c){var _=v[h];(g=o?o(_,h,v):void 0)===void 0&&(g=kl(_)?_:C_(t[r+1])?[]:{})}j_(v,h,g),v=v[h]}return e},xte=function(e,t,n){for(var o=-1,r=t.length,s={};++o<r;){var c=t[o],v=B_(e,c);n(v,c)&&Ote(s,$_(c,e),v)}return s},Ste=function(e,t){return xte(e,t,function(n,o){return _N(e,o)})},Ate=function(e){return NN(kN(e,void 0,UN),e+"")}(function(e,t){return e==null?{}:Ste(e,t)}),Tte=Math.ceil,Mte=Math.max,Pte=function(e,t,n,o){for(var r=-1,s=Mte(Tte((t-e)/(n||1)),0),c=Array(s);s--;)c[o?s:++r]=e,e+=n;return c},kte=function(e){return function(t,n,o){return o&&typeof o!="number"&&Uy(t,n,o)&&(n=o=void 0),t=Tg(t),n===void 0?(n=t,t=0):n=Tg(n),o=o===void 0?t<n?1:-1:Tg(o),Pte(t,n,o,e)}}(),Nte=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Rte=function(e,t){if(e!==t){var n=e!==void 0,o=e===null,r=e==e,s=Wp(e),c=t!==void 0,v=t===null,h=t==t,g=Wp(t);if(!v&&!g&&!s&&e>t||s&&c&&h&&!v&&!g||o&&c&&h||!n&&h||!r)return 1;if(!o&&!s&&!g&&e<t||g&&n&&r&&!o&&!s||v&&n&&r||!c&&r||!h)return-1}return 0},jte=function(e,t,n){for(var o=-1,r=e.criteria,s=t.criteria,c=r.length,v=n.length;++o<c;){var h=Rte(r[o],s[o]);if(h)return o>=v?h:h*(n[o]=="desc"?-1:1)}return e.index-t.index},Cte=function(e,t,n){t=t.length?gv(t,function(s){return xi(s)?function(c){return B_(c,s.length===1?s[0]:s)}:s}):[th];var o=-1;t=gv(t,D_(jf));var r=xN(e,function(s,c,v){return{criteria:gv(t,function(h){return h(s)}),index:++o,value:s}});return Nte(r,function(s,c){return jte(s,c,n)})},Dte=U_(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Uy(e,t[0],t[1])?t=[]:n>2&&Uy(t[0],t[1],t[2])&&(t=[t[0]]),Cte(e,BE(t,1),[])}),Ite=0,Lte=function(e){var t=++Ite;return mN(e)+t},Fte=function(e,t,n){for(var o=-1,r=e.length,s=t.length,c={};++o<r;){var v=o<s?t[o]:void 0;n(c,e[o],v)}return c},o_,$te=function(e,t){return Fte(e||[],t||[],j_)};try{o_={cloneDeep:Xee,constant:CE,defaults:qee,each:cN,filter:wN,find:ite,flatten:UN,forEach:sN,forIn:ate,has:EN,isUndefined:ON,last:lte,map:SN,mapValues:ute,max:cte,merge:_te,min:bte,minBy:wte,now:Ete,pick:Ate,range:kte,reduce:AN,sortBy:Dte,uniqueId:Lte,values:CN,zipObject:$te}}catch{}o_||(o_=window._);var Bte=o_;yc.Graph;Bte.constant(1);yc.Graph;yc.Graph;yc.alg.preorder;yc.alg.postorder;yc.Graph;yc.Graph;yc.Graph;yc.Graph;yc.Graph;function Gy(e){"@babel/helpers - typeof";return Gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gy(e)}function Ute(e,t){if(Gy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var o=n.call(e,t||"default");if(Gy(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gte(e){var t=Ute(e,"string");return Gy(t)=="symbol"?t:t+""}function an(e,t,n){return(t=Gte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vte=typeof gy=="object"&&gy&&gy.Object===Object&&gy,WN=Vte,Wte=WN,zte=typeof self=="object"&&self&&self.Object===Object&&self,Hte=Wte||zte||Function("return this")(),Xte=Hte,Yte=Xte,qte=Yte.Symbol,zN=qte,gM=zN;gM&&gM.toStringTag;var _M=zN;_M&&_M.toStringTag;var i_={exports:{}};i_.exports;(function(e,t){var n=WN,o=t&&!t.nodeType&&t,r=o&&!0&&e&&!e.nodeType&&e,s=r&&r.exports===o,c=s&&n.process,v=function(){try{var h=r&&r.require&&r.require("util").types;return h||c&&c.binding&&c.binding("util")}catch{}}();e.exports=v})(i_,i_.exports);var Kte=i_.exports,bM=Kte;bM&&bM.isTypedArray;var HN={exports:{}},XN={exports:{}};(function(e){function t(n,o){this.v=n,this.k=o}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(XN);var YN=XN.exports,qN={exports:{}},KN={exports:{}};(function(e){function t(n,o,r,s){var c=Object.defineProperty;try{c({},"",{})}catch{c=0}e.exports=t=function(h,g,_,w){function O(S,P){t(h,S,function(A){return this._invoke(S,P,A)})}g?c?c(h,g,{value:_,enumerable:!w,configurable:!w,writable:!w}):h[g]=_:(O("next",0),O("throw",1),O("return",2))},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,o,r,s)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(KN);var ZN=KN.exports;(function(e){var t=ZN;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var o,r,s=typeof Symbol=="function"?Symbol:{},c=s.iterator||"@@iterator",v=s.toStringTag||"@@toStringTag";function h(R,D,N,$){var Y=D&&D.prototype instanceof _?D:_,K=Object.create(Y.prototype);return t(K,"_invoke",function(X,te,W){var C,G,q,z=0,Z=W||[],me=!1,ge={p:0,n:0,v:o,a:Re,f:Re.bind(o,4),d:function(ve,_e){return C=ve,G=0,q=o,ge.n=_e,g}};function Re(Be,ve){for(G=Be,q=ve,r=0;!me&&z&&!_e&&r<Z.length;r++){var _e,Ce=Z[r],tt=ge.p,gt=Ce[2];Be>3?(_e=gt===ve)&&(q=Ce[(G=Ce[4])?5:(G=3,3)],Ce[4]=Ce[5]=o):Ce[0]<=tt&&((_e=Be<2&&tt<Ce[1])?(G=0,ge.v=ve,ge.n=Ce[1]):tt<gt&&(_e=Be<3||Ce[0]>ve||ve>gt)&&(Ce[4]=Be,Ce[5]=ve,ge.n=gt,G=0))}if(_e||Be>1)return g;throw me=!0,ve}return function(Be,ve,_e){if(z>1)throw TypeError("Generator is already running");for(me&&ve===1&&Re(ve,_e),G=ve,q=_e;(r=G<2?o:q)||!me;){C||(G?G<3?(G>1&&(ge.n=-1),Re(G,q)):ge.n=q:ge.v=q);try{if(z=2,C){if(G||(Be="next"),r=C[Be]){if(!(r=r.call(C,q)))throw TypeError("iterator result is not an object");if(!r.done)return r;q=r.value,G<2&&(G=0)}else G===1&&(r=C.return)&&r.call(C),G<2&&(q=TypeError("The iterator does not provide a '"+Be+"' method"),G=1);C=o}else if((r=(me=ge.n<0)?q:X.call(te,ge))!==g)break}catch(Ce){C=o,G=1,q=Ce}finally{z=1}}return{value:r,done:me}}}(R,N,$),!0),K}var g={};function _(){}function w(){}function O(){}r=Object.getPrototypeOf;var S=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),P=O.prototype=_.prototype=Object.create(S);function A(R){return Object.setPrototypeOf?Object.setPrototypeOf(R,O):(R.__proto__=O,t(R,v,"GeneratorFunction")),R.prototype=Object.create(P),R}return w.prototype=O,t(P,"constructor",O),t(O,"constructor",w),w.displayName="GeneratorFunction",t(O,v,"GeneratorFunction"),t(P),t(P,v,"Generator"),t(P,c,function(){return this}),t(P,"toString",function(){return"[object Generator]"}),(e.exports=n=function(){return{w:h,m:A}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(qN);var JN=qN.exports,QN={exports:{}},eR={exports:{}},tR={exports:{}};(function(e){var t=YN,n=ZN;function o(r,s){function c(h,g,_,w){try{var O=r[h](g),S=O.value;return S instanceof t?s.resolve(S.v).then(function(P){c("next",P,_,w)},function(P){c("throw",P,_,w)}):s.resolve(S).then(function(P){O.value=P,_(O)},function(P){return c("throw",P,_,w)})}catch(P){w(P)}}var v;this.next||(n(o.prototype),n(o.prototype,typeof Symbol=="function"&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),n(this,"_invoke",function(h,g,_){function w(){return new s(function(O,S){c(h,_,O,S)})}return v=v?v.then(w,w):w()},!0)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(tR);var nR=tR.exports;(function(e){var t=JN,n=nR;function o(r,s,c,v,h){return new n(t().w(r,s,c,v),h||Promise)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports})(eR);var rR=eR.exports;(function(e){var t=rR;function n(o,r,s,c,v){var h=t(o,r,s,c,v);return h.next().then(function(g){return g.done?g.value:h.next()})}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(QN);var Zte=QN.exports,oR={exports:{}};(function(e){function t(n){var o=Object(n),r=[];for(var s in o)r.unshift(s);return function c(){for(;r.length;)if((s=r.pop())in o)return c.value=s,c.done=!1,c;return c.done=!0,c}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(oR);var Jte=oR.exports,iR={exports:{}},aR={exports:{}};(function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(aR);var Qte=aR.exports;(function(e){var t=Qte.default;function n(o){if(o!=null){var r=o[typeof Symbol=="function"&&Symbol.iterator||"@@iterator"],s=0;if(r)return r.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length))return{next:function(){return o&&s>=o.length&&(o=void 0),{value:o&&o[s++],done:!o}}}}throw new TypeError(t(o)+" is not iterable")}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(iR);var ene=iR.exports;(function(e){var t=YN,n=JN,o=Zte,r=rR,s=nR,c=Jte,v=ene;function h(){var g=n(),_=g.m(h),w=(Object.getPrototypeOf?Object.getPrototypeOf(_):_.__proto__).constructor;function O(A){var R=typeof A=="function"&&A.constructor;return!!R&&(R===w||(R.displayName||R.name)==="GeneratorFunction")}var S={throw:1,return:2,break:3,continue:3};function P(A){var R,D;return function(N){R||(R={stop:function(){return D(N.a,2)},catch:function(){return N.v},abrupt:function(Y,K){return D(N.a,S[Y],K)},delegateYield:function(Y,K,X){return R.resultName=K,D(N.d,v(Y),X)},finish:function(Y){return D(N.f,Y)}},D=function(Y,K,X){N.p=R.prev,N.n=R.next;try{return Y(K,X)}finally{R.next=N.n}}),R.resultName&&(R[R.resultName]=N.v,R.resultName=void 0),R.sent=N.v,R.next=N.n;try{return A.call(this,R)}finally{N.p=R.prev,N.n=R.next}}}return(e.exports=h=function(){return{wrap:function(D,N,$,Y){return g.w(P(D),N,$,Y&&Y.reverse())},isGeneratorFunction:O,mark:g.m,awrap:function(D,N){return new t(D,N)},AsyncIterator:s,async:function(D,N,$,Y,K){return(O(N)?r:o)(P(D),N,$,Y,K)},keys:c,values:v}},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=h,e.exports.__esModule=!0,e.exports.default=e.exports})(HN);var tne=HN.exports,J1=tne();try{regeneratorRuntime=J1}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=J1:Function("r","regeneratorRuntime = r")(J1)}var on;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",e[e.COPY_SRC=1]="COPY_SRC",e[e.COPY_DST=2]="COPY_DST",e[e.SAMPLED=4]="SAMPLED",e[e.STORAGE=8]="STORAGE",e[e.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(on||(on={}));var wM;(function(e){e.Void="Void",e.Boolean="Boolean",e.Float="Float",e.Uint32="Uint32",e.Int32="Int32",e.Vector="Vector",e.Vector2Float="vec2<f32>",e.Vector3Float="vec3<f32>",e.Vector4Float="vec4<f32>",e.Vector2Boolean="vec2<bool>",e.Vector3Boolean="vec3<bool>",e.Vector4Boolean="vec4<bool>",e.Vector2Uint="vec2<u32>",e.Vector3Uint="vec3<u32>",e.Vector4Uint="vec4<u32>",e.Vector2Int="vec2<i32>",e.Vector3Int="vec3<i32>",e.Vector4Int="vec4<i32>",e.Matrix="Matrix",e.Matrix3x3Float="mat3x3<f32>",e.Matrix4x4Float="mat4x4<i32>",e.Struct="Struct",e.FloatArray="Float[]",e.Vector4FloatArray="vec4<f32>[]"})(wM||(wM={}));var EM;(function(e){e.Program="Program",e.Identifier="Identifier",e.VariableDeclaration="VariableDeclaration",e.BlockStatement="BlockStatement",e.ReturnStatement="ReturnStatement",e.FunctionDeclaration="FunctionDeclaration",e.VariableDeclarator="VariableDeclarator",e.AssignmentExpression="AssignmentExpression",e.LogicalExpression="LogicalExpression",e.BinaryExpression="BinaryExpression",e.ArrayExpression="ArrayExpression",e.UnaryExpression="UnaryExpression",e.UpdateExpression="UpdateExpression",e.FunctionExpression="FunctionExpression",e.MemberExpression="MemberExpression",e.ConditionalExpression="ConditionalExpression",e.ExpressionStatement="ExpressionStatement",e.CallExpression="CallExpression",e.NumThreadStatement="NumThreadStatement",e.StorageStatement="StorageStatement",e.DoWhileStatement="DoWhileStatement",e.WhileStatement="WhileStatement",e.ForStatement="ForStatement",e.BreakStatement="BreakStatement",e.ContinueStatement="ContinueStatement",e.IfStatement="IfStatement",e.ImportedFunctionStatement="ImportedFunctionStatement"})(EM||(EM={}));var OM;(function(e){e.Input="Input",e.Output="Output",e.Uniform="Uniform",e.Workgroup="Workgroup",e.UniformConstant="UniformConstant",e.Image="Image",e.StorageBuffer="StorageBuffer",e.Private="Private",e.Function="Function"})(OM||(OM={}));var xM;(function(e){e.GLSL100="GLSL100",e.GLSL450="GLSL450",e.WGSL="WGSL"})(xM||(xM={}));var nne={exports:{}};(function(e,t){(function(n,o){e.exports=o()})(gy,function(){var n=function(L){return L instanceof Uint8Array||L instanceof Uint16Array||L instanceof Uint32Array||L instanceof Int8Array||L instanceof Int16Array||L instanceof Int32Array||L instanceof Float32Array||L instanceof Float64Array||L instanceof Uint8ClampedArray},o=function(L,ie){for(var be=Object.keys(ie),Je=0;Je<be.length;++Je)L[be[Je]]=ie[be[Je]];return L},r=`
`;function s(L){return typeof atob<"u"?atob(L):"base64:"+L}function c(L){var ie=new Error("(regl) "+L);throw console.error(ie),ie}function v(L,ie){L||c(ie)}function h(L){return L?": "+L:""}function g(L,ie,be){L in ie||c("unknown parameter ("+L+")"+h(be)+". possible values: "+Object.keys(ie).join())}function _(L,ie){n(L)||c("invalid parameter type"+h(ie)+". must be a typed array")}function w(L,ie){switch(ie){case"number":return typeof L=="number";case"object":return typeof L=="object";case"string":return typeof L=="string";case"boolean":return typeof L=="boolean";case"function":return typeof L=="function";case"undefined":return typeof L>"u";case"symbol":return typeof L=="symbol"}}function O(L,ie,be){w(L,ie)||c("invalid parameter type"+h(be)+". expected "+ie+", got "+typeof L)}function S(L,ie){L>=0&&(L|0)===L||c("invalid parameter type, ("+L+")"+h(ie)+". must be a nonnegative integer")}function P(L,ie,be){ie.indexOf(L)<0&&c("invalid value"+h(be)+". must be one of: "+ie)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function R(L){Object.keys(L).forEach(function(ie){A.indexOf(ie)<0&&c('invalid regl constructor argument "'+ie+'". must be one of '+A)})}function D(L,ie){for(L=L+"";L.length<ie;)L=" "+L;return L}function N(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function $(L,ie){this.number=L,this.line=ie,this.errors=[]}function Y(L,ie,be){this.file=L,this.line=ie,this.message=be}function K(){var L=new Error,ie=(L.stack||L).toString(),be=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(ie);if(be)return be[1];var Je=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(ie);return Je?Je[1]:"unknown"}function X(){var L=new Error,ie=(L.stack||L).toString(),be=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(ie);if(be)return be[1];var Je=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(ie);return Je?Je[1]:"unknown"}function te(L,ie){var be=L.split(`
`),Je=1,ct=0,qe={unknown:new N,0:new N};qe.unknown.name=qe[0].name=ie||K(),qe.unknown.lines.push(new $(0,""));for(var at=0;at<be.length;++at){var Pt=be[at],Dt=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Pt);if(Dt)switch(Dt[1]){case"line":var Rt=/(\d+)(\s+\d+)?/.exec(Dt[2]);Rt&&(Je=Rt[1]|0,Rt[2]&&(ct=Rt[2]|0,ct in qe||(qe[ct]=new N)));break;case"define":var lt=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Dt[2]);lt&&(qe[ct].name=lt[1]?s(lt[2]):lt[2]);break}qe[ct].lines.push(new $(Je++,Pt))}return Object.keys(qe).forEach(function(Vt){var Ut=qe[Vt];Ut.lines.forEach(function(kt){Ut.index[kt.number]=kt})}),qe}function W(L){var ie=[];return L.split(`
`).forEach(function(be){if(!(be.length<5)){var Je=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(be);Je?ie.push(new Y(Je[1]|0,Je[2]|0,Je[3].trim())):be.length>0&&ie.push(new Y("unknown",0,be))}}),ie}function C(L,ie){ie.forEach(function(be){var Je=L[be.file];if(Je){var ct=Je.index[be.line];if(ct){ct.errors.push(be),Je.hasErrors=!0;return}}L.unknown.hasErrors=!0,L.unknown.lines[0].errors.push(be)})}function G(L,ie,be,Je,ct){if(!L.getShaderParameter(ie,L.COMPILE_STATUS)){var qe=L.getShaderInfoLog(ie),at=Je===L.FRAGMENT_SHADER?"fragment":"vertex";Be(be,"string",at+" shader source must be a string",ct);var Pt=te(be,ct),Dt=W(qe);C(Pt,Dt),Object.keys(Pt).forEach(function(Rt){var lt=Pt[Rt];if(!lt.hasErrors)return;var Vt=[""],Ut=[""];function kt(mt,Ve){Vt.push(mt),Ut.push(Ve||"")}kt("file number "+Rt+": "+lt.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),lt.lines.forEach(function(mt){if(mt.errors.length>0){kt(D(mt.number,4)+"|  ","background-color:yellow; font-weight:bold"),kt(mt.line+r,"color:red; background-color:yellow; font-weight:bold");var Ve=0;mt.errors.forEach(function(ot){var Lt=ot.message,qt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Lt);if(qt){var Ot=qt[1];switch(Lt=qt[2],Ot){case"assign":Ot="=";break}Ve=Math.max(mt.line.indexOf(Ot,Ve),0)}else Ve=0;kt(D("| ",6)),kt(D("^^^",Ve+3)+r,"font-weight:bold"),kt(D("| ",6)),kt(Lt+r,"font-weight:bold")}),kt(D("| ",6)+r)}else kt(D(mt.number,4)+"|  "),kt(mt.line+r,"color:red")}),typeof document<"u"&&!window.chrome?(Ut[0]=Vt.join("%c"),console.log.apply(console,Ut)):console.log(Vt.join(""))}),v.raise("Error compiling "+at+" shader, "+Pt[0].name)}}function q(L,ie,be,Je,ct){if(!L.getProgramParameter(ie,L.LINK_STATUS)){var qe=L.getProgramInfoLog(ie),at=te(be,ct),Pt=te(Je,ct),Dt='Error linking program with vertex shader, "'+Pt[0].name+'", and fragment shader "'+at[0].name+'"';typeof document<"u"?console.log("%c"+Dt+r+"%c"+qe,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Dt+r+qe),v.raise(Dt)}}function z(L){L._commandRef=K()}function Z(L,ie,be,Je){z(L);function ct(Dt){return Dt?Je.id(Dt):0}L._fragId=ct(L.static.frag),L._vertId=ct(L.static.vert);function qe(Dt,Rt){Object.keys(Rt).forEach(function(lt){Dt[Je.id(lt)]=!0})}var at=L._uniformSet={};qe(at,ie.static),qe(at,ie.dynamic);var Pt=L._attributeSet={};qe(Pt,be.static),qe(Pt,be.dynamic),L._hasCount="count"in L.static||"count"in L.dynamic||"elements"in L.static||"elements"in L.dynamic}function me(L,ie){var be=X();c(L+" in command "+(ie||K())+(be==="unknown"?"":" called from "+be))}function ge(L,ie,be){L||me(ie,be||K())}function Re(L,ie,be,Je){L in ie||me("unknown parameter ("+L+")"+h(be)+". possible values: "+Object.keys(ie).join(),Je||K())}function Be(L,ie,be,Je){w(L,ie)||me("invalid parameter type"+h(be)+". expected "+ie+", got "+typeof L,Je||K())}function ve(L){L()}function _e(L,ie,be){L.texture?P(L.texture._texture.internalformat,ie,"unsupported texture format for attachment"):P(L.renderbuffer._renderbuffer.format,be,"unsupported renderbuffer format for attachment")}var Ce=33071,tt=9728,gt=9984,st=9985,At=9986,jt=9987,yt=5120,Kt=5121,je=5122,we=5123,Me=5124,dt=5125,zt=5126,Et=32819,rn=32820,yn=33635,Tn=34042,pn=36193,ut={};ut[yt]=ut[Kt]=1,ut[je]=ut[we]=ut[pn]=ut[yn]=ut[Et]=ut[rn]=2,ut[Me]=ut[dt]=ut[zt]=ut[Tn]=4;function xn(L,ie){return L===rn||L===Et||L===yn?2:L===Tn?4:ut[L]*ie}function Le(L){return!(L&L-1)&&!!L}function mn(L,ie,be){var Je,ct=ie.width,qe=ie.height,at=ie.channels;v(ct>0&&ct<=be.maxTextureSize&&qe>0&&qe<=be.maxTextureSize,"invalid texture shape"),(L.wrapS!==Ce||L.wrapT!==Ce)&&v(Le(ct)&&Le(qe),"incompatible wrap mode for texture, both width and height must be power of 2"),ie.mipmask===1?ct!==1&&qe!==1&&v(L.minFilter!==gt&&L.minFilter!==At&&L.minFilter!==st&&L.minFilter!==jt,"min filter requires mipmap"):(v(Le(ct)&&Le(qe),"texture must be a square power of 2 to support mipmapping"),v(ie.mipmask===(ct<<1)-1,"missing or incomplete mipmap data")),ie.type===zt&&(be.extensions.indexOf("oes_texture_float_linear")<0&&v(L.minFilter===tt&&L.magFilter===tt,"filter not supported, must enable oes_texture_float_linear"),v(!L.genMipmaps,"mipmap generation not supported with float textures"));var Pt=ie.images;for(Je=0;Je<16;++Je)if(Pt[Je]){var Dt=ct>>Je,Rt=qe>>Je;v(ie.mipmask&1<<Je,"missing mipmap data");var lt=Pt[Je];if(v(lt.width===Dt&&lt.height===Rt,"invalid shape for mip images"),v(lt.format===ie.format&&lt.internalformat===ie.internalformat&&lt.type===ie.type,"incompatible type for mip image"),!lt.compressed)if(lt.data){var Vt=Math.ceil(xn(lt.type,at)*Dt/lt.unpackAlignment)*lt.unpackAlignment;v(lt.data.byteLength===Vt*Rt,"invalid data for image, buffer size is inconsistent with image format")}else lt.element||lt.copy}else L.genMipmaps||v((ie.mipmask&1<<Je)===0,"extra mipmap data");ie.compressed&&v(!L.genMipmaps,"mipmap generation for compressed images not supported")}function qn(L,ie,be,Je){var ct=L.width,qe=L.height,at=L.channels;v(ct>0&&ct<=Je.maxTextureSize&&qe>0&&qe<=Je.maxTextureSize,"invalid texture shape"),v(ct===qe,"cube map must be square"),v(ie.wrapS===Ce&&ie.wrapT===Ce,"wrap mode not supported by cube map");for(var Pt=0;Pt<be.length;++Pt){var Dt=be[Pt];v(Dt.width===ct&&Dt.height===qe,"inconsistent cube map face shape"),ie.genMipmaps&&(v(!Dt.compressed,"can not generate mipmap for compressed textures"),v(Dt.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Rt=Dt.images,lt=0;lt<16;++lt){var Vt=Rt[lt];if(Vt){var Ut=ct>>lt,kt=qe>>lt;v(Dt.mipmask&1<<lt,"missing mipmap data"),v(Vt.width===Ut&&Vt.height===kt,"invalid shape for mip images"),v(Vt.format===L.format&&Vt.internalformat===L.internalformat&&Vt.type===L.type,"incompatible type for mip image"),Vt.compressed||(Vt.data?v(Vt.data.byteLength===Ut*kt*Math.max(xn(Vt.type,at),Vt.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Vt.element||Vt.copy)}}}}var re=o(v,{optional:ve,raise:c,commandRaise:me,command:ge,parameter:g,commandParameter:Re,constructor:R,type:O,commandType:Be,isTypedArray:_,nni:S,oneOf:P,shaderError:G,linkError:q,callSite:X,saveCommandRef:z,saveDrawInfo:Z,framebufferFormat:_e,guessCommand:K,texture2D:mn,textureCube:qn}),Kn=0,vr=0,Gr=5,eo=6;function Fn(L,ie){this.id=Kn++,this.type=L,this.data=ie}function ho(L){return L.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Oe(L){if(L.length===0)return[];var ie=L.charAt(0),be=L.charAt(L.length-1);if(L.length>1&&ie===be&&(ie==='"'||ie==="'"))return['"'+ho(L.substr(1,L.length-2))+'"'];var Je=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(L);if(Je)return Oe(L.substr(0,Je.index)).concat(Oe(Je[1])).concat(Oe(L.substr(Je.index+Je[0].length)));var ct=L.split(".");if(ct.length===1)return['"'+ho(L)+'"'];for(var qe=[],at=0;at<ct.length;++at)qe=qe.concat(Oe(ct[at]));return qe}function ze(L){return"["+Oe(L).join("][")+"]"}function Ne(L,ie){return new Fn(L,ze(ie+""))}function rt(L){return typeof L=="function"&&!L._reglType||L instanceof Fn}function en(L,ie){if(typeof L=="function")return new Fn(vr,L);if(typeof L=="number"||typeof L=="boolean")return new Fn(Gr,L);if(Array.isArray(L))return new Fn(eo,L.map((be,Je)=>en(be,ie+"["+Je+"]")));if(L instanceof Fn)return L;re(!1,"invalid option type in uniform "+ie)}var Yt={DynamicVariable:Fn,define:Ne,isDynamic:rt,unbox:en,accessor:ze},kn={next:typeof requestAnimationFrame=="function"?function(L){return requestAnimationFrame(L)}:function(L){return setTimeout(L,16)},cancel:typeof cancelAnimationFrame=="function"?function(L){return cancelAnimationFrame(L)}:clearTimeout},Er=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ni(){var L={"":0},ie=[""];return{id:function(be){var Je=L[be];return Je||(Je=L[be]=ie.length,ie.push(be),Je)},str:function(be){return ie[be]}}}function yi(L,ie,be){var Je=document.createElement("canvas");o(Je.style,{border:0,margin:0,padding:0,top:0,left:0}),L.appendChild(Je),L===document.body&&(Je.style.position="absolute",o(L.style,{margin:0,padding:0}));function ct(){var Pt=window.innerWidth,Dt=window.innerHeight;if(L!==document.body){var Rt=L.getBoundingClientRect();Pt=Rt.right-Rt.left,Dt=Rt.bottom-Rt.top}Je.width=be*Pt,Je.height=be*Dt,o(Je.style,{width:Pt+"px",height:Dt+"px"})}var qe;L!==document.body&&typeof ResizeObserver=="function"?(qe=new ResizeObserver(function(){setTimeout(ct)}),qe.observe(L)):window.addEventListener("resize",ct,!1);function at(){qe?qe.disconnect():window.removeEventListener("resize",ct),L.removeChild(Je)}return ct(),{canvas:Je,onDestroy:at}}function Go(L,ie){function be(Je){try{return L.getContext(Je,ie)}catch{return null}}return be("webgl")||be("experimental-webgl")||be("webgl-experimental")}function Xo(L){return typeof L.nodeName=="string"&&typeof L.appendChild=="function"&&typeof L.getBoundingClientRect=="function"}function Sn(L){return typeof L.drawArrays=="function"||typeof L.drawElements=="function"}function $n(L){return typeof L=="string"?L.split():(re(Array.isArray(L),"invalid extension array"),L)}function Hn(L){return typeof L=="string"?(re(typeof document<"u","not supported outside of DOM"),document.querySelector(L)):L}function ir(L){var ie=L||{},be,Je,ct,qe,at={},Pt=[],Dt=[],Rt=typeof window>"u"?1:window.devicePixelRatio,lt=!1,Vt=function(mt){mt&&re.raise(mt)},Ut=function(){};if(typeof ie=="string"?(re(typeof document<"u","selector queries only supported in DOM enviroments"),be=document.querySelector(ie),re(be,"invalid query string for element")):typeof ie=="object"?Xo(ie)?be=ie:Sn(ie)?(qe=ie,ct=qe.canvas):(re.constructor(ie),"gl"in ie?qe=ie.gl:"canvas"in ie?ct=Hn(ie.canvas):"container"in ie&&(Je=Hn(ie.container)),"attributes"in ie&&(at=ie.attributes,re.type(at,"object","invalid context attributes")),"extensions"in ie&&(Pt=$n(ie.extensions)),"optionalExtensions"in ie&&(Dt=$n(ie.optionalExtensions)),"onDone"in ie&&(re.type(ie.onDone,"function","invalid or missing onDone callback"),Vt=ie.onDone),"profile"in ie&&(lt=!!ie.profile),"pixelRatio"in ie&&(Rt=+ie.pixelRatio,re(Rt>0,"invalid pixel ratio"))):re.raise("invalid arguments to regl"),be&&(be.nodeName.toLowerCase()==="canvas"?ct=be:Je=be),!qe){if(!ct){re(typeof document<"u","must manually specify webgl context outside of DOM environments");var kt=yi(Je||document.body,Vt,Rt);if(!kt)return null;ct=kt.canvas,Ut=kt.onDestroy}at.premultipliedAlpha===void 0&&(at.premultipliedAlpha=!0),qe=Go(ct,at)}return qe?{gl:qe,canvas:ct,container:Je,extensions:Pt,optionalExtensions:Dt,pixelRatio:Rt,profile:lt,onDone:Vt,onDestroy:Ut}:(Ut(),Vt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Kr(L,ie){var be={};function Je(at){re.type(at,"string","extension name must be string");var Pt=at.toLowerCase(),Dt;try{Dt=be[Pt]=L.getExtension(Pt)}catch{}return!!Dt}for(var ct=0;ct<ie.extensions.length;++ct){var qe=ie.extensions[ct];if(!Je(qe))return ie.onDestroy(),ie.onDone('"'+qe+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return ie.optionalExtensions.forEach(Je),{extensions:be,restore:function(){Object.keys(be).forEach(function(at){if(be[at]&&!Je(at))throw new Error("(regl): error restoring extension "+at)})}}}function Rr(L,ie){for(var be=Array(L),Je=0;Je<L;++Je)be[Je]=ie(Je);return be}var cl=5120,Ua=5121,fl=5122,au=5123,Ud=5124,mc=5125,fa=5126;function Wu(L){for(var ie=16;ie<=1<<28;ie*=16)if(L<=ie)return ie;return 0}function Pn(L){var ie,be;return ie=(L>65535)<<4,L>>>=ie,be=(L>255)<<3,L>>>=be,ie|=be,be=(L>15)<<2,L>>>=be,ie|=be,be=(L>3)<<1,L>>>=be,ie|=be,ie|L>>1}function Cf(){var L=Rr(8,function(){return[]});function ie(qe){var at=Wu(qe),Pt=L[Pn(at)>>2];return Pt.length>0?Pt.pop():new ArrayBuffer(at)}function be(qe){L[Pn(qe.byteLength)>>2].push(qe)}function Je(qe,at){var Pt=null;switch(qe){case cl:Pt=new Int8Array(ie(at),0,at);break;case Ua:Pt=new Uint8Array(ie(at),0,at);break;case fl:Pt=new Int16Array(ie(2*at),0,at);break;case au:Pt=new Uint16Array(ie(2*at),0,at);break;case Ud:Pt=new Int32Array(ie(4*at),0,at);break;case mc:Pt=new Uint32Array(ie(4*at),0,at);break;case fa:Pt=new Float32Array(ie(4*at),0,at);break;default:return null}return Pt.length!==at?Pt.subarray(0,at):Pt}function ct(qe){be(qe.buffer)}return{alloc:ie,free:be,allocType:Je,freeType:ct}}var vo=Cf();vo.zero=Cf();var gc=3408,Hi=3410,ta=3411,Es=3412,Ta=3413,da=3414,Ma=3415,_c=33901,bc=33902,Df=3379,zu=3386,If=34921,wc=36347,Gd=36348,Rl=35661,Lf=35660,dl=34930,Ec=36349,Os=34076,Oc=34024,xc=7936,Vd=7937,Ff=7938,zr=35724,Vr=34047,$f=36063,lu=34852,pa=3553,xs=34067,Bf=34069,jo=33984,jl=6408,Cl=5126,Ss=5121,uu=36160,mi=36053,Sc=36064,Uf=16384,Ac=function(L,ie){var be=1;ie.ext_texture_filter_anisotropic&&(be=L.getParameter(Vr));var Je=1,ct=1;ie.webgl_draw_buffers&&(Je=L.getParameter(lu),ct=L.getParameter($f));var qe=!!ie.oes_texture_float;if(qe){var at=L.createTexture();L.bindTexture(pa,at),L.texImage2D(pa,0,jl,1,1,0,jl,Cl,null);var Pt=L.createFramebuffer();if(L.bindFramebuffer(uu,Pt),L.framebufferTexture2D(uu,Sc,pa,at,0),L.bindTexture(pa,null),L.checkFramebufferStatus(uu)!==mi)qe=!1;else{L.viewport(0,0,1,1),L.clearColor(1,0,0,1),L.clear(Uf);var Dt=vo.allocType(Cl,4);L.readPixels(0,0,1,1,jl,Cl,Dt),L.getError()?qe=!1:(L.deleteFramebuffer(Pt),L.deleteTexture(at),qe=Dt[0]===1),vo.freeType(Dt)}}var Rt=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),lt=!0;if(!Rt){var Vt=L.createTexture(),Ut=vo.allocType(Ss,36);L.activeTexture(jo),L.bindTexture(xs,Vt),L.texImage2D(Bf,0,jl,3,3,0,jl,Ss,Ut),vo.freeType(Ut),L.bindTexture(xs,null),L.deleteTexture(Vt),lt=!L.getError()}return{colorBits:[L.getParameter(Hi),L.getParameter(ta),L.getParameter(Es),L.getParameter(Ta)],depthBits:L.getParameter(da),stencilBits:L.getParameter(Ma),subpixelBits:L.getParameter(gc),extensions:Object.keys(ie).filter(function(kt){return!!ie[kt]}),maxAnisotropic:be,maxDrawbuffers:Je,maxColorAttachments:ct,pointSizeDims:L.getParameter(_c),lineWidthDims:L.getParameter(bc),maxViewportDims:L.getParameter(zu),maxCombinedTextureUnits:L.getParameter(Rl),maxCubeMapSize:L.getParameter(Os),maxRenderbufferSize:L.getParameter(Oc),maxTextureUnits:L.getParameter(dl),maxTextureSize:L.getParameter(Df),maxAttributes:L.getParameter(If),maxVertexUniforms:L.getParameter(wc),maxVertexTextureUnits:L.getParameter(Lf),maxVaryingVectors:L.getParameter(Gd),maxFragmentUniforms:L.getParameter(Ec),glsl:L.getParameter(zr),renderer:L.getParameter(Vd),vendor:L.getParameter(xc),version:L.getParameter(Ff),readFloat:qe,npotTextureCube:lt}};function Ni(L){return!!L&&typeof L=="object"&&Array.isArray(L.shape)&&Array.isArray(L.stride)&&typeof L.offset=="number"&&L.shape.length===L.stride.length&&(Array.isArray(L.data)||n(L.data))}var ri=function(L){return Object.keys(L).map(function(ie){return L[ie]})},na={shape:ji,flatten:Vf};function to(L,ie,be){for(var Je=0;Je<ie;++Je)be[Je]=L[Je]}function Gf(L,ie,be,Je){for(var ct=0,qe=0;qe<ie;++qe)for(var at=L[qe],Pt=0;Pt<be;++Pt)Je[ct++]=at[Pt]}function Ri(L,ie,be,Je,ct,qe){for(var at=qe,Pt=0;Pt<ie;++Pt)for(var Dt=L[Pt],Rt=0;Rt<be;++Rt)for(var lt=Dt[Rt],Vt=0;Vt<Je;++Vt)ct[at++]=lt[Vt]}function Tc(L,ie,be,Je,ct){for(var qe=1,at=be+1;at<ie.length;++at)qe*=ie[at];var Pt=ie[be];if(ie.length-be===4){var Dt=ie[be+1],Rt=ie[be+2],lt=ie[be+3];for(at=0;at<Pt;++at)Ri(L[at],Dt,Rt,lt,Je,ct),ct+=qe}else for(at=0;at<Pt;++at)Tc(L[at],ie,be+1,Je,ct),ct+=qe}function Vf(L,ie,be,Je){var ct=1;if(ie.length)for(var qe=0;qe<ie.length;++qe)ct*=ie[qe];else ct=0;var at=Je||vo.allocType(be,ct);switch(ie.length){case 0:break;case 1:to(L,ie[0],at);break;case 2:Gf(L,ie[0],ie[1],at);break;case 3:Ri(L,ie[0],ie[1],ie[2],at,0);break;default:Tc(L,ie,0,at,0)}return at}function ji(L){for(var ie=[],be=L;be.length;be=be[0])ie.push(be.length);return ie}var Ai={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Mc=5120,Fr=5122,oi=5124,As=5121,Wf=5123,Pc=5125,Ts=5126,Ga=5126,Ci={int8:Mc,int16:Fr,int32:oi,uint8:As,uint16:Wf,uint32:Pc,float:Ts,float32:Ga},su=35048,Xi=35040,ha={dynamic:su,stream:Xi,static:35044},Mr=na.flatten,Di=na.shape,Pa=35044,fi=35040,cu=5121,Dl=5126,ka=[];ka[5120]=1,ka[5122]=2,ka[5124]=4,ka[5121]=1,ka[5123]=2,ka[5125]=4,ka[5126]=4;function uo(L){return Ai[Object.prototype.toString.call(L)]|0}function Hu(L,ie){for(var be=0;be<ie.length;++be)L[be]=ie[be]}function Va(L,ie,be,Je,ct,qe,at){for(var Pt=0,Dt=0;Dt<be;++Dt)for(var Rt=0;Rt<Je;++Rt)L[Pt++]=ie[ct*Dt+qe*Rt+at]}function va(L,ie,be,Je){var ct=0,qe={};function at(Ve){this.id=ct++,this.buffer=L.createBuffer(),this.type=Ve,this.usage=Pa,this.byteLength=0,this.dimension=1,this.dtype=cu,this.persistentData=null,be.profile&&(this.stats={size:0})}at.prototype.bind=function(){L.bindBuffer(this.type,this.buffer)},at.prototype.destroy=function(){Ut(this)};var Pt=[];function Dt(Ve,ot){var Lt=Pt.pop();return Lt||(Lt=new at(Ve)),Lt.bind(),Vt(Lt,ot,fi,0,1,!1),Lt}function Rt(Ve){Pt.push(Ve)}function lt(Ve,ot,Lt){Ve.byteLength=ot.byteLength,L.bufferData(Ve.type,ot,Lt)}function Vt(Ve,ot,Lt,qt,Ot,Zt){var xt;if(Ve.usage=Lt,Array.isArray(ot)){if(Ve.dtype=qt||Dl,ot.length>0){var Wt;if(Array.isArray(ot[0])){xt=Di(ot);for(var _t=1,Xt=1;Xt<xt.length;++Xt)_t*=xt[Xt];Ve.dimension=_t,Wt=Mr(ot,xt,Ve.dtype),lt(Ve,Wt,Lt),Zt?Ve.persistentData=Wt:vo.freeType(Wt)}else if(typeof ot[0]=="number"){Ve.dimension=Ot;var Mn=vo.allocType(Ve.dtype,ot.length);Hu(Mn,ot),lt(Ve,Mn,Lt),Zt?Ve.persistentData=Mn:vo.freeType(Mn)}else n(ot[0])?(Ve.dimension=ot[0].length,Ve.dtype=qt||uo(ot[0])||Dl,Wt=Mr(ot,[ot.length,ot[0].length],Ve.dtype),lt(Ve,Wt,Lt),Zt?Ve.persistentData=Wt:vo.freeType(Wt)):re.raise("invalid buffer data")}}else if(n(ot))Ve.dtype=qt||uo(ot),Ve.dimension=Ot,lt(Ve,ot,Lt),Zt&&(Ve.persistentData=new Uint8Array(new Uint8Array(ot.buffer)));else if(Ni(ot)){xt=ot.shape;var Vn=ot.stride,It=ot.offset,St=0,wt=0,Cn=0,tr=0;xt.length===1?(St=xt[0],wt=1,Cn=Vn[0],tr=0):xt.length===2?(St=xt[0],wt=xt[1],Cn=Vn[0],tr=Vn[1]):re.raise("invalid shape"),Ve.dtype=qt||uo(ot.data)||Dl,Ve.dimension=wt;var un=vo.allocType(Ve.dtype,St*wt);Va(un,ot.data,St,wt,Cn,tr,It),lt(Ve,un,Lt),Zt?Ve.persistentData=un:vo.freeType(un)}else ot instanceof ArrayBuffer?(Ve.dtype=cu,Ve.dimension=Ot,lt(Ve,ot,Lt),Zt&&(Ve.persistentData=new Uint8Array(new Uint8Array(ot)))):re.raise("invalid buffer data")}function Ut(Ve){ie.bufferCount--,Je(Ve);var ot=Ve.buffer;re(ot,"buffer must not be deleted already"),L.deleteBuffer(ot),Ve.buffer=null,delete qe[Ve.id]}function kt(Ve,ot,Lt,qt){ie.bufferCount++;var Ot=new at(ot);qe[Ot.id]=Ot;function Zt(_t){var Xt=Pa,Mn=null,Vn=0,It=0,St=1;return Array.isArray(_t)||n(_t)||Ni(_t)||_t instanceof ArrayBuffer?Mn=_t:typeof _t=="number"?Vn=_t|0:_t&&(re.type(_t,"object","buffer arguments must be an object, a number or an array"),"data"in _t&&(re(Mn===null||Array.isArray(Mn)||n(Mn)||Ni(Mn),"invalid data for buffer"),Mn=_t.data),"usage"in _t&&(re.parameter(_t.usage,ha,"invalid buffer usage"),Xt=ha[_t.usage]),"type"in _t&&(re.parameter(_t.type,Ci,"invalid buffer type"),It=Ci[_t.type]),"dimension"in _t&&(re.type(_t.dimension,"number","invalid dimension"),St=_t.dimension|0),"length"in _t&&(re.nni(Vn,"buffer length must be a nonnegative integer"),Vn=_t.length|0)),Ot.bind(),Mn?Vt(Ot,Mn,Xt,It,St,qt):(Vn&&L.bufferData(Ot.type,Vn,Xt),Ot.dtype=It||cu,Ot.usage=Xt,Ot.dimension=St,Ot.byteLength=Vn),be.profile&&(Ot.stats.size=Ot.byteLength*ka[Ot.dtype]),Zt}function xt(_t,Xt){re(Xt+_t.byteLength<=Ot.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+_t.byteLength+" starting from offset "+Xt+" to a buffer of size "+Ot.byteLength),L.bufferSubData(Ot.type,Xt,_t)}function Wt(_t,Xt){var Mn=(Xt||0)|0,Vn;if(Ot.bind(),n(_t)||_t instanceof ArrayBuffer)xt(_t,Mn);else if(Array.isArray(_t)){if(_t.length>0)if(typeof _t[0]=="number"){var It=vo.allocType(Ot.dtype,_t.length);Hu(It,_t),xt(It,Mn),vo.freeType(It)}else if(Array.isArray(_t[0])||n(_t[0])){Vn=Di(_t);var St=Mr(_t,Vn,Ot.dtype);xt(St,Mn),vo.freeType(St)}else re.raise("invalid buffer data")}else if(Ni(_t)){Vn=_t.shape;var wt=_t.stride,Cn=0,tr=0,un=0,Qn=0;Vn.length===1?(Cn=Vn[0],tr=1,un=wt[0],Qn=0):Vn.length===2?(Cn=Vn[0],tr=Vn[1],un=wt[0],Qn=wt[1]):re.raise("invalid shape");var Gn=Array.isArray(_t.data)?Ot.dtype:uo(_t.data),rr=vo.allocType(Gn,Cn*tr);Va(rr,_t.data,Cn,tr,un,Qn,_t.offset),xt(rr,Mn),vo.freeType(rr)}else re.raise("invalid data for buffer subdata");return Zt}return Lt||Zt(Ve),Zt._reglType="buffer",Zt._buffer=Ot,Zt.subdata=Wt,be.profile&&(Zt.stats=Ot.stats),Zt.destroy=function(){Ut(Ot)},Zt}function mt(){ri(qe).forEach(function(Ve){Ve.buffer=L.createBuffer(),L.bindBuffer(Ve.type,Ve.buffer),L.bufferData(Ve.type,Ve.persistentData||Ve.byteLength,Ve.usage)})}return be.profile&&(ie.getTotalBufferSize=function(){var Ve=0;return Object.keys(qe).forEach(function(ot){Ve+=qe[ot].stats.size}),Ve}),{create:kt,createStream:Dt,destroyStream:Rt,clear:function(){ri(qe).forEach(Ut),Pt.forEach(Ut)},getBuffer:function(Ve){return Ve&&Ve._buffer instanceof at?Ve._buffer:null},restore:mt,_initBuffer:Vt}}var kc=0,Wd=0,Nc=1,Vo=1,Il=4,Wa=4,Yo={points:kc,point:Wd,lines:Nc,line:Vo,triangles:Il,triangle:Wa,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Rc=0,ra=1,ya=4,Ms=5120,Ii=5121,Yi=5122,ii=5123,oa=5124,Ti=5125,it=34963,Ct=35040,Ft=35044;function fn(L,ie,be,Je){var ct={},qe=0,at={uint8:Ii,uint16:ii};ie.oes_element_index_uint&&(at.uint32=Ti);function Pt(mt){this.id=qe++,ct[this.id]=this,this.buffer=mt,this.primType=ya,this.vertCount=0,this.type=0}Pt.prototype.bind=function(){this.buffer.bind()};var Dt=[];function Rt(mt){var Ve=Dt.pop();return Ve||(Ve=new Pt(be.create(null,it,!0,!1)._buffer)),Vt(Ve,mt,Ct,-1,-1,0,0),Ve}function lt(mt){Dt.push(mt)}function Vt(mt,Ve,ot,Lt,qt,Ot,Zt){mt.buffer.bind();var xt;if(Ve){var Wt=Zt;!Zt&&(!n(Ve)||Ni(Ve)&&!n(Ve.data))&&(Wt=ie.oes_element_index_uint?Ti:ii),be._initBuffer(mt.buffer,Ve,ot,Wt,3)}else L.bufferData(it,Ot,ot),mt.buffer.dtype=xt||Ii,mt.buffer.usage=ot,mt.buffer.dimension=3,mt.buffer.byteLength=Ot;if(xt=Zt,!Zt){switch(mt.buffer.dtype){case Ii:case Ms:xt=Ii;break;case ii:case Yi:xt=ii;break;case Ti:case oa:xt=Ti;break;default:re.raise("unsupported type for element array")}mt.buffer.dtype=xt}mt.type=xt,re(xt!==Ti||!!ie.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var _t=qt;_t<0&&(_t=mt.buffer.byteLength,xt===ii?_t>>=1:xt===Ti&&(_t>>=2)),mt.vertCount=_t;var Xt=Lt;if(Lt<0){Xt=ya;var Mn=mt.buffer.dimension;Mn===1&&(Xt=Rc),Mn===2&&(Xt=ra),Mn===3&&(Xt=ya)}mt.primType=Xt}function Ut(mt){Je.elementsCount--,re(mt.buffer!==null,"must not double destroy elements"),delete ct[mt.id],mt.buffer.destroy(),mt.buffer=null}function kt(mt,Ve){var ot=be.create(null,it,!0),Lt=new Pt(ot._buffer);Je.elementsCount++;function qt(Ot){if(!Ot)ot(),Lt.primType=ya,Lt.vertCount=0,Lt.type=Ii;else if(typeof Ot=="number")ot(Ot),Lt.primType=ya,Lt.vertCount=Ot|0,Lt.type=Ii;else{var Zt=null,xt=Ft,Wt=-1,_t=-1,Xt=0,Mn=0;Array.isArray(Ot)||n(Ot)||Ni(Ot)?Zt=Ot:(re.type(Ot,"object","invalid arguments for elements"),"data"in Ot&&(Zt=Ot.data,re(Array.isArray(Zt)||n(Zt)||Ni(Zt),"invalid data for element buffer")),"usage"in Ot&&(re.parameter(Ot.usage,ha,"invalid element buffer usage"),xt=ha[Ot.usage]),"primitive"in Ot&&(re.parameter(Ot.primitive,Yo,"invalid element buffer primitive"),Wt=Yo[Ot.primitive]),"count"in Ot&&(re(typeof Ot.count=="number"&&Ot.count>=0,"invalid vertex count for elements"),_t=Ot.count|0),"type"in Ot&&(re.parameter(Ot.type,at,"invalid buffer type"),Mn=at[Ot.type]),"length"in Ot?Xt=Ot.length|0:(Xt=_t,Mn===ii||Mn===Yi?Xt*=2:(Mn===Ti||Mn===oa)&&(Xt*=4))),Vt(Lt,Zt,xt,Wt,_t,Xt,Mn)}return qt}return qt(mt),qt._reglType="elements",qt._elements=Lt,qt.subdata=function(Ot,Zt){return ot.subdata(Ot,Zt),qt},qt.destroy=function(){Ut(Lt)},qt}return{create:kt,createStream:Rt,destroyStream:lt,getElements:function(mt){return typeof mt=="function"&&mt._elements instanceof Pt?mt._elements:null},clear:function(){ri(ct).forEach(Ut)}}}var ur=new Float32Array(1),Pr=new Uint32Array(ur.buffer),so=5123;function T(L){for(var ie=vo.allocType(so,L.length),be=0;be<L.length;++be)if(isNaN(L[be]))ie[be]=65535;else if(L[be]===1/0)ie[be]=31744;else if(L[be]===-1/0)ie[be]=64512;else{ur[0]=L[be];var Je=Pr[0],ct=Je>>>31<<15,qe=(Je<<1>>>24)-127,at=Je>>13&1024-1;if(qe<-24)ie[be]=ct;else if(qe<-14){var Pt=-14-qe;ie[be]=ct+(at+1024>>Pt)}else qe>15?ie[be]=ct+31744:ie[be]=ct+(qe+15<<10)+at}return ie}function M(L){return Array.isArray(L)||n(L)}var B=function(L){return!(L&L-1)&&!!L},ne=34467,ye=3553,Ge=34067,pt=34069,Ht=6408,_n=6406,mr=6407,ln=6409,Wr=6410,pr=32854,Cr=32855,ia=36194,bo=32819,qi=32820,pl=33635,hl=34042,Ll=6402,fu=34041,za=35904,du=35906,qo=36193,Fl=33776,vl=33777,Ha=33778,Xa=33779,Xu=35986,nh=35987,rh=34798,zd=35840,jc=35841,Yu=35842,zf=35843,oh=36196,qu=5121,Cc=5123,Hf=5125,Co=5126,Li=10242,Xf=10243,Yf=10497,Ps=33071,Vv=33648,ks=10240,yl=10241,Dc=9728,Ku=9729,pu=9984,Ns=9985,Ic=9986,hu=9987,Wv=33170,Lc=4352,zv=4353,Hv=4354,ih=34046,qf=3317,Mi=37440,ah=37441,oe=37443,Zu=37444,$l=33984,Na=[pu,Ic,Ns,hu],kr=[0,ln,Wr,mr,Ht],gi={};gi[ln]=gi[_n]=gi[Ll]=1,gi[fu]=gi[Wr]=2,gi[mr]=gi[za]=3,gi[Ht]=gi[du]=4;function $r(L){return"[object "+L+"]"}var Ya=$r("HTMLCanvasElement"),Bl=$r("OffscreenCanvas"),ma=$r("CanvasRenderingContext2D"),Kf=$r("ImageBitmap"),Zf=$r("HTMLImageElement"),Hd=$r("HTMLVideoElement"),lh=Object.keys(Ai).concat([Ya,Bl,ma,Kf,Zf,Hd]),Ul=[];Ul[qu]=1,Ul[Co]=4,Ul[qo]=2,Ul[Cc]=2,Ul[Hf]=4;var Do=[];Do[pr]=2,Do[Cr]=2,Do[ia]=2,Do[fu]=4,Do[Fl]=.5,Do[vl]=.5,Do[Ha]=1,Do[Xa]=1,Do[Xu]=.5,Do[nh]=1,Do[rh]=1,Do[zd]=.5,Do[jc]=.25,Do[Yu]=.5,Do[zf]=.25,Do[oh]=.5;function Rs(L){return Array.isArray(L)&&(L.length===0||typeof L[0]=="number")}function Xd(L){if(!Array.isArray(L))return!1;var ie=L.length;return!(ie===0||!M(L[0]))}function Gl(L){return Object.prototype.toString.call(L)}function qa(L){return Gl(L)===Ya}function Fc(L){return Gl(L)===Bl}function vu(L){return Gl(L)===ma}function ga(L){return Gl(L)===Kf}function Yd(L){return Gl(L)===Zf}function qd(L){return Gl(L)===Hd}function Ka(L){if(!L)return!1;var ie=Gl(L);return lh.indexOf(ie)>=0?!0:Rs(L)||Xd(L)||Ni(L)}function yo(L){return Ai[Object.prototype.toString.call(L)]|0}function uh(L,ie){var be=ie.length;switch(L.type){case qu:case Cc:case Hf:case Co:var Je=vo.allocType(L.type,be);Je.set(ie),L.data=Je;break;case qo:L.data=T(ie);break;default:re.raise("unsupported texture type, must specify a typed array")}}function Kd(L,ie){return vo.allocType(L.type===qo?Co:L.type,ie)}function Io(L,ie){L.type===qo?(L.data=T(ie),vo.freeType(ie)):L.data=ie}function Hr(L,ie,be,Je,ct,qe){for(var at=L.width,Pt=L.height,Dt=L.channels,Rt=at*Pt*Dt,lt=Kd(L,Rt),Vt=0,Ut=0;Ut<Pt;++Ut)for(var kt=0;kt<at;++kt)for(var mt=0;mt<Dt;++mt)lt[Vt++]=ie[be*kt+Je*Ut+ct*mt+qe];Io(L,lt)}function Ko(L,ie,be,Je,ct,qe){var at;if(typeof Do[L]<"u"?at=Do[L]:at=gi[L]*Ul[ie],qe&&(at*=6),ct){for(var Pt=0,Dt=be;Dt>=1;)Pt+=at*Dt*Dt,Dt/=2;return Pt}else return at*be*Je}function xr(L,ie,be,Je,ct,qe,at){var Pt={"don't care":Lc,"dont care":Lc,nice:Hv,fast:zv},Dt={repeat:Yf,clamp:Ps,mirror:Vv},Rt={nearest:Dc,linear:Ku},lt=o({mipmap:hu,"nearest mipmap nearest":pu,"linear mipmap nearest":Ns,"nearest mipmap linear":Ic,"linear mipmap linear":hu},Rt),Vt={none:0,browser:Zu},Ut={uint8:qu,rgba4:bo,rgb565:pl,"rgb5 a1":qi},kt={alpha:_n,luminance:ln,"luminance alpha":Wr,rgb:mr,rgba:Ht,rgba4:pr,"rgb5 a1":Cr,rgb565:ia},mt={};ie.ext_srgb&&(kt.srgb=za,kt.srgba=du),ie.oes_texture_float&&(Ut.float32=Ut.float=Co),ie.oes_texture_half_float&&(Ut.float16=Ut["half float"]=qo),ie.webgl_depth_texture&&(o(kt,{depth:Ll,"depth stencil":fu}),o(Ut,{uint16:Cc,uint32:Hf,"depth stencil":hl})),ie.webgl_compressed_texture_s3tc&&o(mt,{"rgb s3tc dxt1":Fl,"rgba s3tc dxt1":vl,"rgba s3tc dxt3":Ha,"rgba s3tc dxt5":Xa}),ie.webgl_compressed_texture_atc&&o(mt,{"rgb atc":Xu,"rgba atc explicit alpha":nh,"rgba atc interpolated alpha":rh}),ie.webgl_compressed_texture_pvrtc&&o(mt,{"rgb pvrtc 4bppv1":zd,"rgb pvrtc 2bppv1":jc,"rgba pvrtc 4bppv1":Yu,"rgba pvrtc 2bppv1":zf}),ie.webgl_compressed_texture_etc1&&(mt["rgb etc1"]=oh);var Ve=Array.prototype.slice.call(L.getParameter(ne));Object.keys(mt).forEach(function(pe){var et=mt[pe];Ve.indexOf(et)>=0&&(kt[pe]=et)});var ot=Object.keys(kt);be.textureFormats=ot;var Lt=[];Object.keys(kt).forEach(function(pe){var et=kt[pe];Lt[et]=pe});var qt=[];Object.keys(Ut).forEach(function(pe){var et=Ut[pe];qt[et]=pe});var Ot=[];Object.keys(Rt).forEach(function(pe){var et=Rt[pe];Ot[et]=pe});var Zt=[];Object.keys(lt).forEach(function(pe){var et=lt[pe];Zt[et]=pe});var xt=[];Object.keys(Dt).forEach(function(pe){var et=Dt[pe];xt[et]=pe});var Wt=ot.reduce(function(pe,et){var Ye=kt[et];return Ye===ln||Ye===_n||Ye===ln||Ye===Wr||Ye===Ll||Ye===fu||ie.ext_srgb&&(Ye===za||Ye===du)?pe[Ye]=Ye:Ye===Cr||et.indexOf("rgba")>=0?pe[Ye]=Ht:pe[Ye]=mr,pe},{});function _t(){this.internalformat=Ht,this.format=Ht,this.type=qu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Zu,this.width=0,this.height=0,this.channels=0}function Xt(pe,et){pe.internalformat=et.internalformat,pe.format=et.format,pe.type=et.type,pe.compressed=et.compressed,pe.premultiplyAlpha=et.premultiplyAlpha,pe.flipY=et.flipY,pe.unpackAlignment=et.unpackAlignment,pe.colorSpace=et.colorSpace,pe.width=et.width,pe.height=et.height,pe.channels=et.channels}function Mn(pe,et){if(!(typeof et!="object"||!et)){if("premultiplyAlpha"in et&&(re.type(et.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),pe.premultiplyAlpha=et.premultiplyAlpha),"flipY"in et&&(re.type(et.flipY,"boolean","invalid texture flip"),pe.flipY=et.flipY),"alignment"in et&&(re.oneOf(et.alignment,[1,2,4,8],"invalid texture unpack alignment"),pe.unpackAlignment=et.alignment),"colorSpace"in et&&(re.parameter(et.colorSpace,Vt,"invalid colorSpace"),pe.colorSpace=Vt[et.colorSpace]),"type"in et){var Ye=et.type;re(ie.oes_texture_float||!(Ye==="float"||Ye==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),re(ie.oes_texture_half_float||!(Ye==="half float"||Ye==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),re(ie.webgl_depth_texture||!(Ye==="uint16"||Ye==="uint32"||Ye==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(Ye,Ut,"invalid texture type"),pe.type=Ut[Ye]}var tn=pe.width,hr=pe.height,ue=pe.channels,ee=!1;"shape"in et?(re(Array.isArray(et.shape)&&et.shape.length>=2,"shape must be an array"),tn=et.shape[0],hr=et.shape[1],et.shape.length===3&&(ue=et.shape[2],re(ue>0&&ue<=4,"invalid number of channels"),ee=!0),re(tn>=0&&tn<=be.maxTextureSize,"invalid width"),re(hr>=0&&hr<=be.maxTextureSize,"invalid height")):("radius"in et&&(tn=hr=et.radius,re(tn>=0&&tn<=be.maxTextureSize,"invalid radius")),"width"in et&&(tn=et.width,re(tn>=0&&tn<=be.maxTextureSize,"invalid width")),"height"in et&&(hr=et.height,re(hr>=0&&hr<=be.maxTextureSize,"invalid height")),"channels"in et&&(ue=et.channels,re(ue>0&&ue<=4,"invalid number of channels"),ee=!0)),pe.width=tn|0,pe.height=hr|0,pe.channels=ue|0;var Ae=!1;if("format"in et){var Ue=et.format;re(ie.webgl_depth_texture||!(Ue==="depth"||Ue==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),re.parameter(Ue,kt,"invalid texture format");var We=pe.internalformat=kt[Ue];pe.format=Wt[We],Ue in Ut&&("type"in et||(pe.type=Ut[Ue])),Ue in mt&&(pe.compressed=!0),Ae=!0}!ee&&Ae?pe.channels=gi[pe.format]:ee&&!Ae?pe.channels!==kr[pe.format]&&(pe.format=pe.internalformat=kr[pe.channels]):Ae&&ee&&re(pe.channels===gi[pe.format],"number of channels inconsistent with specified format")}}function Vn(pe){L.pixelStorei(Mi,pe.flipY),L.pixelStorei(ah,pe.premultiplyAlpha),L.pixelStorei(oe,pe.colorSpace),L.pixelStorei(qf,pe.unpackAlignment)}function It(){_t.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function St(pe,et){var Ye=null;if(Ka(et)?Ye=et:et&&(re.type(et,"object","invalid pixel data type"),Mn(pe,et),"x"in et&&(pe.xOffset=et.x|0),"y"in et&&(pe.yOffset=et.y|0),Ka(et.data)&&(Ye=et.data)),re(!pe.compressed||Ye instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),et.copy){re(!Ye,"can not specify copy and data field for the same texture");var tn=ct.viewportWidth,hr=ct.viewportHeight;pe.width=pe.width||tn-pe.xOffset,pe.height=pe.height||hr-pe.yOffset,pe.needsCopy=!0,re(pe.xOffset>=0&&pe.xOffset<tn&&pe.yOffset>=0&&pe.yOffset<hr&&pe.width>0&&pe.width<=tn&&pe.height>0&&pe.height<=hr,"copy texture read out of bounds")}else if(!Ye)pe.width=pe.width||1,pe.height=pe.height||1,pe.channels=pe.channels||4;else if(n(Ye))pe.channels=pe.channels||4,pe.data=Ye,!("type"in et)&&pe.type===qu&&(pe.type=yo(Ye));else if(Rs(Ye))pe.channels=pe.channels||4,uh(pe,Ye),pe.alignment=1,pe.needsFree=!0;else if(Ni(Ye)){var ue=Ye.data;!Array.isArray(ue)&&pe.type===qu&&(pe.type=yo(ue));var ee=Ye.shape,Ae=Ye.stride,Ue,We,Pe,Te,De,ce;ee.length===3?(Pe=ee[2],ce=Ae[2]):(re(ee.length===2,"invalid ndarray pixel data, must be 2 or 3D"),Pe=1,ce=1),Ue=ee[0],We=ee[1],Te=Ae[0],De=Ae[1],pe.alignment=1,pe.width=Ue,pe.height=We,pe.channels=Pe,pe.format=pe.internalformat=kr[Pe],pe.needsFree=!0,Hr(pe,ue,Te,De,ce,Ye.offset)}else if(qa(Ye)||Fc(Ye)||vu(Ye))qa(Ye)||Fc(Ye)?pe.element=Ye:pe.element=Ye.canvas,pe.width=pe.element.width,pe.height=pe.element.height,pe.channels=4;else if(ga(Ye))pe.element=Ye,pe.width=Ye.width,pe.height=Ye.height,pe.channels=4;else if(Yd(Ye))pe.element=Ye,pe.width=Ye.naturalWidth,pe.height=Ye.naturalHeight,pe.channels=4;else if(qd(Ye))pe.element=Ye,pe.width=Ye.videoWidth,pe.height=Ye.videoHeight,pe.channels=4;else if(Xd(Ye)){var xe=pe.width||Ye[0].length,se=pe.height||Ye.length,Fe=pe.channels;M(Ye[0][0])?Fe=Fe||Ye[0][0].length:Fe=Fe||1;for(var He=na.shape(Ye),d=1,m=0;m<He.length;++m)d*=He[m];var E=Kd(pe,d);na.flatten(Ye,He,"",E),Io(pe,E),pe.alignment=1,pe.width=xe,pe.height=se,pe.channels=Fe,pe.format=pe.internalformat=kr[Fe],pe.needsFree=!0}pe.type===Co?re(be.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):pe.type===qo&&re(be.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function wt(pe,et,Ye){var tn=pe.element,hr=pe.data,ue=pe.internalformat,ee=pe.format,Ae=pe.type,Ue=pe.width,We=pe.height;Vn(pe),tn?L.texImage2D(et,Ye,ee,ee,Ae,tn):pe.compressed?L.compressedTexImage2D(et,Ye,ue,Ue,We,0,hr):pe.needsCopy?(Je(),L.copyTexImage2D(et,Ye,ee,pe.xOffset,pe.yOffset,Ue,We,0)):L.texImage2D(et,Ye,ee,Ue,We,0,ee,Ae,hr||null)}function Cn(pe,et,Ye,tn,hr){var ue=pe.element,ee=pe.data,Ae=pe.internalformat,Ue=pe.format,We=pe.type,Pe=pe.width,Te=pe.height;Vn(pe),ue?L.texSubImage2D(et,hr,Ye,tn,Ue,We,ue):pe.compressed?L.compressedTexSubImage2D(et,hr,Ye,tn,Ae,Pe,Te,ee):pe.needsCopy?(Je(),L.copyTexSubImage2D(et,hr,Ye,tn,pe.xOffset,pe.yOffset,Pe,Te)):L.texSubImage2D(et,hr,Ye,tn,Pe,Te,Ue,We,ee)}var tr=[];function un(){return tr.pop()||new It}function Qn(pe){pe.needsFree&&vo.freeType(pe.data),It.call(pe),tr.push(pe)}function Gn(){_t.call(this),this.genMipmaps=!1,this.mipmapHint=Lc,this.mipmask=0,this.images=Array(16)}function rr(pe,et,Ye){var tn=pe.images[0]=un();pe.mipmask=1,tn.width=pe.width=et,tn.height=pe.height=Ye,tn.channels=pe.channels=4}function _r(pe,et){var Ye=null;if(Ka(et))Ye=pe.images[0]=un(),Xt(Ye,pe),St(Ye,et),pe.mipmask=1;else if(Mn(pe,et),Array.isArray(et.mipmap))for(var tn=et.mipmap,hr=0;hr<tn.length;++hr)Ye=pe.images[hr]=un(),Xt(Ye,pe),Ye.width>>=hr,Ye.height>>=hr,St(Ye,tn[hr]),pe.mipmask|=1<<hr;else Ye=pe.images[0]=un(),Xt(Ye,pe),St(Ye,et),pe.mipmask=1;Xt(pe,pe.images[0]),pe.compressed&&(pe.internalformat===Fl||pe.internalformat===vl||pe.internalformat===Ha||pe.internalformat===Xa)&&re(pe.width%4===0&&pe.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Po(pe,et){for(var Ye=pe.images,tn=0;tn<Ye.length;++tn){if(!Ye[tn])return;wt(Ye[tn],et,tn)}}var Fo=[];function cr(){var pe=Fo.pop()||new Gn;_t.call(pe),pe.mipmask=0;for(var et=0;et<16;++et)pe.images[et]=null;return pe}function Wo(pe){for(var et=pe.images,Ye=0;Ye<et.length;++Ye)et[Ye]&&Qn(et[Ye]),et[Ye]=null;Fo.push(pe)}function Qr(){this.minFilter=Dc,this.magFilter=Dc,this.wrapS=Ps,this.wrapT=Ps,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Lc}function ko(pe,et){if("min"in et){var Ye=et.min;re.parameter(Ye,lt),pe.minFilter=lt[Ye],Na.indexOf(pe.minFilter)>=0&&!("faces"in et)&&(pe.genMipmaps=!0)}if("mag"in et){var tn=et.mag;re.parameter(tn,Rt),pe.magFilter=Rt[tn]}var hr=pe.wrapS,ue=pe.wrapT;if("wrap"in et){var ee=et.wrap;typeof ee=="string"?(re.parameter(ee,Dt),hr=ue=Dt[ee]):Array.isArray(ee)&&(re.parameter(ee[0],Dt),re.parameter(ee[1],Dt),hr=Dt[ee[0]],ue=Dt[ee[1]])}else{if("wrapS"in et){var Ae=et.wrapS;re.parameter(Ae,Dt),hr=Dt[Ae]}if("wrapT"in et){var Ue=et.wrapT;re.parameter(Ue,Dt),ue=Dt[Ue]}}if(pe.wrapS=hr,pe.wrapT=ue,"anisotropic"in et){var We=et.anisotropic;re(typeof We=="number"&&We>=1&&We<=be.maxAnisotropic,"aniso samples must be between 1 and "),pe.anisotropic=et.anisotropic}if("mipmap"in et){var Pe=!1;switch(typeof et.mipmap){case"string":re.parameter(et.mipmap,Pt,"invalid mipmap hint"),pe.mipmapHint=Pt[et.mipmap],pe.genMipmaps=!0,Pe=!0;break;case"boolean":Pe=pe.genMipmaps=et.mipmap;break;case"object":re(Array.isArray(et.mipmap),"invalid mipmap type"),pe.genMipmaps=!1,Pe=!0;break;default:re.raise("invalid mipmap type")}Pe&&!("min"in et)&&(pe.minFilter=pu)}}function $o(pe,et){L.texParameteri(et,yl,pe.minFilter),L.texParameteri(et,ks,pe.magFilter),L.texParameteri(et,Li,pe.wrapS),L.texParameteri(et,Xf,pe.wrapT),ie.ext_texture_filter_anisotropic&&L.texParameteri(et,ih,pe.anisotropic),pe.genMipmaps&&(L.hint(Wv,pe.mipmapHint),L.generateMipmap(et))}var Oo=0,mo={},ei=be.maxTextureUnits,xo=Array(ei).map(function(){return null});function Zn(pe){_t.call(this),this.mipmask=0,this.internalformat=Ht,this.id=Oo++,this.refCount=1,this.target=pe,this.texture=L.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Qr,at.profile&&(this.stats={size:0})}function ai(pe){L.activeTexture($l),L.bindTexture(pe.target,pe.texture)}function Nr(){var pe=xo[0];pe?L.bindTexture(pe.target,pe.texture):L.bindTexture(ye,null)}function jn(pe){var et=pe.texture;re(et,"must not double destroy texture");var Ye=pe.unit,tn=pe.target;Ye>=0&&(L.activeTexture($l+Ye),L.bindTexture(tn,null),xo[Ye]=null),L.deleteTexture(et),pe.texture=null,pe.params=null,pe.pixels=null,pe.refCount=0,delete mo[pe.id],qe.textureCount--}o(Zn.prototype,{bind:function(){var pe=this;pe.bindCount+=1;var et=pe.unit;if(et<0){for(var Ye=0;Ye<ei;++Ye){var tn=xo[Ye];if(tn){if(tn.bindCount>0)continue;tn.unit=-1}xo[Ye]=pe,et=Ye;break}et>=ei&&re.raise("insufficient number of texture units"),at.profile&&qe.maxTextureUnits<et+1&&(qe.maxTextureUnits=et+1),pe.unit=et,L.activeTexture($l+et),L.bindTexture(pe.target,pe.texture)}return et},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&jn(this)}});function fr(pe,et){var Ye=new Zn(ye);mo[Ye.id]=Ye,qe.textureCount++;function tn(ee,Ae){var Ue=Ye.texInfo;Qr.call(Ue);var We=cr();return typeof ee=="number"?typeof Ae=="number"?rr(We,ee|0,Ae|0):rr(We,ee|0,ee|0):ee?(re.type(ee,"object","invalid arguments to regl.texture"),ko(Ue,ee),_r(We,ee)):rr(We,1,1),Ue.genMipmaps&&(We.mipmask=(We.width<<1)-1),Ye.mipmask=We.mipmask,Xt(Ye,We),re.texture2D(Ue,We,be),Ye.internalformat=We.internalformat,tn.width=We.width,tn.height=We.height,ai(Ye),Po(We,ye),$o(Ue,ye),Nr(),Wo(We),at.profile&&(Ye.stats.size=Ko(Ye.internalformat,Ye.type,We.width,We.height,Ue.genMipmaps,!1)),tn.format=Lt[Ye.internalformat],tn.type=qt[Ye.type],tn.mag=Ot[Ue.magFilter],tn.min=Zt[Ue.minFilter],tn.wrapS=xt[Ue.wrapS],tn.wrapT=xt[Ue.wrapT],tn}function hr(ee,Ae,Ue,We){re(!!ee,"must specify image data");var Pe=Ae|0,Te=Ue|0,De=We|0,ce=un();return Xt(ce,Ye),ce.width=0,ce.height=0,St(ce,ee),ce.width=ce.width||(Ye.width>>De)-Pe,ce.height=ce.height||(Ye.height>>De)-Te,re(Ye.type===ce.type&&Ye.format===ce.format&&Ye.internalformat===ce.internalformat,"incompatible format for texture.subimage"),re(Pe>=0&&Te>=0&&Pe+ce.width<=Ye.width&&Te+ce.height<=Ye.height,"texture.subimage write out of bounds"),re(Ye.mipmask&1<<De,"missing mipmap data"),re(ce.data||ce.element||ce.needsCopy,"missing image data"),ai(Ye),Cn(ce,ye,Pe,Te,De),Nr(),Qn(ce),tn}function ue(ee,Ae){var Ue=ee|0,We=Ae|0||Ue;if(Ue===Ye.width&&We===Ye.height)return tn;tn.width=Ye.width=Ue,tn.height=Ye.height=We,ai(Ye);for(var Pe=0;Ye.mipmask>>Pe;++Pe){var Te=Ue>>Pe,De=We>>Pe;if(!Te||!De)break;L.texImage2D(ye,Pe,Ye.format,Te,De,0,Ye.format,Ye.type,null)}return Nr(),at.profile&&(Ye.stats.size=Ko(Ye.internalformat,Ye.type,Ue,We,!1,!1)),tn}return tn(pe,et),tn.subimage=hr,tn.resize=ue,tn._reglType="texture2d",tn._texture=Ye,at.profile&&(tn.stats=Ye.stats),tn.destroy=function(){Ye.decRef()},tn}function Wn(pe,et,Ye,tn,hr,ue){var ee=new Zn(Ge);mo[ee.id]=ee,qe.cubeCount++;var Ae=new Array(6);function Ue(Te,De,ce,xe,se,Fe){var He,d=ee.texInfo;for(Qr.call(d),He=0;He<6;++He)Ae[He]=cr();if(typeof Te=="number"||!Te){var m=Te|0||1;for(He=0;He<6;++He)rr(Ae[He],m,m)}else if(typeof Te=="object")if(De)_r(Ae[0],Te),_r(Ae[1],De),_r(Ae[2],ce),_r(Ae[3],xe),_r(Ae[4],se),_r(Ae[5],Fe);else if(ko(d,Te),Mn(ee,Te),"faces"in Te){var E=Te.faces;for(re(Array.isArray(E)&&E.length===6,"cube faces must be a length 6 array"),He=0;He<6;++He)re(typeof E[He]=="object"&&!!E[He],"invalid input for cube map face"),Xt(Ae[He],ee),_r(Ae[He],E[He])}else for(He=0;He<6;++He)_r(Ae[He],Te);else re.raise("invalid arguments to cube map");for(Xt(ee,Ae[0]),be.npotTextureCube||re(B(ee.width)&&B(ee.height),"your browser does not support non power or two texture dimensions"),d.genMipmaps?ee.mipmask=(Ae[0].width<<1)-1:ee.mipmask=Ae[0].mipmask,re.textureCube(ee,d,Ae,be),ee.internalformat=Ae[0].internalformat,Ue.width=Ae[0].width,Ue.height=Ae[0].height,ai(ee),He=0;He<6;++He)Po(Ae[He],pt+He);for($o(d,Ge),Nr(),at.profile&&(ee.stats.size=Ko(ee.internalformat,ee.type,Ue.width,Ue.height,d.genMipmaps,!0)),Ue.format=Lt[ee.internalformat],Ue.type=qt[ee.type],Ue.mag=Ot[d.magFilter],Ue.min=Zt[d.minFilter],Ue.wrapS=xt[d.wrapS],Ue.wrapT=xt[d.wrapT],He=0;He<6;++He)Wo(Ae[He]);return Ue}function We(Te,De,ce,xe,se){re(!!De,"must specify image data"),re(typeof Te=="number"&&Te===(Te|0)&&Te>=0&&Te<6,"invalid face");var Fe=ce|0,He=xe|0,d=se|0,m=un();return Xt(m,ee),m.width=0,m.height=0,St(m,De),m.width=m.width||(ee.width>>d)-Fe,m.height=m.height||(ee.height>>d)-He,re(ee.type===m.type&&ee.format===m.format&&ee.internalformat===m.internalformat,"incompatible format for texture.subimage"),re(Fe>=0&&He>=0&&Fe+m.width<=ee.width&&He+m.height<=ee.height,"texture.subimage write out of bounds"),re(ee.mipmask&1<<d,"missing mipmap data"),re(m.data||m.element||m.needsCopy,"missing image data"),ai(ee),Cn(m,pt+Te,Fe,He,d),Nr(),Qn(m),Ue}function Pe(Te){var De=Te|0;if(De!==ee.width){Ue.width=ee.width=De,Ue.height=ee.height=De,ai(ee);for(var ce=0;ce<6;++ce)for(var xe=0;ee.mipmask>>xe;++xe)L.texImage2D(pt+ce,xe,ee.format,De>>xe,De>>xe,0,ee.format,ee.type,null);return Nr(),at.profile&&(ee.stats.size=Ko(ee.internalformat,ee.type,Ue.width,Ue.height,!1,!0)),Ue}}return Ue(pe,et,Ye,tn,hr,ue),Ue.subimage=We,Ue.resize=Pe,Ue._reglType="textureCube",Ue._texture=ee,at.profile&&(Ue.stats=ee.stats),Ue.destroy=function(){ee.decRef()},Ue}function lo(){for(var pe=0;pe<ei;++pe)L.activeTexture($l+pe),L.bindTexture(ye,null),xo[pe]=null;ri(mo).forEach(jn),qe.cubeCount=0,qe.textureCount=0}at.profile&&(qe.getTotalTextureSize=function(){var pe=0;return Object.keys(mo).forEach(function(et){pe+=mo[et].stats.size}),pe});function Fa(){for(var pe=0;pe<ei;++pe){var et=xo[pe];et&&(et.bindCount=0,et.unit=-1,xo[pe]=null)}ri(mo).forEach(function(Ye){Ye.texture=L.createTexture(),L.bindTexture(Ye.target,Ye.texture);for(var tn=0;tn<32;++tn)if(Ye.mipmask&1<<tn)if(Ye.target===ye)L.texImage2D(ye,tn,Ye.internalformat,Ye.width>>tn,Ye.height>>tn,0,Ye.internalformat,Ye.type,null);else for(var hr=0;hr<6;++hr)L.texImage2D(pt+hr,tn,Ye.internalformat,Ye.width>>tn,Ye.height>>tn,0,Ye.internalformat,Ye.type,null);$o(Ye.texInfo,Ye.target)})}function Zl(){for(var pe=0;pe<ei;++pe){var et=xo[pe];et&&(et.bindCount=0,et.unit=-1,xo[pe]=null),L.activeTexture($l+pe),L.bindTexture(ye,null),L.bindTexture(Ge,null)}}return{create2D:fr,createCube:Wn,clear:lo,getTexture:function(pe){return null},restore:Fa,refresh:Zl}}var io=36161,Nn=32854,ao=32855,$c=36194,ml=33189,Jf=36168,wo=34041,So=35907,Zd=34836,Jd=34842,Bc=34843,Fi=[];Fi[Nn]=2,Fi[ao]=2,Fi[$c]=2,Fi[ml]=2,Fi[Jf]=1,Fi[wo]=4,Fi[So]=4,Fi[Zd]=16,Fi[Jd]=8,Fi[Bc]=6;function Qf(L,ie,be){return Fi[L]*ie*be}var js=function(L,ie,be,Je,ct){var qe={rgba4:Nn,rgb565:$c,"rgb5 a1":ao,depth:ml,stencil:Jf,"depth stencil":wo};ie.ext_srgb&&(qe.srgba=So),ie.ext_color_buffer_half_float&&(qe.rgba16f=Jd,qe.rgb16f=Bc),ie.webgl_color_buffer_float&&(qe.rgba32f=Zd);var at=[];Object.keys(qe).forEach(function(kt){var mt=qe[kt];at[mt]=kt});var Pt=0,Dt={};function Rt(kt){this.id=Pt++,this.refCount=1,this.renderbuffer=kt,this.format=Nn,this.width=0,this.height=0,ct.profile&&(this.stats={size:0})}Rt.prototype.decRef=function(){--this.refCount<=0&&lt(this)};function lt(kt){var mt=kt.renderbuffer;re(mt,"must not double destroy renderbuffer"),L.bindRenderbuffer(io,null),L.deleteRenderbuffer(mt),kt.renderbuffer=null,kt.refCount=0,delete Dt[kt.id],Je.renderbufferCount--}function Vt(kt,mt){var Ve=new Rt(L.createRenderbuffer());Dt[Ve.id]=Ve,Je.renderbufferCount++;function ot(qt,Ot){var Zt=0,xt=0,Wt=Nn;if(typeof qt=="object"&&qt){var _t=qt;if("shape"in _t){var Xt=_t.shape;re(Array.isArray(Xt)&&Xt.length>=2,"invalid renderbuffer shape"),Zt=Xt[0]|0,xt=Xt[1]|0}else"radius"in _t&&(Zt=xt=_t.radius|0),"width"in _t&&(Zt=_t.width|0),"height"in _t&&(xt=_t.height|0);"format"in _t&&(re.parameter(_t.format,qe,"invalid renderbuffer format"),Wt=qe[_t.format])}else typeof qt=="number"?(Zt=qt|0,typeof Ot=="number"?xt=Ot|0:xt=Zt):qt?re.raise("invalid arguments to renderbuffer constructor"):Zt=xt=1;if(re(Zt>0&&xt>0&&Zt<=be.maxRenderbufferSize&&xt<=be.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===Ve.width&&xt===Ve.height&&Wt===Ve.format))return ot.width=Ve.width=Zt,ot.height=Ve.height=xt,Ve.format=Wt,L.bindRenderbuffer(io,Ve.renderbuffer),L.renderbufferStorage(io,Wt,Zt,xt),re(L.getError()===0,"invalid render buffer format"),ct.profile&&(Ve.stats.size=Qf(Ve.format,Ve.width,Ve.height)),ot.format=at[Ve.format],ot}function Lt(qt,Ot){var Zt=qt|0,xt=Ot|0||Zt;return Zt===Ve.width&&xt===Ve.height||(re(Zt>0&&xt>0&&Zt<=be.maxRenderbufferSize&&xt<=be.maxRenderbufferSize,"invalid renderbuffer size"),ot.width=Ve.width=Zt,ot.height=Ve.height=xt,L.bindRenderbuffer(io,Ve.renderbuffer),L.renderbufferStorage(io,Ve.format,Zt,xt),re(L.getError()===0,"invalid render buffer format"),ct.profile&&(Ve.stats.size=Qf(Ve.format,Ve.width,Ve.height))),ot}return ot(kt,mt),ot.resize=Lt,ot._reglType="renderbuffer",ot._renderbuffer=Ve,ct.profile&&(ot.stats=Ve.stats),ot.destroy=function(){Ve.decRef()},ot}ct.profile&&(Je.getTotalRenderbufferSize=function(){var kt=0;return Object.keys(Dt).forEach(function(mt){kt+=Dt[mt].stats.size}),kt});function Ut(){ri(Dt).forEach(function(kt){kt.renderbuffer=L.createRenderbuffer(),L.bindRenderbuffer(io,kt.renderbuffer),L.renderbufferStorage(io,kt.format,kt.width,kt.height)}),L.bindRenderbuffer(io,null)}return{create:Vt,clear:function(){ri(Dt).forEach(lt)},restore:Ut}},Ra=36160,yu=36161,Vl=3553,ja=34069,sh=36064,gl=36096,_a=36128,Qd=33306,ep=36053,ed=36054,ch=36055,fh=36057,dh=36061,tp=36193,Cs=5121,np=5126,Uc=6407,Sr=6408,Xv=6402,rp=[Uc,Sr],mu=[];mu[Sr]=4,mu[Uc]=3;var Gc=[];Gc[Cs]=1,Gc[np]=4,Gc[tp]=2;var Yv=32854,qv=32855,Ca=36194,op=33189,td=36168,nd=34041,ph=35907,ip=34836,aa=34842,gu=34843,rd=[Yv,qv,Ca,ph,aa,gu,ip],Ju={};Ju[ep]="complete",Ju[ed]="incomplete attachment",Ju[fh]="incomplete dimensions",Ju[ch]="incomplete, missing attachment",Ju[dh]="unsupported";function Vc(L,ie,be,Je,ct,qe){var at={cur:null,next:null,dirty:!1,setFBO:null},Pt=["rgba"],Dt=["rgba4","rgb565","rgb5 a1"];ie.ext_srgb&&Dt.push("srgba"),ie.ext_color_buffer_half_float&&Dt.push("rgba16f","rgb16f"),ie.webgl_color_buffer_float&&Dt.push("rgba32f");var Rt=["uint8"];ie.oes_texture_half_float&&Rt.push("half float","float16"),ie.oes_texture_float&&Rt.push("float","float32");function lt(It,St,wt){this.target=It,this.texture=St,this.renderbuffer=wt;var Cn=0,tr=0;St?(Cn=St.width,tr=St.height):wt&&(Cn=wt.width,tr=wt.height),this.width=Cn,this.height=tr}function Vt(It){It&&(It.texture&&It.texture._texture.decRef(),It.renderbuffer&&It.renderbuffer._renderbuffer.decRef())}function Ut(It,St,wt){if(It)if(It.texture){var Cn=It.texture._texture,tr=Math.max(1,Cn.width),un=Math.max(1,Cn.height);re(tr===St&&un===wt,"inconsistent width/height for supplied texture"),Cn.refCount+=1}else{var Qn=It.renderbuffer._renderbuffer;re(Qn.width===St&&Qn.height===wt,"inconsistent width/height for renderbuffer"),Qn.refCount+=1}}function kt(It,St){St&&(St.texture?L.framebufferTexture2D(Ra,It,St.target,St.texture._texture.texture,0):L.framebufferRenderbuffer(Ra,It,yu,St.renderbuffer._renderbuffer.renderbuffer))}function mt(It){var St=Vl,wt=null,Cn=null,tr=It;typeof It=="object"&&(tr=It.data,"target"in It&&(St=It.target|0)),re.type(tr,"function","invalid attachment data");var un=tr._reglType;return un==="texture2d"?(wt=tr,re(St===Vl)):un==="textureCube"?(wt=tr,re(St>=ja&&St<ja+6,"invalid cube map target")):un==="renderbuffer"?(Cn=tr,St=yu):re.raise("invalid regl object for attachment"),new lt(St,wt,Cn)}function Ve(It,St,wt,Cn,tr){if(wt){var un=Je.create2D({width:It,height:St,format:Cn,type:tr});return un._texture.refCount=0,new lt(Vl,un,null)}else{var Qn=ct.create({width:It,height:St,format:Cn});return Qn._renderbuffer.refCount=0,new lt(yu,null,Qn)}}function ot(It){return It&&(It.texture||It.renderbuffer)}function Lt(It,St,wt){It&&(It.texture?It.texture.resize(St,wt):It.renderbuffer&&It.renderbuffer.resize(St,wt),It.width=St,It.height=wt)}var qt=0,Ot={};function Zt(){this.id=qt++,Ot[this.id]=this,this.framebuffer=L.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function xt(It){It.colorAttachments.forEach(Vt),Vt(It.depthAttachment),Vt(It.stencilAttachment),Vt(It.depthStencilAttachment)}function Wt(It){var St=It.framebuffer;re(St,"must not double destroy framebuffer"),L.deleteFramebuffer(St),It.framebuffer=null,qe.framebufferCount--,delete Ot[It.id]}function _t(It){var St;L.bindFramebuffer(Ra,It.framebuffer);var wt=It.colorAttachments;for(St=0;St<wt.length;++St)kt(sh+St,wt[St]);for(St=wt.length;St<be.maxColorAttachments;++St)L.framebufferTexture2D(Ra,sh+St,Vl,null,0);L.framebufferTexture2D(Ra,Qd,Vl,null,0),L.framebufferTexture2D(Ra,gl,Vl,null,0),L.framebufferTexture2D(Ra,_a,Vl,null,0),kt(gl,It.depthAttachment),kt(_a,It.stencilAttachment),kt(Qd,It.depthStencilAttachment);var Cn=L.checkFramebufferStatus(Ra);!L.isContextLost()&&Cn!==ep&&re.raise("framebuffer configuration not supported, status = "+Ju[Cn]),L.bindFramebuffer(Ra,at.next?at.next.framebuffer:null),at.cur=at.next,L.getError()}function Xt(It,St){var wt=new Zt;qe.framebufferCount++;function Cn(un,Qn){var Gn;re(at.next!==wt,"can not update framebuffer which is currently in use");var rr=0,_r=0,Po=!0,Fo=!0,cr=null,Wo=!0,Qr="rgba",ko="uint8",$o=1,Oo=null,mo=null,ei=null,xo=!1;if(typeof un=="number")rr=un|0,_r=Qn|0||rr;else if(!un)rr=_r=1;else{re.type(un,"object","invalid arguments for framebuffer");var Zn=un;if("shape"in Zn){var ai=Zn.shape;re(Array.isArray(ai)&&ai.length>=2,"invalid shape for framebuffer"),rr=ai[0],_r=ai[1]}else"radius"in Zn&&(rr=_r=Zn.radius),"width"in Zn&&(rr=Zn.width),"height"in Zn&&(_r=Zn.height);("color"in Zn||"colors"in Zn)&&(cr=Zn.color||Zn.colors,Array.isArray(cr)&&re(cr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),cr||("colorCount"in Zn&&($o=Zn.colorCount|0,re($o>0,"invalid color buffer count")),"colorTexture"in Zn&&(Wo=!!Zn.colorTexture,Qr="rgba4"),"colorType"in Zn&&(ko=Zn.colorType,Wo?(re(ie.oes_texture_float||!(ko==="float"||ko==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),re(ie.oes_texture_half_float||!(ko==="half float"||ko==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):ko==="half float"||ko==="float16"?(re(ie.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Qr="rgba16f"):(ko==="float"||ko==="float32")&&(re(ie.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Qr="rgba32f"),re.oneOf(ko,Rt,"invalid color type")),"colorFormat"in Zn&&(Qr=Zn.colorFormat,Pt.indexOf(Qr)>=0?Wo=!0:Dt.indexOf(Qr)>=0?Wo=!1:Wo?re.oneOf(Zn.colorFormat,Pt,"invalid color format for texture"):re.oneOf(Zn.colorFormat,Dt,"invalid color format for renderbuffer"))),("depthTexture"in Zn||"depthStencilTexture"in Zn)&&(xo=!!(Zn.depthTexture||Zn.depthStencilTexture),re(!xo||ie.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Zn&&(typeof Zn.depth=="boolean"?Po=Zn.depth:(Oo=Zn.depth,Fo=!1)),"stencil"in Zn&&(typeof Zn.stencil=="boolean"?Fo=Zn.stencil:(mo=Zn.stencil,Po=!1)),"depthStencil"in Zn&&(typeof Zn.depthStencil=="boolean"?Po=Fo=Zn.depthStencil:(ei=Zn.depthStencil,Po=!1,Fo=!1))}var Nr=null,jn=null,fr=null,Wn=null;if(Array.isArray(cr))Nr=cr.map(mt);else if(cr)Nr=[mt(cr)];else for(Nr=new Array($o),Gn=0;Gn<$o;++Gn)Nr[Gn]=Ve(rr,_r,Wo,Qr,ko);re(ie.webgl_draw_buffers||Nr.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),re(Nr.length<=be.maxColorAttachments,"too many color attachments, not supported"),rr=rr||Nr[0].width,_r=_r||Nr[0].height,Oo?jn=mt(Oo):Po&&!Fo&&(jn=Ve(rr,_r,xo,"depth","uint32")),mo?fr=mt(mo):Fo&&!Po&&(fr=Ve(rr,_r,!1,"stencil","uint8")),ei?Wn=mt(ei):!Oo&&!mo&&Fo&&Po&&(Wn=Ve(rr,_r,xo,"depth stencil","depth stencil")),re(!!Oo+!!mo+!!ei<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var lo=null;for(Gn=0;Gn<Nr.length;++Gn)if(Ut(Nr[Gn],rr,_r),re(!Nr[Gn]||Nr[Gn].texture&&rp.indexOf(Nr[Gn].texture._texture.format)>=0||Nr[Gn].renderbuffer&&rd.indexOf(Nr[Gn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Gn+" is invalid"),Nr[Gn]&&Nr[Gn].texture){var Fa=mu[Nr[Gn].texture._texture.format]*Gc[Nr[Gn].texture._texture.type];lo===null?lo=Fa:re(lo===Fa,"all color attachments much have the same number of bits per pixel.")}return Ut(jn,rr,_r),re(!jn||jn.texture&&jn.texture._texture.format===Xv||jn.renderbuffer&&jn.renderbuffer._renderbuffer.format===op,"invalid depth attachment for framebuffer object"),Ut(fr,rr,_r),re(!fr||fr.renderbuffer&&fr.renderbuffer._renderbuffer.format===td,"invalid stencil attachment for framebuffer object"),Ut(Wn,rr,_r),re(!Wn||Wn.texture&&Wn.texture._texture.format===nd||Wn.renderbuffer&&Wn.renderbuffer._renderbuffer.format===nd,"invalid depth-stencil attachment for framebuffer object"),xt(wt),wt.width=rr,wt.height=_r,wt.colorAttachments=Nr,wt.depthAttachment=jn,wt.stencilAttachment=fr,wt.depthStencilAttachment=Wn,Cn.color=Nr.map(ot),Cn.depth=ot(jn),Cn.stencil=ot(fr),Cn.depthStencil=ot(Wn),Cn.width=wt.width,Cn.height=wt.height,_t(wt),Cn}function tr(un,Qn){re(at.next!==wt,"can not resize a framebuffer which is currently in use");var Gn=Math.max(un|0,1),rr=Math.max(Qn|0||Gn,1);if(Gn===wt.width&&rr===wt.height)return Cn;for(var _r=wt.colorAttachments,Po=0;Po<_r.length;++Po)Lt(_r[Po],Gn,rr);return Lt(wt.depthAttachment,Gn,rr),Lt(wt.stencilAttachment,Gn,rr),Lt(wt.depthStencilAttachment,Gn,rr),wt.width=Cn.width=Gn,wt.height=Cn.height=rr,_t(wt),Cn}return Cn(It,St),o(Cn,{resize:tr,_reglType:"framebuffer",_framebuffer:wt,destroy:function(){Wt(wt),xt(wt)},use:function(un){at.setFBO({framebuffer:Cn},un)}})}function Mn(It){var St=Array(6);function wt(tr){var un;re(St.indexOf(at.next)<0,"can not update framebuffer which is currently in use");var Qn={color:null},Gn=0,rr=null,_r="rgba",Po="uint8",Fo=1;if(typeof tr=="number")Gn=tr|0;else if(!tr)Gn=1;else{re.type(tr,"object","invalid arguments for framebuffer");var cr=tr;if("shape"in cr){var Wo=cr.shape;re(Array.isArray(Wo)&&Wo.length>=2,"invalid shape for framebuffer"),re(Wo[0]===Wo[1],"cube framebuffer must be square"),Gn=Wo[0]}else"radius"in cr&&(Gn=cr.radius|0),"width"in cr?(Gn=cr.width|0,"height"in cr&&re(cr.height===Gn,"must be square")):"height"in cr&&(Gn=cr.height|0);("color"in cr||"colors"in cr)&&(rr=cr.color||cr.colors,Array.isArray(rr)&&re(rr.length===1||ie.webgl_draw_buffers,"multiple render targets not supported")),rr||("colorCount"in cr&&(Fo=cr.colorCount|0,re(Fo>0,"invalid color buffer count")),"colorType"in cr&&(re.oneOf(cr.colorType,Rt,"invalid color type"),Po=cr.colorType),"colorFormat"in cr&&(_r=cr.colorFormat,re.oneOf(cr.colorFormat,Pt,"invalid color format for texture"))),"depth"in cr&&(Qn.depth=cr.depth),"stencil"in cr&&(Qn.stencil=cr.stencil),"depthStencil"in cr&&(Qn.depthStencil=cr.depthStencil)}var Qr;if(rr)if(Array.isArray(rr))for(Qr=[],un=0;un<rr.length;++un)Qr[un]=rr[un];else Qr=[rr];else{Qr=Array(Fo);var ko={radius:Gn,format:_r,type:Po};for(un=0;un<Fo;++un)Qr[un]=Je.createCube(ko)}for(Qn.color=Array(Qr.length),un=0;un<Qr.length;++un){var $o=Qr[un];re(typeof $o=="function"&&$o._reglType==="textureCube","invalid cube map"),Gn=Gn||$o.width,re($o.width===Gn&&$o.height===Gn,"invalid cube map shape"),Qn.color[un]={target:ja,data:Qr[un]}}for(un=0;un<6;++un){for(var Oo=0;Oo<Qr.length;++Oo)Qn.color[Oo].target=ja+un;un>0&&(Qn.depth=St[0].depth,Qn.stencil=St[0].stencil,Qn.depthStencil=St[0].depthStencil),St[un]?St[un](Qn):St[un]=Xt(Qn)}return o(wt,{width:Gn,height:Gn,color:Qr})}function Cn(tr){var un,Qn=tr|0;if(re(Qn>0&&Qn<=be.maxCubeMapSize,"invalid radius for cube fbo"),Qn===wt.width)return wt;var Gn=wt.color;for(un=0;un<Gn.length;++un)Gn[un].resize(Qn);for(un=0;un<6;++un)St[un].resize(Qn);return wt.width=wt.height=Qn,wt}return wt(It),o(wt,{faces:St,resize:Cn,_reglType:"framebufferCube",destroy:function(){St.forEach(function(tr){tr.destroy()})}})}function Vn(){at.cur=null,at.next=null,at.dirty=!0,ri(Ot).forEach(function(It){It.framebuffer=L.createFramebuffer(),_t(It)})}return o(at,{getFramebuffer:function(It){if(typeof It=="function"&&It._reglType==="framebuffer"){var St=It._framebuffer;if(St instanceof Zt)return St}return null},create:Xt,createCube:Mn,clear:function(){ri(Ot).forEach(Wt)},restore:Vn})}var hh=5126,Wc=34962;function od(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=hh,this.offset=0,this.stride=0,this.divisor=0}function id(L,ie,be,Je,ct){for(var qe=be.maxAttributes,at=new Array(qe),Pt=0;Pt<qe;++Pt)at[Pt]=new od;var Dt=0,Rt={},lt={Record:od,scope:{},state:at,currentVAO:null,targetVAO:null,restore:Ut()?Ot:function(){},createVAO:Zt,getVAO:mt,destroyBuffer:Vt,setVAO:Ut()?Ve:ot,clear:Ut()?Lt:function(){}};function Vt(xt){for(var Wt=0;Wt<at.length;++Wt){var _t=at[Wt];_t.buffer===xt&&(L.disableVertexAttribArray(Wt),_t.buffer=null)}}function Ut(){return ie.oes_vertex_array_object}function kt(){return ie.angle_instanced_arrays}function mt(xt){return typeof xt=="function"&&xt._vao?xt._vao:null}function Ve(xt){if(xt!==lt.currentVAO){var Wt=Ut();xt?Wt.bindVertexArrayOES(xt.vao):Wt.bindVertexArrayOES(null),lt.currentVAO=xt}}function ot(xt){if(xt!==lt.currentVAO){if(xt)xt.bindAttrs();else for(var Wt=kt(),_t=0;_t<at.length;++_t){var Xt=at[_t];Xt.buffer?(L.enableVertexAttribArray(_t),L.vertexAttribPointer(_t,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offfset),Wt&&Xt.divisor&&Wt.vertexAttribDivisorANGLE(_t,Xt.divisor)):(L.disableVertexAttribArray(_t),L.vertexAttrib4f(_t,Xt.x,Xt.y,Xt.z,Xt.w))}lt.currentVAO=xt}}function Lt(){ri(Rt).forEach(function(xt){xt.destroy()})}function qt(){this.id=++Dt,this.attributes=[];var xt=Ut();xt?this.vao=xt.createVertexArrayOES():this.vao=null,Rt[this.id]=this,this.buffers=[]}qt.prototype.bindAttrs=function(){for(var xt=kt(),Wt=this.attributes,_t=0;_t<Wt.length;++_t){var Xt=Wt[_t];Xt.buffer?(L.enableVertexAttribArray(_t),L.bindBuffer(Wc,Xt.buffer.buffer),L.vertexAttribPointer(_t,Xt.size,Xt.type,Xt.normalized,Xt.stride,Xt.offset),xt&&Xt.divisor&&xt.vertexAttribDivisorANGLE(_t,Xt.divisor)):(L.disableVertexAttribArray(_t),L.vertexAttrib4f(_t,Xt.x,Xt.y,Xt.z,Xt.w))}for(var Mn=Wt.length;Mn<qe;++Mn)L.disableVertexAttribArray(Mn)},qt.prototype.refresh=function(){var xt=Ut();xt&&(xt.bindVertexArrayOES(this.vao),this.bindAttrs(),lt.currentVAO=this)},qt.prototype.destroy=function(){if(this.vao){var xt=Ut();this===lt.currentVAO&&(lt.currentVAO=null,xt.bindVertexArrayOES(null)),xt.deleteVertexArrayOES(this.vao),this.vao=null}Rt[this.id]&&(delete Rt[this.id],Je.vaoCount-=1)};function Ot(){var xt=Ut();xt&&ri(Rt).forEach(function(Wt){Wt.refresh()})}function Zt(xt){var Wt=new qt;Je.vaoCount+=1;function _t(Xt){re(Array.isArray(Xt),"arguments to vertex array constructor must be an array"),re(Xt.length<qe,"too many attributes"),re(Xt.length>0,"must specify at least one attribute");var Mn={},Vn=Wt.attributes;Vn.length=Xt.length;for(var It=0;It<Xt.length;++It){var St=Xt[It],wt=Vn[It]=new od,Cn=St.data||St;if(Array.isArray(Cn)||n(Cn)||Ni(Cn)){var tr;Wt.buffers[It]&&(tr=Wt.buffers[It],n(Cn)&&tr._buffer.byteLength>=Cn.byteLength?tr.subdata(Cn):(tr.destroy(),Wt.buffers[It]=null)),Wt.buffers[It]||(tr=Wt.buffers[It]=ct.create(St,Wc,!1,!0)),wt.buffer=ct.getBuffer(tr),wt.size=wt.buffer.dimension|0,wt.normalized=!1,wt.type=wt.buffer.dtype,wt.offset=0,wt.stride=0,wt.divisor=0,wt.state=1,Mn[It]=1}else ct.getBuffer(St)?(wt.buffer=ct.getBuffer(St),wt.size=wt.buffer.dimension|0,wt.normalized=!1,wt.type=wt.buffer.dtype,wt.offset=0,wt.stride=0,wt.divisor=0,wt.state=1):ct.getBuffer(St.buffer)?(wt.buffer=ct.getBuffer(St.buffer),wt.size=(+St.size||wt.buffer.dimension)|0,wt.normalized=!!St.normalized||!1,"type"in St?(re.parameter(St.type,Ci,"invalid buffer type"),wt.type=Ci[St.type]):wt.type=wt.buffer.dtype,wt.offset=(St.offset||0)|0,wt.stride=(St.stride||0)|0,wt.divisor=(St.divisor||0)|0,wt.state=1,re(wt.size>=1&&wt.size<=4,"size must be between 1 and 4"),re(wt.offset>=0,"invalid offset"),re(wt.stride>=0&&wt.stride<=255,"stride must be between 0 and 255"),re(wt.divisor>=0,"divisor must be positive"),re(!wt.divisor||!!ie.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in St?(re(It>0,"first attribute must not be a constant"),wt.x=+St.x||0,wt.y=+St.y||0,wt.z=+St.z||0,wt.w=+St.w||0,wt.state=2):re(!1,"invalid attribute spec for location "+It)}for(var un=0;un<Wt.buffers.length;++un)!Mn[un]&&Wt.buffers[un]&&(Wt.buffers[un].destroy(),Wt.buffers[un]=null);return Wt.refresh(),_t}return _t.destroy=function(){for(var Xt=0;Xt<Wt.buffers.length;++Xt)Wt.buffers[Xt]&&Wt.buffers[Xt].destroy();Wt.buffers.length=0,Wt.destroy()},_t._vao=Wt,_t._reglType="vao",_t(xt)}return lt}var ad=35632,_u=35633,vh=35718,bu=35721;function ap(L,ie,be,Je){var ct={},qe={};function at(Ve,ot,Lt,qt){this.name=Ve,this.id=ot,this.location=Lt,this.info=qt}function Pt(Ve,ot){for(var Lt=0;Lt<Ve.length;++Lt)if(Ve[Lt].id===ot.id){Ve[Lt].location=ot.location;return}Ve.push(ot)}function Dt(Ve,ot,Lt){var qt=Ve===ad?ct:qe,Ot=qt[ot];if(!Ot){var Zt=ie.str(ot);Ot=L.createShader(Ve),L.shaderSource(Ot,Zt),L.compileShader(Ot),re.shaderError(L,Ot,Zt,Ve,Lt),qt[ot]=Ot}return Ot}var Rt={},lt=[],Vt=0;function Ut(Ve,ot){this.id=Vt++,this.fragId=Ve,this.vertId=ot,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Je.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kt(Ve,ot,Lt){var qt,Ot,Zt=Dt(ad,Ve.fragId),xt=Dt(_u,Ve.vertId),Wt=Ve.program=L.createProgram();if(L.attachShader(Wt,Zt),L.attachShader(Wt,xt),Lt)for(qt=0;qt<Lt.length;++qt){var _t=Lt[qt];L.bindAttribLocation(Wt,_t[0],_t[1])}L.linkProgram(Wt),re.linkError(L,Wt,ie.str(Ve.fragId),ie.str(Ve.vertId),ot);var Xt=L.getProgramParameter(Wt,vh);Je.profile&&(Ve.stats.uniformsCount=Xt);var Mn=Ve.uniforms;for(qt=0;qt<Xt;++qt)if(Ot=L.getActiveUniform(Wt,qt),Ot)if(Ot.size>1)for(var Vn=0;Vn<Ot.size;++Vn){var It=Ot.name.replace("[0]","["+Vn+"]");Pt(Mn,new at(It,ie.id(It),L.getUniformLocation(Wt,It),Ot))}else Pt(Mn,new at(Ot.name,ie.id(Ot.name),L.getUniformLocation(Wt,Ot.name),Ot));var St=L.getProgramParameter(Wt,bu);Je.profile&&(Ve.stats.attributesCount=St);var wt=Ve.attributes;for(qt=0;qt<St;++qt)Ot=L.getActiveAttrib(Wt,qt),Ot&&Pt(wt,new at(Ot.name,ie.id(Ot.name),L.getAttribLocation(Wt,Ot.name),Ot))}Je.profile&&(be.getMaxUniformsCount=function(){var Ve=0;return lt.forEach(function(ot){ot.stats.uniformsCount>Ve&&(Ve=ot.stats.uniformsCount)}),Ve},be.getMaxAttributesCount=function(){var Ve=0;return lt.forEach(function(ot){ot.stats.attributesCount>Ve&&(Ve=ot.stats.attributesCount)}),Ve});function mt(){ct={},qe={};for(var Ve=0;Ve<lt.length;++Ve)kt(lt[Ve],null,lt[Ve].attributes.map(function(ot){return[ot.location,ot.name]}))}return{clear:function(){var Ve=L.deleteShader.bind(L);ri(ct).forEach(Ve),ct={},ri(qe).forEach(Ve),qe={},lt.forEach(function(ot){L.deleteProgram(ot.program)}),lt.length=0,Rt={},be.shaderCount=0},program:function(Ve,ot,Lt,qt){re.command(Ve>=0,"missing vertex shader",Lt),re.command(ot>=0,"missing fragment shader",Lt);var Ot=Rt[ot];Ot||(Ot=Rt[ot]={});var Zt=Ot[Ve];if(Zt&&(Zt.refCount++,!qt))return Zt;var xt=new Ut(ot,Ve);return be.shaderCount++,kt(xt,Lt,qt),Zt||(Ot[Ve]=xt),lt.push(xt),o(xt,{destroy:function(){if(xt.refCount--,xt.refCount<=0){L.deleteProgram(xt.program);var Wt=lt.indexOf(xt);lt.splice(Wt,1),be.shaderCount--}Ot[xt.vertId].refCount<=0&&(L.deleteShader(qe[xt.vertId]),delete qe[xt.vertId],delete Rt[xt.fragId][xt.vertId]),Object.keys(Rt[xt.fragId]).length||(L.deleteShader(ct[xt.fragId]),delete ct[xt.fragId],delete Rt[xt.fragId])}})},restore:mt,shader:Dt,frag:-1,vert:-1}}var lp=6408,Qu=5121,co=3333,zc=5126;function Eo(L,ie,be,Je,ct,qe,at){function Pt(lt){var Vt;ie.next===null?(re(ct.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Vt=Qu):(re(ie.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Vt=ie.next.colorAttachments[0].texture._texture.type,qe.oes_texture_float?(re(Vt===Qu||Vt===zc,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Vt===zc&&re(at.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):re(Vt===Qu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var Ut=0,kt=0,mt=Je.framebufferWidth,Ve=Je.framebufferHeight,ot=null;n(lt)?ot=lt:lt&&(re.type(lt,"object","invalid arguments to regl.read()"),Ut=lt.x|0,kt=lt.y|0,re(Ut>=0&&Ut<Je.framebufferWidth,"invalid x offset for regl.read"),re(kt>=0&&kt<Je.framebufferHeight,"invalid y offset for regl.read"),mt=(lt.width||Je.framebufferWidth-Ut)|0,Ve=(lt.height||Je.framebufferHeight-kt)|0,ot=lt.data||null),ot&&(Vt===Qu?re(ot instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Vt===zc&&re(ot instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),re(mt>0&&mt+Ut<=Je.framebufferWidth,"invalid width for read pixels"),re(Ve>0&&Ve+kt<=Je.framebufferHeight,"invalid height for read pixels"),be();var Lt=mt*Ve*4;return ot||(Vt===Qu?ot=new Uint8Array(Lt):Vt===zc&&(ot=ot||new Float32Array(Lt))),re.isTypedArray(ot,"data buffer for regl.read() must be a typedarray"),re(ot.byteLength>=Lt,"data buffer for regl.read() too small"),L.pixelStorei(co,4),L.readPixels(Ut,kt,mt,Ve,lp,Vt,ot),ot}function Dt(lt){var Vt;return ie.setFBO({framebuffer:lt.framebuffer},function(){Vt=Pt(lt)}),Vt}function Rt(lt){return!lt||!("framebuffer"in lt)?Pt(lt):Dt(lt)}return Rt}function Wl(L){return Array.prototype.slice.call(L)}function di(L){return Wl(L).join("")}function _l(){var L=0,ie=[],be=[];function Je(Vt){for(var Ut=0;Ut<be.length;++Ut)if(be[Ut]===Vt)return ie[Ut];var kt="g"+L++;return ie.push(kt),be.push(Vt),kt}function ct(){var Vt=[];function Ut(){Vt.push.apply(Vt,Wl(arguments))}var kt=[];function mt(){var Ve="v"+L++;return kt.push(Ve),arguments.length>0&&(Vt.push(Ve,"="),Vt.push.apply(Vt,Wl(arguments)),Vt.push(";")),Ve}return o(Ut,{def:mt,toString:function(){return di([kt.length>0?"var "+kt.join(",")+";":"",di(Vt)])}})}function qe(){var Vt=ct(),Ut=ct(),kt=Vt.toString,mt=Ut.toString;function Ve(ot,Lt){Ut(ot,Lt,"=",Vt.def(ot,Lt),";")}return o(function(){Vt.apply(Vt,Wl(arguments))},{def:Vt.def,entry:Vt,exit:Ut,save:Ve,set:function(ot,Lt,qt){Ve(ot,Lt),Vt(ot,Lt,"=",qt,";")},toString:function(){return kt()+mt()}})}function at(){var Vt=di(arguments),Ut=qe(),kt=qe(),mt=Ut.toString,Ve=kt.toString;return o(Ut,{then:function(){return Ut.apply(Ut,Wl(arguments)),this},else:function(){return kt.apply(kt,Wl(arguments)),this},toString:function(){var ot=Ve();return ot&&(ot="else{"+ot+"}"),di(["if(",Vt,"){",mt(),"}",ot])}})}var Pt=ct(),Dt={};function Rt(Vt,Ut){var kt=[];function mt(){var Ot="a"+kt.length;return kt.push(Ot),Ot}Ut=Ut||0;for(var Ve=0;Ve<Ut;++Ve)mt();var ot=qe(),Lt=ot.toString,qt=Dt[Vt]=o(ot,{arg:mt,toString:function(){return di(["function(",kt.join(),"){",Lt(),"}"])}});return qt}function lt(){var Vt=['"use strict";',Pt,"return {"];Object.keys(Dt).forEach(function(mt){Vt.push('"',mt,'":',Dt[mt].toString(),",")}),Vt.push("}");var Ut=di(Vt).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),kt=Function.apply(null,ie.concat(Ut));return kt.apply(null,be)}return{global:Pt,link:Je,block:ct,proc:Rt,scope:qe,cond:at,compile:lt}}var zl="xyzw".split(""),wu=5121,es=1,ld=2,ud=0,bl=1,ts=2,sd=3,Hc=4,Eu=5,up=6,Ds="dither",cd="blend.enable",Xc="blend.color",wl="blend.equation",Is="blend.func",Yc="depth.enable",qc="depth.func",fd="depth.range",dd="depth.mask",Za="colorMask",sp="cull.enable",cp="cull.face",fp="frontFace",pd="lineWidth",El="polygonOffset.enable",Kc="polygonOffset.offset",hd="sample.alpha",vd="sample.enable",Ls="sample.coverage",Hl="stencil.enable",Jn="stencil.mask",Fs="stencil.func",Zc="stencil.opFront",Ja="stencil.opBack",$s="scissor.enable",Bs="scissor.box",Ao="viewport",Us="profile",Ou="framebuffer",Jc="vert",no="frag",Lo="elements",Xl="primitive",Qa="count",el="offset",xu="instances",Ol="vao",Gs="Width",Qc="Height",Su=Ou+Gs,Vs=Ou+Qc,Nt=Ao+Gs,dp=Ao+Qc,ns="drawingBuffer",ef=ns+Gs,yd=ns+Qc,pp=[Is,wl,Fs,Zc,Ja,Ls,Ao,Bs,Kc],xl=34962,hp=34963,tl=35632,Au=35633,md=3553,yh=34067,mh=2884,gh=3042,vp=3024,yp=2960,mp=2929,gp=3089,_h=32823,bh=32926,wh=32928,$i=5126,rs=35664,tf=35665,la=35666,Da=5124,gd=35667,Bi=35668,nf=35669,os=35670,Ws=35671,rf=35672,of=35673,zs=35674,Hs=35675,is=35676,Yl=35678,Zo=35680,af=4,lf=1028,ql=1029,_p=2304,Ui=2305,Jo=32775,Eh=32776,Ia=519,Ln=7680,_d=0,as=1,bd=32774,Oh=513,Xs=36160,xh=36064,nl={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ys=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],ls={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},rl={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Sh={frag:tl,vert:Au},bp={cw:_p,ccw:Ui};function Tu(L){return Array.isArray(L)||n(L)||Ni(L)}function Sl(L){return L.sort(function(ie,be){return ie===Ao?-1:be===Ao?1:ie<be?-1:1})}function Gi(L,ie,be,Je){this.thisDep=L,this.contextDep=ie,this.propDep=be,this.append=Je}function Un(L){return L&&!(L.thisDep||L.contextDep||L.propDep)}function To(L){return new Gi(!1,!1,!1,L)}function Pi(L,ie){var be=L.type;if(be===ud){var Je=L.data.length;return new Gi(!0,Je>=1,Je>=2,ie)}else if(be===Hc){var ct=L.data;return new Gi(ct.thisDep,ct.contextDep,ct.propDep,ie)}else{if(be===Eu)return new Gi(!1,!1,!1,ie);if(be===up){for(var qe=!1,at=!1,Pt=!1,Dt=0;Dt<L.data.length;++Dt){var Rt=L.data[Dt];if(Rt.type===bl)Pt=!0;else if(Rt.type===ts)at=!0;else if(Rt.type===sd)qe=!0;else if(Rt.type===ud){qe=!0;var lt=Rt.data;lt>=1&&(at=!0),lt>=2&&(Pt=!0)}else Rt.type===Hc&&(qe=qe||Rt.data.thisDep,at=at||Rt.data.contextDep,Pt=Pt||Rt.data.propDep)}return new Gi(qe,at,Pt,ie)}else return new Gi(be===sd,be===ts,be===bl,ie)}}var ua=new Gi(!1,!1,!1,function(){});function Kv(L,ie,be,Je,ct,qe,at,Pt,Dt,Rt,lt,Vt,Ut,kt,mt){var Ve=Rt.Record,ot={add:32774,subtract:32778,"reverse subtract":32779};be.ext_blend_minmax&&(ot.min=Jo,ot.max=Eh);var Lt=be.angle_instanced_arrays,qt=be.webgl_draw_buffers,Ot={dirty:!0,profile:mt.profile},Zt={},xt=[],Wt={},_t={};function Xt(ue){return ue.replace(".","_")}function Mn(ue,ee,Ae){var Ue=Xt(ue);xt.push(ue),Zt[Ue]=Ot[Ue]=!!Ae,Wt[Ue]=ee}function Vn(ue,ee,Ae){var Ue=Xt(ue);xt.push(ue),Array.isArray(Ae)?(Ot[Ue]=Ae.slice(),Zt[Ue]=Ae.slice()):Ot[Ue]=Zt[Ue]=Ae,_t[Ue]=ee}Mn(Ds,vp),Mn(cd,gh),Vn(Xc,"blendColor",[0,0,0,0]),Vn(wl,"blendEquationSeparate",[bd,bd]),Vn(Is,"blendFuncSeparate",[as,_d,as,_d]),Mn(Yc,mp,!0),Vn(qc,"depthFunc",Oh),Vn(fd,"depthRange",[0,1]),Vn(dd,"depthMask",!0),Vn(Za,Za,[!0,!0,!0,!0]),Mn(sp,mh),Vn(cp,"cullFace",ql),Vn(fp,fp,Ui),Vn(pd,pd,1),Mn(El,_h),Vn(Kc,"polygonOffset",[0,0]),Mn(hd,bh),Mn(vd,wh),Vn(Ls,"sampleCoverage",[1,!1]),Mn(Hl,yp),Vn(Jn,"stencilMask",-1),Vn(Fs,"stencilFunc",[Ia,0,-1]),Vn(Zc,"stencilOpSeparate",[lf,Ln,Ln,Ln]),Vn(Ja,"stencilOpSeparate",[ql,Ln,Ln,Ln]),Mn($s,gp),Vn(Bs,"scissor",[0,0,L.drawingBufferWidth,L.drawingBufferHeight]),Vn(Ao,Ao,[0,0,L.drawingBufferWidth,L.drawingBufferHeight]);var It={gl:L,context:Ut,strings:ie,next:Zt,current:Ot,draw:Vt,elements:qe,buffer:ct,shader:lt,attributes:Rt.state,vao:Rt,uniforms:Dt,framebuffer:Pt,extensions:be,timer:kt,isBufferArgs:Tu},St={primTypes:Yo,compareFuncs:ls,blendFuncs:nl,blendEquations:ot,stencilOps:rl,glTypes:Ci,orientationType:bp};re.optional(function(){It.isArrayLike=M}),qt&&(St.backBuffer=[ql],St.drawBuffer=Rr(Je.maxDrawbuffers,function(ue){return ue===0?[0]:Rr(ue,function(ee){return xh+ee})}));var wt=0;function Cn(){var ue=_l(),ee=ue.link,Ae=ue.global;ue.id=wt++,ue.batchId="0";var Ue=ee(It),We=ue.shared={props:"a0"};Object.keys(It).forEach(function(xe){We[xe]=Ae.def(Ue,".",xe)}),re.optional(function(){ue.CHECK=ee(re),ue.commandStr=re.guessCommand(),ue.command=ee(ue.commandStr),ue.assert=function(xe,se,Fe){xe("if(!(",se,"))",this.CHECK,".commandRaise(",ee(Fe),",",this.command,");")},St.invalidBlendCombinations=Ys});var Pe=ue.next={},Te=ue.current={};Object.keys(_t).forEach(function(xe){Array.isArray(Ot[xe])&&(Pe[xe]=Ae.def(We.next,".",xe),Te[xe]=Ae.def(We.current,".",xe))});var De=ue.constants={};Object.keys(St).forEach(function(xe){De[xe]=Ae.def(JSON.stringify(St[xe]))}),ue.invoke=function(xe,se){switch(se.type){case ud:var Fe=["this",We.context,We.props,ue.batchId];return xe.def(ee(se.data),".call(",Fe.slice(0,Math.max(se.data.length+1,4)),")");case bl:return xe.def(We.props,se.data);case ts:return xe.def(We.context,se.data);case sd:return xe.def("this",se.data);case Hc:return se.data.append(ue,xe),se.data.ref;case Eu:return se.data.toString();case up:return se.data.map(function(He){return ue.invoke(xe,He)})}},ue.attribCache={};var ce={};return ue.scopeAttrib=function(xe){var se=ie.id(xe);if(se in ce)return ce[se];var Fe=Rt.scope[se];Fe||(Fe=Rt.scope[se]=new Ve);var He=ce[se]=ee(Fe);return He},ue}function tr(ue){var ee=ue.static,Ae=ue.dynamic,Ue;if(Us in ee){var We=!!ee[Us];Ue=To(function(Te,De){return We}),Ue.enable=We}else if(Us in Ae){var Pe=Ae[Us];Ue=Pi(Pe,function(Te,De){return Te.invoke(De,Pe)})}return Ue}function un(ue,ee){var Ae=ue.static,Ue=ue.dynamic;if(Ou in Ae){var We=Ae[Ou];return We?(We=Pt.getFramebuffer(We),re.command(We,"invalid framebuffer object"),To(function(Te,De){var ce=Te.link(We),xe=Te.shared;De.set(xe.framebuffer,".next",ce);var se=xe.context;return De.set(se,"."+Su,ce+".width"),De.set(se,"."+Vs,ce+".height"),ce})):To(function(Te,De){var ce=Te.shared;De.set(ce.framebuffer,".next","null");var xe=ce.context;return De.set(xe,"."+Su,xe+"."+ef),De.set(xe,"."+Vs,xe+"."+yd),"null"})}else if(Ou in Ue){var Pe=Ue[Ou];return Pi(Pe,function(Te,De){var ce=Te.invoke(De,Pe),xe=Te.shared,se=xe.framebuffer,Fe=De.def(se,".getFramebuffer(",ce,")");re.optional(function(){Te.assert(De,"!"+ce+"||"+Fe,"invalid framebuffer object")}),De.set(se,".next",Fe);var He=xe.context;return De.set(He,"."+Su,Fe+"?"+Fe+".width:"+He+"."+ef),De.set(He,"."+Vs,Fe+"?"+Fe+".height:"+He+"."+yd),Fe})}else return null}function Qn(ue,ee,Ae){var Ue=ue.static,We=ue.dynamic;function Pe(ce){if(ce in Ue){var xe=Ue[ce];re.commandType(xe,"object","invalid "+ce,Ae.commandStr);var se=!0,Fe=xe.x|0,He=xe.y|0,d,m;return"width"in xe?(d=xe.width|0,re.command(d>=0,"invalid "+ce,Ae.commandStr)):se=!1,"height"in xe?(m=xe.height|0,re.command(m>=0,"invalid "+ce,Ae.commandStr)):se=!1,new Gi(!se&&ee&&ee.thisDep,!se&&ee&&ee.contextDep,!se&&ee&&ee.propDep,function(V,Q){var fe=V.shared.context,Ee=d;"width"in xe||(Ee=Q.def(fe,".",Su,"-",Fe));var Ie=m;return"height"in xe||(Ie=Q.def(fe,".",Vs,"-",He)),[Fe,He,Ee,Ie]})}else if(ce in We){var E=We[ce],j=Pi(E,function(V,Q){var fe=V.invoke(Q,E);re.optional(function(){V.assert(Q,fe+"&&typeof "+fe+'==="object"',"invalid "+ce)});var Ee=V.shared.context,Ie=Q.def(fe,".x|0"),ft=Q.def(fe,".y|0"),vt=Q.def('"width" in ',fe,"?",fe,".width|0:","(",Ee,".",Su,"-",Ie,")"),Gt=Q.def('"height" in ',fe,"?",fe,".height|0:","(",Ee,".",Vs,"-",ft,")");return re.optional(function(){V.assert(Q,vt+">=0&&"+Gt+">=0","invalid "+ce)}),[Ie,ft,vt,Gt]});return ee&&(j.thisDep=j.thisDep||ee.thisDep,j.contextDep=j.contextDep||ee.contextDep,j.propDep=j.propDep||ee.propDep),j}else return ee?new Gi(ee.thisDep,ee.contextDep,ee.propDep,function(V,Q){var fe=V.shared.context;return[0,0,Q.def(fe,".",Su),Q.def(fe,".",Vs)]}):null}var Te=Pe(Ao);if(Te){var De=Te;Te=new Gi(Te.thisDep,Te.contextDep,Te.propDep,function(ce,xe){var se=De.append(ce,xe),Fe=ce.shared.context;return xe.set(Fe,"."+Nt,se[2]),xe.set(Fe,"."+dp,se[3]),se})}return{viewport:Te,scissor_box:Pe(Bs)}}function Gn(ue,ee){var Ae=ue.static,Ue=typeof Ae[no]=="string"&&typeof Ae[Jc]=="string";if(Ue){if(Object.keys(ee.dynamic).length>0)return null;var We=ee.static,Pe=Object.keys(We);if(Pe.length>0&&typeof We[Pe[0]]=="number"){for(var Te=[],De=0;De<Pe.length;++De)re(typeof We[Pe[De]]=="number","must specify all vertex attribute locations when using vaos"),Te.push([We[Pe[De]]|0,Pe[De]]);return Te}}return null}function rr(ue,ee,Ae){var Ue=ue.static,We=ue.dynamic;function Pe(se){if(se in Ue){var Fe=ie.id(Ue[se]);re.optional(function(){lt.shader(Sh[se],Fe,re.guessCommand())});var He=To(function(){return Fe});return He.id=Fe,He}else if(se in We){var d=We[se];return Pi(d,function(m,E){var j=m.invoke(E,d),V=E.def(m.shared.strings,".id(",j,")");return re.optional(function(){E(m.shared.shader,".shader(",Sh[se],",",V,",",m.command,");")}),V})}return null}var Te=Pe(no),De=Pe(Jc),ce=null,xe;return Un(Te)&&Un(De)?(ce=lt.program(De.id,Te.id,null,Ae),xe=To(function(se,Fe){return se.link(ce)})):xe=new Gi(Te&&Te.thisDep||De&&De.thisDep,Te&&Te.contextDep||De&&De.contextDep,Te&&Te.propDep||De&&De.propDep,function(se,Fe){var He=se.shared.shader,d;Te?d=Te.append(se,Fe):d=Fe.def(He,".",no);var m;De?m=De.append(se,Fe):m=Fe.def(He,".",Jc);var E=He+".program("+m+","+d;return re.optional(function(){E+=","+se.command}),Fe.def(E+")")}),{frag:Te,vert:De,progVar:xe,program:ce}}function _r(ue,ee){var Ae=ue.static,Ue=ue.dynamic;function We(){if(Lo in Ae){var se=Ae[Lo];Tu(se)?se=qe.getElements(qe.create(se,!0)):se&&(se=qe.getElements(se),re.command(se,"invalid elements",ee.commandStr));var Fe=To(function(d,m){if(se){var E=d.link(se);return d.ELEMENTS=E,E}return d.ELEMENTS=null,null});return Fe.value=se,Fe}else if(Lo in Ue){var He=Ue[Lo];return Pi(He,function(d,m){var E=d.shared,j=E.isBufferArgs,V=E.elements,Q=d.invoke(m,He),fe=m.def("null"),Ee=m.def(j,"(",Q,")"),Ie=d.cond(Ee).then(fe,"=",V,".createStream(",Q,");").else(fe,"=",V,".getElements(",Q,");");return re.optional(function(){d.assert(Ie.else,"!"+Q+"||"+fe,"invalid elements")}),m.entry(Ie),m.exit(d.cond(Ee).then(V,".destroyStream(",fe,");")),d.ELEMENTS=fe,fe})}return null}var Pe=We();function Te(){if(Xl in Ae){var se=Ae[Xl];return re.commandParameter(se,Yo,"invalid primitve",ee.commandStr),To(function(He,d){return Yo[se]})}else if(Xl in Ue){var Fe=Ue[Xl];return Pi(Fe,function(He,d){var m=He.constants.primTypes,E=He.invoke(d,Fe);return re.optional(function(){He.assert(d,E+" in "+m,"invalid primitive, must be one of "+Object.keys(Yo))}),d.def(m,"[",E,"]")})}else if(Pe)return Un(Pe)?Pe.value?To(function(He,d){return d.def(He.ELEMENTS,".primType")}):To(function(){return af}):new Gi(Pe.thisDep,Pe.contextDep,Pe.propDep,function(He,d){var m=He.ELEMENTS;return d.def(m,"?",m,".primType:",af)});return null}function De(se,Fe){if(se in Ae){var He=Ae[se]|0;return re.command(!Fe||He>=0,"invalid "+se,ee.commandStr),To(function(m,E){return Fe&&(m.OFFSET=He),He})}else if(se in Ue){var d=Ue[se];return Pi(d,function(m,E){var j=m.invoke(E,d);return Fe&&(m.OFFSET=j,re.optional(function(){m.assert(E,j+">=0","invalid "+se)})),j})}else if(Fe&&Pe)return To(function(m,E){return m.OFFSET="0",0});return null}var ce=De(el,!0);function xe(){if(Qa in Ae){var se=Ae[Qa]|0;return re.command(typeof se=="number"&&se>=0,"invalid vertex count",ee.commandStr),To(function(){return se})}else if(Qa in Ue){var Fe=Ue[Qa];return Pi(Fe,function(m,E){var j=m.invoke(E,Fe);return re.optional(function(){m.assert(E,"typeof "+j+'==="number"&&'+j+">=0&&"+j+"===("+j+"|0)","invalid vertex count")}),j})}else if(Pe)if(Un(Pe)){if(Pe)return ce?new Gi(ce.thisDep,ce.contextDep,ce.propDep,function(m,E){var j=E.def(m.ELEMENTS,".vertCount-",m.OFFSET);return re.optional(function(){m.assert(E,j+">=0","invalid vertex offset/element buffer too small")}),j}):To(function(m,E){return E.def(m.ELEMENTS,".vertCount")});var He=To(function(){return-1});return re.optional(function(){He.MISSING=!0}),He}else{var d=new Gi(Pe.thisDep||ce.thisDep,Pe.contextDep||ce.contextDep,Pe.propDep||ce.propDep,function(m,E){var j=m.ELEMENTS;return m.OFFSET?E.def(j,"?",j,".vertCount-",m.OFFSET,":-1"):E.def(j,"?",j,".vertCount:-1")});return re.optional(function(){d.DYNAMIC=!0}),d}return null}return{elements:Pe,primitive:Te(),count:xe(),instances:De(xu,!1),offset:ce}}function Po(ue,ee){var Ae=ue.static,Ue=ue.dynamic,We={};return xt.forEach(function(Pe){var Te=Xt(Pe);function De(ce,xe){if(Pe in Ae){var se=ce(Ae[Pe]);We[Te]=To(function(){return se})}else if(Pe in Ue){var Fe=Ue[Pe];We[Te]=Pi(Fe,function(He,d){return xe(He,d,He.invoke(d,Fe))})}}switch(Pe){case sp:case cd:case Ds:case Hl:case Yc:case $s:case El:case hd:case vd:case dd:return De(function(ce){return re.commandType(ce,"boolean",Pe,ee.commandStr),ce},function(ce,xe,se){return re.optional(function(){ce.assert(xe,"typeof "+se+'==="boolean"',"invalid flag "+Pe,ce.commandStr)}),se});case qc:return De(function(ce){return re.commandParameter(ce,ls,"invalid "+Pe,ee.commandStr),ls[ce]},function(ce,xe,se){var Fe=ce.constants.compareFuncs;return re.optional(function(){ce.assert(xe,se+" in "+Fe,"invalid "+Pe+", must be one of "+Object.keys(ls))}),xe.def(Fe,"[",se,"]")});case fd:return De(function(ce){return re.command(M(ce)&&ce.length===2&&typeof ce[0]=="number"&&typeof ce[1]=="number"&&ce[0]<=ce[1],"depth range is 2d array",ee.commandStr),ce},function(ce,xe,se){re.optional(function(){ce.assert(xe,ce.shared.isArrayLike+"("+se+")&&"+se+".length===2&&typeof "+se+'[0]==="number"&&typeof '+se+'[1]==="number"&&'+se+"[0]<="+se+"[1]","depth range must be a 2d array")});var Fe=xe.def("+",se,"[0]"),He=xe.def("+",se,"[1]");return[Fe,He]});case Is:return De(function(ce){re.commandType(ce,"object","blend.func",ee.commandStr);var xe="srcRGB"in ce?ce.srcRGB:ce.src,se="srcAlpha"in ce?ce.srcAlpha:ce.src,Fe="dstRGB"in ce?ce.dstRGB:ce.dst,He="dstAlpha"in ce?ce.dstAlpha:ce.dst;return re.commandParameter(xe,nl,Te+".srcRGB",ee.commandStr),re.commandParameter(se,nl,Te+".srcAlpha",ee.commandStr),re.commandParameter(Fe,nl,Te+".dstRGB",ee.commandStr),re.commandParameter(He,nl,Te+".dstAlpha",ee.commandStr),re.command(Ys.indexOf(xe+", "+Fe)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+xe+", "+Fe+")",ee.commandStr),[nl[xe],nl[Fe],nl[se],nl[He]]},function(ce,xe,se){var Fe=ce.constants.blendFuncs;re.optional(function(){ce.assert(xe,se+"&&typeof "+se+'==="object"',"invalid blend func, must be an object")});function He(fe,Ee){var Ie=xe.def('"',fe,Ee,'" in ',se,"?",se,".",fe,Ee,":",se,".",fe);return re.optional(function(){ce.assert(xe,Ie+" in "+Fe,"invalid "+Pe+"."+fe+Ee+", must be one of "+Object.keys(nl))}),Ie}var d=He("src","RGB"),m=He("dst","RGB");re.optional(function(){var fe=ce.constants.invalidBlendCombinations;ce.assert(xe,fe+".indexOf("+d+'+", "+'+m+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var E=xe.def(Fe,"[",d,"]"),j=xe.def(Fe,"[",He("src","Alpha"),"]"),V=xe.def(Fe,"[",m,"]"),Q=xe.def(Fe,"[",He("dst","Alpha"),"]");return[E,V,j,Q]});case wl:return De(function(ce){if(typeof ce=="string")return re.commandParameter(ce,ot,"invalid "+Pe,ee.commandStr),[ot[ce],ot[ce]];if(typeof ce=="object")return re.commandParameter(ce.rgb,ot,Pe+".rgb",ee.commandStr),re.commandParameter(ce.alpha,ot,Pe+".alpha",ee.commandStr),[ot[ce.rgb],ot[ce.alpha]];re.commandRaise("invalid blend.equation",ee.commandStr)},function(ce,xe,se){var Fe=ce.constants.blendEquations,He=xe.def(),d=xe.def(),m=ce.cond("typeof ",se,'==="string"');return re.optional(function(){function E(j,V,Q){ce.assert(j,Q+" in "+Fe,"invalid "+V+", must be one of "+Object.keys(ot))}E(m.then,Pe,se),ce.assert(m.else,se+"&&typeof "+se+'==="object"',"invalid "+Pe),E(m.else,Pe+".rgb",se+".rgb"),E(m.else,Pe+".alpha",se+".alpha")}),m.then(He,"=",d,"=",Fe,"[",se,"];"),m.else(He,"=",Fe,"[",se,".rgb];",d,"=",Fe,"[",se,".alpha];"),xe(m),[He,d]});case Xc:return De(function(ce){return re.command(M(ce)&&ce.length===4,"blend.color must be a 4d array",ee.commandStr),Rr(4,function(xe){return+ce[xe]})},function(ce,xe,se){return re.optional(function(){ce.assert(xe,ce.shared.isArrayLike+"("+se+")&&"+se+".length===4","blend.color must be a 4d array")}),Rr(4,function(Fe){return xe.def("+",se,"[",Fe,"]")})});case Jn:return De(function(ce){return re.commandType(ce,"number",Te,ee.commandStr),ce|0},function(ce,xe,se){return re.optional(function(){ce.assert(xe,"typeof "+se+'==="number"',"invalid stencil.mask")}),xe.def(se,"|0")});case Fs:return De(function(ce){re.commandType(ce,"object",Te,ee.commandStr);var xe=ce.cmp||"keep",se=ce.ref||0,Fe="mask"in ce?ce.mask:-1;return re.commandParameter(xe,ls,Pe+".cmp",ee.commandStr),re.commandType(se,"number",Pe+".ref",ee.commandStr),re.commandType(Fe,"number",Pe+".mask",ee.commandStr),[ls[xe],se,Fe]},function(ce,xe,se){var Fe=ce.constants.compareFuncs;re.optional(function(){function E(){ce.assert(xe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}E(se+"&&typeof ",se,'==="object"'),E('!("cmp" in ',se,")||(",se,".cmp in ",Fe,")")});var He=xe.def('"cmp" in ',se,"?",Fe,"[",se,".cmp]",":",Ln),d=xe.def(se,".ref|0"),m=xe.def('"mask" in ',se,"?",se,".mask|0:-1");return[He,d,m]});case Zc:case Ja:return De(function(ce){re.commandType(ce,"object",Te,ee.commandStr);var xe=ce.fail||"keep",se=ce.zfail||"keep",Fe=ce.zpass||"keep";return re.commandParameter(xe,rl,Pe+".fail",ee.commandStr),re.commandParameter(se,rl,Pe+".zfail",ee.commandStr),re.commandParameter(Fe,rl,Pe+".zpass",ee.commandStr),[Pe===Ja?ql:lf,rl[xe],rl[se],rl[Fe]]},function(ce,xe,se){var Fe=ce.constants.stencilOps;re.optional(function(){ce.assert(xe,se+"&&typeof "+se+'==="object"',"invalid "+Pe)});function He(d){return re.optional(function(){ce.assert(xe,'!("'+d+'" in '+se+")||("+se+"."+d+" in "+Fe+")","invalid "+Pe+"."+d+", must be one of "+Object.keys(rl))}),xe.def('"',d,'" in ',se,"?",Fe,"[",se,".",d,"]:",Ln)}return[Pe===Ja?ql:lf,He("fail"),He("zfail"),He("zpass")]});case Kc:return De(function(ce){re.commandType(ce,"object",Te,ee.commandStr);var xe=ce.factor|0,se=ce.units|0;return re.commandType(xe,"number",Te+".factor",ee.commandStr),re.commandType(se,"number",Te+".units",ee.commandStr),[xe,se]},function(ce,xe,se){re.optional(function(){ce.assert(xe,se+"&&typeof "+se+'==="object"',"invalid "+Pe)});var Fe=xe.def(se,".factor|0"),He=xe.def(se,".units|0");return[Fe,He]});case cp:return De(function(ce){var xe=0;return ce==="front"?xe=lf:ce==="back"&&(xe=ql),re.command(!!xe,Te,ee.commandStr),xe},function(ce,xe,se){return re.optional(function(){ce.assert(xe,se+'==="front"||'+se+'==="back"',"invalid cull.face")}),xe.def(se,'==="front"?',lf,":",ql)});case pd:return De(function(ce){return re.command(typeof ce=="number"&&ce>=Je.lineWidthDims[0]&&ce<=Je.lineWidthDims[1],"invalid line width, must be a positive number between "+Je.lineWidthDims[0]+" and "+Je.lineWidthDims[1],ee.commandStr),ce},function(ce,xe,se){return re.optional(function(){ce.assert(xe,"typeof "+se+'==="number"&&'+se+">="+Je.lineWidthDims[0]+"&&"+se+"<="+Je.lineWidthDims[1],"invalid line width")}),se});case fp:return De(function(ce){return re.commandParameter(ce,bp,Te,ee.commandStr),bp[ce]},function(ce,xe,se){return re.optional(function(){ce.assert(xe,se+'==="cw"||'+se+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),xe.def(se+'==="cw"?'+_p+":"+Ui)});case Za:return De(function(ce){return re.command(M(ce)&&ce.length===4,"color.mask must be length 4 array",ee.commandStr),ce.map(function(xe){return!!xe})},function(ce,xe,se){return re.optional(function(){ce.assert(xe,ce.shared.isArrayLike+"("+se+")&&"+se+".length===4","invalid color.mask")}),Rr(4,function(Fe){return"!!"+se+"["+Fe+"]"})});case Ls:return De(function(ce){re.command(typeof ce=="object"&&ce,Te,ee.commandStr);var xe="value"in ce?ce.value:1,se=!!ce.invert;return re.command(typeof xe=="number"&&xe>=0&&xe<=1,"sample.coverage.value must be a number between 0 and 1",ee.commandStr),[xe,se]},function(ce,xe,se){re.optional(function(){ce.assert(xe,se+"&&typeof "+se+'==="object"',"invalid sample.coverage")});var Fe=xe.def('"value" in ',se,"?+",se,".value:1"),He=xe.def("!!",se,".invert");return[Fe,He]})}}),We}function Fo(ue,ee){var Ae=ue.static,Ue=ue.dynamic,We={};return Object.keys(Ae).forEach(function(Pe){var Te=Ae[Pe],De;if(typeof Te=="number"||typeof Te=="boolean")De=To(function(){return Te});else if(typeof Te=="function"){var ce=Te._reglType;ce==="texture2d"||ce==="textureCube"?De=To(function(xe){return xe.link(Te)}):ce==="framebuffer"||ce==="framebufferCube"?(re.command(Te.color.length>0,'missing color attachment for framebuffer sent to uniform "'+Pe+'"',ee.commandStr),De=To(function(xe){return xe.link(Te.color[0])})):re.commandRaise('invalid data for uniform "'+Pe+'"',ee.commandStr)}else M(Te)?De=To(function(xe){var se=xe.global.def("[",Rr(Te.length,function(Fe){return re.command(typeof Te[Fe]=="number"||typeof Te[Fe]=="boolean","invalid uniform "+Pe,xe.commandStr),Te[Fe]}),"]");return se}):re.commandRaise('invalid or missing data for uniform "'+Pe+'"',ee.commandStr);De.value=Te,We[Pe]=De}),Object.keys(Ue).forEach(function(Pe){var Te=Ue[Pe];We[Pe]=Pi(Te,function(De,ce){return De.invoke(ce,Te)})}),We}function cr(ue,ee){var Ae=ue.static,Ue=ue.dynamic,We={};return Object.keys(Ae).forEach(function(Pe){var Te=Ae[Pe],De=ie.id(Pe),ce=new Ve;if(Tu(Te))ce.state=es,ce.buffer=ct.getBuffer(ct.create(Te,xl,!1,!0)),ce.type=0;else{var xe=ct.getBuffer(Te);if(xe)ce.state=es,ce.buffer=xe,ce.type=0;else if(re.command(typeof Te=="object"&&Te,"invalid data for attribute "+Pe,ee.commandStr),"constant"in Te){var se=Te.constant;ce.buffer="null",ce.state=ld,typeof se=="number"?ce.x=se:(re.command(M(se)&&se.length>0&&se.length<=4,"invalid constant for attribute "+Pe,ee.commandStr),zl.forEach(function(V,Q){Q<se.length&&(ce[V]=se[Q])}))}else{Tu(Te.buffer)?xe=ct.getBuffer(ct.create(Te.buffer,xl,!1,!0)):xe=ct.getBuffer(Te.buffer),re.command(!!xe,'missing buffer for attribute "'+Pe+'"',ee.commandStr);var Fe=Te.offset|0;re.command(Fe>=0,'invalid offset for attribute "'+Pe+'"',ee.commandStr);var He=Te.stride|0;re.command(He>=0&&He<256,'invalid stride for attribute "'+Pe+'", must be integer betweeen [0, 255]',ee.commandStr);var d=Te.size|0;re.command(!("size"in Te)||d>0&&d<=4,'invalid size for attribute "'+Pe+'", must be 1,2,3,4',ee.commandStr);var m=!!Te.normalized,E=0;"type"in Te&&(re.commandParameter(Te.type,Ci,"invalid type for attribute "+Pe,ee.commandStr),E=Ci[Te.type]);var j=Te.divisor|0;"divisor"in Te&&(re.command(j===0||Lt,'cannot specify divisor for attribute "'+Pe+'", instancing not supported',ee.commandStr),re.command(j>=0,'invalid divisor for attribute "'+Pe+'"',ee.commandStr)),re.optional(function(){var V=ee.commandStr,Q=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Te).forEach(function(fe){re.command(Q.indexOf(fe)>=0,'unknown parameter "'+fe+'" for attribute pointer "'+Pe+'" (valid parameters are '+Q+")",V)})}),ce.buffer=xe,ce.state=es,ce.size=d,ce.normalized=m,ce.type=E||xe.dtype,ce.offset=Fe,ce.stride=He,ce.divisor=j}}We[Pe]=To(function(V,Q){var fe=V.attribCache;if(De in fe)return fe[De];var Ee={isStream:!1};return Object.keys(ce).forEach(function(Ie){Ee[Ie]=ce[Ie]}),ce.buffer&&(Ee.buffer=V.link(ce.buffer),Ee.type=Ee.type||Ee.buffer+".dtype"),fe[De]=Ee,Ee})}),Object.keys(Ue).forEach(function(Pe){var Te=Ue[Pe];function De(ce,xe){var se=ce.invoke(xe,Te),Fe=ce.shared,He=ce.constants,d=Fe.isBufferArgs,m=Fe.buffer;re.optional(function(){ce.assert(xe,se+"&&(typeof "+se+'==="object"||typeof '+se+'==="function")&&('+d+"("+se+")||"+m+".getBuffer("+se+")||"+m+".getBuffer("+se+".buffer)||"+d+"("+se+'.buffer)||("constant" in '+se+"&&(typeof "+se+'.constant==="number"||'+Fe.isArrayLike+"("+se+".constant))))",'invalid dynamic attribute "'+Pe+'"')});var E={isStream:xe.def(!1)},j=new Ve;j.state=es,Object.keys(j).forEach(function(Ee){E[Ee]=xe.def(""+j[Ee])});var V=E.buffer,Q=E.type;xe("if(",d,"(",se,")){",E.isStream,"=true;",V,"=",m,".createStream(",xl,",",se,");",Q,"=",V,".dtype;","}else{",V,"=",m,".getBuffer(",se,");","if(",V,"){",Q,"=",V,".dtype;",'}else if("constant" in ',se,"){",E.state,"=",ld,";","if(typeof "+se+'.constant === "number"){',E[zl[0]],"=",se,".constant;",zl.slice(1).map(function(Ee){return E[Ee]}).join("="),"=0;","}else{",zl.map(function(Ee,Ie){return E[Ee]+"="+se+".constant.length>"+Ie+"?"+se+".constant["+Ie+"]:0;"}).join(""),"}}else{","if(",d,"(",se,".buffer)){",V,"=",m,".createStream(",xl,",",se,".buffer);","}else{",V,"=",m,".getBuffer(",se,".buffer);","}",Q,'="type" in ',se,"?",He.glTypes,"[",se,".type]:",V,".dtype;",E.normalized,"=!!",se,".normalized;");function fe(Ee){xe(E[Ee],"=",se,".",Ee,"|0;")}return fe("size"),fe("offset"),fe("stride"),fe("divisor"),xe("}}"),xe.exit("if(",E.isStream,"){",m,".destroyStream(",V,");","}"),E}We[Pe]=Pi(Te,De)}),We}function Wo(ue,ee){var Ae=ue.static,Ue=ue.dynamic;if(Ol in Ae){var We=Ae[Ol];return We!==null&&Rt.getVAO(We)===null&&(We=Rt.createVAO(We)),To(function(Te){return Te.link(Rt.getVAO(We))})}else if(Ol in Ue){var Pe=Ue[Ol];return Pi(Pe,function(Te,De){var ce=Te.invoke(De,Pe);return De.def(Te.shared.vao+".getVAO("+ce+")")})}return null}function Qr(ue){var ee=ue.static,Ae=ue.dynamic,Ue={};return Object.keys(ee).forEach(function(We){var Pe=ee[We];Ue[We]=To(function(Te,De){return typeof Pe=="number"||typeof Pe=="boolean"?""+Pe:Te.link(Pe)})}),Object.keys(Ae).forEach(function(We){var Pe=Ae[We];Ue[We]=Pi(Pe,function(Te,De){return Te.invoke(De,Pe)})}),Ue}function ko(ue,ee,Ae,Ue,We){var Pe=ue.static,Te=ue.dynamic;re.optional(function(){var fe=[Ou,Jc,no,Lo,Xl,el,Qa,xu,Us,Ol].concat(xt);function Ee(Ie){Object.keys(Ie).forEach(function(ft){re.command(fe.indexOf(ft)>=0,'unknown parameter "'+ft+'"',We.commandStr)})}Ee(Pe),Ee(Te)});var De=Gn(ue,ee),ce=un(ue),xe=Qn(ue,ce,We),se=_r(ue,We),Fe=Po(ue,We),He=rr(ue,We,De);function d(fe){var Ee=xe[fe];Ee&&(Fe[fe]=Ee)}d(Ao),d(Xt(Bs));var m=Object.keys(Fe).length>0,E={framebuffer:ce,draw:se,shader:He,state:Fe,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(E.profile=tr(ue),E.uniforms=Fo(Ae,We),E.drawVAO=E.scopeVAO=Wo(ue),!E.drawVAO&&He.program&&!De&&be.angle_instanced_arrays){var j=!0,V=He.program.attributes.map(function(fe){var Ee=ee.static[fe];return j=j&&!!Ee,Ee});if(j&&V.length>0){var Q=Rt.getVAO(Rt.createVAO(V));E.drawVAO=new Gi(null,null,null,function(fe,Ee){return fe.link(Q)}),E.useVAO=!0}}return De?E.useVAO=!0:E.attributes=cr(ee,We),E.context=Qr(Ue),E}function $o(ue,ee,Ae){var Ue=ue.shared,We=Ue.context,Pe=ue.scope();Object.keys(Ae).forEach(function(Te){ee.save(We,"."+Te);var De=Ae[Te],ce=De.append(ue,ee);Array.isArray(ce)?Pe(We,".",Te,"=[",ce.join(),"];"):Pe(We,".",Te,"=",ce,";")}),ee(Pe)}function Oo(ue,ee,Ae,Ue){var We=ue.shared,Pe=We.gl,Te=We.framebuffer,De;qt&&(De=ee.def(We.extensions,".webgl_draw_buffers"));var ce=ue.constants,xe=ce.drawBuffer,se=ce.backBuffer,Fe;Ae?Fe=Ae.append(ue,ee):Fe=ee.def(Te,".next"),Ue||ee("if(",Fe,"!==",Te,".cur){"),ee("if(",Fe,"){",Pe,".bindFramebuffer(",Xs,",",Fe,".framebuffer);"),qt&&ee(De,".drawBuffersWEBGL(",xe,"[",Fe,".colorAttachments.length]);"),ee("}else{",Pe,".bindFramebuffer(",Xs,",null);"),qt&&ee(De,".drawBuffersWEBGL(",se,");"),ee("}",Te,".cur=",Fe,";"),Ue||ee("}")}function mo(ue,ee,Ae){var Ue=ue.shared,We=Ue.gl,Pe=ue.current,Te=ue.next,De=Ue.current,ce=Ue.next,xe=ue.cond(De,".dirty");xt.forEach(function(se){var Fe=Xt(se);if(!(Fe in Ae.state)){var He,d;if(Fe in Te){He=Te[Fe],d=Pe[Fe];var m=Rr(Ot[Fe].length,function(j){return xe.def(He,"[",j,"]")});xe(ue.cond(m.map(function(j,V){return j+"!=="+d+"["+V+"]"}).join("||")).then(We,".",_t[Fe],"(",m,");",m.map(function(j,V){return d+"["+V+"]="+j}).join(";"),";"))}else{He=xe.def(ce,".",Fe);var E=ue.cond(He,"!==",De,".",Fe);xe(E),Fe in Wt?E(ue.cond(He).then(We,".enable(",Wt[Fe],");").else(We,".disable(",Wt[Fe],");"),De,".",Fe,"=",He,";"):E(We,".",_t[Fe],"(",He,");",De,".",Fe,"=",He,";")}}}),Object.keys(Ae.state).length===0&&xe(De,".dirty=false;"),ee(xe)}function ei(ue,ee,Ae,Ue){var We=ue.shared,Pe=ue.current,Te=We.current,De=We.gl;Sl(Object.keys(Ae)).forEach(function(ce){var xe=Ae[ce];if(!(Ue&&!Ue(xe))){var se=xe.append(ue,ee);if(Wt[ce]){var Fe=Wt[ce];Un(xe)?se?ee(De,".enable(",Fe,");"):ee(De,".disable(",Fe,");"):ee(ue.cond(se).then(De,".enable(",Fe,");").else(De,".disable(",Fe,");")),ee(Te,".",ce,"=",se,";")}else if(M(se)){var He=Pe[ce];ee(De,".",_t[ce],"(",se,");",se.map(function(d,m){return He+"["+m+"]="+d}).join(";"),";")}else ee(De,".",_t[ce],"(",se,");",Te,".",ce,"=",se,";")}})}function xo(ue,ee){Lt&&(ue.instancing=ee.def(ue.shared.extensions,".angle_instanced_arrays"))}function Zn(ue,ee,Ae,Ue,We){var Pe=ue.shared,Te=ue.stats,De=Pe.current,ce=Pe.timer,xe=Ae.profile;function se(){return typeof performance>"u"?"Date.now()":"performance.now()"}var Fe,He;function d(fe){Fe=ee.def(),fe(Fe,"=",se(),";"),typeof We=="string"?fe(Te,".count+=",We,";"):fe(Te,".count++;"),kt&&(Ue?(He=ee.def(),fe(He,"=",ce,".getNumPendingQueries();")):fe(ce,".beginQuery(",Te,");"))}function m(fe){fe(Te,".cpuTime+=",se(),"-",Fe,";"),kt&&(Ue?fe(ce,".pushScopeStats(",He,",",ce,".getNumPendingQueries(),",Te,");"):fe(ce,".endQuery();"))}function E(fe){var Ee=ee.def(De,".profile");ee(De,".profile=",fe,";"),ee.exit(De,".profile=",Ee,";")}var j;if(xe){if(Un(xe)){xe.enable?(d(ee),m(ee.exit),E("true")):E("false");return}j=xe.append(ue,ee),E(j)}else j=ee.def(De,".profile");var V=ue.block();d(V),ee("if(",j,"){",V,"}");var Q=ue.block();m(Q),ee.exit("if(",j,"){",Q,"}")}function ai(ue,ee,Ae,Ue,We){var Pe=ue.shared;function Te(ce){switch(ce){case rs:case gd:case Ws:return 2;case tf:case Bi:case rf:return 3;case la:case nf:case of:return 4;default:return 1}}function De(ce,xe,se){var Fe=Pe.gl,He=ee.def(ce,".location"),d=ee.def(Pe.attributes,"[",He,"]"),m=se.state,E=se.buffer,j=[se.x,se.y,se.z,se.w],V=["buffer","normalized","offset","stride"];function Q(){ee("if(!",d,".buffer){",Fe,".enableVertexAttribArray(",He,");}");var Ee=se.type,Ie;if(se.size?Ie=ee.def(se.size,"||",xe):Ie=xe,ee("if(",d,".type!==",Ee,"||",d,".size!==",Ie,"||",V.map(function(vt){return d+"."+vt+"!=="+se[vt]}).join("||"),"){",Fe,".bindBuffer(",xl,",",E,".buffer);",Fe,".vertexAttribPointer(",[He,Ie,Ee,se.normalized,se.stride,se.offset],");",d,".type=",Ee,";",d,".size=",Ie,";",V.map(function(vt){return d+"."+vt+"="+se[vt]+";"}).join(""),"}"),Lt){var ft=se.divisor;ee("if(",d,".divisor!==",ft,"){",ue.instancing,".vertexAttribDivisorANGLE(",[He,ft],");",d,".divisor=",ft,";}")}}function fe(){ee("if(",d,".buffer){",Fe,".disableVertexAttribArray(",He,");",d,".buffer=null;","}if(",zl.map(function(Ee,Ie){return d+"."+Ee+"!=="+j[Ie]}).join("||"),"){",Fe,".vertexAttrib4f(",He,",",j,");",zl.map(function(Ee,Ie){return d+"."+Ee+"="+j[Ie]+";"}).join(""),"}")}m===es?Q():m===ld?fe():(ee("if(",m,"===",es,"){"),Q(),ee("}else{"),fe(),ee("}"))}Ue.forEach(function(ce){var xe=ce.name,se=Ae.attributes[xe],Fe;if(se){if(!We(se))return;Fe=se.append(ue,ee)}else{if(!We(ua))return;var He=ue.scopeAttrib(xe);re.optional(function(){ue.assert(ee,He+".state","missing attribute "+xe)}),Fe={},Object.keys(new Ve).forEach(function(d){Fe[d]=ee.def(He,".",d)})}De(ue.link(ce),Te(ce.info.type),Fe)})}function Nr(ue,ee,Ae,Ue,We){for(var Pe=ue.shared,Te=Pe.gl,De,ce=0;ce<Ue.length;++ce){var xe=Ue[ce],se=xe.name,Fe=xe.info.type,He=Ae.uniforms[se],d=ue.link(xe),m=d+".location",E;if(He){if(!We(He))continue;if(Un(He)){var j=He.value;if(re.command(j!==null&&typeof j<"u",'missing uniform "'+se+'"',ue.commandStr),Fe===Yl||Fe===Zo){re.command(typeof j=="function"&&(Fe===Yl&&(j._reglType==="texture2d"||j._reglType==="framebuffer")||Fe===Zo&&(j._reglType==="textureCube"||j._reglType==="framebufferCube")),"invalid texture for uniform "+se,ue.commandStr);var V=ue.link(j._texture||j.color[0]._texture);ee(Te,".uniform1i(",m,",",V+".bind());"),ee.exit(V,".unbind();")}else if(Fe===zs||Fe===Hs||Fe===is){re.optional(function(){re.command(M(j),"invalid matrix for uniform "+se,ue.commandStr),re.command(Fe===zs&&j.length===4||Fe===Hs&&j.length===9||Fe===is&&j.length===16,"invalid length for matrix uniform "+se,ue.commandStr)});var Q=ue.global.def("new Float32Array(["+Array.prototype.slice.call(j)+"])"),fe=2;Fe===Hs?fe=3:Fe===is&&(fe=4),ee(Te,".uniformMatrix",fe,"fv(",m,",false,",Q,");")}else{switch(Fe){case $i:re.commandType(j,"number","uniform "+se,ue.commandStr),De="1f";break;case rs:re.command(M(j)&&j.length===2,"uniform "+se,ue.commandStr),De="2f";break;case tf:re.command(M(j)&&j.length===3,"uniform "+se,ue.commandStr),De="3f";break;case la:re.command(M(j)&&j.length===4,"uniform "+se,ue.commandStr),De="4f";break;case os:re.commandType(j,"boolean","uniform "+se,ue.commandStr),De="1i";break;case Da:re.commandType(j,"number","uniform "+se,ue.commandStr),De="1i";break;case Ws:re.command(M(j)&&j.length===2,"uniform "+se,ue.commandStr),De="2i";break;case gd:re.command(M(j)&&j.length===2,"uniform "+se,ue.commandStr),De="2i";break;case rf:re.command(M(j)&&j.length===3,"uniform "+se,ue.commandStr),De="3i";break;case Bi:re.command(M(j)&&j.length===3,"uniform "+se,ue.commandStr),De="3i";break;case of:re.command(M(j)&&j.length===4,"uniform "+se,ue.commandStr),De="4i";break;case nf:re.command(M(j)&&j.length===4,"uniform "+se,ue.commandStr),De="4i";break}ee(Te,".uniform",De,"(",m,",",M(j)?Array.prototype.slice.call(j):j,");")}continue}else E=He.append(ue,ee)}else{if(!We(ua))continue;E=ee.def(Pe.uniforms,"[",ie.id(se),"]")}Fe===Yl?(re(!Array.isArray(E),"must specify a scalar prop for textures"),ee("if(",E,"&&",E,'._reglType==="framebuffer"){',E,"=",E,".color[0];","}")):Fe===Zo&&(re(!Array.isArray(E),"must specify a scalar prop for cube maps"),ee("if(",E,"&&",E,'._reglType==="framebufferCube"){',E,"=",E,".color[0];","}")),re.optional(function(){function Gt(Mt,Jt){ue.assert(ee,Mt,'bad data or missing for uniform "'+se+'".  '+Jt)}function An(Mt){re(!Array.isArray(E),"must not specify an array type for uniform"),Gt("typeof "+E+'==="'+Mt+'"',"invalid type, expected "+Mt)}function On(Mt,Jt){Array.isArray(E)?re(E.length===Mt,"must have length "+Mt):Gt(Pe.isArrayLike+"("+E+")&&"+E+".length==="+Mt,"invalid vector, should have length "+Mt,ue.commandStr)}function Xn(Mt){re(!Array.isArray(E),"must not specify a value type"),Gt("typeof "+E+'==="function"&&'+E+'._reglType==="texture'+(Mt===md?"2d":"Cube")+'"',"invalid texture type",ue.commandStr)}switch(Fe){case Da:An("number");break;case gd:On(2);break;case Bi:On(3);break;case nf:On(4);break;case $i:An("number");break;case rs:On(2);break;case tf:On(3);break;case la:On(4);break;case os:An("boolean");break;case Ws:On(2);break;case rf:On(3);break;case of:On(4);break;case zs:On(4);break;case Hs:On(9);break;case is:On(16);break;case Yl:Xn(md);break;case Zo:Xn(yh);break}});var Ee=1;switch(Fe){case Yl:case Zo:var Ie=ee.def(E,"._texture");ee(Te,".uniform1i(",m,",",Ie,".bind());"),ee.exit(Ie,".unbind();");continue;case Da:case os:De="1i";break;case gd:case Ws:De="2i",Ee=2;break;case Bi:case rf:De="3i",Ee=3;break;case nf:case of:De="4i",Ee=4;break;case $i:De="1f";break;case rs:De="2f",Ee=2;break;case tf:De="3f",Ee=3;break;case la:De="4f",Ee=4;break;case zs:De="Matrix2fv";break;case Hs:De="Matrix3fv";break;case is:De="Matrix4fv";break}if(ee(Te,".uniform",De,"(",m,","),De.charAt(0)==="M"){var ft=Math.pow(Fe-zs+2,2),vt=ue.global.def("new Float32Array(",ft,")");Array.isArray(E)?ee("false,(",Rr(ft,function(Gt){return vt+"["+Gt+"]="+E[Gt]}),",",vt,")"):ee("false,(Array.isArray(",E,")||",E," instanceof Float32Array)?",E,":(",Rr(ft,function(Gt){return vt+"["+Gt+"]="+E+"["+Gt+"]"}),",",vt,")")}else Ee>1?ee(Rr(Ee,function(Gt){return Array.isArray(E)?E[Gt]:E+"["+Gt+"]"})):(re(!Array.isArray(E),"uniform value must not be an array"),ee(E));ee(");")}}function jn(ue,ee,Ae,Ue){var We=ue.shared,Pe=We.gl,Te=We.draw,De=Ue.draw;function ce(){var Ie=De.elements,ft,vt=ee;return Ie?((Ie.contextDep&&Ue.contextDynamic||Ie.propDep)&&(vt=Ae),ft=Ie.append(ue,vt)):ft=vt.def(Te,".",Lo),ft&&vt("if("+ft+")"+Pe+".bindBuffer("+hp+","+ft+".buffer.buffer);"),ft}function xe(){var Ie=De.count,ft,vt=ee;return Ie?((Ie.contextDep&&Ue.contextDynamic||Ie.propDep)&&(vt=Ae),ft=Ie.append(ue,vt),re.optional(function(){Ie.MISSING&&ue.assert(ee,"false","missing vertex count"),Ie.DYNAMIC&&ue.assert(vt,ft+">=0","missing vertex count")})):(ft=vt.def(Te,".",Qa),re.optional(function(){ue.assert(vt,ft+">=0","missing vertex count")})),ft}var se=ce();function Fe(Ie){var ft=De[Ie];return ft?ft.contextDep&&Ue.contextDynamic||ft.propDep?ft.append(ue,Ae):ft.append(ue,ee):ee.def(Te,".",Ie)}var He=Fe(Xl),d=Fe(el),m=xe();if(typeof m=="number"){if(m===0)return}else Ae("if(",m,"){"),Ae.exit("}");var E,j;Lt&&(E=Fe(xu),j=ue.instancing);var V=se+".type",Q=De.elements&&Un(De.elements);function fe(){function Ie(){Ae(j,".drawElementsInstancedANGLE(",[He,m,V,d+"<<(("+V+"-"+wu+")>>1)",E],");")}function ft(){Ae(j,".drawArraysInstancedANGLE(",[He,d,m,E],");")}se?Q?Ie():(Ae("if(",se,"){"),Ie(),Ae("}else{"),ft(),Ae("}")):ft()}function Ee(){function Ie(){Ae(Pe+".drawElements("+[He,m,V,d+"<<(("+V+"-"+wu+")>>1)"]+");")}function ft(){Ae(Pe+".drawArrays("+[He,d,m]+");")}se?Q?Ie():(Ae("if(",se,"){"),Ie(),Ae("}else{"),ft(),Ae("}")):ft()}Lt&&(typeof E!="number"||E>=0)?typeof E=="string"?(Ae("if(",E,">0){"),fe(),Ae("}else if(",E,"<0){"),Ee(),Ae("}")):fe():Ee()}function fr(ue,ee,Ae,Ue,We){var Pe=Cn(),Te=Pe.proc("body",We);return re.optional(function(){Pe.commandStr=ee.commandStr,Pe.command=Pe.link(ee.commandStr)}),Lt&&(Pe.instancing=Te.def(Pe.shared.extensions,".angle_instanced_arrays")),ue(Pe,Te,Ae,Ue),Pe.compile().body}function Wn(ue,ee,Ae,Ue){xo(ue,ee),Ae.useVAO?Ae.drawVAO?ee(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,ee),");"):ee(ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"):(ee(ue.shared.vao,".setVAO(null);"),ai(ue,ee,Ae,Ue.attributes,function(){return!0})),Nr(ue,ee,Ae,Ue.uniforms,function(){return!0}),jn(ue,ee,ee,Ae)}function lo(ue,ee){var Ae=ue.proc("draw",1);xo(ue,Ae),$o(ue,Ae,ee.context),Oo(ue,Ae,ee.framebuffer),mo(ue,Ae,ee),ei(ue,Ae,ee.state),Zn(ue,Ae,ee,!1,!0);var Ue=ee.shader.progVar.append(ue,Ae);if(Ae(ue.shared.gl,".useProgram(",Ue,".program);"),ee.shader.program)Wn(ue,Ae,ee,ee.shader.program);else{Ae(ue.shared.vao,".setVAO(null);");var We=ue.global.def("{}"),Pe=Ae.def(Ue,".id"),Te=Ae.def(We,"[",Pe,"]");Ae(ue.cond(Te).then(Te,".call(this,a0);").else(Te,"=",We,"[",Pe,"]=",ue.link(function(De){return fr(Wn,ue,ee,De,1)}),"(",Ue,");",Te,".call(this,a0);"))}Object.keys(ee.state).length>0&&Ae(ue.shared.current,".dirty=true;")}function Fa(ue,ee,Ae,Ue){ue.batchId="a1",xo(ue,ee);function We(){return!0}ai(ue,ee,Ae,Ue.attributes,We),Nr(ue,ee,Ae,Ue.uniforms,We),jn(ue,ee,ee,Ae)}function Zl(ue,ee,Ae,Ue){xo(ue,ee);var We=Ae.contextDep,Pe=ee.def(),Te="a0",De="a1",ce=ee.def();ue.shared.props=ce,ue.batchId=Pe;var xe=ue.scope(),se=ue.scope();ee(xe.entry,"for(",Pe,"=0;",Pe,"<",De,";++",Pe,"){",ce,"=",Te,"[",Pe,"];",se,"}",xe.exit);function Fe(V){return V.contextDep&&We||V.propDep}function He(V){return!Fe(V)}if(Ae.needsContext&&$o(ue,se,Ae.context),Ae.needsFramebuffer&&Oo(ue,se,Ae.framebuffer),ei(ue,se,Ae.state,Fe),Ae.profile&&Fe(Ae.profile)&&Zn(ue,se,Ae,!1,!0),Ue)Ae.useVAO?Ae.drawVAO?Fe(Ae.drawVAO)?se(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,se),");"):xe(ue.shared.vao,".setVAO(",Ae.drawVAO.append(ue,xe),");"):xe(ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"):(xe(ue.shared.vao,".setVAO(null);"),ai(ue,xe,Ae,Ue.attributes,He),ai(ue,se,Ae,Ue.attributes,Fe)),Nr(ue,xe,Ae,Ue.uniforms,He),Nr(ue,se,Ae,Ue.uniforms,Fe),jn(ue,xe,se,Ae);else{var d=ue.global.def("{}"),m=Ae.shader.progVar.append(ue,se),E=se.def(m,".id"),j=se.def(d,"[",E,"]");se(ue.shared.gl,".useProgram(",m,".program);","if(!",j,"){",j,"=",d,"[",E,"]=",ue.link(function(V){return fr(Fa,ue,Ae,V,2)}),"(",m,");}",j,".call(this,a0[",Pe,"],",Pe,");")}}function pe(ue,ee){var Ae=ue.proc("batch",2);ue.batchId="0",xo(ue,Ae);var Ue=!1,We=!0;Object.keys(ee.context).forEach(function(d){Ue=Ue||ee.context[d].propDep}),Ue||($o(ue,Ae,ee.context),We=!1);var Pe=ee.framebuffer,Te=!1;Pe?(Pe.propDep?Ue=Te=!0:Pe.contextDep&&Ue&&(Te=!0),Te||Oo(ue,Ae,Pe)):Oo(ue,Ae,null),ee.state.viewport&&ee.state.viewport.propDep&&(Ue=!0);function De(d){return d.contextDep&&Ue||d.propDep}mo(ue,Ae,ee),ei(ue,Ae,ee.state,function(d){return!De(d)}),(!ee.profile||!De(ee.profile))&&Zn(ue,Ae,ee,!1,"a1"),ee.contextDep=Ue,ee.needsContext=We,ee.needsFramebuffer=Te;var ce=ee.shader.progVar;if(ce.contextDep&&Ue||ce.propDep)Zl(ue,Ae,ee,null);else{var xe=ce.append(ue,Ae);if(Ae(ue.shared.gl,".useProgram(",xe,".program);"),ee.shader.program)Zl(ue,Ae,ee,ee.shader.program);else{Ae(ue.shared.vao,".setVAO(null);");var se=ue.global.def("{}"),Fe=Ae.def(xe,".id"),He=Ae.def(se,"[",Fe,"]");Ae(ue.cond(He).then(He,".call(this,a0,a1);").else(He,"=",se,"[",Fe,"]=",ue.link(function(d){return fr(Zl,ue,ee,d,2)}),"(",xe,");",He,".call(this,a0,a1);"))}}Object.keys(ee.state).length>0&&Ae(ue.shared.current,".dirty=true;")}function et(ue,ee){var Ae=ue.proc("scope",3);ue.batchId="a2";var Ue=ue.shared,We=Ue.current;$o(ue,Ae,ee.context),ee.framebuffer&&ee.framebuffer.append(ue,Ae),Sl(Object.keys(ee.state)).forEach(function(Te){var De=ee.state[Te],ce=De.append(ue,Ae);M(ce)?ce.forEach(function(xe,se){Ae.set(ue.next[Te],"["+se+"]",xe)}):Ae.set(Ue.next,"."+Te,ce)}),Zn(ue,Ae,ee,!0,!0),[Lo,el,Qa,xu,Xl].forEach(function(Te){var De=ee.draw[Te];De&&Ae.set(Ue.draw,"."+Te,""+De.append(ue,Ae))}),Object.keys(ee.uniforms).forEach(function(Te){var De=ee.uniforms[Te].append(ue,Ae);Array.isArray(De)&&(De="["+De.join()+"]"),Ae.set(Ue.uniforms,"["+ie.id(Te)+"]",De)}),Object.keys(ee.attributes).forEach(function(Te){var De=ee.attributes[Te].append(ue,Ae),ce=ue.scopeAttrib(Te);Object.keys(new Ve).forEach(function(xe){Ae.set(ce,"."+xe,De[xe])})}),ee.scopeVAO&&Ae.set(Ue.vao,".targetVAO",ee.scopeVAO.append(ue,Ae));function Pe(Te){var De=ee.shader[Te];De&&Ae.set(Ue.shader,"."+Te,De.append(ue,Ae))}Pe(Jc),Pe(no),Object.keys(ee.state).length>0&&(Ae(We,".dirty=true;"),Ae.exit(We,".dirty=true;")),Ae("a1(",ue.shared.context,",a0,",ue.batchId,");")}function Ye(ue){if(!(typeof ue!="object"||M(ue))){for(var ee=Object.keys(ue),Ae=0;Ae<ee.length;++Ae)if(Yt.isDynamic(ue[ee[Ae]]))return!0;return!1}}function tn(ue,ee,Ae){var Ue=ee.static[Ae];if(!Ue||!Ye(Ue))return;var We=ue.global,Pe=Object.keys(Ue),Te=!1,De=!1,ce=!1,xe=ue.global.def("{}");Pe.forEach(function(Fe){var He=Ue[Fe];if(Yt.isDynamic(He)){typeof He=="function"&&(He=Ue[Fe]=Yt.unbox(He));var d=Pi(He,null);Te=Te||d.thisDep,ce=ce||d.propDep,De=De||d.contextDep}else{switch(We(xe,".",Fe,"="),typeof He){case"number":We(He);break;case"string":We('"',He,'"');break;case"object":Array.isArray(He)&&We("[",He.join(),"]");break;default:We(ue.link(He));break}We(";")}});function se(Fe,He){Pe.forEach(function(d){var m=Ue[d];if(Yt.isDynamic(m)){var E=Fe.invoke(He,m);He(xe,".",d,"=",E,";")}})}ee.dynamic[Ae]=new Yt.DynamicVariable(Hc,{thisDep:Te,contextDep:De,propDep:ce,ref:xe,append:se}),delete ee.static[Ae]}function hr(ue,ee,Ae,Ue,We){var Pe=Cn();Pe.stats=Pe.link(We),Object.keys(ee.static).forEach(function(De){tn(Pe,ee,De)}),pp.forEach(function(De){tn(Pe,ue,De)});var Te=ko(ue,ee,Ae,Ue,Pe);return lo(Pe,Te),et(Pe,Te),pe(Pe,Te),o(Pe.compile(),{destroy:function(){Te.shader.program.destroy()}})}return{next:Zt,current:Ot,procs:function(){var ue=Cn(),ee=ue.proc("poll"),Ae=ue.proc("refresh"),Ue=ue.block();ee(Ue),Ae(Ue);var We=ue.shared,Pe=We.gl,Te=We.next,De=We.current;Ue(De,".dirty=false;"),Oo(ue,ee),Oo(ue,Ae,null,!0);var ce;Lt&&(ce=ue.link(Lt)),be.oes_vertex_array_object&&Ae(ue.link(be.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var xe=0;xe<Je.maxAttributes;++xe){var se=Ae.def(We.attributes,"[",xe,"]"),Fe=ue.cond(se,".buffer");Fe.then(Pe,".enableVertexAttribArray(",xe,");",Pe,".bindBuffer(",xl,",",se,".buffer.buffer);",Pe,".vertexAttribPointer(",xe,",",se,".size,",se,".type,",se,".normalized,",se,".stride,",se,".offset);").else(Pe,".disableVertexAttribArray(",xe,");",Pe,".vertexAttrib4f(",xe,",",se,".x,",se,".y,",se,".z,",se,".w);",se,".buffer=null;"),Ae(Fe),Lt&&Ae(ce,".vertexAttribDivisorANGLE(",xe,",",se,".divisor);")}return Ae(ue.shared.vao,".currentVAO=null;",ue.shared.vao,".setVAO(",ue.shared.vao,".targetVAO);"),Object.keys(Wt).forEach(function(He){var d=Wt[He],m=Ue.def(Te,".",He),E=ue.block();E("if(",m,"){",Pe,".enable(",d,")}else{",Pe,".disable(",d,")}",De,".",He,"=",m,";"),Ae(E),ee("if(",m,"!==",De,".",He,"){",E,"}")}),Object.keys(_t).forEach(function(He){var d=_t[He],m=Ot[He],E,j,V=ue.block();if(V(Pe,".",d,"("),M(m)){var Q=m.length;E=ue.global.def(Te,".",He),j=ue.global.def(De,".",He),V(Rr(Q,function(fe){return E+"["+fe+"]"}),");",Rr(Q,function(fe){return j+"["+fe+"]="+E+"["+fe+"];"}).join("")),ee("if(",Rr(Q,function(fe){return E+"["+fe+"]!=="+j+"["+fe+"]"}).join("||"),"){",V,"}")}else E=Ue.def(Te,".",He),j=Ue.def(De,".",He),V(E,");",De,".",He,"=",E,";"),ee("if(",E,"!==",j,"){",V,"}");Ae(V)}),ue.compile()}(),compile:hr}}function Ah(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Mu=34918,gr=34919,Th=35007,sa=function(L,ie){if(!ie.ext_disjoint_timer_query)return null;var be=[];function Je(){return be.pop()||ie.ext_disjoint_timer_query.createQueryEXT()}function ct(Lt){be.push(Lt)}var qe=[];function at(Lt){var qt=Je();ie.ext_disjoint_timer_query.beginQueryEXT(Th,qt),qe.push(qt),kt(qe.length-1,qe.length,Lt)}function Pt(){ie.ext_disjoint_timer_query.endQueryEXT(Th)}function Dt(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Rt=[];function lt(){return Rt.pop()||new Dt}function Vt(Lt){Rt.push(Lt)}var Ut=[];function kt(Lt,qt,Ot){var Zt=lt();Zt.startQueryIndex=Lt,Zt.endQueryIndex=qt,Zt.sum=0,Zt.stats=Ot,Ut.push(Zt)}var mt=[],Ve=[];function ot(){var Lt,qt,Ot=qe.length;if(Ot!==0){Ve.length=Math.max(Ve.length,Ot+1),mt.length=Math.max(mt.length,Ot+1),mt[0]=0,Ve[0]=0;var Zt=0;for(Lt=0,qt=0;qt<qe.length;++qt){var xt=qe[qt];ie.ext_disjoint_timer_query.getQueryObjectEXT(xt,gr)?(Zt+=ie.ext_disjoint_timer_query.getQueryObjectEXT(xt,Mu),ct(xt)):qe[Lt++]=xt,mt[qt+1]=Zt,Ve[qt+1]=Lt}for(qe.length=Lt,Lt=0,qt=0;qt<Ut.length;++qt){var Wt=Ut[qt],_t=Wt.startQueryIndex,Xt=Wt.endQueryIndex;Wt.sum+=mt[Xt]-mt[_t];var Mn=Ve[_t],Vn=Ve[Xt];Vn===Mn?(Wt.stats.gpuTime+=Wt.sum/1e6,Vt(Wt)):(Wt.startQueryIndex=Mn,Wt.endQueryIndex=Vn,Ut[Lt++]=Wt)}Ut.length=Lt}}return{beginQuery:at,endQuery:Pt,pushScopeStats:kt,update:ot,getNumPendingQueries:function(){return qe.length},clear:function(){be.push.apply(be,qe);for(var Lt=0;Lt<be.length;Lt++)ie.ext_disjoint_timer_query.deleteQueryEXT(be[Lt]);qe.length=0,be.length=0},restore:function(){qe.length=0,be.length=0}}},Qo=16384,La=256,Zv=1024,uf=34962,Al="webglcontextlost",wp="webglcontextrestored",Kl=1,Jr=2,Mo=3;function _i(L,ie){for(var be=0;be<L.length;++be)if(L[be]===ie)return be;return-1}function sf(L){var ie=ir(L);if(!ie)return null;var be=ie.gl,Je=be.getContextAttributes(),ct=be.isContextLost(),qe=Kr(be,ie);if(!qe)return null;var at=ni(),Pt=Ah(),Dt=qe.extensions,Rt=sa(be,Dt),lt=Er(),Vt=be.drawingBufferWidth,Ut=be.drawingBufferHeight,kt={tick:0,time:0,viewportWidth:Vt,viewportHeight:Ut,framebufferWidth:Vt,framebufferHeight:Ut,drawingBufferWidth:Vt,drawingBufferHeight:Ut,pixelRatio:ie.pixelRatio},mt={},Ve={elements:null,primitive:4,count:-1,offset:0,instances:-1},ot=Ac(be,Dt),Lt=va(be,Pt,ie,Ot),qt=id(be,Dt,ot,Pt,Lt);function Ot(jn){return qt.destroyBuffer(jn)}var Zt=fn(be,Dt,Lt,Pt),xt=ap(be,at,Pt,ie),Wt=xr(be,Dt,ot,function(){Mn.procs.poll()},kt,Pt,ie),_t=js(be,Dt,ot,Pt,ie),Xt=Vc(be,Dt,ot,Wt,_t,Pt),Mn=Kv(be,at,Dt,ot,Lt,Zt,Wt,Xt,mt,qt,xt,Ve,kt,Rt,ie),Vn=Eo(be,Xt,Mn.procs.poll,kt,Je,Dt,ot),It=Mn.next,St=be.canvas,wt=[],Cn=[],tr=[],un=[ie.onDestroy],Qn=null;function Gn(){if(wt.length===0){Rt&&Rt.update(),Qn=null;return}Qn=kn.next(Gn),ei();for(var jn=wt.length-1;jn>=0;--jn){var fr=wt[jn];fr&&fr(kt,null,0)}be.flush(),Rt&&Rt.update()}function rr(){!Qn&&wt.length>0&&(Qn=kn.next(Gn))}function _r(){Qn&&(kn.cancel(Gn),Qn=null)}function Po(jn){jn.preventDefault(),ct=!0,_r(),Cn.forEach(function(fr){fr()})}function Fo(jn){be.getError(),ct=!1,qe.restore(),xt.restore(),Lt.restore(),Wt.restore(),_t.restore(),Xt.restore(),qt.restore(),Rt&&Rt.restore(),Mn.procs.refresh(),rr(),tr.forEach(function(fr){fr()})}St&&(St.addEventListener(Al,Po,!1),St.addEventListener(wp,Fo,!1));function cr(){wt.length=0,_r(),St&&(St.removeEventListener(Al,Po),St.removeEventListener(wp,Fo)),xt.clear(),Xt.clear(),_t.clear(),Wt.clear(),Zt.clear(),Lt.clear(),qt.clear(),Rt&&Rt.clear(),un.forEach(function(jn){jn()})}function Wo(jn){re(!!jn,"invalid args to regl({...})"),re.type(jn,"object","invalid args to regl({...})");function fr(We){var Pe=o({},We);delete Pe.uniforms,delete Pe.attributes,delete Pe.context,delete Pe.vao,"stencil"in Pe&&Pe.stencil.op&&(Pe.stencil.opBack=Pe.stencil.opFront=Pe.stencil.op,delete Pe.stencil.op);function Te(De){if(De in Pe){var ce=Pe[De];delete Pe[De],Object.keys(ce).forEach(function(xe){Pe[De+"."+xe]=ce[xe]})}}return Te("blend"),Te("depth"),Te("cull"),Te("stencil"),Te("polygonOffset"),Te("scissor"),Te("sample"),"vao"in We&&(Pe.vao=We.vao),Pe}function Wn(We,Pe){var Te={},De={};return Object.keys(We).forEach(function(ce){var xe=We[ce];if(Yt.isDynamic(xe)){De[ce]=Yt.unbox(xe,ce);return}else if(Pe&&Array.isArray(xe)){for(var se=0;se<xe.length;++se)if(Yt.isDynamic(xe[se])){De[ce]=Yt.unbox(xe,ce);return}}Te[ce]=xe}),{dynamic:De,static:Te}}var lo=Wn(jn.context||{},!0),Fa=Wn(jn.uniforms||{},!0),Zl=Wn(jn.attributes||{},!1),pe=Wn(fr(jn),!1),et={gpuTime:0,cpuTime:0,count:0},Ye=Mn.compile(pe,Zl,Fa,lo,et),tn=Ye.draw,hr=Ye.batch,ue=Ye.scope,ee=[];function Ae(We){for(;ee.length<We;)ee.push(null);return ee}function Ue(We,Pe){var Te;if(ct&&re.raise("context lost"),typeof We=="function")return ue.call(this,null,We,0);if(typeof Pe=="function")if(typeof We=="number")for(Te=0;Te<We;++Te)ue.call(this,null,Pe,Te);else if(Array.isArray(We))for(Te=0;Te<We.length;++Te)ue.call(this,We[Te],Pe,Te);else return ue.call(this,We,Pe,0);else if(typeof We=="number"){if(We>0)return hr.call(this,Ae(We|0),We|0)}else if(Array.isArray(We)){if(We.length)return hr.call(this,We,We.length)}else return tn.call(this,We)}return o(Ue,{stats:et,destroy:function(){Ye.destroy()}})}var Qr=Xt.setFBO=Wo({framebuffer:Yt.define.call(null,Kl,"framebuffer")});function ko(jn,fr){var Wn=0;Mn.procs.poll();var lo=fr.color;lo&&(be.clearColor(+lo[0]||0,+lo[1]||0,+lo[2]||0,+lo[3]||0),Wn|=Qo),"depth"in fr&&(be.clearDepth(+fr.depth),Wn|=La),"stencil"in fr&&(be.clearStencil(fr.stencil|0),Wn|=Zv),re(!!Wn,"called regl.clear with no buffer specified"),be.clear(Wn)}function $o(jn){if(re(typeof jn=="object"&&jn,"regl.clear() takes an object as input"),"framebuffer"in jn)if(jn.framebuffer&&jn.framebuffer_reglType==="framebufferCube")for(var fr=0;fr<6;++fr)Qr(o({framebuffer:jn.framebuffer.faces[fr]},jn),ko);else Qr(jn,ko);else ko(null,jn)}function Oo(jn){re.type(jn,"function","regl.frame() callback must be a function"),wt.push(jn);function fr(){var Wn=_i(wt,jn);re(Wn>=0,"cannot cancel a frame twice");function lo(){var Fa=_i(wt,lo);wt[Fa]=wt[wt.length-1],wt.length-=1,wt.length<=0&&_r()}wt[Wn]=lo}return rr(),{cancel:fr}}function mo(){var jn=It.viewport,fr=It.scissor_box;jn[0]=jn[1]=fr[0]=fr[1]=0,kt.viewportWidth=kt.framebufferWidth=kt.drawingBufferWidth=jn[2]=fr[2]=be.drawingBufferWidth,kt.viewportHeight=kt.framebufferHeight=kt.drawingBufferHeight=jn[3]=fr[3]=be.drawingBufferHeight}function ei(){kt.tick+=1,kt.time=Zn(),mo(),Mn.procs.poll()}function xo(){Wt.refresh(),mo(),Mn.procs.refresh(),Rt&&Rt.update()}function Zn(){return(Er()-lt)/1e3}xo();function ai(jn,fr){re.type(fr,"function","listener callback must be a function");var Wn;switch(jn){case"frame":return Oo(fr);case"lost":Wn=Cn;break;case"restore":Wn=tr;break;case"destroy":Wn=un;break;default:re.raise("invalid event, must be one of frame,lost,restore,destroy")}return Wn.push(fr),{cancel:function(){for(var lo=0;lo<Wn.length;++lo)if(Wn[lo]===fr){Wn[lo]=Wn[Wn.length-1],Wn.pop();return}}}}var Nr=o(Wo,{clear:$o,prop:Yt.define.bind(null,Kl),context:Yt.define.bind(null,Jr),this:Yt.define.bind(null,Mo),draw:Wo({}),buffer:function(jn){return Lt.create(jn,uf,!1,!1)},elements:function(jn){return Zt.create(jn,!1)},texture:Wt.create2D,cube:Wt.createCube,renderbuffer:_t.create,framebuffer:Xt.create,framebufferCube:Xt.createCube,vao:qt.createVAO,attributes:Je,frame:Oo,on:ai,limits:ot,hasExtension:function(jn){return ot.extensions.indexOf(jn.toLowerCase())>=0},read:Vn,destroy:cr,_gl:be,_refresh:xo,poll:function(){ei(),Rt&&Rt.update()},now:Zn,stats:Pt});return ie.onDone(null,Nr),Nr}return sf})})(nne);var bf,vy,wf,Ru,yy,Pd,my,pg,ac,Cp,Ea,lc,uc,hg;bf={},an(bf,on.POINTS,"points"),an(bf,on.LINES,"lines"),an(bf,on.LINE_LOOP,"line loop"),an(bf,on.LINE_STRIP,"line strip"),an(bf,on.TRIANGLES,"triangles"),an(bf,on.TRIANGLE_FAN,"triangle fan"),an(bf,on.TRIANGLE_STRIP,"triangle strip");vy={},an(vy,on.STATIC_DRAW,"static"),an(vy,on.DYNAMIC_DRAW,"dynamic"),an(vy,on.STREAM_DRAW,"stream");wf={},an(wf,on.BYTE,"int8"),an(wf,on.UNSIGNED_INT,"int16"),an(wf,on.INT,"int32"),an(wf,on.UNSIGNED_BYTE,"uint8"),an(wf,on.UNSIGNED_SHORT,"uint16"),an(wf,on.UNSIGNED_INT,"uint32"),an(wf,on.FLOAT,"float");Ru={},an(Ru,on.ALPHA,"alpha"),an(Ru,on.LUMINANCE,"luminance"),an(Ru,on.LUMINANCE_ALPHA,"luminance alpha"),an(Ru,on.RGB,"rgb"),an(Ru,on.RGBA,"rgba"),an(Ru,on.RGBA4,"rgba4"),an(Ru,on.RGB5_A1,"rgb5 a1"),an(Ru,on.RGB565,"rgb565"),an(Ru,on.DEPTH_COMPONENT,"depth"),an(Ru,on.DEPTH_STENCIL,"depth stencil");yy={},an(yy,on.DONT_CARE,"dont care"),an(yy,on.NICEST,"nice"),an(yy,on.FASTEST,"fast");Pd={},an(Pd,on.NEAREST,"nearest"),an(Pd,on.LINEAR,"linear"),an(Pd,on.LINEAR_MIPMAP_LINEAR,"mipmap"),an(Pd,on.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),an(Pd,on.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),an(Pd,on.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest");my={},an(my,on.REPEAT,"repeat"),an(my,on.CLAMP_TO_EDGE,"clamp"),an(my,on.MIRRORED_REPEAT,"mirror");pg={},an(pg,on.NONE,"none"),an(pg,on.BROWSER_DEFAULT_WEBGL,"browser");ac={},an(ac,on.NEVER,"never"),an(ac,on.ALWAYS,"always"),an(ac,on.LESS,"less"),an(ac,on.LEQUAL,"lequal"),an(ac,on.GREATER,"greater"),an(ac,on.GEQUAL,"gequal"),an(ac,on.EQUAL,"equal"),an(ac,on.NOTEQUAL,"notequal");Cp={},an(Cp,on.FUNC_ADD,"add"),an(Cp,on.MIN_EXT,"min"),an(Cp,on.MAX_EXT,"max"),an(Cp,on.FUNC_SUBTRACT,"subtract"),an(Cp,on.FUNC_REVERSE_SUBTRACT,"reverse subtract");Ea={},an(Ea,on.ZERO,"zero"),an(Ea,on.ONE,"one"),an(Ea,on.SRC_COLOR,"src color"),an(Ea,on.ONE_MINUS_SRC_COLOR,"one minus src color"),an(Ea,on.SRC_ALPHA,"src alpha"),an(Ea,on.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),an(Ea,on.DST_COLOR,"dst color"),an(Ea,on.ONE_MINUS_DST_COLOR,"one minus dst color"),an(Ea,on.DST_ALPHA,"dst alpha"),an(Ea,on.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),an(Ea,on.CONSTANT_COLOR,"constant color"),an(Ea,on.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),an(Ea,on.CONSTANT_ALPHA,"constant alpha"),an(Ea,on.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),an(Ea,on.SRC_ALPHA_SATURATE,"src alpha saturate");lc={},an(lc,on.NEVER,"never"),an(lc,on.ALWAYS,"always"),an(lc,on.LESS,"less"),an(lc,on.LEQUAL,"lequal"),an(lc,on.GREATER,"greater"),an(lc,on.GEQUAL,"gequal"),an(lc,on.EQUAL,"equal"),an(lc,on.NOTEQUAL,"notequal");uc={},an(uc,on.ZERO,"zero"),an(uc,on.KEEP,"keep"),an(uc,on.REPLACE,"replace"),an(uc,on.INVERT,"invert"),an(uc,on.INCR,"increment"),an(uc,on.DECR,"decrement"),an(uc,on.INCR_WRAP,"increment wrap"),an(uc,on.DECR_WRAP,"decrement wrap");hg={},an(hg,on.FRONT,"front"),an(hg,on.BACK,"back");var rne=Function.prototype,one=rne.toString;one.call(Object);globalThis&&globalThis.__awaiter;globalThis&&globalThis.__awaiter;class lR{constructor(){wa(this,"lf");wa(this,"option")}render(t){this.lf=t}layout(t={}){var g;const{nodes:n,edges:o,gridSize:r}=this.lf.graphModel;let s=40,c=40;r>20&&(s=r*2,c=r*2),this.option={type:"dagre",rankdir:"LR",align:"DR",nodesep:s,ranksep:c,begin:[120,120],...t},(g=new cJ(this.option).layout({nodes:n.map(_=>({id:_.id,size:{width:_.width,height:_.height},model:_})),edges:o.map(_=>({source:_.sourceNodeId,target:_.targetNodeId,model:_}))}).nodes)==null||g.forEach(_=>{const{model:w}=_;w.set_position({x:_.x,y:_.y})}),this.lf.fitView()}}wa(lR,"pluginName","dagre");const ine=Lr({name:"WorkFlow"}),ane=Lr({...ine,props:{data:Object||null},setup(e,{expose:t}){const n=Object.assign({"./nodes/ai-chat-node/index.ts":QV,"./nodes/application-node/index.ts":aW,"./nodes/base-node/index.ts":uz,"./nodes/condition-node/index.ts":dH,"./nodes/document-extract-node/index.ts":mH,"./nodes/form-node/index.ts":LH,"./nodes/function-lib-node/index.ts":KH,"./nodes/function-node/index.ts":dX,"./nodes/image-generate/index.ts":xX,"./nodes/image-understand/index.ts":DX,"./nodes/mcp-node/index.ts":QX,"./nodes/question-node/index.ts":sY,"./nodes/reply-node/index.ts":yY,"./nodes/reranker-node/index.ts":NY,"./nodes/search-dataset-node/index.ts":GY,"./nodes/speech-to-text-node/index.ts":ZY,"./nodes/start-node/index.ts":rq,"./nodes/text-to-speech-node/index.ts":dq,"./nodes/variable-assign-node/index.ts":bq}),o=KV(),r=bt(""),s=e,c={nodes:[...ML]};go({get:()=>s.data?s.data:c,set:A=>A});const v=bt();Uo(()=>{g()});const h=A=>{v.value.render(A)},g=A=>{const R=document.querySelector("#container");R&&(v.value=new L9({plugins:[lR],textEdit:!1,adjustEdge:!1,adjustEdgeStartAndEnd:!1,background:{backgroundColor:"#f5f6f7"},grid:{size:10,type:"dot",config:{color:"#DEE0E3",thickness:1}},keyboard:{enabled:!0},isSilentMode:!1,container:R}),v.value.setTheme({bezier:{stroke:"#afafaf",strokeWidth:1}}),v.value.on("graph:rendered",()=>{r.value=v.value.graphModel.flowId}),Mq(v.value,v.value.graphModel),v.value.batchRegister([...Object.keys(n).map(D=>n[D].default),Aq]),v.value.setDefaultEdgeType("app-edge"),v.value.render(A||{}),v.value.graphModel.eventCenter.on("delete_edge",D=>{D.forEach(N=>{v.value.deleteEdge(N)})}),v.value.graphModel.eventCenter.on("anchor:drop",D=>{D.nodeModel.clear_next_node_field(!1)}),setTimeout(()=>{var D;(D=v.value)==null||D.fitView()},500))};return t({onmousedown:A=>{A.type&&v.value.dnd.startDrag({type:A.type,properties:{...A.properties}}),A.callback&&A.callback(v.value)},validate:()=>Promise.all(v.value.graphModel.nodes.map(A=>{var R;return(R=A==null?void 0:A.validate)==null?void 0:R.call(A)})),getGraphData:()=>v.value.getGraphData(),addNode:A=>{v.value.clearSelectElements();const{virtualRectCenterPositionX:R,virtualRectCenterPositionY:D}=v.value.graphModel.getVirtualRectSize(),N=v.value.graphModel.addNode({type:A.type,properties:A.properties,x:R,y:D-v.value.graphModel.height/2});N.isSelected=!0,N.isHovered=!0,v.value.toFront(N.id)},clearGraphData:()=>v.value.clearData(),renderGraphData:g,render:h}),(A,R)=>(Xe(),Rn(Bo,null,[R[0]||(R[0]=he("div",{className:"workflow-app",id:"container"},null,-1)),v.value?(Xe(),Bt(Tq,{key:0,class:"workflow-control",lf:v.value},null,8,["lf"])):nr("",!0),F(yr(o),{"flow-id":r.value},null,8,["flow-id"])],64))}});const lne={class:"workflow-publish-history border-l"},une={class:"border-b p-16-24"},sne={class:"list-height pt-0"},cne={class:"p-8 pt-0"},fne={class:"flex-between"},dne={style:{"max-width":"80%"}},pne={class:"text-center"},hne=Lr({__name:"PublishHistory",emits:["click","refreshVersion"],setup(e,{emit:t}){const n=KM(),{params:{id:o}}=n,r=t,s=bt(!1),c=bt([]),v=bt("");function h(A){v.value=A.id}function g(A){r("click",A)}function _(A){r("refreshVersion",A)}function w(A){A.writeStatus=!0}function O(A){A.writeStatus=!1}function S(A,R){if(A){const D={name:A};Aa.putWorkFlowVersion(o,R.id,D,s).then(()=>{Up(Qt("common.modifySuccess")),R.writeStatus=!1,P()})}else xa(Qt("views.applicationWorkflow.tip.nameMessage"))}function P(){Aa.getWorkFlowVersion(o,s).then(A=>{c.value=A.data})}return Uo(()=>{P()}),(A,R)=>{const D=le("ReadWrite"),N=le("el-tag"),$=le("UserFilled"),Y=le("el-icon"),K=le("AppAvatar"),X=le("el-text"),te=le("MoreFilled"),W=le("el-button"),C=le("EditPen"),G=le("el-dropdown-item"),q=le("RefreshLeft"),z=le("el-dropdown-menu"),Z=le("el-dropdown"),me=le("common-list"),ge=le("el-scrollbar"),Re=Ev("loading");return Xe(),Rn("div",lne,[he("h4",une,$e(A.$t("views.applicationWorkflow.setting.releaseHistory")),1),he("div",sne,[F(ge,null,{default:U(()=>[he("div",cne,[Pl((Xe(),Bt(me,{data:c.value,class:"mt-8",onClick:g,onMouseenter:h,onMouseleave:R[1]||(R[1]=Be=>v.value="")},{default:U(({row:Be,index:ve})=>[he("div",fne,[he("div",dne,[he("h5",{class:sc([ve===0?"primary":"","flex"])},[F(D,{onChange:_e=>S(_e,Be),data:Be.name||yr(ew)(Be.update_time),trigger:"manual",write:Be.writeStatus,onClose:_e=>O(Be)},null,8,["onChange","data","write","onClose"]),ve===0?(Xe(),Bt(N,{key:0,class:"default-tag ml-4"},{default:U(()=>[Tt($e(A.$t("views.applicationWorkflow.setting.latestRelease")),1)]),_:1})):nr("",!0)],2),F(X,{type:"info",class:"color-secondary flex mt-8"},{default:U(()=>[F(K,{size:20,class:"avatar-grey mr-4"},{default:U(()=>[F(Y,null,{default:U(()=>[F($)]),_:1})]),_:1}),Tt(" "+$e(Be.publish_user_name),1)]),_:2},1024)]),Pl(he("div",{onClick:R[0]||(R[0]=En(()=>{},["stop"]))},[F(Z,{trigger:"click",teleported:!1},{dropdown:U(()=>[F(z,null,{default:U(()=>[F(G,{onClick:En(_e=>w(Be),["stop"])},{default:U(()=>[F(Y,null,{default:U(()=>[F(C)]),_:1}),Tt(" "+$e(A.$t("common.edit")),1)]),_:2},1032,["onClick"]),F(G,{onClick:_e=>_(Be)},{default:U(()=>[F(Y,null,{default:U(()=>[F(q)]),_:1}),Tt(" "+$e(A.$t("views.applicationWorkflow.setting.restoreCurrentVersion")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),default:U(()=>[F(W,{text:""},{default:U(()=>[F(Y,null,{default:U(()=>[F(te)]),_:1})]),_:1})]),_:2},1024)],512),[[wv,v.value===Be.id]])])]),empty:U(()=>[he("div",pne,[F(X,{type:"info"},{default:U(()=>[Tt($e(A.$t("chat.noHistory")),1)]),_:1})])]),_:1},8,["data"])),[[Re,s.value]])])]),_:1})])])}}});const vne=Rv(hne,[["__scopeId","data-v-ff153f59"]]),SM=[si.AiChat,si.Reply,si.FunctionLib,si.FunctionLibCustom,si.ImageUnderstandNode,si.Application,si.SpeechToTextNode,si.TextToSpeechNode,si.ImageGenerateNode];class AM{constructor(t){wa(this,"nodes");wa(this,"edges");wa(this,"workFlowNodes");this.nodes=t.nodes,this.edges=t.edges,this.workFlowNodes=[]}is_valid_start_node(){const t=this.nodes.filter(n=>n.id===si.Start);if(t.length==0)throw Qt("views.applicationWorkflow.validate.startNodeRequired");if(t.length>1)throw Qt("views.applicationWorkflow.validate.startNodeOnly")}is_valid_base_node(){const t=this.nodes.filter(n=>n.id===si.Base);if(t.length==0)throw Qt("views.applicationWorkflow.validate.baseNodeRequired");if(t.length>1)throw Qt("views.applicationWorkflow.validate.baseNodeOnly")}is_valid(){this.is_valid_start_node(),this.is_valid_base_node(),this.is_valid_work_flow(),this.is_valid_nodes()}get_start_node(){return this.nodes.filter(n=>n.id===si.Start)[0]}get_base_node(){return this.nodes.filter(n=>n.id===si.Base)[0]}_is_valid_work_flow(t){t||(t=this.get_start_node()),this.workFlowNodes.push(t),this.is_valid_node(t);const n=this.get_next_nodes(t);for(const o of n)this._is_valid_work_flow(o)}is_valid_work_flow(){this.workFlowNodes=[],this._is_valid_work_flow();const t=this.nodes.filter(n=>n.id!==si.Start&&n.id!==si.Base).filter(n=>!this.workFlowNodes.includes(n));if(t.length>0)throw`${Qt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.map(n=>n.properties.stepName).join("，")}`;this.workFlowNodes=[]}get_next_nodes(t){const o=this.edges.filter(r=>r.sourceNodeId==t.id).map(r=>this.nodes.filter(s=>s.id==r.targetNodeId)).reduce((r,s)=>[...r,...s],[]);if(o.length==0&&!SM.includes(t.type))throw Qt("views.applicationWorkflow.validate.noNextNode");return o}is_valid_nodes(){for(const t of this.nodes)if(t.type!==si.Base&&t.type!==si.Start&&!this.edges.some(n=>n.targetNodeId===t.id))throw`${Qt("views.applicationWorkflow.validate.notInWorkFlowNode")}:${t.properties.stepName}`}is_valid_node(t){if(t.properties.status&&t.properties.status===500)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.nodeUnavailable")}`;if(t.type===si.Condition){const n=t.properties.node_data.branch;for(const o of n){const r=`${t.id}_${o.id}_right`;if(this.edges.filter(c=>c.sourceAnchorId==r).length==0)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.needConnect1")}${o.type}${Qt("views.applicationWorkflow.validate.needConnect2")}`}}else if(this.edges.filter(o=>o.sourceNodeId==t.id).length==0&&!SM.includes(t.type))throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.cannotEndNode")}`;if(t.properties.status&&t.properties.status!==200)throw`${t.properties.stepName} ${Qt("views.applicationWorkflow.validate.nodeUnavailable")}`}}const yne={class:"application-workflow"},mne={class:"header border-b flex-between p-12-24"},gne={class:"flex align-center"},_ne=["title"],bne={key:0},wne={key:0},Ene={key:1},One={class:"ml-4"},xne={class:"flex-between"},Sne={class:"flex align-center"},Ane={class:"mr-12 ml-24 flex"},Tne=["src"],Mne=["title"],Pne={class:"mr-16"},kne={class:"scrollbar-height"},Gne=Lr({__name:"index",setup(e){const{user:t,application:n}=Pf(),o=PL(),r=KM(),s=go(()=>t.isDefaultTheme()),{params:{id:c}}=r;let v;const h=bt(),g=bt(),_=bt(!1),w=bt(null),O=bt(!1),S=bt(!1),P=bt(!1),A=bt(""),R=bt(!1),D=bt(!1),N=bt(!1),$=bt({}),Y=bt(null);function K(){JSON.stringify(Y.value)!==JSON.stringify(ve())?Uw(Qt("common.tip"),Qt("views.applicationWorkflow.tip.saveMessage"),{confirmButtonText:Qt("views.applicationWorkflow.setting.exitSave"),cancelButtonText:Qt("views.applicationWorkflow.setting.exit"),type:"warning",distinguishCancelAndClose:!0}).then(()=>{Ce(!0,!0)}).catch(st=>{st==="cancel"&&o.push({path:`/application/${c}/WORK_FLOW/overview`})}):o.push({path:`/application/${c}/WORK_FLOW/overview`})}function X(){N.value||(D.value=!1,N.value=!1)}function te(st){st&&C(st),w1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&tt(),D.value=!1,N.value=!1}function W(st){N.value=!0,$.value=st,C(st),gt()}function C(st){var At;st.work_flow.nodes.map(jt=>{jt.properties.noRender=!0}),w.value.work_flow=st.work_flow,A.value=st==null?void 0:st.update_time,(At=h.value)==null||At.clearGraphData(),Ov(()=>{var jt;(jt=h.value)==null||jt.render(st.work_flow)})}function G(){_e(),w1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&tt(),D.value=!1,N.value=!1}function q(){D.value=!0}function z(st){st?tt():gt(),localStorage.setItem("workflowAutoSave",st.toString())}function Z(st){O.value=!1}function me(st){O.value=!1}function ge(){O.value=!1}async function Re(){var st;(st=h.value)==null||st.validate().then(async()=>{const At={work_flow:ve()};await n.asyncPutApplication(c,At,_);const jt=new AM(At.work_flow);try{jt.is_valid()}catch(yt){xa(yt.toString());return}Aa.putPublishApplication(c,At,_).then(()=>{n.asyncGetApplicationDetail(c,_).then(yt=>{w.value.name=yt.data.name,Up(Qt("views.applicationWorkflow.tip.publicSuccess"))})})}).catch(At=>{var Kt,je,we,Me;const jt=At.node,yt=At.errMessage;if(typeof yt=="string")xa(((Kt=At.node.properties)==null?void 0:Kt.stepName)+` ${Qt("views.applicationWorkflow.node").toLowerCase()} `+yt.toLowerCase());else{const dt=Object.keys(yt);xa(((je=jt.properties)==null?void 0:je.stepName)+` ${Qt("views.applicationWorkflow.node").toLowerCase()} `+((Me=(we=yt[dt[0]])==null?void 0:we[0])==null?void 0:Me.message.toLowerCase()))}})}const Be=()=>{var st;(st=h.value)==null||st.validate().then(()=>{var yt;const At=ve(),jt=new AM(At);try{jt.is_valid(),w.value={...w.value,type:"WORK_FLOW",...(yt=jt.get_base_node())==null?void 0:yt.properties.node_data,work_flow:ve()},S.value=!0}catch(Kt){xa(Kt.toString())}}).catch(At=>{var Kt,je,we,Me;const jt=At.node,yt=At.errMessage;if(typeof yt=="string")xa(((Kt=At.node.properties)==null?void 0:Kt.stepName)+` ${Qt("views.applicationWorkflow.node")}，`+yt);else{const dt=Object.keys(yt);xa(((je=jt.properties)==null?void 0:je.stepName)+` ${Qt("views.applicationWorkflow.node")}，`+((Me=(we=yt[dt[0]])==null?void 0:we[0])==null?void 0:Me.message))}})};function ve(){var st;return(st=h.value)==null?void 0:st.getGraphData()}function _e(){n.asyncGetApplicationDetail(c).then(st=>{var At,jt,yt;(At=st.data)==null||At.work_flow.nodes.map(Kt=>{Kt.properties.noRender=!0}),w.value=st.data,w.value.stt_model_id=st.data.stt_model,w.value.tts_model_id=st.data.tts_model,w.value.tts_type=st.data.tts_type,A.value=(jt=st.data)==null?void 0:jt.update_time,n.asyncGetAccessToken(c,_).then(Kt=>{w.value={...w.value,...Kt.data}}),(yt=h.value)==null||yt.clearGraphData(),Ov(()=>{var Kt;(Kt=h.value)==null||Kt.render(w.value.work_flow),Y.value=ve()})})}function Ce(st,At){const jt={work_flow:ve()};_.value=At||!1,n.asyncPutApplication(c,jt).then(yt=>{A.value=new Date,st&&(Y.value=ve(),Up(Qt("common.saveSuccess")),At&&o.push({path:`/application/${c}/WORK_FLOW/overview`}))}).catch(()=>{_.value=!1})}const tt=()=>{v=setInterval(()=>{Ce()},6e4)},gt=()=>{v&&clearInterval(v)};return Uo(()=>{_e();const st=localStorage.getItem("workflowAutoSave");R.value=st==="true",w1(`APPLICATION:MANAGE:${c}`,"AND")&&R.value&&tt()}),kL(()=>{var st;gt(),(st=h.value)==null||st.clearGraphData()}),(st,At)=>{var qn,re,Kn;const jt=le("back-button"),yt=le("el-text"),Kt=le("el-button"),je=le("el-divider"),we=le("Close"),Me=le("el-icon"),dt=le("AppIcon"),zt=le("MoreFilled"),Et=le("el-dropdown-item"),rn=le("el-switch"),yn=le("el-dropdown-menu"),Tn=le("el-dropdown"),pn=le("el-collapse-transition"),ut=le("AppAvatar"),xn=le("AiChat"),Le=Ev("click-outside"),mn=Ev("loading");return Pl((Xe(),Rn("div",yne,[he("div",mne,[he("div",gne,[F(jt,{onClick:K}),he("h4",{class:"ellipsis",style:{"max-width":"270px"},title:(qn=w.value)==null?void 0:qn.name},$e((re=w.value)==null?void 0:re.name),9,_ne),D.value&&N.value?(Xe(),Rn("div",bne,[F(yt,{type:"info",class:"ml-16 color-secondary"},{default:U(()=>[Tt($e(st.$t("views.applicationWorkflow.info.previewVersion"))+" "+$e($.value.name||yr(ew)($.value.update_time)),1)]),_:1})])):A.value?(Xe(),Bt(yt,{key:1,type:"info",class:"ml-16 color-secondary"},{default:U(()=>[Tt($e(st.$t("views.applicationWorkflow.info.saveTime"))+$e(yr(ew)(A.value)),1)]),_:1})):nr("",!0)]),D.value&&N.value?(Xe(),Rn("div",wne,[F(Kt,{type:"primary",class:"mr-8",onClick:At[0]||(At[0]=vr=>te())},{default:U(()=>[Tt($e(st.$t("views.applicationWorkflow.setting.restoreVersion")),1)]),_:1}),F(je,{direction:"vertical"}),F(Kt,{text:"",onClick:G},{default:U(()=>[F(Me,null,{default:U(()=>[F(we)]),_:1})]),_:1})])):(Xe(),Rn("div",Ene,[F(Kt,{icon:"Plus",onClick:At[1]||(At[1]=vr=>O.value=!O.value)},{default:U(()=>[Tt($e(st.$t("views.applicationWorkflow.setting.addComponent")),1)]),_:1}),F(Kt,{onClick:Be,disabled:S.value},{default:U(()=>[F(dt,{iconName:"app-play-outlined",class:"mr-4"}),Tt(" "+$e(st.$t("views.applicationWorkflow.setting.debug")),1)]),_:1},8,["disabled"]),F(Kt,{onClick:At[2]||(At[2]=vr=>Ce(!0))},{default:U(()=>[F(dt,{iconName:"app-save-outlined",class:"mr-4"}),Tt(" "+$e(st.$t("common.save")),1)]),_:1}),F(Kt,{type:"primary",onClick:Re},{default:U(()=>[Tt($e(st.$t("views.applicationWorkflow.setting.public")),1)]),_:1}),F(Tn,{trigger:"click"},{dropdown:U(()=>[F(yn,null,{default:U(()=>[F(Et,{onClick:q},{default:U(()=>[F(dt,{iconName:"app-history-outlined"}),Tt(" "+$e(st.$t("views.applicationWorkflow.setting.releaseHistory")),1)]),_:1}),F(Et,null,{default:U(()=>[F(dt,{iconName:"app-save-outlined"}),Tt(" "+$e(st.$t("views.applicationWorkflow.setting.autoSave"))+" ",1),he("div",One,[F(rn,{size:"small",modelValue:R.value,"onUpdate:modelValue":At[4]||(At[4]=vr=>R.value=vr),onChange:z},null,8,["modelValue"])])]),_:1})]),_:1})]),default:U(()=>[F(Kt,{text:"",onClick:At[3]||(At[3]=En(()=>{},["stop"])),class:"ml-8 mt-4"},{default:U(()=>[F(Me,{class:"rotate-90"},{default:U(()=>[F(zt)]),_:1})]),_:1})]),_:1})]))]),F(pn,null,{default:U(()=>[Pl(F(AP,{show:O.value,id:yr(c),onClickNodes:Z,onOnmousedown:me,workflowRef:h.value},null,8,["show","id","workflowRef"]),[[Le,ge]])]),_:1}),he("div",{class:"workflow-main",ref_key:"workflowMainRef",ref:g},[w.value?(Xe(),Bt(ane,{key:0,ref_key:"workflowRef",ref:h,data:(Kn=w.value)==null?void 0:Kn.work_flow},null,8,["data"])):nr("",!0)],512),F(pn,null,{default:U(()=>{var vr,Gr,eo,Fn,ho;return[S.value?(Xe(),Rn("div",{key:0,class:sc(["workflow-debug-container",P.value?"enlarge":""])},[he("div",{class:sc(["workflow-debug-header",s.value?"":"custom-header"])},[he("div",xne,[he("div",Sne,[he("div",Ane,[yr(NL)((vr=w.value)==null?void 0:vr.icon)?(Xe(),Bt(ut,{key:0,shape:"square",size:32,style:{background:"none"}},{default:U(()=>{var Oe;return[he("img",{src:(Oe=w.value)==null?void 0:Oe.icon,alt:""},null,8,Tne)]}),_:1})):(Gr=w.value)!=null&&Gr.name?(Xe(),Bt(ut,{key:1,name:(eo=w.value)==null?void 0:eo.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):nr("",!0)]),he("h4",{class:"ellipsis",style:{"max-width":"270px"},title:(Fn=w.value)==null?void 0:Fn.name},$e(((ho=w.value)==null?void 0:ho.name)||st.$t("views.application.applicationForm.form.appName.label")),9,Mne)]),he("div",Pne,[F(Kt,{link:"",onClick:At[5]||(At[5]=Oe=>P.value=!P.value)},{default:U(()=>[F(dt,{iconName:P.value?"app-minify":"app-magnify",class:"color-secondary",style:{"font-size":"20px"}},null,8,["iconName"])]),_:1}),F(Kt,{link:"",onClick:At[6]||(At[6]=Oe=>S.value=!1)},{default:U(()=>[F(Me,{size:20,class:"color-secondary"},{default:U(()=>[F(we)]),_:1})]),_:1})])])],2),he("div",kne,[F(xn,{"application-details":w.value,type:"debug-ai-chat"},null,8,["application-details"])])],2)):nr("",!0)]}),_:1}),D.value?Pl((Xe(),Bt(vne,{key:0,onClick:W,onRefreshVersion:te},null,512)),[[Le,X]]):nr("",!0)])),[[mn,_.value]])}}});export{Gne as default};
