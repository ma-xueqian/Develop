import{cp as G,d1 as xe,cq as g,cr as ne,d0 as we,cu as o,cx as _,cF as k,cA as t,cz as e,cB as l,cJ as p,cH as P,cX as ie,cR as Se,dz as ye,cK as I,cE as se,dA as ot,e2 as nt,c_ as je,cZ as A,e3 as Ae,dj as ve,cU as Me,cv as $e,e4 as Ke,cN as H,cQ as Ee,cy as j,cC as ue,cD as he,e5 as Xe,cP as Ne,cV as it,dI as de,dE as Je,e6 as st,cT as ct,cY as pt,e7 as rt,dh as Ye,ct as He,dD as ut,e8 as Oe,e9 as dt,ea as Ce,cG as vt,eb as re,ec as Y,ed as mt,ee as _t}from"./index-5edadd4e.js";import{_ as ft}from"./EditAvatarDialog.vue_vue_type_script_setup_true_lang-a13a6be9.js";const gt="/ui/assets/window1-b13220c7.png",At="/ui/assets/window3-dd9f3f49.png",ht="/ui/assets/window2-6d9fe74f.png",wt={class:"border"},yt={class:"title p-16 bold"},bt={class:"code layout-bg border-t p-8"},Dt={class:"flex-between p-8"},It={class:"bold"},kt={class:"pre-wrap p-8 pt-0"},$t={class:"border"},Ct={class:"title p-16 bold"},Vt={class:"code layout-bg border-t p-8"},Ot={class:"flex-between p-8"},xt={class:"bold"},St={class:"pre-wrap p-8 pt-0"},Et={class:"border"},Rt={class:"title p-16 bold"},Pt={class:"code layout-bg border-t p-8"},Bt={class:"flex-between p-8"},Ut={class:"bold"},Lt={class:"pre-wrap p-8 pt-0"},Ft=G({__name:"EmbedDialog",props:{data:Object,apiInputParams:String},emits:["addData"],setup(F,{expose:f,emit:z}){const{application:K}=xe(),C=F,R=g(!1),h=g(""),s=g(""),a=g(""),y=ne(()=>C.apiInputParams?"?"+C.apiInputParams:""),E=ne(()=>C.apiInputParams?"&"+C.apiInputParams:""),b=ne(()=>C.apiInputParams?"?mode=mobile&"+C.apiInputParams:"?mode=mobile");return we(R,r=>{r||(h.value="",s.value="",a.value="")}),f({open:r=>{h.value=`<iframe
src="${K.location+r+y.value}"
style="width: 100%; height: 100%;"
frameborder="0"
allow="microphone">
</iframe>
`,s.value=`<script
async
defer
src="${window.location.origin}/api/application/embed?protocol=${window.location.protocol.replace(":","")}&host=${window.location.host}&token=${r}${E.value}">
<\/script>
`,a.value=`<iframe
src="${K.location+r+b.value}"
style="width: 100%; height: 100%;"
frameborder="0"
allow="microphone">
</iframe>
`,R.value=!0}}),(r,d)=>{const m=o("AppIcon"),c=o("el-button"),$=o("el-scrollbar"),V=o("el-col"),Q=o("el-row"),n=o("el-dialog");return _(),k(n,{title:r.$t("views.applicationOverview.appInfo.embedInWebsite"),modelValue:R.value,"onUpdate:modelValue":d[3]||(d[3]=i=>R.value=i),width:"900",class:"embed-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{default:t(()=>[e(Q,{gutter:12},{default:t(()=>[e(V,{span:8},{default:t(()=>[l("div",wt,[l("p",yt,p(r.$t("views.applicationOverview.appInfo.EmbedDialog.fullscreenModeTitle")),1),d[4]||(d[4]=l("img",{src:gt,alt:"",class:"ml-8",height:"150"},null,-1)),l("div",bt,[l("div",Dt,[l("span",It,p(r.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(c,{text:"",onClick:d[0]||(d[0]=i=>P(ie)(h.value))},{default:t(()=>[e(m,{iconName:"app-copy"})]),_:1})]),e($,{height:"150",always:""},{default:t(()=>[l("div",kt,p(h.value),1)]),_:1})])])]),_:1}),e(V,{span:8},{default:t(()=>[l("div",$t,[l("p",Ct,p(r.$t("views.applicationOverview.appInfo.EmbedDialog.mobileModeTitle")),1),d[5]||(d[5]=l("img",{src:At,alt:"",class:"ml-8",height:"150"},null,-1)),l("div",Vt,[l("div",Ot,[l("span",xt,p(r.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(c,{text:"",onClick:d[1]||(d[1]=i=>P(ie)(a.value))},{default:t(()=>[e(m,{iconName:"app-copy"})]),_:1})]),e($,{height:"150",always:""},{default:t(()=>[l("div",St,p(a.value),1)]),_:1})])])]),_:1}),e(V,{span:8},{default:t(()=>[l("div",Et,[l("p",Rt,p(r.$t("views.applicationOverview.appInfo.EmbedDialog.floatingModeTitle")),1),d[6]||(d[6]=l("img",{src:ht,alt:"",class:"ml-8",height:"150"},null,-1)),l("div",Pt,[l("div",Bt,[l("span",Ut,p(r.$t("views.applicationOverview.appInfo.EmbedDialog.copyInstructions")),1),e(c,{text:"",onClick:d[2]||(d[2]=i=>P(ie)(s.value))},{default:t(()=>[e(m,{iconName:"app-copy"})]),_:1})]),e($,{height:"150",always:""},{default:t(()=>[l("div",Lt,p(s.value),1)]),_:1})])])]),_:1})]),_:1})]),_:1},8,["title","modelValue"])}}});const zt=Se(Ft,[["__scopeId","data-v-26ff052d"]]),Qt={class:"vertical-middle lighter break-all"},Tt={class:"mr-4"},Kt=G({__name:"APIKeyDialog",emits:["addData"],setup(F,{expose:f,emit:z}){const K=ye(),{params:{id:C}}=K,R=g(),h=g(!1),s=g(!1),a=g(null);we(h,c=>{c||(a.value=null)});function y(c){R.value.open(c,"APPLICATION")}function E(c){je(`${A("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm1")}: ${c.secret_key}?`,A("views.applicationOverview.appInfo.APIKeyDialog.msgConfirm2"),{confirmButtonText:A("common.confirm"),cancelButtonText:A("common.cancel"),confirmButtonClass:"danger"}).then(()=>{Ae.delAPIKey(C,c.id,s).then(()=>{ve(A("common.deleteSuccess")),d()})}).catch(()=>{})}function b(c){const $={is_active:!c.is_active},V=$.is_active?A("views.applicationOverview.appInfo.APIKeyDialog.enabledSuccess"):A("views.applicationOverview.appInfo.APIKeyDialog.disabledSuccess");Ae.putAPIKey(C,c.id,$,s).then(Q=>(ve(V),d(),!0)).catch(()=>!1)}function x(){Ae.postAPIKey(C,s).then(c=>{d()})}const r=()=>{d(),h.value=!0};function d(){Ae.getAPIKey(C,s).then(c=>{a.value=c.data})}function m(){d()}return f({open:r}),(c,$)=>{const V=o("el-button"),Q=o("AppIcon"),n=o("el-table-column"),i=o("el-switch"),U=o("Setting"),D=o("el-icon"),S=o("el-tooltip"),M=o("Delete"),q=o("el-table"),te=o("el-dialog");return _(),k(te,{title:"API Key",modelValue:h.value,"onUpdate:modelValue":$[1]||($[1]=B=>h.value=B),width:"800","close-on-click-modal":!1,"close-on-press-escape":!1,"align-center":""},{default:t(()=>[e(V,{type:"primary",class:"mb-16",onClick:x},{default:t(()=>[I(p(c.$t("common.create")),1)]),_:1}),e(q,{data:a.value,class:"mb-16",loading:s.value,height:"420"},{default:t(()=>[e(n,{prop:"secret_key",label:"API Key"},{default:t(({row:B})=>[l("span",Qt,p(B.secret_key),1),e(V,{type:"primary",text:"",onClick:O=>P(ie)(B.secret_key)},{default:t(()=>[e(Q,{iconName:"app-copy"})]),_:2},1032,["onClick"])]),_:1}),e(n,{label:c.$t("common.status.label"),width:"70"},{default:t(({row:B})=>[l("div",{onClick:$[0]||($[0]=se(()=>{},["stop"]))},[e(i,{size:"small",modelValue:B.is_active,"onUpdate:modelValue":O=>B.is_active=O,"before-change":()=>b(B)},null,8,["modelValue","onUpdate:modelValue","before-change"])])]),_:1},8,["label"]),e(n,{prop:"name",label:c.$t("common.createDate"),width:"170"},{default:t(({row:B})=>[I(p(P(ot)(B.create_time)),1)]),_:1},8,["label"]),e(n,{label:c.$t("common.operation"),align:"left",width:"90"},{default:t(({row:B})=>[l("span",Tt,[e(S,{effect:"dark",content:c.$t("common.setting"),placement:"top"},{default:t(()=>[e(V,{type:"primary",text:"",onClick:se(O=>y(B),["stop"])},{default:t(()=>[e(D,null,{default:t(()=>[e(U)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),e(S,{effect:"dark",content:c.$t("common.delete"),placement:"top"},{default:t(()=>[e(V,{type:"primary",text:"",onClick:O=>E(B)},{default:t(()=>[e(D,null,{default:t(()=>[e(M)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["content"])]),_:1},8,["label"])]),_:1},8,["data","loading"]),e(nt,{ref_key:"SettingAPIKeyDialogRef",ref:R,onRefresh:m},null,512)]),_:1},8,["modelValue"])}}}),Yt={class:"ml-4"},jt={class:"dialog-footer"},Mt=G({__name:"LimitDialog",emits:["refresh"],setup(F,{expose:f,emit:z}){const K=ye(),{params:{id:C}}=K,R=z,h=g(),s=g({access_num:0,white_active:!0,white_list:"",authentication_value:"",authentication:!1}),a=g(!1),y=g(!1);we(a,m=>{m||(s.value={access_num:0,white_active:!0,white_list:""})});const E=m=>{var c,$;s.value.access_num=m.access_num,s.value.white_active=m.white_active,s.value.white_list=(c=m.white_list)!=null&&c.length?($=m.white_list)==null?void 0:$.join(`
`):"",s.value.authentication_value=m.authentication_value,s.value.authentication=m.authentication,a.value=!0},b=async m=>{m&&await m.validate((c,$)=>{if(c){const V={white_list:s.value.white_list?s.value.white_list.split(`
`):[],white_active:s.value.white_active,access_num:s.value.access_num,authentication:s.value.authentication,authentication_value:s.value.authentication_value};Ee.putAccessToken(C,V,y).then(Q=>{R("refresh"),ve(A("common.settingSuccess")),a.value=!1})}})};function x(m=10){const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",$=new Uint8Array(m);return window.crypto.getRandomValues($),Array.from($).map(V=>c[V%c.length]).join("")}function r(){s.value.authentication_value=x()}function d(){s.value.authentication&&!s.value.authentication_value&&(s.value.authentication_value=x())}return f({open:E}),(m,c)=>{const $=o("el-input-number"),V=o("el-form-item"),Q=o("el-switch"),n=o("AppIcon"),i=o("el-button"),U=o("el-tooltip"),D=o("RefreshRight"),S=o("el-icon"),M=o("el-input"),q=o("el-form"),te=o("el-dialog"),B=Me("hasPermission");return _(),k(te,{title:m.$t("views.applicationOverview.appInfo.accessControl"),modelValue:a.value,"onUpdate:modelValue":c[9]||(c[9]=O=>a.value=O),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"650"},{footer:t(()=>[l("span",jt,[e(i,{onClick:c[7]||(c[7]=se(O=>a.value=!1,["prevent"]))},{default:t(()=>[I(p(m.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary",onClick:c[8]||(c[8]=O=>b(h.value)),loading:y.value},{default:t(()=>[I(p(m.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[e(q,{"label-position":"top",ref_key:"limitFormRef",ref:h,model:s.value},{default:t(()=>[e(V,{label:m.$t("views.applicationOverview.appInfo.LimitDialog.clientQueryLimitLabel")},{default:t(()=>[e($,{modelValue:s.value.access_num,"onUpdate:modelValue":c[0]||(c[0]=O=>s.value.access_num=O),min:0,step:1,max:1e4,"value-on-clear":0,"controls-position":"right",style:{width:"268px"},"step-strictly":""},null,8,["modelValue"]),l("span",Yt,p(m.$t("views.applicationOverview.appInfo.LimitDialog.timesDays")),1)]),_:1},8,["label"]),$e((_(),k(V,{label:m.$t("views.applicationOverview.appInfo.LimitDialog.authentication")},{default:t(()=>[e(Q,{size:"small",modelValue:s.value.authentication,"onUpdate:modelValue":c[1]||(c[1]=O=>s.value.authentication=O),onChange:d},null,8,["modelValue"])]),_:1},8,["label"])),[[B,new(P(Ke))([],["x-pack"],"OR")]]),s.value.authentication?$e((_(),k(V,{key:0,prop:"authentication_value",label:m.$t("views.applicationOverview.appInfo.LimitDialog.authenticationValue")},{default:t(()=>[e(M,{class:"authentication-append-input",modelValue:s.value.authentication_value,"onUpdate:modelValue":c[3]||(c[3]=O=>s.value.authentication_value=O),readonly:"",style:{width:"268px"},disabled:""},{append:t(()=>[e(U,{content:m.$t("common.copy"),placement:"top"},{default:t(()=>[e(i,{type:"primary",text:"",onClick:c[2]||(c[2]=O=>P(ie)(s.value.authentication_value)),style:{margin:"0 4px !important"}},{default:t(()=>[e(n,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(U,{content:m.$t("common.refresh"),placement:"top"},{default:t(()=>[e(i,{onClick:r,type:"primary",text:"",style:{margin:"0 4px 0 0 !important"}},{default:t(()=>[e(S,null,{default:t(()=>[e(D)]),_:1})]),_:1})]),_:1},8,["content"])]),_:1},8,["modelValue"])]),_:1},8,["label"])),[[B,new(P(Ke))([],["x-pack"],"OR")]]):H("",!0),e(V,{label:m.$t("views.applicationOverview.appInfo.LimitDialog.whitelistLabel"),onClick:c[5]||(c[5]=se(()=>{},["prevent"]))},{default:t(()=>[e(Q,{size:"small",modelValue:s.value.white_active,"onUpdate:modelValue":c[4]||(c[4]=O=>s.value.white_active=O)},null,8,["modelValue"])]),_:1},8,["label"]),e(V,null,{default:t(()=>[e(M,{modelValue:s.value.white_list,"onUpdate:modelValue":c[6]||(c[6]=O=>s.value.white_list=O),placeholder:m.$t("views.applicationOverview.appInfo.LimitDialog.whitelistPlaceholder"),rows:10,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}});const Xt=Se(Mt,[["__scopeId","data-v-3dda7967"]]),Nt={class:"dialog-footer"},Jt=G({__name:"DisplaySettingDialog",emits:["refresh"],setup(F,{expose:f,emit:z}){const K=ye(),{params:{id:C}}=K,R=z,h=g(),s=g({show_source:!1,language:""}),a=g(null),y=g(!1),E=g(!1);we(y,r=>{r||(s.value={show_source:!1,language:""})});const b=(r,d)=>{a.value=d,s.value.show_source=r.show_source,s.value.language=r.language,y.value=!0},x=async r=>{r&&await r.validate((d,m)=>{d&&Ee.putAccessToken(C,s.value,E).then(c=>{R("refresh"),ve(A("common.settingSuccess")),y.value=!1})})};return f({open:b}),(r,d)=>{const m=o("el-option"),c=o("el-select"),$=o("el-form-item"),V=o("el-checkbox"),Q=o("el-space"),n=o("el-form"),i=o("el-button"),U=o("el-dialog");return _(),k(U,{title:r.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),modelValue:y.value,"onUpdate:modelValue":d[4]||(d[4]=D=>y.value=D),"close-on-click-modal":!1,"close-on-press-escape":!1,width:"550"},{footer:t(()=>[l("span",Nt,[e(i,{onClick:d[2]||(d[2]=se(D=>y.value=!1,["prevent"]))},{default:t(()=>[I(p(r.$t("common.cancel")),1)]),_:1}),e(i,{type:"primary",onClick:d[3]||(d[3]=D=>x(h.value)),loading:E.value},{default:t(()=>[I(p(r.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>[e(n,{"label-position":"top",ref_key:"displayFormRef",ref:h,model:s.value},{default:t(()=>[e($,null,{default:t(()=>[l("span",null,p(r.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(c,{modelValue:s.value.language,"onUpdate:modelValue":d[0]||(d[0]=D=>s.value.language=D),clearable:""},{default:t(()=>[(_(!0),j(ue,null,he(P(Xe),D=>(_(),k(m,{key:D.value,label:D.label,value:D.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e($,null,{default:t(()=>[e(Q,{direction:"vertical",alignment:"start"},{default:t(()=>[e(V,{modelValue:s.value.show_source,"onUpdate:modelValue":d[1]||(d[1]=D=>s.value.show_source=D),label:P(Ne)(a.value.type)?r.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail"):r.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["title","modelValue"])}}}),Ht="/ui/assets/display-bg2-56446976.png",Gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAVwAAAAOCAYAAABjJ6RkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgB7dyxDcJAEETRvcWkRIhWqIrKESEBsn3G7sG30XtFfE007fnabvMUj6lFBgDny5jbLz65XuIutgAD9bjmPmwzM6YAYKh1H7aWLUARwQUoIrgARQQXoIjgAhQRXIAiggtQRHABigguQJFctugBwFgZc7ZvvHuPJQAY4hi2x3nNH+AmFr6g66dUAAAAAElFTkSuQmCC",qt="data:image/png;base64,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",Wt="/ui/MaxKB.gif",Zt={class:"flex-between mb-8"},ea=["id"],ta={class:"flex align-center"},aa={class:"flex"},la={class:"setting-preview border border-r-4 mr-16",style:{"min-width":"400px"}},oa={class:"setting-preview-container"},na={class:"flex-between"},ia={class:"flex align-center"},sa={class:"mr-12 ml-24 flex"},ca=["src"],pa={class:"ellipsis"},ra={class:"mr-16"},ua={class:"p-16",style:{position:"relative"}},da={class:"flex"},va={key:0,class:"avatar"},ma=["width"],_a={class:"flex mt-4",style:{"justify-content":"flex-end"}},fa=["width"],ga={key:0,class:"avatar ml-8"},Aa={style:{position:"absolute",bottom:"0","padding-bottom":"8px","box-sizing":"border-box"},class:"p-16 text-center w-full"},ha={class:"float_icon"},wa={key:1,src:Wt,height:"50px",style:{width:"40px",height:"40px",display:"block"}},ya={class:"mb-8"},ba={class:"mb-8"},Da={class:"mb-8"},Ia={class:"flex-between mb-8"},ka={class:"lighter"},$a={class:"flex align-center"},Ca={class:"flex-between mb-8"},Va={class:"lighter"},Oa={class:"flex align-center"},xa={class:"flex-between mb-8"},Sa={class:"lighter"},Ea={class:"border-t mt-8"},Ra={class:"flex-between mb-8"},Pa={class:"lighter"},Ba={class:"flex align-center"},Ua={class:"flex align-center"},La={key:0},Fa={class:"dialog-footer"},za=G({__name:"XPackDisplaySettingDialog",emits:["refresh"],setup(F,{expose:f,emit:z}){xe();const K=ye(),{params:{id:C}}=K,R=z,h={show_source:!1,language:"",show_history:!0,draggable:!0,show_guide:!0,avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}},show_avatar:!0,show_user_avatar:!1},s=g(),a=g({show_source:!1,language:"",show_history:!1,draggable:!1,show_guide:!1,avatar:"",avatar_url:"",float_icon:"",float_icon_url:"",user_avatar:"",user_avatar_url:"",disclaimer:!1,disclaimer_value:A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue"),custom_theme:{theme_color:"",header_font_color:"#1f2329"},float_location:{y:{type:"bottom",value:30},x:{type:"right",value:0}},show_avatar:!0,show_user_avatar:!1}),y=g({avatar:"",float_icon:"",user_avatar:""}),E=g(!1),b=g(!1),x=g(null),r=ne(()=>{var n,i;return{background:(n=a.value.custom_theme)==null?void 0:n.theme_color,color:(i=a.value.custom_theme)==null?void 0:i.header_font_color}});function d(){a.value=ct.cloneDeep(h),y.value={avatar:"",float_icon:"",user_avatar:""}}const m=(n,i,U)=>{if((n==null?void 0:n.size)/1024/1024<10)a.value[U]=n.raw,y.value[U]=URL.createObjectURL(n.raw),a.value[`${U}_url`]="";else return pt(A("views.applicationOverview.appInfo.EditAvatarDialog.fileSizeExceeded")),!1},c=(n,i)=>{var U,D;x.value=i,a.value.show_source=n.show_source,a.value.show_history=n.show_history,a.value.language=n.language,a.value.draggable=n.draggable,a.value.show_guide=n.show_guide,y.value.avatar=n.avatar,y.value.float_icon=n.float_icon,y.value.user_avatar=n.user_avatar,a.value.disclaimer=n.disclaimer,a.value.disclaimer_value=n.disclaimer_value,a.value.disclaimer_value===A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")&&(a.value.disclaimer_value=A("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimerValue")),a.value.avatar_url=n.avatar,a.value.user_avatar_url=n.user_avatar,a.value.float_icon_url=n.float_icon,a.value.show_avatar=n.show_avatar,a.value.show_user_avatar=n.show_user_avatar,a.value.custom_theme={theme_color:((U=n.custom_theme)==null?void 0:U.theme_color)||"",header_font_color:((D=n.custom_theme)==null?void 0:D.header_font_color)||"#1f2329"},a.value.float_location=n.float_location,E.value=!0},$=n=>{a.value.disclaimer_value=n},V=n=>{a.value.disclaimer=n},Q=async n=>{n&&await n.validate((i,U)=>{if(i){let D=new FormData;Object.keys(a.value).map(S=>{["custom_theme","float_location"].includes(S)?D.append(S,JSON.stringify(a.value[S])):D.append(S,a.value[S])}),rt.putAccessToken(C,D,b).then(S=>{R("refresh"),ve(A("common.settingSuccess")),E.value=!1})}})};return f({open:c}),(n,i)=>{const U=o("Refresh"),D=o("el-icon"),S=o("el-button"),M=o("el-divider"),q=o("AppAvatar"),te=o("AppIcon"),B=o("Close"),O=o("el-image"),Ve=o("LogoIcon"),be=o("auto-tooltip"),ce=o("el-text"),De=o("el-color-picker"),ae=o("el-col"),me=o("el-row"),le=o("el-option"),_e=o("el-select"),X=o("el-checkbox"),pe=o("el-upload"),oe=o("el-card"),Ie=o("el-input-number"),fe=o("el-input"),v=o("el-tooltip"),w=o("el-space"),T=o("el-form"),N=o("el-dialog");return _(),k(N,{title:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle"),width:"900",modelValue:E.value,"onUpdate:modelValue":i[17]||(i[17]=L=>E.value=L),"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0,"align-center":"",class:"display-setting-dialog"},{header:t(({titleId:L,titleClass:W})=>[l("div",Zt,[l("h4",{id:L,class:it(W)},p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.dialogTitle")),11,ea),l("div",ta,[e(S,{type:"primary",onClick:se(d,["prevent"]),link:""},{default:t(()=>[e(D,{class:"mr-4"},{default:t(()=>[e(U)]),_:1}),I(" "+p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.restoreDefault")),1)]),_:1}),e(M,{direction:"vertical"})])])]),footer:t(()=>[l("span",Fa,[e(S,{onClick:i[15]||(i[15]=se(L=>E.value=!1,["prevent"]))},{default:t(()=>[I(p(n.$t("common.cancel")),1)]),_:1}),e(S,{type:"primary",onClick:i[16]||(i[16]=L=>Q(s.value)),loading:b.value},{default:t(()=>[I(p(n.$t("common.save")),1)]),_:1},8,["loading"])])]),default:t(()=>{var L,W,ke,ge;return[l("div",aa,[l("div",la,[l("div",oa,[l("div",{class:"setting-preview-header",style:de(r.value)},[l("div",na,[l("div",ia,[l("div",sa,[P(Je)((L=x.value)==null?void 0:L.icon)?(_(),k(q,{key:0,shape:"square",size:32,style:{background:"none"}},{default:t(()=>{var u;return[l("img",{src:(u=x.value)==null?void 0:u.icon,alt:""},null,8,ca)]}),_:1})):(W=x.value)!=null&&W.name?(_(),k(q,{key:1,name:(ke=x.value)==null?void 0:ke.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):H("",!0)]),l("h4",pa,p(((ge=x.value)==null?void 0:ge.name)||n.$t("views.application.applicationForm.form.appName.label")),1)]),l("div",ra,[e(S,{link:""},{default:t(()=>{var u;return[e(te,{iconName:"app-magnify",style:de([{color:(u=a.value.custom_theme)==null?void 0:u.header_font_color},{"font-size":"20px"}])},null,8,["style"])]}),_:1}),e(S,{link:""},{default:t(()=>{var u;return[e(D,{size:20,class:"color-secondary",style:de({color:(u=a.value.custom_theme)==null?void 0:u.header_font_color})},{default:t(()=>[e(B)]),_:1},8,["style"])]}),_:1})])])],4),l("div",null,[l("div",ua,[l("div",da,[a.value.show_avatar?(_(),j("div",va,[y.value.avatar?(_(),k(O,{key:0,src:y.value.avatar,alt:"",fit:"cover",style:{width:"28px",height:"28px",display:"block"}},null,8,["src"])):(_(),k(Ve,{key:1,height:"28px",style:{width:"28px",height:"28px",display:"block"}}))])):H("",!0),l("img",{src:Ht,alt:"",width:a.value.show_avatar?a.value.show_user_avatar?"232px":"270px":a.value.show_user_avatar?"260px":"300px"},null,8,ma)]),l("div",_a,[l("img",{src:Gt,alt:"",width:a.value.show_user_avatar?a.value.show_avatar?"227px":"255px":a.value.show_avatar?"265px":"292px",style:{"object-fit":"contain"}},null,8,fa),a.value.show_user_avatar?(_(),j("div",ga,[y.value.user_avatar?(_(),k(O,{key:0,src:y.value.user_avatar,alt:"",fit:"cover",style:{width:"28px",height:"28px",display:"block"}},null,8,["src"])):(_(),k(q,{key:1},{default:t(()=>[...i[18]||(i[18]=[l("img",{src:st,style:{width:"54%"},alt:""},null,-1)])]),_:1}))])):H("",!0)])]),l("div",Aa,[i[19]||(i[19]=l("img",{src:qt,alt:"",class:"w-full"},null,-1)),a.value.disclaimer?(_(),k(ce,{key:0,type:"info",class:"mt-8",style:{"font-size":"12px"}},{default:t(()=>[e(be,{content:a.value.disclaimer_value},{default:t(()=>[I(p(a.value.disclaimer_value),1)]),_:1},8,["content"])]),_:1})):H("",!0)])])]),l("div",ha,[y.value.float_icon?(_(),k(O,{key:0,src:y.value.float_icon,alt:"",fit:"cover",style:{width:"40px",height:"40px",display:"block"}},null,8,["src"])):(_(),j("img",wa))])]),e(T,{ref_key:"displayFormRef",ref:s,model:a.value},{default:t(()=>[e(me,{class:"w-full mb-8"},{default:t(()=>[e(ae,{span:12},{default:t(()=>[l("h5",ya,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.customThemeColor")),1),l("div",null,[e(De,{modelValue:a.value.custom_theme.theme_color,"onUpdate:modelValue":i[0]||(i[0]=u=>a.value.custom_theme.theme_color=u)},null,8,["modelValue"]),I(" "+p(a.value.custom_theme.theme_color?"":n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.default")),1)])]),_:1}),e(ae,{span:12},{default:t(()=>[l("h5",ba,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.headerTitleFontColor")),1),e(De,{modelValue:a.value.custom_theme.header_font_color,"onUpdate:modelValue":i[1]||(i[1]=u=>a.value.custom_theme.header_font_color=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(me,{class:"w-full mb-8"},{default:t(()=>[l("h5",Da,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.languageLabel")),1),e(_e,{modelValue:a.value.language,"onUpdate:modelValue":i[2]||(i[2]=u=>a.value.language=u),clearable:""},{default:t(()=>[(_(!0),j(ue,null,he(P(Xe),u=>(_(),k(le,{key:u.value,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(oe,{shadow:"never",class:"mb-8"},{default:t(()=>[l("div",Ia,[l("span",ka,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.AIAvatar")),1),l("span",$a,[e(X,{modelValue:a.value.show_avatar,"onUpdate:modelValue":i[3]||(i[3]=u=>a.value.show_avatar=u)},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.display")),1)]),_:1},8,["modelValue"]),e(pe,{class:"ml-8",ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(u,Z)=>m(u,Z,"avatar")},{default:t(()=>[e(S,{size:"small"},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])])]),e(ce,{type:"info",size:"small"},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e(oe,{shadow:"never",class:"mb-8"},{default:t(()=>[l("div",Ca,[l("span",Va,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.askUserAvatar")),1),l("span",Oa,[e(X,{modelValue:a.value.show_user_avatar,"onUpdate:modelValue":i[4]||(i[4]=u=>a.value.show_user_avatar=u)},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.display")),1)]),_:1},8,["modelValue"]),e(pe,{class:"ml-8",ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(u,Z)=>m(u,Z,"user_avatar")},{default:t(()=>[e(S,{size:"small"},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])])]),e(ce,{type:"info",size:"small"},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1})]),_:1}),e(oe,{shadow:"never",class:"mb-8"},{default:t(()=>[l("div",xa,[l("span",Sa,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.floatIcon")),1),e(pe,{ref:"uploadRef",action:"#","auto-upload":!1,"show-file-list":!1,accept:"image/jpeg, image/png, image/gif","on-change":(u,Z)=>m(u,Z,"float_icon")},{default:t(()=>[e(S,{size:"small"},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.replace")),1)]),_:1})]),_:1},8,["on-change"])]),e(ce,{type:"info",size:"small"},{default:t(()=>[I(p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.imageMessage")),1)]),_:1}),l("div",Ea,[l("div",Ra,[l("span",Pa,p(n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconDefaultPosition")),1),e(X,{modelValue:a.value.draggable,"onUpdate:modelValue":i[5]||(i[5]=u=>a.value.draggable=u),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.draggablePosition")},null,8,["modelValue","label"])]),e(me,{gutter:8,class:"w-full mb-8"},{default:t(()=>[e(ae,{span:12},{default:t(()=>[l("div",Ba,[e(_e,{modelValue:a.value.float_location.x.type,"onUpdate:modelValue":i[6]||(i[6]=u=>a.value.float_location.x.type=u),style:{width:"80px"}},{default:t(()=>[e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.left"),value:"left"},null,8,["label"]),e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.right"),value:"right"},null,8,["label"])]),_:1},8,["modelValue"]),e(Ie,{modelValue:a.value.float_location.x.value,"onUpdate:modelValue":i[7]||(i[7]=u=>a.value.float_location.x.value=u),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),i[20]||(i[20]=l("span",{class:"ml-4"},"px",-1))])]),_:1}),e(ae,{span:12},{default:t(()=>[l("div",Ua,[e(_e,{modelValue:a.value.float_location.y.type,"onUpdate:modelValue":i[8]||(i[8]=u=>a.value.float_location.y.type=u),style:{width:"80px"}},{default:t(()=>[e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.top"),value:"top"},null,8,["label"]),e(le,{label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.iconPosition.bottom"),value:"bottom"},null,8,["label"])]),_:1},8,["modelValue"]),e(Ie,{modelValue:a.value.float_location.y.value,"onUpdate:modelValue":i[9]||(i[9]=u=>a.value.float_location.y.value=u),min:0,step:1,precision:0,"value-on-clear":0,"step-strictly":"","controls-position":"right"},null,8,["modelValue"]),i[21]||(i[21]=l("span",{class:"ml-4"},"px",-1))])]),_:1})]),_:1})])]),_:1}),e(w,{direction:"vertical",alignment:"start",size:2},{default:t(()=>[e(X,{modelValue:a.value.show_source,"onUpdate:modelValue":i[10]||(i[10]=u=>a.value.show_source=u),label:P(Ne)(x.value.type)?n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showExecutionDetail"):n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showSourceLabel")},null,8,["modelValue","label"]),e(X,{modelValue:a.value.show_history,"onUpdate:modelValue":i[11]||(i[11]=u=>a.value.show_history=u),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.showHistory")},null,8,["modelValue","label"]),e(X,{modelValue:a.value.show_guide,"onUpdate:modelValue":i[12]||(i[12]=u=>a.value.show_guide=u),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.displayGuide")},null,8,["modelValue","label"]),e(X,{modelValue:a.value.disclaimer,"onUpdate:modelValue":i[13]||(i[13]=u=>a.value.disclaimer=u),label:n.$t("views.applicationOverview.appInfo.SettingDisplayDialog.disclaimer"),onChange:V},null,8,["modelValue","label"]),a.value.disclaimer?(_(),j("span",La,[e(v,{content:a.value.disclaimer_value,placement:"top"},{default:t(()=>[e(fe,{modelValue:a.value.disclaimer_value,"onUpdate:modelValue":i[14]||(i[14]=u=>a.value.disclaimer_value=u),style:{width:"422px","margin-bottom":"10px"},onChange:$,maxlength:128},null,8,["modelValue"])]),_:1},8,["content"])])):H("",!0)]),_:1})]),_:1},8,["model"])])]}),_:1},8,["title","modelValue"])}}});const Qa=["id"],Ta=G({__name:"LineCharts",props:{id:{type:String,default:"lineChartId"},width:{type:String,default:"100%"},height:{type:String,default:"200px"},option:{type:Object,required:!0}},setup(F){const f=F,z=["rgba(82, 133, 255, 1)","rgba(255, 207, 47, 1)"],K=["rgba(82, 133, 255, 0.2)","rgba(255, 207, 47, 0.2)"];function C(){var y,E,b,x;let h=Oe(document.getElementById(f.id));h==null&&(h=dt(document.getElementById(f.id)));const s=[];(E=(y=f.option)==null?void 0:y.yData)!=null&&E.length&&((b=f.option)==null||b.yData.forEach((r,d)=>{s.push({itemStyle:{color:z[d]},areaStyle:r.area?{color:K[d]}:null,...r})}));const a={title:{text:(x=f.option)==null?void 0:x.title,textStyle:{fontSize:"16px"}},tooltip:{trigger:"axis",valueFormatter:r=>Ce(r)},legend:{right:0,itemWidth:8,textStyle:{color:"#646A73"},icon:"circle"},grid:{left:"1%",right:"1%",bottom:"0",top:"18%",containLabel:!0},xAxis:{type:"category",data:f.option.xData},yAxis:{type:"value",splitLine:{lineStyle:{color:"#EFF0F1"}},axisLabel:{formatter:r=>Ce(r)}},series:s};h.setOption(a,!0)}function R(){var h;(h=Oe(document.getElementById(f.id)))==null||h.resize()}return we(()=>f.option,h=>{h&&Ye(()=>{C()})}),He(()=>{Ye(()=>{C(),window.addEventListener("resize",R)})}),ut(()=>{var h;(h=Oe(document.getElementById(f.id)))==null||h.dispose(),window.removeEventListener("resize",R)}),(h,s)=>(_(),j("div",{id:F.id,ref:"PieChartRef",style:de({height:F.height,width:F.width})},null,12,Qa))}}),Ka=G({name:"AppCharts"}),Ya=G({...Ka,props:{type:{type:String,default:"line"},height:{type:String,default:"200px"},dataZoom:Boolean,option:{type:Object,required:!0}},setup(F){const f={line:Ta};return(z,K)=>(_(),k(vt(f[F.type]),{height:F.height,option:F.option,dataZoom:F.dataZoom,class:"v-charts"},null,8,["height","option","dataZoom"]))}}),ja={class:"flex align-center ml-8 mr-8"},Ma={class:"ml-12"},Xa={class:"color-secondary lighter mb-4"},Na={key:0,class:"flex align-baseline"},Ja={key:0,class:"ml-12",style:{color:"#f54a45"}},Ha={key:1,class:"flex align-center mr-8"},Ga={class:"ml-4"},qa={class:"ml-4"},Wa={class:"p-8"},Za=G({__name:"StatisticsCharts",props:{data:{type:Array,default:()=>[]}},setup(F){const f=F,z=ne(()=>[{id:"customerCharts",name:A("views.applicationOverview.monitor.charts.customerTotal"),icon:"app-user",background:"#EBF1FF",color:"#3370FF",sum:[re(Y(f.data,"customer_num")||0),re(Y(f.data,"customer_added_count")||0)],option:{title:A("views.applicationOverview.monitor.charts.customerTotal"),xData:Y(f.data,"day"),yData:[{name:A("views.applicationOverview.monitor.charts.customerTotal"),type:"line",area:!0,data:Y(f.data,"customer_num")},{name:A("views.applicationOverview.monitor.charts.customerNew"),type:"line",area:!0,data:Y(f.data,"customer_added_count")}]}},{id:"chatRecordCharts",name:A("views.applicationOverview.monitor.charts.queryCount"),icon:"app-question",background:"#FFF3E5",color:"#FF8800",sum:[re(Y(f.data,"chat_record_count")||0)],option:{title:A("views.applicationOverview.monitor.charts.queryCount"),xData:Y(f.data,"day"),yData:[{type:"line",data:Y(f.data,"chat_record_count")}]}},{id:"tokensCharts",name:A("views.applicationOverview.monitor.charts.tokensTotal"),icon:"app-tokens",background:"#E5FBF8",color:"#00D6B9",sum:[re(Y(f.data,"tokens_num")||0)],option:{title:A("views.applicationOverview.monitor.charts.tokensTotal"),xData:Y(f.data,"day"),yData:[{type:"line",data:Y(f.data,"tokens_num")}]}},{id:"starCharts",name:A("views.applicationOverview.monitor.charts.userSatisfaction"),icon:"app-user-stars",background:"#FEEDEC",color:"#F54A45",sum:[re(Y(f.data,"star_num")||0),re(Y(f.data,"trample_num")||0)],option:{title:A("views.applicationOverview.monitor.charts.userSatisfaction"),xData:Y(f.data,"day"),yData:[{name:A("views.applicationOverview.monitor.charts.approval"),type:"line",data:Y(f.data,"star_num")},{name:A("views.applicationOverview.monitor.charts.disapproval"),type:"line",data:Y(f.data,"trample_num")}]}}]);return(K,C)=>{const R=o("appIcon"),h=o("el-avatar"),s=o("AppIcon"),a=o("el-card"),y=o("el-col"),E=o("el-row");return _(),j(ue,null,[e(E,{gutter:16},{default:t(()=>[(_(!0),j(ue,null,he(z.value,(b,x)=>(_(),k(y,{xs:12,sm:12,md:12,lg:6,xl:6,key:x,class:"mb-16"},{default:t(()=>[e(a,{shadow:"never"},{default:t(()=>{var r,d,m,c;return[l("div",ja,[e(h,{size:40,shape:"square",style:de({background:b.background})},{default:t(()=>[e(R,{iconName:b.icon,style:de({fontSize:"24px",color:b.color})},null,8,["iconName","style"])]),_:2},1032,["style"]),l("div",Ma,[l("p",Xa,p(b.name),1),b.id!=="starCharts"?(_(),j("div",Na,[l("h2",null,p(P(Ce)((r=b.sum)==null?void 0:r[0])),1),b.sum.length>1?(_(),j("span",Ja,"+"+p(P(Ce)((d=b.sum)==null?void 0:d[1])),1)):H("",!0)])):(_(),j("div",Ha,[e(s,{iconName:"app-like-color"}),l("h2",Ga,p((m=b.sum)==null?void 0:m[0]),1),e(s,{class:"ml-12",iconName:"app-oppose-color"}),l("h2",qa,p((c=b.sum)==null?void 0:c[1]),1)]))])])]}),_:2},1024)]),_:2},1024))),128))]),_:1}),e(E,{gutter:16},{default:t(()=>[(_(!0),j(ue,null,he(z.value,(b,x)=>(_(),k(y,{xs:24,sm:24,md:24,lg:12,xl:12,key:x,class:"mb-16"},{default:t(()=>[e(a,{shadow:"never"},{default:t(()=>[l("div",Wa,[e(Ya,{height:"316px",id:b.id,type:"line",option:b.option},null,8,["id","option"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})],64)}}}),el={class:"main-calc-height p-24"},tl={class:"title-decoration-1 mb-16"},al={class:"title flex align-center"},ll=["src"],ol={class:"flex"},nl={class:"mt-4 mb-16 url-height flex align-center",style:{"margin-bottom":"37px"}},il={class:"vertical-middle lighter break-all ellipsis-1"},sl={class:"flex"},cl={class:"mt-4 mb-16 url-height"},pl={class:"flex align-center"},rl={class:"flex"},ul={class:"vertical-middle lighter break-all ellipsis-1"},dl={class:"title-decoration-1 mt-16 mb-16"},vl={class:"mb-16"},ml=G({__name:"index",setup(F){const{user:f,application:z}=xe(),K=ye(),{params:{id:C}}=K,R=window.location.origin+"/doc/chat/",h=window.location.origin+"/api/application/",s=g(),a=g(),y=g(),E=g(),b=g(),x=g(),r=g({}),d=g(null),m=g(!1),c=ne(()=>fe(M.value)?"?"+fe(M.value):""),$=ne(()=>z.location+r.value.access_token+c.value),V=[{value:7,label:A("views.applicationOverview.monitor.pastDayOptions.past7Days")},{value:30,label:A("views.applicationOverview.monitor.pastDayOptions.past30Days")},{value:90,label:A("views.applicationOverview.monitor.pastDayOptions.past90Days")},{value:183,label:A("views.applicationOverview.monitor.pastDayOptions.past183Days")},{value:"other",label:A("views.applicationOverview.monitor.pastDayOptions.other")}],Q=g(7),n=g(""),i=g({start_time:"",end_time:""}),U=g(!1),D=g([]),S=g(!1),M=g([]);function q(v){window.open(v,"_blank")}function te(){var v,w;f.isEnterprise()?(v=a.value)==null||v.open(r.value,d.value):(w=s.value)==null||w.open(r.value,d.value)}function B(){y.value.open(d.value)}function O(v){v!=="other"&&(i.value.start_time=mt(v),i.value.end_time=_t,be())}function Ve(v){i.value.start_time=v[0],i.value.end_time=v[1],be()}function be(){Ae.getStatistics(C,i.value,U).then(v=>{D.value=v.data})}function ce(){je(A("views.applicationOverview.appInfo.refreshToken.msgConfirm1"),A("views.applicationOverview.appInfo.refreshToken.msgConfirm2"),{confirmButtonText:A("common.confirm"),cancelButtonText:A("common.cancel")}).then(()=>{const v={access_token_reset:!0},w=A("views.applicationOverview.appInfo.refreshToken.refreshSuccess");ae(v,w)}).catch(()=>{})}function De(v){const w={is_active:!v},T=w.is_active?A("common.status.enableSuccess"):A("common.status.disableSuccess");ae(w,T).then(()=>!0).catch(()=>!1)}async function ae(v,w){Ee.putAccessToken(C,v,m).then(T=>{r.value=T==null?void 0:T.data,ve(w)})}function me(){E.value.open(r.value)}function le(){b.value.open()}function _e(){var v;x.value.open((v=r.value)==null?void 0:v.access_token)}function X(){z.asyncGetAccessToken(C,m).then(v=>{r.value=v==null?void 0:v.data})}function pe(){z.asyncGetApplicationDetail(C,m).then(v=>{var w,T;d.value=v.data,(T=(w=d.value.work_flow)==null?void 0:w.nodes)==null||T.filter(N=>N.id==="base-node").map(N=>{M.value=N.properties.api_input_field_list?N.properties.api_input_field_list.map(L=>({name:L.variable,value:L.default_value})):N.properties.input_field_list?N.properties.input_field_list.filter(L=>L.assignment_method==="api_input").map(L=>({name:L.variable,value:L.default_value})):[]})})}function oe(){X()}function Ie(){pe()}function fe(v){const w=new URLSearchParams;return v.forEach(T=>{w.append(encodeURIComponent(T.name),encodeURIComponent(T.value))}),w.toString()}return He(()=>{pe(),X(),O(Q.value)}),(v,w)=>{const T=o("AppAvatar"),N=o("EditPen"),L=o("el-icon"),W=o("el-text"),ke=o("el-switch"),ge=o("AppIcon"),u=o("el-button"),Z=o("el-tooltip"),Ge=o("RefreshRight"),Re=o("el-col"),qe=o("el-row"),We=o("el-card"),Ze=o("el-option"),et=o("el-select"),tt=o("el-date-picker"),at=o("el-scrollbar"),lt=o("LayoutContainer"),Pe=Me("loading");return _(),k(lt,{header:v.$t("views.applicationOverview.title")},{default:t(()=>[e(at,null,{default:t(()=>[l("div",el,[l("h4",tl,p(v.$t("views.applicationOverview.appInfo.header")),1),$e((_(),k(We,{shadow:"never",class:"overview-card"},{default:t(()=>{var J,Be,Ue,Le;return[l("div",al,[l("div",{class:"edit-avatar mr-12",onMouseenter:w[0]||(w[0]=ee=>S.value=!0),onMouseleave:w[1]||(w[1]=ee=>S.value=!1)},[P(Je)((J=d.value)==null?void 0:J.icon)?(_(),k(T,{key:0,shape:"square",size:32,style:{background:"none"}},{default:t(()=>{var ee;return[l("img",{src:(ee=d.value)==null?void 0:ee.icon,alt:""},null,8,ll)]}),_:1})):(Be=d.value)!=null&&Be.name?(_(),k(T,{key:1,name:(Ue=d.value)==null?void 0:Ue.name,pinyinColor:"",shape:"square",size:32},null,8,["name"])):H("",!0),S.value?(_(),k(T,{key:2,shape:"square",class:"edit-mask",size:32,onClick:B},{default:t(()=>[e(L,null,{default:t(()=>[e(N)]),_:1})]),_:1})):H("",!0)],32),l("h4",null,p((Le=d.value)==null?void 0:Le.name),1)]),e(qe,{gutter:12},{default:t(()=>[e(Re,{span:12,class:"mt-16"},{default:t(()=>{var ee,Fe,ze,Qe;return[l("div",ol,[e(W,{type:"info"},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.publicAccessLink")),1)]),_:1}),e(ke,{modelValue:r.value.is_active,"onUpdate:modelValue":w[2]||(w[2]=Te=>r.value.is_active=Te),class:"ml-8",size:"small","inline-prompt":"","active-text":v.$t("views.applicationOverview.appInfo.openText"),"inactive-text":v.$t("views.applicationOverview.appInfo.closeText"),"before-change":()=>De(r.value.is_active)},null,8,["modelValue","active-text","inactive-text","before-change"])]),l("div",nl,[l("span",il,p($.value),1),e(Z,{effect:"dark",content:v.$t("common.copy"),placement:"top"},{default:t(()=>[e(u,{type:"primary",text:"",onClick:w[3]||(w[3]=Te=>P(ie)($.value))},{default:t(()=>[e(ge,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"]),e(Z,{effect:"dark",content:v.$t("common.refresh"),placement:"top"},{default:t(()=>[e(u,{onClick:ce,type:"primary",text:"",style:{"margin-left":"1px"}},{default:t(()=>[e(L,null,{default:t(()=>[e(Ge)]),_:1})]),_:1})]),_:1},8,["content"])]),l("div",null,[(ee=r.value)!=null&&ee.is_active?(_(),k(u,{key:0,disabled:!((Fe=r.value)!=null&&Fe.is_active),type:"primary",tag:"a",href:$.value,target:"_blank"},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.demo")),1)]),_:1},8,["disabled","href"])):(_(),k(u,{key:1,disabled:!((ze=r.value)!=null&&ze.is_active),type:"primary"},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.demo")),1)]),_:1},8,["disabled"])),e(u,{disabled:!((Qe=r.value)!=null&&Qe.is_active),onClick:_e},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.embedInWebsite")),1)]),_:1},8,["disabled"]),e(u,{onClick:me},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.accessControl")),1)]),_:1}),e(u,{onClick:te},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.displaySetting")),1)]),_:1})])]}),_:1}),e(Re,{span:12,class:"mt-16"},{default:t(()=>[l("div",sl,[e(W,{type:"info"},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.apiAccessCredentials")),1)]),_:1})]),l("div",cl,[l("div",null,[e(W,null,{default:t(()=>[I("API "+p(v.$t("common.fileUpload.document"))+"：",1)]),_:1}),e(u,{type:"primary",link:"",onClick:w[4]||(w[4]=ee=>q(R)),class:"vertical-middle lighter break-all"},{default:t(()=>[I(p(R))]),_:1})]),l("div",pl,[l("span",rl,[e(W,{style:{width:"80px"}},{default:t(()=>[...w[8]||(w[8]=[I("Base URL：",-1)])]),_:1})]),l("span",ul,p(h+P(C)),1),e(Z,{effect:"dark",content:v.$t("common.copy"),placement:"top"},{default:t(()=>[e(u,{type:"primary",text:"",onClick:w[5]||(w[5]=ee=>P(ie)(h+P(C)))},{default:t(()=>[e(ge,{iconName:"app-copy"})]),_:1})]),_:1},8,["content"])])]),l("div",null,[e(u,{onClick:le},{default:t(()=>[I(p(v.$t("views.applicationOverview.appInfo.apiKey")),1)]),_:1})])]),_:1})]),_:1})]}),_:1})),[[Pe,m.value]]),l("h4",dl,p(v.$t("views.applicationOverview.monitor.monitoringStatistics")),1),l("div",vl,[e(et,{modelValue:Q.value,"onUpdate:modelValue":w[6]||(w[6]=J=>Q.value=J),class:"mr-12",onChange:O,style:{width:"180px"}},{default:t(()=>[(_(),j(ue,null,he(V,J=>e(Ze,{key:J.value,label:J.label,value:J.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),Q.value==="other"?(_(),k(tt,{key:0,modelValue:n.value,"onUpdate:modelValue":w[7]||(w[7]=J=>n.value=J),type:"daterange","start-placeholder":v.$t("views.applicationOverview.monitor.startDatePlaceholder"),"end-placeholder":v.$t("views.applicationOverview.monitor.endDatePlaceholder"),format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",onChange:Ve},null,8,["modelValue","start-placeholder","end-placeholder"])):H("",!0)]),$e((_(),j("div",null,[e(Za,{data:D.value},null,8,["data"])])),[[Pe,U.value]])])]),_:1}),e(zt,{ref_key:"EmbedDialogRef",ref:x,data:d.value,"api-input-params":fe(M.value)},null,8,["data","api-input-params"]),e(Kt,{ref_key:"APIKeyDialogRef",ref:b},null,512),e(Xt,{ref_key:"LimitDialogRef",ref:E,onRefresh:oe},null,512),e(ft,{ref_key:"EditAvatarDialogRef",ref:y,onRefresh:Ie},null,512),P(f).isEnterprise()?(_(),k(za,{key:0,ref_key:"XPackDisplaySettingDialogRef",ref:a,onRefresh:oe},null,512)):(_(),k(Jt,{key:1,ref_key:"DisplaySettingDialogRef",ref:s,onRefresh:oe},null,512))]),_:1},8,["header"])}}});const gl=Se(ml,[["__scopeId","data-v-250f6b7a"]]);export{gl as default};
